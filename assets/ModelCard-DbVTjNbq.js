import{r as s,u as S,P as I,a as R,b as B,O as m,d as L,l as _,j as r}from"../index.js";import{SupabaseService as $}from"./SupabaseService-CnFb_Wi5.js";var J={root:"p-card p-component",header:"p-card-header",title:"p-card-title",subTitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer",body:"p-card-body"},U=`
@layer primereact {
    .p-card-header img {
        width: 100%;
    }
}
`,u=R.extend({defaultProps:{__TYPE:"Card",id:null,header:null,footer:null,title:null,subTitle:null,style:null,className:null,children:void 0},css:{classes:J,styles:U}}),y=s.forwardRef(function(e,i){var l=S(),a=s.useContext(I),t=u.getProps(e,a),n=s.useRef(i),c=u.setMetaData({props:t}),d=c.ptm,o=c.cx,v=c.isUnstyled;B(u.css.styles,v,{name:"card"});var f=function(){var h=l({className:o("header")},d("header"));return t.header?s.createElement("div",h,m.getJSXElement(t.header,t)):null},p=function(){var h=l({className:o("title")},d("title")),E=t.title&&s.createElement("div",h,m.getJSXElement(t.title,t)),P=l({className:o("subTitle")},d("subTitle")),C=t.subTitle&&s.createElement("div",P,m.getJSXElement(t.subTitle,t)),N=l({className:o("content")},d("content")),j=t.children&&s.createElement("div",N,t.children),M=l({className:o("footer")},d("footer")),w=t.footer&&s.createElement("div",M,m.getJSXElement(t.footer,t)),T=l({className:o("body")},d("body"));return s.createElement("div",T,E,C,j,w)};s.useEffect(function(){m.combinedRefs(n,i)},[n,i]);var x=l({id:t.id,ref:n,style:t.style,className:L(t.className,o("root"))},u.getOtherProps(t),d("root")),b=f(),g=p();return s.createElement("div",x,b,g)});y.displayName="Card";function X({model:e}){const[i,l]=s.useState(e.likes??0),a=_(),t=d=>{if(!a.user)return;d.stopPropagation();const o=a.likedModelIds.has(e.id);$.updateModelLike(e.id,!o).then(()=>l(v=>v+(o?-1:1))),o?a.likedModelIds.delete(e.id):a.likedModelIds.add(e.id)},n=a.likedModelIds.has(e.id),c=a.commentedModelIds.has(e.id);return r.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center"},children:[r.jsxs("span",{className:a.user?"clickable":void 0,style:{display:"flex",alignItems:"center",gap:4},onClick:t,children:[r.jsx("i",{className:"pi pi-heart",style:{color:n?"var(--theme-color)":void 0}}),i]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[r.jsx("i",{className:"pi pi-comment",style:{color:c?"var(--theme-color)":void 0}}),e.comments??0]})]})}function O(e){const i=r.jsx("img",{onClick:()=>window.location.hash=`/model/${e.model.id}`,src:e.model.preview_url,alt:e.model.title,style:{background:"#111",aspectRatio:"1/1",cursor:"pointer"},loading:"lazy"}),l=r.jsxs(r.Fragment,{children:["by ",r.jsx("a",{href:`#/user/${e.model.username}`,children:e.model.username})," on"," ",e.model.created_at]});return r.jsx("div",{children:r.jsx(y,{className:"model-card",title:e.model.title,subTitle:l,style:{...e.style},header:i,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(window.location.hash=`/model/${e.model.id}`)},footer:r.jsx(X,{model:e.model}),"aria-label":`View model ${e.model.title}`},e.model.id)})}export{y as C,X as M,O as a};
