import{d as qc,C as Gc}from"./index.esm-DyIK9W92.js";import{G as Kc,r as Ce,I as Hc,u as Ns,P as Wo,C as Vo,q as Yc,a as qo,b as Go,O as Lt,D as Ot,f as ri,h as dr,t as Xc,k as Jc,m as Zc,T as Qc}from"../index.js";import{l as Ko}from"./utils-DRB1n_X_.js";import{e as eu,S as tu,d as iu,c as Ho}from"./index.esm-Byjr6lLE.js";var Bn={exports:{}},Na;function ru(){return Na||(Na=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function n(d,u,h){this.fn=d,this.context=u,this.once=h||!1}function s(d,u,h,f,E){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new n(h,f||d,E),b=i?i+u:u;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],g]:d._events[b].push(g):(d._events[b]=g,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new r:delete d._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)t.call(h,f)&&u.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=i?i+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var E=0,g=f.length,b=new Array(g);E<g;E++)b[E]=f[E].fn;return b},a.prototype.listenerCount=function(u){var h=i?i+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,E,g,b){var p=i?i+u:u;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,I,x;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,f),!0;case 4:return m.fn.call(m.context,h,f,E),!0;case 5:return m.fn.call(m.context,h,f,E,g),!0;case 6:return m.fn.call(m.context,h,f,E,g,b),!0}for(x=1,I=new Array(y-1);x<y;x++)I[x-1]=arguments[x];m.fn.apply(m.context,I)}else{var z=m.length,k;for(x=0;x<z;x++)switch(m[x].once&&this.removeListener(u,m[x].fn,void 0,!0),y){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,h);break;case 3:m[x].fn.call(m[x].context,h,f);break;case 4:m[x].fn.call(m[x].context,h,f,E);break;default:if(!I)for(k=1,I=new Array(y-1);k<y;k++)I[k-1]=arguments[k];m[x].fn.apply(m[x].context,I)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,E){var g=i?i+u:u;if(!this._events[g])return this;if(!h)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===h&&(!E||b.once)&&(!f||b.context===f)&&o(this,g);else{for(var p=0,m=[],y=b.length;p<y;p++)(b[p].fn!==h||E&&!b[p].once||f&&b[p].context!==f)&&m.push(b[p]);m.length?this._events[g]=m.length===1?m[0]:m:o(this,g)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=i?i+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(Bn)),Bn.exports}var nu=ru();const Rs=Kc(nu);class su extends Rs{[Symbol.toStringTag]="List";constructor(t){super(),t&&this.push(...t)}data=new Set;toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return Array.from(this.data)}toString(){return this.join(",")}_set(t,i,r=!1){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const n=Array.from(this.data);n.splice(t,+r,i),this.data=new Set(n),this.emit("update")}set(t,i){this._set(t,i,!0)}deleteAt(t){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(t))}insert(t,i=this.data.size){this._set(i,t,!1)}at(t){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(t)}pop(){const t=Array.from(this.data).pop();return t!==void 0&&this.delete(t),t}push(...t){for(const i of t)this.add(i);return this.data.size}join(t){return Array.from(this.data).join(t)}splice(t,i,...r){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const n=Array.from(this.data),s=n.splice(t,i,...r);return this.data=new Set(n),this.emit("update"),s}add(t){return this.data.add(t),this.emit("update"),this.emit("add",t),this}clear(){this.data.clear(),this.emit("update")}delete(t){const i=this.data.delete(t);return this.emit("update"),i}has(t){return this.data.has(t)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[Symbol.iterator](){return this.data[Symbol.iterator]()}}function au(e,t){const i=Object.entries(e);return Object.fromEntries(i.filter(([r,n])=>t(r,n)))}function Yo(e,...t){const i={};for(const r of t.flat())i[r]=e[r];return i}function Xo(e,...t){return au(e,i=>!t.flat().includes(i))}function ou(e){try{return JSON.parse(e),!0}catch{return!1}}function lu(e){const t=[];for(let i=e;i&&!["Function","Object"].includes(i.constructor.name);i=Object.getPrototypeOf(i))t.push(i.constructor.name);return t}function Ra(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function Xe(e){throw e&&typeof e=="object"&&lu(e).includes("Error")&&Error?.captureStackTrace(e,Xe),e}function Ii(e,t){if(t.kind!="getter")throw new Error("@memoize can only be used on getters");return function(){t.metadata??={};const{memoized:i={}}=t.metadata;return t.name in i?(console.log("Using cached value for",t.name,JSON.stringify(i[t.name])),i[t.name]):(i[t.name]=e.call(this),i[t.name])}}const za=Intl.NumberFormat("en",{notation:"compact"});za.format.bind(za);function cu(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function uu(e){return e.at(0).toUpperCase()+e.slice(1)}const fu=new TextEncoder;function Ai(e){return fu.encode(e)}const La=new TextDecoder;function bi(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return La.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),La.decode(t)}function Jo(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function zs(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function du(e){const t=e.replace(/-/g,""),i=new Uint8Array(16);for(let r=0;r<16;r++)i[r]=parseInt(t.slice(r*2,r*2+2),16);return i}var Q;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.ESRCH=3]="ESRCH",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.E2BIG=7]="E2BIG",e[e.ENOEXEC=8]="ENOEXEC",e[e.EBADF=9]="EBADF",e[e.ECHILD=10]="ECHILD",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EIDRM=43]="EIDRM",e[e.ECHRNG=44]="ECHRNG",e[e.EL2NSYNC=45]="EL2NSYNC",e[e.EL3HLT=46]="EL3HLT",e[e.EL3RST=47]="EL3RST",e[e.ENRNG=48]="ENRNG",e[e.EUNATCH=49]="EUNATCH",e[e.ECSI=50]="ECSI",e[e.EL2HLT=51]="EL2HLT",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.EBADSLT=57]="EBADSLT",e[e.EBFONT=59]="EBFONT",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.ENOPKG=65]="ENOPKG",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.EADV=68]="EADV",e[e.ESRMNT=69]="ESRMNT",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EMULTIHOP=72]="EMULTIHOP",e[e.EDOTDOT=73]="EDOTDOT",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.ENOTUNIQ=76]="ENOTUNIQ",e[e.EBADFD=77]="EBADFD",e[e.EREMCHG=78]="EREMCHG",e[e.ELIBACC=79]="ELIBACC",e[e.ELIBBAD=80]="ELIBBAD",e[e.ELIBSCN=81]="ELIBSCN",e[e.ELIBMAX=82]="ELIBMAX",e[e.ELIBEXEC=83]="ELIBEXEC",e[e.EILSEQ=84]="EILSEQ",e[e.ERESTART=85]="ERESTART",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.EUSERS=87]="EUSERS",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.EPFNOSUPPORT=96]="EPFNOSUPPORT",e[e.EAFNOSUPPORT=97]="EAFNOSUPPORT",e[e.EADDRINUSE=98]="EADDRINUSE",e[e.EADDRNOTAVAIL=99]="EADDRNOTAVAIL",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ECONNABORTED=103]="ECONNABORTED",e[e.ECONNRESET=104]="ECONNRESET",e[e.ENOBUFS=105]="ENOBUFS",e[e.EISCONN=106]="EISCONN",e[e.ENOTCONN=107]="ENOTCONN",e[e.ESHUTDOWN=108]="ESHUTDOWN",e[e.ETOOMANYREFS=109]="ETOOMANYREFS",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EEUCLEAN=117]="EEUCLEAN",e[e.ENOTNAM=118]="ENOTNAM",e[e.ENAVAIL=119]="ENAVAIL",e[e.EISNAM=120]="EISNAM",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT",e[e.ENOMEDIUM=123]="ENOMEDIUM",e[e.EMEDIUMTYPE=124]="EMEDIUMTYPE",e[e.ECANCELED=125]="ECANCELED",e[e.ENOKEY=126]="ENOKEY",e[e.EKEYEXPIRED=127]="EKEYEXPIRED",e[e.EKEYREVOKED=128]="EKEYREVOKED",e[e.EKEYREJECTED=129]="EKEYREJECTED",e[e.EOWNERDEAD=130]="EOWNERDEAD",e[e.ENOTRECOVERABLE=131]="ENOTRECOVERABLE",e[e.ERFKILL=132]="ERFKILL",e[e.EHWPOISON=133]="EHWPOISON"})(Q||(Q={}));const gs={[Q.EPERM]:"Operation not permitted",[Q.ENOENT]:"No such file or directory",[Q.ESRCH]:"No such process",[Q.EINTR]:"Interrupted system call",[Q.EIO]:"Input/output error",[Q.ENXIO]:"No such device or address",[Q.E2BIG]:"Argument list too long",[Q.ENOEXEC]:"Exec format error",[Q.EBADF]:"Bad file descriptor",[Q.ECHILD]:"No child processes",[Q.EAGAIN]:"Resource temporarily unavailable",[Q.ENOMEM]:"Out of memory",[Q.EACCES]:"Permission denied",[Q.EFAULT]:"Bad address",[Q.ENOTBLK]:"Block device required",[Q.EBUSY]:"Resource busy or locked",[Q.EEXIST]:"File exists",[Q.EXDEV]:"Invalid cross-device link",[Q.ENODEV]:"No such device",[Q.ENOTDIR]:"File is not a directory",[Q.EISDIR]:"File is a directory",[Q.EINVAL]:"Invalid argument",[Q.ENFILE]:"Too many open files in system",[Q.EMFILE]:"Too many open files",[Q.ETXTBSY]:"Text file busy",[Q.EFBIG]:"File is too big",[Q.ENOSPC]:"No space left on disk",[Q.ESPIPE]:"Illegal seek",[Q.EROFS]:"Cannot modify a read-only file system",[Q.EMLINK]:"Too many links",[Q.EPIPE]:"Broken pipe",[Q.EDOM]:"Numerical argument out of domain",[Q.ERANGE]:"Numerical result out of range",[Q.EDEADLK]:"Resource deadlock would occur",[Q.ENAMETOOLONG]:"File name too long",[Q.ENOLCK]:"No locks available",[Q.ENOSYS]:"Function not implemented",[Q.ENOTEMPTY]:"Directory is not empty",[Q.ELOOP]:"Too many levels of symbolic links",[Q.ENOMSG]:"No message of desired type",[Q.EIDRM]:"Identifier removed",[Q.ECHRNG]:"Channel number out of range",[Q.EL2NSYNC]:"Level 2 not synchronized",[Q.EL3HLT]:"Level 3 halted",[Q.EL3RST]:"Level 3 reset",[Q.ENRNG]:"Link number out of range",[Q.EUNATCH]:"Protocol driver not attached",[Q.ECSI]:"No CSI structure available",[Q.EL2HLT]:"Level 2 halted",[Q.EBADE]:"Invalid exchange",[Q.EBADR]:"Invalid request descriptor",[Q.EXFULL]:"Exchange full",[Q.ENOANO]:"No anode",[Q.EBADRQC]:"Invalid request code",[Q.EBADSLT]:"Invalid slot",[Q.EBFONT]:"Bad font file format",[Q.ENOSTR]:"Device not a stream",[Q.ENODATA]:"No data available",[Q.ETIME]:"Timer expired",[Q.ENOSR]:"Out of streams resources",[Q.ENONET]:"Machine is not on the network",[Q.ENOPKG]:"Package not installed",[Q.EREMOTE]:"Object is remote",[Q.ENOLINK]:"Link has been severed",[Q.EADV]:"Advertise error",[Q.ESRMNT]:"Srmount error",[Q.ECOMM]:"Communication error on send",[Q.EPROTO]:"Protocol error",[Q.EMULTIHOP]:"Multihop attempted",[Q.EDOTDOT]:"RFS specific error",[Q.EBADMSG]:"Bad message",[Q.EOVERFLOW]:"Value too large for defined data type",[Q.ENOTUNIQ]:"Name not unique on network",[Q.EBADFD]:"File descriptor in bad state",[Q.EREMCHG]:"Remote address changed",[Q.ELIBACC]:"Can not access a needed shared library",[Q.ELIBBAD]:"Accessing a corrupted shared library",[Q.ELIBSCN]:".lib section in a.out corrupted",[Q.ELIBMAX]:"Attempting to link in too many shared libraries",[Q.ELIBEXEC]:"Cannot exec a shared library directly",[Q.EILSEQ]:"Invalid or incomplete multibyte or wide character",[Q.ERESTART]:"Interrupted system call should be restarted",[Q.ESTRPIPE]:"Streams pipe error",[Q.EUSERS]:"Too many users",[Q.ENOTSOCK]:"Socket operation on non-socket",[Q.EDESTADDRREQ]:"Destination address required",[Q.EMSGSIZE]:"Message too long",[Q.EPROTOTYPE]:"Protocol wrong type for socket",[Q.ENOPROTOOPT]:"Protocol not available",[Q.EPROTONOSUPPORT]:"Protocol not supported",[Q.ESOCKTNOSUPPORT]:"Socket type not supported",[Q.ENOTSUP]:"Operation is not supported",[Q.EPFNOSUPPORT]:"Protocol family not supported",[Q.EAFNOSUPPORT]:"Address family not supported by protocol",[Q.EADDRINUSE]:"Address already in use",[Q.EADDRNOTAVAIL]:"Cannot assign requested address",[Q.ENETDOWN]:"Network is down",[Q.ENETUNREACH]:"Network is unreachable",[Q.ENETRESET]:"Network dropped connection on reset",[Q.ECONNABORTED]:"Software caused connection abort",[Q.ECONNRESET]:"Connection reset by peer",[Q.ENOBUFS]:"No buffer space available",[Q.EISCONN]:"Transport endpoint is already connected",[Q.ENOTCONN]:"Transport endpoint is not connected",[Q.ESHUTDOWN]:"Cannot send after transport endpoint shutdown",[Q.ETOOMANYREFS]:"Too many references: cannot splice",[Q.ETIMEDOUT]:"Connection timed out",[Q.ECONNREFUSED]:"Connection refused",[Q.EHOSTDOWN]:"Host is down",[Q.EHOSTUNREACH]:"No route to host",[Q.EALREADY]:"Operation already in progress",[Q.EINPROGRESS]:"Operation now in progress",[Q.ESTALE]:"Stale file handle",[Q.EEUCLEAN]:"Structure needs cleaning",[Q.ENOTNAM]:"Not a XENIX named type file",[Q.ENAVAIL]:"No XENIX semaphores available",[Q.EISNAM]:"Is a named type file",[Q.EREMOTEIO]:"Remote I/O error",[Q.EDQUOT]:"Disk quota exceeded",[Q.ENOMEDIUM]:"No medium found",[Q.EMEDIUMTYPE]:"Wrong medium type",[Q.ECANCELED]:"Operation canceled",[Q.ENOKEY]:"Required key not available",[Q.EKEYEXPIRED]:"Key has expired",[Q.EKEYREVOKED]:"Key has been revoked",[Q.EKEYREJECTED]:"Key was rejected by service",[Q.EOWNERDEAD]:"Owner died",[Q.ENOTRECOVERABLE]:"State not recoverable",[Q.ERFKILL]:"Operation not possible due to RF-kill",[Q.EHWPOISON]:"Memory page has hardware error"};function Tt(e){let t=`${e.code}: ${gs[e.errno]}, ${e.syscall}`;return e.path&&(t+=` '${e.path}'`),e.dest&&(t+=` -> '${e.dest}'`),e.message&&!e.message.startsWith(gs[e.errno])&&(t+=` (${e.message})`),e.message=t,e}class vt extends Error{errno;code;path;dest;syscall;constructor(t,i,r={}){const n=Q[t];super(i||""),this.errno=t,this.code=n,Object.assign(this,Xo(r,"message")),i||Tt(this),Error.captureStackTrace?.(this,this.constructor)}toString(){return this.message}toJSON(){const t={errno:this.errno,code:this.code,stack:this.stack,message:this.message};return this.path&&(t.path=this.path),this.dest&&(t.dest=this.dest),this.syscall&&(t.syscall=this.syscall),t}static fromJSON(t){const i=t.syscall?new vt(t.errno,!1,t):new vt(t.errno,t.message);return i.stack=t.stack,i}}function Z(e,t,i,r){typeof t=="string"&&(t={syscall:t,path:i,dest:r});const n=new vt(Q[e],!1,t??{});return Error.captureStackTrace?.(n,Z),n}function V(e,t){const i=new vt(Q[e],t??gs[Q[e]]);return Error.captureStackTrace?.(i,V),i}function li(e,t,i){const r=typeof e=="string"?{syscall:e}:e;return t&&(r.path=t),function(n){throw Object.assign(n,r),Tt(n),n}}var Ge;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(Ge||(Ge={}));const hu=["emergency","alert","critical","error","warning","notice","info","debug"];function _u(e){return hu.indexOf(e)}const Zo=new su;function mu(e,t){if(!Ss)return;const i={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};Zo.add(i),el(i)}function Vi(e){return function(t){return mu(e,t.toString()),t}}Vi(Ge.EMERG);const Qo=Vi(Ge.ALERT),pi=Vi(Ge.CRIT),pt=Vi(Ge.ERR),bt=Vi(Ge.WARN),Ls=Vi(Ge.NOTICE),In=Vi(Ge.INFO),oi=Vi(Ge.DEBUG);function yu(e){return"["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] "}Ge.EMERG+"",Ge.ALERT+"",Ge.CRIT+"",Ge.ERR+"",Ge.WARN+"",Ge.NOTICE+"",Ge.INFO+"",Ge.DEBUG+"",Ge.EMERG+"",Ge.ALERT+"",Ge.CRIT+"",Ge.ERR+"",Ge.WARN+"",Ge.NOTICE+"",Ge.INFO+"",Ge.DEBUG+"";Ge.EMERG+"",Ge.ALERT+"",Ge.CRIT+"",Ge.ERR+"",Ge.WARN+"",Ge.NOTICE+"",Ge.INFO+"",Ge.DEBUG+"",Ge.EMERG+"",Ge.ALERT+"",Ge.CRIT+"",Ge.ERR+"",Ge.WARN+"",Ge.NOTICE+"",Ge.INFO+"",Ge.DEBUG+"";let ps=e=>[yu(e),e.message];function gu(e){const t=ps(e);return typeof t=="string"?[t]:Array.from(t)}let bs=console.error;function el(e){e.level>ws||bs(...gu(e))}let ws=Ge.ALERT,Ca=!1,Ss=!0;function pu(e){if(ps=e.format??ps,bs=e.output??bs,ws=typeof e.level=="string"?_u(e.level):e.level??ws,Ss=e.enabled??Ss,Ca=e.stack??Ca,!!e.dumpBacklog)for(const t of Zo)el(t)}function Cs(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function bu(e){return!(e&&e.constructor===Function)||e.prototype===void 0?!1:Function.prototype!==Object.getPrototypeOf(e)?!0:Object.getOwnPropertyNames(e.prototype).length>1}function wu(e,t){if(typeof t!="object"||t===null)throw pt(V("EINVAL","Invalid options"));for(const[i,r]of Object.entries(e.options)){const n=t?.[i];if(n==null){if(!r.required){oi("Using default for option: "+i);continue}throw pt(V("EINVAL","Missing required option: "+i))}const s=(u,h=n)=>typeof u=="function"?bu(u)?n instanceof u:u(n):typeof n===u||n?.constructor?.name===u;if(Array.isArray(r.type)?r.type.some(u=>s(u)):s(r.type))continue;const o=typeof n=="object"&&"constructor"in n?n.constructor.name:typeof n,a=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,d=Array.isArray(r.type)?`one of ${r.type.map(a).join(", ")}`:a(r.type);throw pt(V("EINVAL",`Incorrect type for "${i}": ${o} (expected ${d})`))}}function tl(e){return e!=null&&typeof e=="object"&&"backend"in e&&Cs(e.backend)}function il(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}function Su(e){return e?!e.uid||!e.gid||!e.euid||!e.egid||e.groups.some(t=>!t):!1}const rl=Symbol("ZenFSContext"),nl={[rl]:!0,id:0,root:"/",pwd:"/",credentials:il({uid:0,gid:0}),descriptors:new Map,parent:null,children:[]};function Jt(e){return typeof e=="object"&&e!==null&&rl in e?e:nl}const xn=0,wt=4,Et=2,_n=1,Ms=1,Eu=2,vu=4,sl=0,Ct=1,Ti=2,kn=64,On=128,Iu=256,An=512,br=1024,xu=65536,ku=262144,Ou=131072,Ps=1052672,Au=4096,Du=32768,Tu=16384,Nu=2048,ct=61440,wr=49152,Ci=40960,qt=32768,er=24576,rt=16384,qi=8192,Sr=4096,Xi=2048,Ji=1024,Ru=512,zu=448,al=256,ol=128,ll=64,Lu=56,cl=32,ul=16,fl=8,Cu=7,dl=4,hl=2,_l=1,Mu=0,Xt=4294967295,ml=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:Ms,COPYFILE_FICLONE:Eu,COPYFILE_FICLONE_FORCE:vu,F_OK:xn,O_APPEND:br,O_CREAT:kn,O_DIRECT:Tu,O_DIRECTORY:xu,O_DSYNC:Au,O_EXCL:On,O_NOATIME:ku,O_NOCTTY:Iu,O_NOFOLLOW:Ou,O_NONBLOCK:Nu,O_RDONLY:sl,O_RDWR:Ti,O_SYMLINK:Du,O_SYNC:Ps,O_TRUNC:An,O_WRONLY:Ct,R_OK:wt,S_IFBLK:er,S_IFCHR:qi,S_IFDIR:rt,S_IFIFO:Sr,S_IFLNK:Ci,S_IFMT:ct,S_IFREG:qt,S_IFSOCK:wr,S_IRGRP:cl,S_IROTH:dl,S_IRUSR:al,S_IRWXG:Lu,S_IRWXO:Cu,S_IRWXU:zu,S_ISGID:Ji,S_ISUID:Xi,S_ISVTX:Ru,S_IWGRP:ul,S_IWOTH:hl,S_IWUSR:ol,S_IXGRP:fl,S_IXOTH:_l,S_IXUSR:ll,UV_FS_O_FILEMAP:Mu,W_OK:Et,X_OK:_n,size_max:Xt},Symbol.toStringTag,{value:"Module"}));function Ma(e){class t extends DataView{length;type=e;*[Symbol.iterator](){for(let r=0;r<this.length;r++)yield this[r]}constructor(r,n,s){const o=typeof r=="object"?r:new ArrayBuffer((r??0)*e.size);return super(o,n,s),this.length=typeof r=="number"?r:Math.floor(this.byteLength/e.size),new Proxy(this,{get(a,d){if(d in a)return a[d];const u=parseInt(d.toString());if(!Number.isSafeInteger(u))throw V("EINVAL","Invalid index: "+d.toString());return e.get(a.buffer,a.byteOffset+u*e.size)},set(a,d,u){const h=parseInt(d.toString());if(!Number.isSafeInteger(h))throw V("EINVAL","Invalid index: "+d.toString());return e.set(a.buffer,a.byteOffset+h*e.size,u),!0}})}}for(const i of Object.getOwnPropertyNames(DataView.prototype))!i.startsWith("get")&&!i.startsWith("set")||Object.defineProperty(t.prototype,i,{enumerable:!1,configurable:!1,writable:!1,value:void 0});return t}class qr{type;length;name;size;__arrayType;constructor(t,i){this.type=t,this.length=i,this.name=`${t.name}[${i}]`,this.size=t.size*i,this.array=Ma(this),this.__arrayType=t.array?t.array:Ma(t)}get=(t,i)=>new this.__arrayType(t,i,this.size);set=(t,i,r)=>{for(let n=0;n<this.length;n++)this.type.set(t,i+n*this.type.size,r[n])};array}function _r(e){return typeof e!="object"&&typeof e!="function"||e===null||e===void 0?!1:e instanceof qr?_r(e.type):"name"in e&&"size"in e&&"get"in e&&"set"in e&&typeof e.name=="string"&&typeof e.size=="number"&&typeof e.get=="function"&&typeof e.set=="function"&&yn.has(e.name)&&yn.get(e.name)?.name===e.name}const yn=new Map;function Bs(e){if(yn.has(e.name))throw new ReferenceError(`Type is already registered: ${e.name}`);yn.set(e.name,e)}function Pu(e){return _r(e)?{type:e}:e instanceof Di?e.toInit():e}class Di{type;init;constructor(t,i){this.type=t,this.init=i;const r=(n=>new Di(new qr(t,n),i));return Object.setPrototypeOf(r,new.target.prototype),Object.assign(r,{type:t,init:i}),r}align(t){return new Di(this.type,{...this.init,align:t})}countedBy(t){return new Di(this.type,{...this.init,countedBy:t})}bigEndian(){return new Di(this.type,{...this.init,bigEndian:!0})}toInit(){return{type:this.type,...this.init}}$type(){return new Di(this.type,this.init)}}function Bu(e,t=0){return new Di(new qr(e,t),{})}function yl(e,t,i={}){if(!e)throw V("EINVAL","Invalid name for struct field");typeof e=="symbol"&&console.warn("Symbol used for struct field name will be coerced to string: "+e.toString());const r=e.toString(),n=Object.assign(Pu(t),i);if(!_r(n.type))throw V("EINVAL",`Invalid type for struct field "${r}"`);return{name:r,offset:0,type:n.type,countedBy:n.countedBy,alignment:n.align??n.type.size,decl:n.type instanceof qr?`${n.typeName??n.type.type.name} ${r}[${n.type.length}]${n.countedBy?` counted_by(${n.countedBy})`:""}`:`${n.typeName??n.type.name} ${r}`,littleEndian:!n.bigEndian}}function gl(e){throw e.message!=="offset is outside the bounds of the DataView"?e:V("EFAULT","Segmentation fault")}function Us(e,t,i,r){try{typeof i=="string"&&(i=i.charCodeAt(0));const n=e.byteOffset+t.offset+(r??0)*t.type.size;t.type.set(e.buffer,n,i);return}catch(n){gl(n)}}function Fs(e,t){try{return t.type.get(e.buffer,e.byteOffset+t.offset)}catch(i){gl(i)}}const Pa=Symbol("DataView");function It(e){return e[Pa]??=new DataView(e),e[Pa]}const Uu={name:"int8",size:1,array:Int8Array,get:(e,t)=>It(e).getInt8(t),set:(e,t,i)=>It(e).setInt8(t,i)},pl={name:"uint8",size:1,array:Uint8Array,get:(e,t)=>It(e).getUint8(t),set:(e,t,i)=>It(e).setUint8(t,i)},Fu={name:"int16",size:2,array:Int16Array,get:(e,t)=>It(e).getInt16(t,!0),set:(e,t,i)=>It(e).setInt16(t,i,!0)},ju={name:"uint16",size:2,array:Uint16Array,get:(e,t)=>It(e).getUint16(t,!0),set:(e,t,i)=>It(e).setUint16(t,i,!0)},$u={name:"int32",size:4,array:Int32Array,get:(e,t)=>It(e).getInt32(t,!0),set:(e,t,i)=>It(e).setInt32(t,i,!0)},Wu={name:"uint32",size:4,array:Uint32Array,get:(e,t)=>It(e).getUint32(t,!0),set:(e,t,i)=>It(e).setUint32(t,i,!0)},Vu={name:"int64",size:8,array:BigInt64Array,get:(e,t)=>It(e).getBigInt64(t,!0),set:(e,t,i)=>It(e).setBigInt64(t,i,!0)},qu={name:"uint64",size:8,array:BigUint64Array,get:(e,t)=>It(e).getBigUint64(t,!0),set:(e,t,i)=>It(e).setBigUint64(t,i,!0)},Gu={name:"float32",size:4,array:Float32Array,get:(e,t)=>It(e).getFloat32(t,!0),set:(e,t,i)=>It(e).setFloat32(t,i,!0)},Ku={name:"float64",size:8,array:Float64Array,get:(e,t)=>It(e).getFloat64(t,!0),set:(e,t,i)=>It(e).setFloat64(t,i,!0)},mr={int8:Uu,uint8:pl,int16:Fu,uint16:ju,int32:$u,uint32:Wu,int64:Vu,uint64:qu,float32:Gu,float64:Ku},Hu=Object.keys(mr);for(const e of Object.values(mr))Bs(e);const bl={...mr,...Object.fromEntries(Hu.map(e=>[uu(e),mr[e]])),char:pl},wl=Object.keys(bl);function Yu(e){return wl.includes(e.toString())}function Xu(e){if(!Yu(e))throw V("EINVAL","Not a valid primitive type: "+e)}function Sl(e){return e=="char"?"uint8":e.toLowerCase()}Symbol.metadata??=Symbol.for("Symbol.metadata");function El(e){e.metadata??={};const t=e.metadata.structInit??{};return e.metadata.structInit={fields:[...t.fields??[]]},e.metadata.structInit}function Ye(e,...t){const i=t.reduce((r,n)=>({...r,...n}),{});return typeof this=="object"&&Object.assign(i,this),function(n,s){const o=El(s);let a=1;const d={};let u=0;const h=g=>{u=Math.ceil(u/g)*g};for(const g of o.fields)i.isPacked||h(g.alignment),i.isUnion?u=Math.max(u,g.type.size):(g.offset=u,u+=g.type.size),d[g.name]=g,a=Math.max(a,g.alignment);i.alignment??=a,i.isPacked||h(i.alignment),s.metadata.struct={fields:d,size:u,alignment:i.isPacked?1:i.alignment,isUnion:i.isUnion??!1};class f extends n{constructor(...b){b.length||(b=[new ArrayBuffer(u),0,u]),super(...b);for(const p of Object.values(d))Object.defineProperty(this,p.name,{enumerable:!0,configurable:!0,get(){return Fs(this,p)},set(m){Us(this,p,m)}})}}const E=g=>({writable:!1,enumerable:!1,configurable:!1,value:g});return Object.defineProperties(f,{name:E(e),size:E(u),alignment:E(i.alignment),isUnion:E(!!i.isUnion),fields:E(d),get:E((g,b)=>new f(g,b)),set:E((g,b,p)=>{const m=new Uint8Array(p.buffer,p.byteOffset,u),y=new Uint8Array(g,b,u);if(!(p.buffer===g&&p.byteOffset===b))for(let I=0;I<u;I++)y[I]=m[I]}),[Symbol.toStringTag]:E(`[struct ${e}]`)}),Bs(f),f}}Ye.packed=Ye.bind({isPacked:!0});Ye.align=function(e){return Ye.bind({alignment:e})};function gi(e,t={}){return function(r,n){if(n.kind!="accessor")throw V("EINVAL","Field must be an accessor");const s=El(n),o=yl(n.name,e,t);return s.fields.push(o),{get(){return Fs(this,o)},set(a){Us(this,o,a)}}}}function Ju(e){const t=mr[Sl(e)];function i(r,n){return typeof r=="number"?gi(new qr(t,r),{typeName:e,...n}):gi(t,{typeName:e})(r,n&&"name"in n?n:Xe(V("EINVAL","Invalid decorator context object")))}return i}const q=Object.fromEntries(wl.map(e=>[e,Ju(e)]));function wi(e){return e}wi.typed=function(e){return e};function Ba(e){return typeof e=="function"&&"prototype"in e&&"fields"in e&&typeof e.fields=="object"&&_r(e)}function yr(e,t,...i){const r=i.reduce((f,E)=>({...f,...E}),{});typeof this=="object"&&Object.assign(r,this);let n=1,s=0;const o=f=>{s=Math.ceil(s/f)*f},a=Object.create(null);for(const[f,E]of Object.entries(t)){if(typeof f=="number")throw new TypeError("Field names can not be numbers");const g=yl(f,E);r.isPacked||o(g.alignment),r.isUnion?s=Math.max(s,g.type.size):(g.offset=s,s+=g.type.size),a[g.name]=g,n=Math.max(n,g.alignment)}r.alignment??=n,r.isPacked||o(r.alignment);class d extends DataView{static name=e;constructor(E=new ArrayBuffer(s),g,b){super(E,g,b??s);for(const p of Object.values(a))Object.defineProperty(this,p.name,{enumerable:!0,configurable:!0,get(){return Fs(this,p)},set(m){Us(this,p,m)}})}}for(const f of Object.getOwnPropertyNames(DataView.prototype))!f.startsWith("get")&&!f.startsWith("set")||Object.defineProperty(d.prototype,f,{enumerable:!1,configurable:!1,writable:!1,value:void 0});const u=d,h=f=>({writable:!1,enumerable:!1,configurable:!1,value:f});return Object.defineProperties(u,{size:h(s),alignment:h(r.alignment),isUnion:h(!!r.isUnion),fields:h(a),get:h((f,E)=>new u(f,E)),set:h((f,E,g)=>{const b=new Uint8Array(g.buffer,g.byteOffset,s),p=new Uint8Array(f,E,s);if(!(g.buffer===f&&g.byteOffset===E))for(let m=0;m<s;m++)p[m]=b[m]}),[Symbol.toStringTag]:h(`[struct ${e}]`)}),Bs(u),u}yr.extend=function(e,t,i,...r){return yr(t,{...e.fields,...i},...r)};yr.packed=yr.bind({isPacked:!0});yr.align=function(e){return yr.bind({alignment:e})};Object.fromEntries(Object.entries(bl).map(([e,t])=>[e,new Di(t,{typeName:e})]));function at(e){if(_r(e))return e.size;if(e==null)return 0;if(typeof e=="object"&&_r(e.constructor))return e.constructor.size;if(Array.isArray(e)){let t=0;for(let i=0;i<e.length;i++)t+=at(e[i]);return t}if(typeof e=="string")return Xu(e),mr[Sl(e)].size;throw new TypeError(`Unable to resolve size of \`${e.toString()}\``)}function vl(e,t){let i;if(Ba(e))i=e;else if(Ba(e.constructor))i=e.constructor;else throw V("EINVAL","Type is not a struct or struct constructor");const{fields:r}=i;if(!(t in r))throw V("EINVAL","Struct does not have field: "+t);return r[t].offset}function Fr(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Fr(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const i=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return i?e.grow(t):e.resize(t),e;if(i){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}class Si extends DataView{constructor(t,i,r){const{buffer:n,byteOffset:s,byteLength:o}=new Uint8Array(t,i,r);super(n,s,o)}}for(const e of Object.getOwnPropertyNames(DataView.prototype))!e.startsWith("get")&&!e.startsWith("set")||Object.defineProperty(Si.prototype,e,{value:()=>{throw new ReferenceError("Do not use DataView methods on a BufferView.")},writable:!1,enumerable:!1,configurable:!1});function Nt(e){return JSON.parse(bi(e),(t,i)=>t==""?i:typeof i=="string"?BigInt(i).toString(16).slice(0,Math.min(i.length,8)):i)}function Qt(e){return Ai(JSON.stringify(e))}function Mi(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const i=parseInt(e,8);if(!isNaN(i))return i}if(typeof t=="number")return t;throw V("EINVAL","Invalid mode: "+e?.toString())}function Wi(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw V("EINVAL","Invalid time.")}}function ze(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw V("EINVAL","URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw V("EINVAL","Path can not contain null character");if(e.length==0)throw V("EINVAL","Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Ht.call(this,e)}function Ni(e,t="utf8",i,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:i,mode:r}:{encoding:typeof e?.encoding=="string"?e.encoding:t??null,flag:typeof e?.flag=="string"?e.flag:i,mode:Mi("mode"in e?e?.mode:null,r)}}function js(e){return e=e.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${e}$`)}function Dn(e){return`/tmp/${ze(e,!0)}${Date.now()}-${Math.random().toString(36).slice(2)}`}function Il(e,t){let i="",r=0,n=-1,s=0,o="\0";for(let a=0;a<=e.length;++a){if(a<e.length)o=e[a];else{if(o=="/")break;o="/"}if(o=="/"){if(!(n===a-1||s===1))if(s===2){if(i.length<2||r!==2||i.at(-1)!=="."||i.at(-2)!=="."){if(i.length>2){const d=i.lastIndexOf("/");d===-1?(i="",r=0):(i=i.slice(0,d),r=i.length-1-i.lastIndexOf("/")),n=a,s=0;continue}else if(i.length!==0){i="",r=0,n=a,s=0;continue}}t&&(i+=i.length>0?"/..":"..",r=2)}else i.length>0?i+="/"+e.slice(n+1,a):i=e.slice(n+1,a),r=a-n-1;n=a,s=0}else o==="."&&s!==-1?++s:s=-1}return i}function Ht(...e){let t="";for(const r of[...e.reverse(),Jt(this).pwd])if(r?.length&&(t=`${r}/${t}`,r.startsWith("/")))break;const i=t.startsWith("/");return t=Il(t,!i),i?`/${t}`:t.length?t:"/"}function Zu(e){if(!e.length)return".";const t=e[0]==="/",i=e.at(-1)==="/";return e=Il(e,!t),e.length?(i&&(e+="/"),t?`/${e}`:e):t?"/":i?"./":"."}function st(...e){if(!e.length)return".";const t=e.filter(i=>i).join("/");return t?.length?Zu(t):"."}function xl(e,t){if(e===t||(e=Ht.call(this,e),t=Ht.call(this,t),e===t))return"";const i=1,r=e.length,n=r-i,s=1,o=t.length-s,a=n<o?n:o;let d=-1,u=0;for(;u<a;u++){const f=e[i+u];if(f!==t[s+u])break;f==="/"&&(d=u)}if(u===a)if(o>a){if(t[s+u]==="/")return t.slice(s+u+1);if(u===0)return t.slice(s+u)}else n>a&&(e[i+u]==="/"?d=u:u===0&&(d=0));let h="";for(u=i+d+1;u<=r;++u)(u===r||e[u]==="/")&&(h+=h.length===0?"..":"/..");return`${h}${t.slice(s+d)}`}function Je(e){if(e.length===0)return".";const t=e[0]==="/";let i=-1,r=!0;for(let n=e.length-1;n>=1;--n)if(e[n]==="/"){if(!r){i=n;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)}function ci(e,t){let i=0,r=-1,n=!0;for(let s=e.length-1;s>=0;--s)if(e[s]==="/"){if(!n){i=s+1;break}}else r===-1&&(n=!1,r=s+1);return r===-1?"":e.slice(i,r)}function Rt(e){const t=e[0]==="/",i={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return i;const r=t?1:0;let n=-1,s=0,o=-1,a=!0,d=e.length-1,u=0;for(;d>=r;--d){if(e[d]==="/"){if(!a){s=d+1;break}continue}o===-1&&(a=!1,o=d+1),e[d]==="."?n===-1?n=d:u!==1&&(u=1):n!==-1&&(u=-1)}if(o!==-1){const h=s===0&&t?1:s;n===-1||u===0||u===1&&n===o-1&&n===s+1?i.base=i.name=e.slice(h,o):(i.name=e.slice(h,n),i.base=e.slice(h,o),i.ext=e.slice(n,o))}return s>0?i.dir=e.slice(0,s-1):t&&(i.dir="/"),i}function kl(e,t){return js(e).test(t)}const en=BigInt(1e3);class Ol{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}mode;dev=this._convert(0);ino=this._convert(0);rdev=this._convert(0);nlink=this._convert(1);blksize=this._convert(4096);uid=this._convert(0);gid=this._convert(0);atimeMs;get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}mtimeMs;get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}ctimeMs;get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}birthtimeMs;get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}size;data;flags;version;constructor({atimeMs:t,mtimeMs:i,ctimeMs:r,birthtimeMs:n,uid:s,gid:o,size:a,mode:d,ino:u,...h}={}){const f=Date.now();this.atimeMs=this._convert(t??f),this.mtimeMs=this._convert(i??f),this.ctimeMs=this._convert(r??f),this.birthtimeMs=this._convert(n??f),this.uid=this._convert(s??0),this.gid=this._convert(o??0),this.size=this._convert(a??0),this.ino=this._convert(u??0),this.mode=this._convert(d??420&qt),(this.mode&ct)==0&&(this.mode=this.mode|this._convert(qt)),Object.assign(this,h)}isFile(){return(this.mode&ct)===qt}isDirectory(){return(this.mode&ct)===rt}isSymbolicLink(){return(this.mode&ct)===Ci}isSocket(){return(this.mode&ct)===wr}isBlockDevice(){return(this.mode&ct)===er}isCharacterDevice(){return(this.mode&ct)===qi}isFIFO(){return(this.mode&ct)===Sr}toJSON(){return Yo(this,jr)}hasAccess(t,i){return He(i,this._isBigint?new Pi(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*en}get mtimeNs(){return BigInt(this.mtimeMs)*en}get ctimeNs(){return BigInt(this.ctimeMs)*en}get birthtimeNs(){return BigInt(this.birthtimeMs)*en}}class Pi extends Ol{_isBigint=!1}class tr extends Ol{_isBigint=!0}function Qu(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class ef{type=525687744115;bsize=4096;blocks=0;bfree=0;bavail=0;files=Xt;ffree=Xt}class tf{type=BigInt("0x7a656e6673");bsize=BigInt(4096);blocks=BigInt(0);bfree=BigInt(0);bavail=BigInt(0);files=BigInt(Xt);ffree=BigInt(Xt)}var dt=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},je=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0};const Ft=0,Es=3968;let Ei=(()=>{var e,t;let i=[Ye.packed("Attribute")],r,n=[],s,o=wi.typed(Uint8Array),a,d=[],u=[],h,f=[],E=[];return class extends o{static{s=this}static{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;a=[(e=q).uint32.bind(e)],h=[(t=q).uint32.bind(t)],dt(this,null,a,{kind:"accessor",name:"keySize",static:!1,private:!1,access:{has:b=>"keySize"in b,get:b=>b.keySize,set:(b,p)=>{b.keySize=p}},metadata:g},d,u),dt(this,null,h,{kind:"accessor",name:"valueSize",static:!1,private:!1,access:{has:b=>"valueSize"in b,get:b=>b.valueSize,set:(b,p)=>{b.valueSize=p}},metadata:g},f,E),dt(null,r={value:s},i,{kind:"class",name:s.name,metadata:g},null,n),s=r.value,g&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g}),je(s,n)}#e=je(this,d,void 0);get keySize(){return this.#e}set keySize(g){this.#e=g}#t=(je(this,u),je(this,f,void 0));get valueSize(){return this.#t}set valueSize(g){this.#t=g}get name(){return bi(this.subarray(8,8+this.keySize))}set name(g){const b=Ai(g);if(8+b.length+this.valueSize>Es)throw V("EOVERFLOW");this.set(b,8),this.keySize=b.length}get value(){return this.subarray(8+this.keySize,this.size)}set value(g){if(8+this.keySize+g.length>Es)throw V("EOVERFLOW");this.valueSize=g.length,this.set(g,8+this.keySize)}get size(){return 8+this.keySize+this.valueSize}constructor(){super(...arguments),je(this,E)}},s})(),ir=(()=>{var e;let t=[Ye.packed("Attributes")],i,r=[],n,s=Si,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint32.bind(e)],dt(this,null,o,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:h=>"size"in h,get:h=>h.size,set:(h,f)=>{h.size=f}},metadata:u},a,d),dt(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),je(n,r)}#e=je(this,a,void 0);get size(){return this.#e}set size(u){this.#e=u}get byteSize(){let u=this.byteOffset+at(this);for(let h=0;h<this.size;h++){const f=new Ei(this.buffer,u);u+=f.size}return u}has(u){let h=this.byteOffset+at(this);for(let f=0;f<this.size;f++){const E=new Ei(this.buffer,h);if(E.name==u)return!0;h+=E.size}return!1}get(u){let h=this.byteOffset+at(this);for(let f=0;f<this.size;f++){const E=new Ei(this.buffer,h);if(E.name==u)return E.value;h+=E.size}}set(u,h){let f=this.byteOffset+at(this),E;for(let p=0;p<this.size;p++){const m=new Ei(this.buffer,f);m.name==u&&(E=[f,m.size]),f+=m.size}const g=new Uint8Array(this.buffer);if(E){const[p,m]=E;f-=m,g.copyWithin(p,p+m,f+m),g.fill(0,f,f+m),this.size--}const b=new Ei(this.buffer,f);b.name=u,b.value=h,this.size++}remove(u){let h=this.byteOffset+at(this),f;for(let p=0;p<this.size;p++){const m=new Ei(this.buffer,h);m.name==u&&(f=[h,m.size]),h+=m.size}if(!f)return!1;const[E,g]=f,b=new Uint8Array(this.buffer);return b.copyWithin(E,E+g,h),b.fill(0,h-g,h),this.size--,!0}copyFrom(u){const{byteSize:h}=u;new Uint8Array(this.buffer,this.byteOffset,h).set(new Uint8Array(u.buffer,u.byteOffset,h))}*keys(){let u=this.byteOffset+at(this);for(let h=0;h<this.size;h++){const f=new Ei(this.buffer,u);yield f.name,u+=f.size}}*values(){let u=this.byteOffset+at(this);for(let h=0;h<this.size;h++){const f=new Ei(this.buffer,u);yield f.value,u+=f.size}}*entries(){let u=this.byteOffset+at(this);for(let h=0;h<this.size;h++){const f=new Ei(this.buffer,u);yield[f.name,f.value],u+=f.size}}constructor(){super(...arguments),je(this,d)}},n})();const jr=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],Ua=5;var jt;(function(e){e[e.Sync=1]="Sync",e[e.NoAtime=2]="NoAtime",e[e.Append=4]="Append",e[e.Immutable=8]="Immutable",e[e.Dead=16]="Dead",e[e.NoQuota=32]="NoQuota",e[e.Dirsync=64]="Dirsync",e[e.NoCMtime=128]="NoCMtime",e[e.SwapFile=256]="SwapFile",e[e.Private=512]="Private",e[e.IMA=1024]="IMA",e[e.AutoMount=2048]="AutoMount",e[e.NoSec=4096]="NoSec",e[e.DAX=8192]="DAX",e[e.Encrypted=16384]="Encrypted",e[e.CaseFold=32768]="CaseFold",e[e.Verity=65536]="Verity",e[e.KernelFile=131072]="KernelFile"})(jt||(jt={}));let tt=(()=>{var e,t,i,r,n,s,o,a,d,u,h,f,E,g,b,p;let m=[Ye.packed("Inode")],y,I=[],x,z=Si,k,B=[],J=[],G,H=[],D=[],C,ne=[],L=[],W,X=[],_e=[],De,ae=[],de=[],O,j=[],Y=[],K,we=[],Ee=[],Le,Oe=[],ee=[],re,ce=[],le=[],be,M=[],$=[],ie,pe=[],ye=[],me,N=[],P=[],oe,te=[],Ue=[],et,Pe=[],it=[],w,c=[],l=[],S,T=[],v=[],_,U=[],se=[],Se,Re=[],he=[],ue,Fe=[],lt=[];var Bt=class extends z{static{x=this}static{const ve=typeof Symbol=="function"&&Symbol.metadata?Object.create(z[Symbol.metadata]??null):void 0;k=[(e=q).uint32.bind(e)],G=[(t=q).uint32.bind(t)],C=[(i=q).uint32.bind(i)],W=[(r=q).uint16.bind(r)],De=[(n=q).uint32.bind(n)],O=[(s=q).uint32.bind(s)],K=[(o=q).uint32.bind(o)],Le=[(a=q).float64.bind(a)],re=[(d=q).float64.bind(d)],be=[(u=q).float64.bind(u)],ie=[(h=q).float64.bind(h)],me=[(f=q).uint32.bind(f)],oe=[(E=q).uint32.bind(E)],et=[(g=q).uint32.bind(g)],w=[(b=q).uint16.bind(b)],S=[(p=q).uint32.bind(p)],_=[q.uint8(48)],Se=[gi(ir)],ue=[q.uint8(Es)],dt(this,null,k,{kind:"accessor",name:"data",static:!1,private:!1,access:{has:fe=>"data"in fe,get:fe=>fe.data,set:(fe,Be)=>{fe.data=Be}},metadata:ve},B,J),dt(this,null,G,{kind:"accessor",name:"__data_old",static:!1,private:!1,access:{has:fe=>"__data_old"in fe,get:fe=>fe.__data_old,set:(fe,Be)=>{fe.__data_old=Be}},metadata:ve},H,D),dt(this,null,C,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:fe=>"size"in fe,get:fe=>fe.size,set:(fe,Be)=>{fe.size=Be}},metadata:ve},ne,L),dt(this,null,W,{kind:"accessor",name:"mode",static:!1,private:!1,access:{has:fe=>"mode"in fe,get:fe=>fe.mode,set:(fe,Be)=>{fe.mode=Be}},metadata:ve},X,_e),dt(this,null,De,{kind:"accessor",name:"nlink",static:!1,private:!1,access:{has:fe=>"nlink"in fe,get:fe=>fe.nlink,set:(fe,Be)=>{fe.nlink=Be}},metadata:ve},ae,de),dt(this,null,O,{kind:"accessor",name:"uid",static:!1,private:!1,access:{has:fe=>"uid"in fe,get:fe=>fe.uid,set:(fe,Be)=>{fe.uid=Be}},metadata:ve},j,Y),dt(this,null,K,{kind:"accessor",name:"gid",static:!1,private:!1,access:{has:fe=>"gid"in fe,get:fe=>fe.gid,set:(fe,Be)=>{fe.gid=Be}},metadata:ve},we,Ee),dt(this,null,Le,{kind:"accessor",name:"atimeMs",static:!1,private:!1,access:{has:fe=>"atimeMs"in fe,get:fe=>fe.atimeMs,set:(fe,Be)=>{fe.atimeMs=Be}},metadata:ve},Oe,ee),dt(this,null,re,{kind:"accessor",name:"birthtimeMs",static:!1,private:!1,access:{has:fe=>"birthtimeMs"in fe,get:fe=>fe.birthtimeMs,set:(fe,Be)=>{fe.birthtimeMs=Be}},metadata:ve},ce,le),dt(this,null,be,{kind:"accessor",name:"mtimeMs",static:!1,private:!1,access:{has:fe=>"mtimeMs"in fe,get:fe=>fe.mtimeMs,set:(fe,Be)=>{fe.mtimeMs=Be}},metadata:ve},M,$),dt(this,null,ie,{kind:"accessor",name:"ctimeMs",static:!1,private:!1,access:{has:fe=>"ctimeMs"in fe,get:fe=>fe.ctimeMs,set:(fe,Be)=>{fe.ctimeMs=Be}},metadata:ve},pe,ye),dt(this,null,me,{kind:"accessor",name:"ino",static:!1,private:!1,access:{has:fe=>"ino"in fe,get:fe=>fe.ino,set:(fe,Be)=>{fe.ino=Be}},metadata:ve},N,P),dt(this,null,oe,{kind:"accessor",name:"__ino_old",static:!1,private:!1,access:{has:fe=>"__ino_old"in fe,get:fe=>fe.__ino_old,set:(fe,Be)=>{fe.__ino_old=Be}},metadata:ve},te,Ue),dt(this,null,et,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:fe=>"flags"in fe,get:fe=>fe.flags,set:(fe,Be)=>{fe.flags=Be}},metadata:ve},Pe,it),dt(this,null,w,{kind:"accessor",name:"__after_flags",static:!1,private:!1,access:{has:fe=>"__after_flags"in fe,get:fe=>fe.__after_flags,set:(fe,Be)=>{fe.__after_flags=Be}},metadata:ve},c,l),dt(this,null,S,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:fe=>"version"in fe,get:fe=>fe.version,set:(fe,Be)=>{fe.version=Be}},metadata:ve},T,v),dt(this,null,_,{kind:"accessor",name:"__padding",static:!1,private:!1,access:{has:fe=>"__padding"in fe,get:fe=>fe.__padding,set:(fe,Be)=>{fe.__padding=Be}},metadata:ve},U,se),dt(this,null,Se,{kind:"accessor",name:"attributes",static:!1,private:!1,access:{has:fe=>"attributes"in fe,get:fe=>fe.attributes,set:(fe,Be)=>{fe.attributes=Be}},metadata:ve},Re,he),dt(this,null,ue,{kind:"accessor",name:"__data",static:!1,private:!1,access:{has:fe=>"__data"in fe,get:fe=>fe.__data,set:(fe,Be)=>{fe.__data=Be}},metadata:ve},Fe,lt),dt(null,y={value:x},m,{kind:"class",name:x.name,metadata:ve},null,I),Bt=x=y.value,ve&&Object.defineProperty(x,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ve}),je(x,I)}constructor(...ve){let fe={};if(typeof ve[0]=="object"&&ve[0]!==null&&!ArrayBuffer.isView(ve[0])&&(fe=ve[0],ve=[at(Bt)]),super(...ve),je(this,lt),this.byteLength<at(Bt))throw pi(V("EIO",`Buffer is too small to create an inode (${this.byteLength} bytes)`));Object.assign(this,fe),this.atimeMs||=Date.now(),this.mtimeMs||=Date.now(),this.ctimeMs||=Date.now(),this.birthtimeMs||=Date.now(),this.ino&&!this.nlink&&bt(`Inode ${this.ino} has an nlink of 0`)}#e=je(this,B,void 0);get data(){return this.#e}set data(ve){this.#e=ve}#t=(je(this,J),je(this,H,void 0));get __data_old(){return this.#t}set __data_old(ve){this.#t=ve}#i=(je(this,D),je(this,ne,void 0));get size(){return this.#i}set size(ve){this.#i=ve}#r=(je(this,L),je(this,X,void 0));get mode(){return this.#r}set mode(ve){this.#r=ve}#n=(je(this,_e),je(this,ae,void 0));get nlink(){return this.#n}set nlink(ve){this.#n=ve}#s=(je(this,de),je(this,j,void 0));get uid(){return this.#s}set uid(ve){this.#s=ve}#a=(je(this,Y),je(this,we,void 0));get gid(){return this.#a}set gid(ve){this.#a=ve}#o=(je(this,Ee),je(this,Oe,void 0));get atimeMs(){return this.#o}set atimeMs(ve){this.#o=ve}#l=(je(this,ee),je(this,ce,void 0));get birthtimeMs(){return this.#l}set birthtimeMs(ve){this.#l=ve}#c=(je(this,le),je(this,M,void 0));get mtimeMs(){return this.#c}set mtimeMs(ve){this.#c=ve}#u=(je(this,$),je(this,pe,void 0));get ctimeMs(){return this.#u}set ctimeMs(ve){this.#u=ve}#f=(je(this,ye),je(this,N,void 0));get ino(){return this.#f}set ino(ve){this.#f=ve}#d=(je(this,P),je(this,te,void 0));get __ino_old(){return this.#d}set __ino_old(ve){this.#d=ve}#h=(je(this,Ue),je(this,Pe,void 0));get flags(){return this.#h}set flags(ve){this.#h=ve}#_=(je(this,it),je(this,c,void 0));get __after_flags(){return this.#_}set __after_flags(ve){this.#_=ve}#m=(je(this,l),je(this,T,void 0));get version(){return this.#m}set version(ve){this.#m=ve}#y=(je(this,v),je(this,U,void 0));get __padding(){return this.#y}set __padding(ve){this.#y=ve}#g=(je(this,se),je(this,Re,void 0));get attributes(){return this.#g}set attributes(ve){this.#g=ve}#p=(je(this,he),je(this,Fe,void 0));get __data(){return this.#p}set __data(ve){this.#p=ve}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Yo(this,jr),attributes:this.attributes}}toStats(){return new Pi(this)}update(ve){if(!ve)return!1;let fe=!1;for(const Be of jr)ve[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==ve[Be]&&(Be=="atimeMs"&&this.flags&jt.NoAtime||(this[Be]=ve[Be],fe=!0)));return ve.attributes&&(this.attributes.copyFrom(ve.attributes),fe=!0),fe&&(this.ctimeMs=Date.now()),fe}};return Bt=x})();function Fa(e){return(e.mode&ct)===qt}function Dt(e){return(e.mode&ct)===rt}function Zi(e){return(e.mode&ct)===Ci}function tn(e){return(e.mode&ct)===er}function rn(e){return(e.mode&ct)===qi}function He(e,t,i){const{credentials:r}=Jt(e);if(Zi(t)||r.euid===0||r.egid===0)return!0;let n=0;return r.uid===t.uid&&(t.mode&al&&(n|=wt),t.mode&ol&&(n|=Et),t.mode&ll&&(n|=_n)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&cl&&(n|=wt),t.mode&ul&&(n|=Et),t.mode&fl&&(n|=_n)),t.mode&dl&&(n|=wt),t.mode&hl&&(n|=Et),t.mode&_l&&(n|=_n),(n&i)===i}function ja(e,t,i){let r=!0;return!isNaN(t)&&t>=0&&t<Xt?e.uid=t:r=!1,!isNaN(i)&&i>=0&&i<Xt?e.gid=i:r=!1,r}const $a=1;class gn extends Map{maxSize=Xt;toJSON(){return{version:$a,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,i])=>[t,i.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*at(tt);for(const i of this.values())t+=i.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[i,r]of this)if(r.ino==t||r.data==t)return i}getByID(t){return this.entryByID(t)?.inode}entryByID(t){for(const[i,r]of this)if(r.ino==t||r.data==t)return{path:i,inode:r}}directoryEntries(t){const i=this.get(t);if(!i)throw V("ENOENT");if((i.mode&ct)!=rt)throw V("ENOTDIR");const r={};for(const n of this.keys())Je(n)==t&&n!=t&&(r[ci(n)]=this.get(n).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[i,r]of this){if((r.mode&ct)!=rt)continue;const n={};for(const s of this.keys())Je(s)==i&&s!=i&&(n[ci(s)]=this.get(s).ino);t.set(i,n)}return t}fromJSON(t){if(t.version!=$a)throw V("EINVAL","Index version mismatch");this.clear();for(const[i,r]of Object.entries(t.entries))r.data??=cu(1,Xt),i=="/"&&(r.ino=0),this.set(i,new tt(r));return this}static parse(t){if(!ou(t))throw V("EINVAL","Invalid JSON");const i=JSON.parse(t),r=new gn;return r.fromJSON(i),r}}const Un=4096;class zi{type;name;label;_mountPoint;_uuid=crypto.randomUUID();get uuid(){return this._uuid}attributes=new Map;constructor(t,i){this.type=t,this.name=i,this.streamRead===zi.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===zi.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){return`${this.name} ${this.label?JSON.stringify(this.label):""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(i){return i.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(i){return i.code!="ENOENT"}}streamRead(t,i){return new ReadableStream({start:async r=>{const{size:n}=await this.stat(t),{start:s=0,end:o=n}=i;for(let a=s;a<o;a+=Un){const d=a+Un>o?o-a:Un,u=new Uint8Array(d);await this.read(t,u,a,a+d).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,i){let r=i.start??0;return new WritableStream({write:async(n,s)=>{let o=!1;const a=u=>{o=!0,s.error(u)},{size:d}=await this.stat(t);await this.write(t,n,r).catch(a),!o&&(r+=n.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(d,r)}).catch(a))}})}}class rf{id;_size;options;regions=[];get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let i=this.regions.length-1;i>=0;i--){const r=this.regions[i];if(r.offset>=t){this.regions.splice(i,1);continue}const n=t-r.offset;r.data.byteLength>n&&(r.data=r.data.subarray(0,n)),r.ranges=r.ranges.filter(s=>s.start<t).map(s=>s.end>t?{start:s.start,end:t}:s)}}constructor(t,i,r,n){this.id=t,this._size=i,this.options=r,r.sparse??=!0,r.sparse||this.regions.push({offset:0,data:new Uint8Array(i),ranges:[]}),n?.set(t,this)}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let i=0;i<this.regions.length-1;){const r=this.regions[i],n=this.regions[i+1];if(n.offset-(r.offset+r.data.byteLength)>t){i++;continue}r.ranges.push(...n.ranges),r.ranges.sort((s,o)=>s.start-o.start),r.ranges=r.ranges.reduce((s,o)=>(!s.length||s.at(-1).end<o.start?s.push(o):s.at(-1).end=Math.max(s.at(-1).end,o.end),s),[]),r.data=Fr(r.data,n.offset+n.data.byteLength),r.data.set(n.data,n.offset-r.offset),this.regions.splice(i+1,1)}}missing(t,i){const r=[];for(const n of this.regions){if(n.offset>=i)break;for(const s of n.ranges)if(!(s.end<=t)&&(s.start>=i||(s.start>t&&r.push({start:t,end:Math.min(s.start,i)}),s.end>t&&(t=Math.max(t,s.end)),t>=i)))break;if(t>=i)break}return t<i&&r.push({start:t,end:i}),r}cached(t,i){const r=[];for(const s of this.regions){if(s.offset>=i)break;for(const o of s.ranges)if(!(o.end<=t)){if(o.start>=i)break;r.push({start:Math.max(t,o.start),end:Math.min(i,o.end)})}}r.sort((s,o)=>s.start-o.start);const n=[];for(const s of r){const o=n.at(-1);o&&s.start<=o.end?o.end=Math.max(o.end,s.end):n.push(s)}return n}regionAt(t){if(this.regions.length)for(const i of this.regions){if(i.offset>t)break;if(t>=i.offset&&t<i.offset+i.data.byteLength)return i}}add(t,i){const r=i+t.byteLength,n=this.regionAt(i);if(n)return n.data=Fr(n.data,r),n.data.set(t,i),n.ranges.push({start:i,end:r}),n.ranges.sort((a,d)=>a.start-d.start),this.collect(),this;const s={data:t,offset:i,ranges:[{start:i,end:r}]},o=this.regions.findIndex(a=>a.offset>i);return o==-1?this.regions.push(s):this.regions.splice(o,0,s),this.collect(),this}}Promise.withResolvers??=(bt("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}});Symbol.dispose??=(bt("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose"));Symbol.asyncDispose??=(bt("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose"));globalThis.crypto.randomUUID??=(bt("Using a polyfill of crypto.randomUUID"),function(){const t=crypto.getRandomValues(new Uint8Array(16));t[6]=t[6]&15|64,t[8]=t[8]&63|128;const i=[...t].map(r=>r.toString(16).padStart(2,"0")).join("");return`${i.slice(0,8)}-${i.slice(8,12)}-${i.slice(12,16)}-${i.slice(16,20)}-${i.slice(20)}`});Uint8Array.prototype.toBase64??=(bt("Using a polyfill of Uint8Array.prototype.toBase64"),function(){return btoa(String.fromCharCode(...this))});Uint8Array.fromBase64??=(bt("Using a polyfill of Uint8Array.fromBase64"),function(t){const i=atob(t),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r});Uint8Array.prototype.toHex??=(bt("Using a polyfill of Uint8Array.prototype.toHex"),function(){return[...this].map(t=>t.toString(16).padStart(2,"0")).join("")});Uint8Array.fromHex??=(bt("Using a polyfill of Uint8Array.fromHex"),function(t){const i=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)i[r/2]=parseInt(t.slice(r,r+2),16);return i});class Al{store;constructor(t){this.store=t}}class nf extends Al{async get(t,i,r){return this.getSync(t,i,r)}async set(t,i,r){return this.setSync(t,i,r)}async remove(t){return this.removeSync(t)}}class Wa extends Al{asyncDone=Promise.resolve();async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,i){this.store.cache??=new Map;const r=this.store.cache.get(t);return r?(i&&(r.size=i.size),r):i?new rf(t,i.size,{},this.store.cache):void 0}getSync(t,i,r){const n=this._cached(t);if(!n)return;r??=n.size;const s=n.missing(i,r);for(const{start:a,end:d}of s)this.async(this.get(t,a,d));if(s.length)throw V("EAGAIN");const o=n.regionAt(i);if(!o){bt("Missing cache region for "+t);return}return o.data.subarray(i-o.offset,r-o.offset)}setSync(t,i,r){this.async(this.set(t,i,r))}removeSync(t){this.async(this.remove(t)),this.store.cache?.delete(t)}}class sf{raw;fs;done=!1;flag(t){return this.raw.store.flags?.includes(t)??!1}constructor(t,i){this.raw=t,this.fs=i}originalData=new Map;modifiedKeys=new Set;keys(){return this.raw.keys()}async get(t,i=0,r){const n=await this.raw.get(t,i,r);return this.stash(t),n}getSync(t,i=0,r){const n=this.raw.getSync(t,i,r);return this.stash(t),n}async set(t,i,r=0){await this.markModified(t,r,i.byteLength);const n=i instanceof Uint8Array?i:new Uint8Array(i.buffer,i.byteOffset,i.byteLength);await this.raw.set(t,n,r)}setSync(t,i,r=0){this.markModifiedSync(t,r,i.byteLength);const n=i instanceof Uint8Array?i:new Uint8Array(i.buffer,i.byteOffset,i.byteLength);this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,i]of this.originalData)if(this.modifiedKeys.has(t)){if(i.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of i.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,i]of this.originalData)if(this.modifiedKeys.has(t)){if(i.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of i.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,i,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:i,offset:r})}async markModified(t,i,r){this.modifiedKeys.add(t);const n=r?i+r:void 0;try{this.stash(t,await this.raw.get(t,i,n),i)}catch(s){if(!(this.raw instanceof Wa))throw s;const a=this.raw._cached(t);if(!a)throw s;for(const d of a.cached(i,n??i))this.stash(t,await this.raw.get(t,d.start,d.end),d.start)}}markModifiedSync(t,i,r){this.modifiedKeys.add(t);const n=r?i+r:void 0;try{this.stash(t,this.raw.getSync(t,i,n),i)}catch(s){if(!(this.raw instanceof Wa))throw s;const a=this.raw._cached(t);if(!a)throw s;for(const d of a.cached(i,n??i))this.stash(t,this.raw.getSync(t,d.start,d.end),d.start)}}}var ut=function(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t},ft=(function(e){return function(t){function i(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(a){return i(a),s()})}else n|=1}catch(a){i(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}})(typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class $s extends zi{store;_ids=new Map([["/",0]]);_paths=new Map([[0,new Set("/")]]);_path(t){const[i]=this._paths.get(t)??[];return i}_add(t,i){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(i),this._ids.set(i,t)}_remove(t){for(const i of this._paths.get(t)??[])this._ids.delete(i);this._paths.delete(t)}_move(t,i){const r=[];for(const[n,s]of this._ids){const o=xl(t,n);if(o.startsWith(".."))continue;let a=st(i,o);a.endsWith("/")&&(a=a.slice(0,-1)),r.push({oldKey:n,newKey:a,ino:s})}for(const{oldKey:n,newKey:s,ino:o}of r){this._ids.delete(n),this._ids.set(s,o);const a=this._paths.get(o);if(!a){bt("Missing paths in table for ino "+o);continue}a.delete(n),a.add(s)}}_initialized=!1;async ready(){this._initialized||(this.attributes.has("no_async_preload")||this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){super(t.type??1802921587,t.name),this.store=t,t.fs=this,this._uuid=t.uuid??this.uuid,this.label=t.label,oi(this.name+": supports features: "+this.store.flags?.join(", "))}usage(){return this.store.usage?.()||{totalSpace:0,freeSpace:0}}async loadIndex(t){const i={stack:[],error:void 0,hasError:!1};try{const r=ut(i,this.transaction(),!0),n=t.directories();for(const[s,o]of t)this._add(o.ino,s),await r.set(o.ino,o),n.has(s)&&await r.set(o.data,Qt(n.get(s)));await r.commit()}catch(r){i.error=r,i.hasError=!0}finally{const r=ft(i);r&&await r}}loadIndexSync(t){const i={stack:[],error:void 0,hasError:!1};try{const r=ut(i,this.transaction(),!1),n=t.directories();for(const[s,o]of t)this._add(o.ino,s),r.setSync(o.ino,o),n.has(s)&&r.setSync(o.data,Qt(n.get(s)));r.commitSync()}catch(r){i.error=r,i.hasError=!0}finally{ft(i)}}async createIndex(){const t={stack:[],error:void 0,hasError:!1};try{const i=new gn,r=ut(t,this.transaction(),!0),n=[["/",0]],s=Ra(V("EDEADLK"));for(;n.length;){const[o,a]=n.shift(),d=new tt(await r.get(a));if(i.set(o,d),d.mode&rt){const u=Nt(await r.get(d.data)??Xe(V("ENODATA")));for(const[h,f]of Object.entries(u))n.push([st(o,h),f])}}return s(),i}catch(i){t.error=i,t.hasError=!0}finally{const i=ft(t);i&&await i}}createIndexSync(){const t={stack:[],error:void 0,hasError:!1};try{const i=new gn,r=ut(t,this.transaction(),!1),n=[["/",0]],s=Ra(V("EDEADLK"));for(;n.length;){const[o,a]=n.shift(),d=new tt(r.getSync(a));if(i.set(o,d),d.mode&rt){const u=Nt(r.getSync(d.data)??Xe(V("ENODATA")));for(const[h,f]of Object.entries(u))n.push([st(o,h),f])}}return s(),i}catch(i){t.error=i,t.hasError=!0}finally{ft(t)}}async rename(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!0),s=Rt(t),o=Rt(i),a=await this.findInode(n,s.dir),d=Nt(await n.get(a.data)??Xe(V("ENODATA")));if(!d[s.base])throw V("ENOENT");const u=d[s.base];if(u!=this._ids.get(t)&&pt(`Ino mismatch while renaming ${t} to ${i}`),delete d[s.base],(o.dir+"/").startsWith(t+"/"))throw V("EBUSY");const h=o.dir==s.dir,f=h?a:await this.findInode(n,o.dir),E=h?d:Nt(await n.get(f.data)??Xe(V("ENODATA")));if(E[o.base]){const g=new tt(await n.get(E[o.base])??Xe(V("ENOENT")));if(!Fa(g))throw V("EISDIR");await n.remove(g.data),await n.remove(E[o.base])}E[o.base]=u,await n.set(a.data,Qt(d)),await n.set(f.data,Qt(E)),await n.commit(),this._move(t,i)}catch(n){r.error=n,r.hasError=!0}finally{const n=ft(r);n&&await n}}renameSync(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!1),s=Rt(t),o=Rt(i),a=this.findInodeSync(n,s.dir),d=Nt(n.getSync(a.data)??Xe(V("ENODATA")));if(!d[s.base])throw V("ENOENT");const u=d[s.base];if(u!=this._ids.get(t)&&pt(`Ino mismatch while renaming ${t} to ${i}`),delete d[s.base],(o.dir+"/").startsWith(t+"/"))throw V("EBUSY");const h=o.dir===s.dir,f=h?a:this.findInodeSync(n,o.dir),E=h?d:Nt(n.getSync(f.data)??Xe(V("ENODATA")));if(E[o.base]){const g=new tt(n.getSync(E[o.base])??Xe(V("ENOENT")));if(!Fa(g))throw V("EISDIR");n.removeSync(g.data),n.removeSync(E[o.base])}E[o.base]=u,n.setSync(a.data,Qt(d)),n.setSync(f.data,Qt(E)),n.commitSync(),this._move(t,i)}catch(n){r.error=n,r.hasError=!0}finally{ft(r)}}async stat(t){const i={stack:[],error:void 0,hasError:!1};try{const r=ut(i,this.transaction(),!0);return await this.findInode(r,t)}catch(r){i.error=r,i.hasError=!0}finally{const r=ft(i);r&&await r}}statSync(t){const i={stack:[],error:void 0,hasError:!1};try{const r=ut(i,this.transaction(),!1);return this.findInodeSync(r,t)}catch(r){i.error=r,i.hasError=!0}finally{ft(i)}}async touch(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!0),s=await this.findInode(n,t);s.update(i)&&(this._add(s.ino,t),n.setSync(s.ino,s)),await n.commit()}catch(n){r.error=n,r.hasError=!0}finally{const n=ft(r);n&&await n}}touchSync(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!1),s=this.findInodeSync(n,t);s.update(i)&&(this._add(s.ino,t),n.setSync(s.ino,s)),n.commitSync()}catch(n){r.error=n,r.hasError=!0}finally{ft(r)}}async createFile(t,i){return i.mode|=qt,await this.commitNew(t,i,new Uint8Array)}createFileSync(t,i){return i.mode|=qt,this.commitNewSync(t,i,new Uint8Array)}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw V("ENOTEMPTY");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw V("ENOTEMPTY");this.removeSync(t,!0)}async mkdir(t,i){return i.mode|=rt,await this.commitNew(t,i,Ai("{}"))}mkdirSync(t,i){return i.mode|=rt,this.commitNewSync(t,i,Ai("{}"))}async readdir(t){const i={stack:[],error:void 0,hasError:!1};try{const r=ut(i,this.transaction(),!0),n=await this.findInode(r,t);return Object.keys(Nt(await r.get(n.data)??Xe(V("ENOENT"))))}catch(r){i.error=r,i.hasError=!0}finally{const r=ft(i);r&&await r}}readdirSync(t){const i={stack:[],error:void 0,hasError:!1};try{const r=ut(i,this.transaction(),!1),n=this.findInodeSync(r,t);return Object.keys(Nt(r.getSync(n.data)??Xe(V("ENOENT"))))}catch(r){i.error=r,i.hasError=!0}finally{ft(i)}}async sync(){}syncSync(){}async link(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!0),s=Je(i),o=await this.findInode(n,s),a=Nt(await n.get(o.data)??Xe(V("ENOENT"))),d=await this.findInode(n,t);d.nlink++,a[ci(i)]=d.ino,this._add(d.ino,i),await n.set(d.ino,d),await n.set(o.data,Qt(a)),await n.commit()}catch(n){r.error=n,r.hasError=!0}finally{const n=ft(r);n&&await n}}linkSync(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!1),s=Je(i),o=this.findInodeSync(n,s),a=Nt(n.getSync(o.data)??Xe(V("ENOENT"))),d=this.findInodeSync(n,t);d.nlink++,a[ci(i)]=d.ino,this._add(d.ino,i),n.setSync(d.ino,d),n.setSync(o.data,Qt(a)),n.commitSync()}catch(n){r.error=n,r.hasError=!0}finally{ft(r)}}async read(t,i,r,n){const s={stack:[],error:void 0,hasError:!1};try{const o=ut(s,this.transaction(),!0),a=await this.findInode(o,t);if(a.size==0)return;const d=await o.get(a.data,r,n)??Xe(V("ENODATA")),u=o.flag("partial")?d:d.subarray(r,n);u.byteLength>i.byteLength&&pt(`Trying to place ${u.byteLength} bytes into a ${i.byteLength} byte buffer on read`),i.set(u)}catch(o){s.error=o,s.hasError=!0}finally{const o=ft(s);o&&await o}}readSync(t,i,r,n){const s={stack:[],error:void 0,hasError:!1};try{const o=ut(s,this.transaction(),!1),a=this.findInodeSync(o,t);if(a.size==0)return;const d=o.getSync(a.data,r,n)??Xe(V("ENODATA")),u=o.flag("partial")?d:d.subarray(r,n);u.byteLength>i.byteLength&&pt(`Trying to place ${u.byteLength} bytes into a ${i.byteLength} byte buffer on read`),i.set(u)}catch(o){s.error=o,s.hasError=!0}finally{ft(s)}}async write(t,i,r){const n={stack:[],error:void 0,hasError:!1};try{const s=ut(n,this.transaction(),!0),o=await this.findInode(s,t);let a=i;s.flag("partial")||(a=Fr(await s.get(o.data)??new Uint8Array,r+i.byteLength),a.set(i,r),r=0),await s.set(o.data,a,r),this._add(o.ino,t),await s.commit()}catch(s){n.error=s,n.hasError=!0}finally{const s=ft(n);s&&await s}}writeSync(t,i,r){const n={stack:[],error:void 0,hasError:!1};try{const s=ut(n,this.transaction(),!1),o=this.findInodeSync(s,t);let a=i;s.flag("partial")||(a=Fr(s.getSync(o.data)??new Uint8Array,r+i.byteLength),a.set(i,r),r=0),s.setSync(o.data,a,r),this._add(o.ino,t),s.commitSync()}catch(s){n.error=s,n.hasError=!0}finally{ft(n)}}transaction(){return new sf(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const i=ut(t,this.transaction(),!0);if(await i.get(Ft))return;const r=new tt({ino:Ft,data:1,mode:511|rt});await i.set(r.data,Ai("{}")),this._add(Ft,"/"),await i.set(Ft,r),await i.commit()}catch(i){t.error=i,t.hasError=!0}finally{const i=ft(t);i&&await i}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const i=ut(t,this.transaction(),!1);if(i.getSync(Ft))return;const r=new tt({ino:Ft,data:1,mode:511|rt});i.setSync(r.data,Ai("{}")),this._add(Ft,"/"),i.setSync(Ft,r),i.commitSync()}catch(i){t.error=i,t.hasError=!0}finally{ft(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){bt("Attempted to populate tables after initialization");return}oi("Populating tables with existing store metadata");const i=ut(t,this.transaction(),!0),r=await i.get(Ft);if(!r){Ls("Store does not have a root inode");const a=new tt({ino:Ft,data:1,mode:511|rt});await i.set(a.data,Ai("{}")),this._add(Ft,"/"),await i.set(Ft,a),await i.commit();return}if(r.length<at(tt)){pi("Store contains an invalid root inode. Refusing to populate tables");return}const n=new Set;let s=0;const o=[["/",Ft]];for(;o.length>0;){s++;const[a,d]=o.shift();this._add(d,a);const u=await i.get(d);if(!u){bt("Store is missing data for inode: "+d);continue}if(u.length<at(tt)){bt(`Invalid inode size for ino ${d}: ${u.length}`);continue}const h=new tt(u);if((h.mode&rt)!=rt||n.has(d))continue;n.add(d);const f=await i.get(h.data);if(!f){bt("Store is missing directory data: "+h.data);continue}const E=Nt(f);for(const[g,b]of Object.entries(E))o.push([st(a,g),b])}oi(`Added ${s} existing inode(s) from store`)}catch(i){t.error=i,t.hasError=!0}finally{const i=ft(t);i&&await i}}async _findInode(t,i,r=new Set){if(r.has(i))throw pi(V("EIO","Infinite loop detected while finding inode"));if(r.add(i),i=="/")return new tt(await t.get(Ft)??Xe(V("ENODATA")));const{dir:n,base:s}=Rt(i),o=await this._findInode(t,n,r),a=Nt(await t.get(o.data)??Xe(V("ENODATA")));if(!(s in a))throw V("ENOENT");return new tt(await t.get(a[s])??Xe(V("ENODATA")))}_findInodeSync(t,i,r=new Set){if(r.has(i))throw pi(V("EIO","Infinite loop detected while finding inode"));if(r.add(i),i=="/")return new tt(t.getSync(Ft)??Xe(V("ENOENT")));const{dir:n,base:s}=Rt(i),o=this._findInodeSync(t,n,r),a=Nt(t.getSync(o.data)??Xe(V("ENODATA")));if(!(s in a))throw V("ENOENT");return new tt(t.getSync(a[s])??Xe(V("ENODATA")))}async findInode(t,i){if(this.attributes.has("no_id_tables"))return await this._findInode(t,i);const r=this._ids.get(i);if(r===void 0)throw V("ENOENT");return new tt(await t.get(r)??Xe(V("ENOENT")))}findInodeSync(t,i){if(this.attributes.has("no_id_tables"))return this._findInodeSync(t,i);const r=this._ids.get(i);if(r===void 0)throw V("ENOENT");return new tt(t.getSync(r)??Xe(V("ENOENT")))}_lastID;allocNew(t){this._lastID??=Math.max(...this._paths.keys()),this._lastID+=2;const i=this._lastID;if(i>Xt)throw pt(V("ENOSPC","No IDs available"));return this._add(i,t),i}async commitNew(t,i,r){const n={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw V("EEXIST");const s=ut(n,this.transaction(),!0),{dir:o,base:a}=Rt(t),d=await this.findInode(s,o),u=Nt(await s.get(d.data)??Xe(V("ENOENT")));if(u[a])throw V("EEXIST");const h=this.allocNew(t),f=new tt({...i,ino:h,data:h+1,size:r.byteLength,nlink:1});return await s.set(f.ino,f),await s.set(f.data,r),u[a]=f.ino,await s.set(d.data,Qt(u)),await s.commit(),f}catch(s){n.error=s,n.hasError=!0}finally{const s=ft(n);s&&await s}}commitNewSync(t,i,r){const n={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw V("EEXIST");const s=ut(n,this.transaction(),!1),{dir:o,base:a}=Rt(t),d=this.findInodeSync(s,o),u=Nt(s.getSync(d.data)??Xe(V("ENOENT")));if(u[a])throw V("EEXIST");const h=this.allocNew(t),f=new tt({...i,ino:h,data:h+1,size:r.byteLength,nlink:1});return s.setSync(f.ino,f),s.setSync(f.data,r),u[a]=f.ino,s.setSync(d.data,Qt(u)),s.commitSync(),f}catch(s){n.error=s,n.hasError=!0}finally{ft(n)}}async remove(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!0),{dir:s,base:o}=Rt(t),a=await this.findInode(n,s),d=Nt(await n.get(a.data)??Xe(V("ENOENT")));if(!d[o])throw V("ENOENT");const u=d[o],h=new tt(await n.get(u)??Xe(V("ENOENT")));if(delete d[o],!i&&Dt(h))throw V("EISDIR");await n.set(a.data,Qt(d)),h.nlink>1?(h.update({nlink:h.nlink-1}),await n.set(h.ino,h)):(await n.remove(h.data),await n.remove(u),this._remove(u)),await n.commit()}catch(n){r.error=n,r.hasError=!0}finally{const n=ft(r);n&&await n}}removeSync(t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=ut(r,this.transaction(),!1),{dir:s,base:o}=Rt(t),a=this.findInodeSync(n,s),d=Nt(n.getSync(a.data)??Xe(V("ENOENT"))),u=d[o];if(!u)throw V("ENOENT");const h=new tt(n.getSync(u)??Xe(V("ENOENT")));if(delete d[o],!i&&Dt(h))throw V("EISDIR");n.setSync(a.data,Qt(d)),h.nlink>1?(h.update({nlink:h.nlink-1}),n.setSync(h.ino,h)):(n.removeSync(h.data),n.removeSync(u),this._remove(u)),n.commitSync()}catch(n){r.error=n,r.hasError=!0}finally{ft(r)}}}class Dl extends nf{async keys(){return this.store.keys()}async get(t){return await(this.store.getAsync?.(t)??this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,i){this.store.set(t,i)}removeSync(t){this.store.delete(t)}}class Tl extends Map{maxSize;label;flags=[];name="tmpfs";constructor(t=Xt,i){super(),this.maxSize=t,this.label=i}async sync(){}transaction(){return new Dl(this)}get bytes(){let t=this.size*4;for(const i of this.values())t+=i.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const af={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const i=new $s(new Tl(e,t));return i.checkRootSync(),i}},of=af;class lf extends $s{devices=new Map;devicesWithDriver(t,i){if(i&&typeof t=="string")throw pt(V("EINVAL","Can not fetch devices using only a driver name"));const r=[];for(const n of this.devices.values()){if(i&&n.driver!=t)continue;(typeof t=="string"?t:t.name)==n.driver.name&&r.push(n)}return r}_createDevice(t,i={}){let r=1;const n=Array.from(this.devices.values()).at(-1);for(;this.store.has(r)||n?.inode.ino==r;)r++;const s=t.init?.(r,i),o={data:{},minor:0,major:0,...Xo(s??{},"metadata"),driver:t,inode:new tt({mode:qi|438,...s?.metadata})},a="/"+(o.name||t.name)+(t.singleton?"":this.devicesWithDriver(t).length);if(this.existsSync(a))throw V("EEXIST");return this.devices.set(a,o),In("Initialized device: "+this._mountPoint+a),o}addDefaults(){this._createDevice(cf),this._createDevice(uf),this._createDevice(ff),this._createDevice(df),this._createDevice(hf),oi("Added default devices")}constructor(){super(new Tl(16777216,"devfs"))}async rename(t,i){if(this.devices.has(t))throw V("EPERM");if(this.devices.has(i))throw V("EEXIST");return super.rename(t,i)}renameSync(t,i){if(this.devices.has(t))throw V("EPERM");if(this.devices.has(i))throw V("EEXIST");return super.renameSync(t,i)}async stat(t){const i=this.devices.get(t);return i?i.inode:super.stat(t)}statSync(t){const i=this.devices.get(t);return i?i.inode:super.statSync(t)}async touch(t,i){const r=this.devices.get(t);r?r.inode.update(i):await super.touch(t,i)}touchSync(t,i){const r=this.devices.get(t);r?r.inode.update(i):super.touchSync(t,i)}async createFile(t,i){if(this.devices.has(t))throw V("EEXIST");return super.createFile(t,i)}createFileSync(t,i){if(this.devices.has(t))throw V("EEXIST");return super.createFileSync(t,i)}async unlink(t){if(this.devices.has(t))throw V("EPERM");return super.unlink(t)}unlinkSync(t){if(this.devices.has(t))throw V("EPERM");return super.unlinkSync(t)}async rmdir(t){return super.rmdir(t)}rmdirSync(t){return super.rmdirSync(t)}async mkdir(t,i){if(this.devices.has(t))throw V("EEXIST");return super.mkdir(t,i)}mkdirSync(t,i){if(this.devices.has(t))throw V("EEXIST");return super.mkdirSync(t,i)}async readdir(t){const i=await super.readdir(t);for(const r of this.devices.keys())Je(r)==t&&i.push(ci(r));return i}readdirSync(t){const i=super.readdirSync(t);for(const r of this.devices.keys())Je(r)==t&&i.push(ci(r));return i}async link(t,i){if(this.devices.has(t))throw V("EPERM");if(this.devices.has(i))throw V("EEXIST");return super.link(t,i)}linkSync(t,i){if(this.devices.has(t))throw V("EPERM");if(this.devices.has(i))throw V("EEXIST");return super.linkSync(t,i)}async sync(){for(const t of this.devices.values())t.driver.sync?.(t);return super.sync()}syncSync(){for(const t of this.devices.values())t.driver.sync?.(t);return super.syncSync()}async read(t,i,r,n){const s=this.devices.get(t);if(!s){await super.read(t,i,r,n);return}s.driver.read(s,i,r,n)}readSync(t,i,r,n){const s=this.devices.get(t);if(!s){super.readSync(t,i,r,n);return}s.driver.read(s,i,r,n)}async write(t,i,r){const n=this.devices.get(t);if(!n)return await super.write(t,i,r);n.driver.write(n,i,r)}writeSync(t,i,r){const n=this.devices.get(t);if(!n)return super.writeSync(t,i,r);n.driver.write(n,i,r)}}const Nl=new Uint8Array,cf={name:"null",singleton:!0,init(){return{major:1,minor:3}},read(){return Nl},write(){}},uf={name:"zero",singleton:!0,init(){return{major:1,minor:5}},read(e,t,i,r){t.fill(0,i,r)},write(){}},ff={name:"full",singleton:!0,init(){return{major:1,minor:7}},read(e,t,i,r){t.fill(0,i,r)},write(){throw V("ENOSPC")}},df={name:"random",singleton:!0,init(){return{major:1,minor:8}},read(e,t){for(let i=0;i<t.length;i++)t[i]=Math.floor(Math.random()*256)},write(){}},hf={name:"console",singleton:!0,init(e,{output:t=i=>console.log(i)}={}){return{major:5,minor:1,data:{output:t}}},read(){return Nl},write(e,t,i){const r=bi(t);e.data.output(r,i)}};var Fn={},Lr={},Va;function _f(){if(Va)return Lr;Va=1,Lr.byteLength=a,Lr.toByteArray=u,Lr.fromByteArray=E;for(var e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,s=r.length;n<s;++n)e[n]=r[n],t[r.charCodeAt(n)]=n;t[45]=62,t[95]=63;function o(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=g.indexOf("=");p===-1&&(p=b);var m=p===b?0:4-p%4;return[p,m]}function a(g){var b=o(g),p=b[0],m=b[1];return(p+m)*3/4-m}function d(g,b,p){return(b+p)*3/4-p}function u(g){var b,p=o(g),m=p[0],y=p[1],I=new i(d(g,m,y)),x=0,z=y>0?m-4:m,k;for(k=0;k<z;k+=4)b=t[g.charCodeAt(k)]<<18|t[g.charCodeAt(k+1)]<<12|t[g.charCodeAt(k+2)]<<6|t[g.charCodeAt(k+3)],I[x++]=b>>16&255,I[x++]=b>>8&255,I[x++]=b&255;return y===2&&(b=t[g.charCodeAt(k)]<<2|t[g.charCodeAt(k+1)]>>4,I[x++]=b&255),y===1&&(b=t[g.charCodeAt(k)]<<10|t[g.charCodeAt(k+1)]<<4|t[g.charCodeAt(k+2)]>>2,I[x++]=b>>8&255,I[x++]=b&255),I}function h(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function f(g,b,p){for(var m,y=[],I=b;I<p;I+=3)m=(g[I]<<16&16711680)+(g[I+1]<<8&65280)+(g[I+2]&255),y.push(h(m));return y.join("")}function E(g){for(var b,p=g.length,m=p%3,y=[],I=16383,x=0,z=p-m;x<z;x+=I)y.push(f(g,x,x+I>z?z:x+I));return m===1?(b=g[p-1],y.push(e[b>>2]+e[b<<4&63]+"==")):m===2&&(b=(g[p-2]<<8)+g[p-1],y.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),y.join("")}return Lr}var nn={};var qa;function mf(){return qa||(qa=1,nn.read=function(e,t,i,r,n){var s,o,a=n*8-r-1,d=(1<<a)-1,u=d>>1,h=-7,f=i?n-1:0,E=i?-1:1,g=e[t+f];for(f+=E,s=g&(1<<-h)-1,g>>=-h,h+=a;h>0;s=s*256+e[t+f],f+=E,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+e[t+f],f+=E,h-=8);if(s===0)s=1-u;else{if(s===d)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(g?-1:1)*o*Math.pow(2,s-r)},nn.write=function(e,t,i,r,n,s){var o,a,d,u=s*8-n-1,h=(1<<u)-1,f=h>>1,E=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,b=r?1:-1,p=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+f>=1?t+=E/d:t+=E*Math.pow(2,1-f),t*d>=2&&(o++,d/=2),o+f>=h?(a=0,o=h):o+f>=1?(a=(t*d-1)*Math.pow(2,n),o=o+f):(a=t*Math.pow(2,f-1)*Math.pow(2,n),o=0));n>=8;e[i+g]=a&255,g+=b,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;e[i+g]=o&255,g+=b,o/=256,u-=8);e[i+g-b]|=p*128}),nn}var Ga;function Bi(){return Ga||(Ga=1,(function(e){const t=_f(),i=mf(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=I,e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const w=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(w,c),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(w){if(w>n)throw new RangeError('The value "'+w+'" is invalid for option "size"');const c=new Uint8Array(w);return Object.setPrototypeOf(c,a.prototype),c}function a(w,c,l){if(typeof w=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(w)}return d(w,c,l)}a.poolSize=8192;function d(w,c,l){if(typeof w=="string")return E(w,c);if(ArrayBuffer.isView(w))return b(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(te(w,ArrayBuffer)||w&&te(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(w,SharedArrayBuffer)||w&&te(w.buffer,SharedArrayBuffer)))return p(w,c,l);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=w.valueOf&&w.valueOf();if(S!=null&&S!==w)return a.from(S,c,l);const T=m(w);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,c,l){return d(w,c,l)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function h(w,c,l){return u(w),w<=0?o(w):c!==void 0?typeof l=="string"?o(w).fill(c,l):o(w).fill(c):o(w)}a.alloc=function(w,c,l){return h(w,c,l)};function f(w){return u(w),o(w<0?0:y(w)|0)}a.allocUnsafe=function(w){return f(w)},a.allocUnsafeSlow=function(w){return f(w)};function E(w,c){if((typeof c!="string"||c==="")&&(c="utf8"),!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=x(w,c)|0;let S=o(l);const T=S.write(w,c);return T!==l&&(S=S.slice(0,T)),S}function g(w){const c=w.length<0?0:y(w.length)|0,l=o(c);for(let S=0;S<c;S+=1)l[S]=w[S]&255;return l}function b(w){if(te(w,Uint8Array)){const c=new Uint8Array(w);return p(c.buffer,c.byteOffset,c.byteLength)}return g(w)}function p(w,c,l){if(c<0||w.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let S;return c===void 0&&l===void 0?S=new Uint8Array(w):l===void 0?S=new Uint8Array(w,c):S=new Uint8Array(w,c,l),Object.setPrototypeOf(S,a.prototype),S}function m(w){if(a.isBuffer(w)){const c=y(w.length)|0,l=o(c);return l.length===0||w.copy(l,0,0,c),l}if(w.length!==void 0)return typeof w.length!="number"||Ue(w.length)?o(0):g(w);if(w.type==="Buffer"&&Array.isArray(w.data))return g(w.data)}function y(w){if(w>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return w|0}function I(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},a.compare=function(c,l){if(te(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),te(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(c)||!a.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let S=c.length,T=l.length;for(let v=0,_=Math.min(S,T);v<_;++v)if(c[v]!==l[v]){S=c[v],T=l[v];break}return S<T?-1:T<S?1:0},a.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let S;if(l===void 0)for(l=0,S=0;S<c.length;++S)l+=c[S].length;const T=a.allocUnsafe(l);let v=0;for(S=0;S<c.length;++S){let _=c[S];if(te(_,Uint8Array))v+_.length>T.length?(a.isBuffer(_)||(_=a.from(_)),_.copy(T,v)):Uint8Array.prototype.set.call(T,_,v);else if(a.isBuffer(_))_.copy(T,v);else throw new TypeError('"list" argument must be an Array of Buffers');v+=_.length}return T};function x(w,c){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||te(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const l=w.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&l===0)return 0;let T=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return ye(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return P(w).length;default:if(T)return S?-1:ye(w).length;c=(""+c).toLowerCase(),T=!0}}a.byteLength=x;function z(w,c,l){let S=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(w||(w="utf8");;)switch(w){case"hex":return de(this,c,l);case"utf8":case"utf-8":return W(this,c,l);case"ascii":return De(this,c,l);case"latin1":case"binary":return ae(this,c,l);case"base64":return L(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,c,l);default:if(S)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),S=!0}}a.prototype._isBuffer=!0;function k(w,c,l){const S=w[c];w[c]=w[l],w[l]=S}a.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)k(this,l,l+1);return this},a.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)k(this,l,l+3),k(this,l+1,l+2);return this},a.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)k(this,l,l+7),k(this,l+1,l+6),k(this,l+2,l+5),k(this,l+3,l+4);return this},a.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?W(this,0,c):z.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},a.prototype.inspect=function(){let c="";const l=e.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(c,l,S,T,v){if(te(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),S===void 0&&(S=c?c.length:0),T===void 0&&(T=0),v===void 0&&(v=this.length),l<0||S>c.length||T<0||v>this.length)throw new RangeError("out of range index");if(T>=v&&l>=S)return 0;if(T>=v)return-1;if(l>=S)return 1;if(l>>>=0,S>>>=0,T>>>=0,v>>>=0,this===c)return 0;let _=v-T,U=S-l;const se=Math.min(_,U),Se=this.slice(T,v),Re=c.slice(l,S);for(let he=0;he<se;++he)if(Se[he]!==Re[he]){_=Se[he],U=Re[he];break}return _<U?-1:U<_?1:0};function B(w,c,l,S,T){if(w.length===0)return-1;if(typeof l=="string"?(S=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Ue(l)&&(l=T?0:w.length-1),l<0&&(l=w.length+l),l>=w.length){if(T)return-1;l=w.length-1}else if(l<0)if(T)l=0;else return-1;if(typeof c=="string"&&(c=a.from(c,S)),a.isBuffer(c))return c.length===0?-1:J(w,c,l,S,T);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(w,c,l):Uint8Array.prototype.lastIndexOf.call(w,c,l):J(w,[c],l,S,T);throw new TypeError("val must be string, number or Buffer")}function J(w,c,l,S,T){let v=1,_=w.length,U=c.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(w.length<2||c.length<2)return-1;v=2,_/=2,U/=2,l/=2}function se(Re,he){return v===1?Re[he]:Re.readUInt16BE(he*v)}let Se;if(T){let Re=-1;for(Se=l;Se<_;Se++)if(se(w,Se)===se(c,Re===-1?0:Se-Re)){if(Re===-1&&(Re=Se),Se-Re+1===U)return Re*v}else Re!==-1&&(Se-=Se-Re),Re=-1}else for(l+U>_&&(l=_-U),Se=l;Se>=0;Se--){let Re=!0;for(let he=0;he<U;he++)if(se(w,Se+he)!==se(c,he)){Re=!1;break}if(Re)return Se}return-1}a.prototype.includes=function(c,l,S){return this.indexOf(c,l,S)!==-1},a.prototype.indexOf=function(c,l,S){return B(this,c,l,S,!0)},a.prototype.lastIndexOf=function(c,l,S){return B(this,c,l,S,!1)};function G(w,c,l,S){l=Number(l)||0;const T=w.length-l;S?(S=Number(S),S>T&&(S=T)):S=T;const v=c.length;S>v/2&&(S=v/2);let _;for(_=0;_<S;++_){const U=parseInt(c.substr(_*2,2),16);if(Ue(U))return _;w[l+_]=U}return _}function H(w,c,l,S){return oe(ye(c,w.length-l),w,l,S)}function D(w,c,l,S){return oe(me(c),w,l,S)}function C(w,c,l,S){return oe(P(c),w,l,S)}function ne(w,c,l,S){return oe(N(c,w.length-l),w,l,S)}a.prototype.write=function(c,l,S,T){if(l===void 0)T="utf8",S=this.length,l=0;else if(S===void 0&&typeof l=="string")T=l,S=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(S)?(S=S>>>0,T===void 0&&(T="utf8")):(T=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const v=this.length-l;if((S===void 0||S>v)&&(S=v),c.length>0&&(S<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");let _=!1;for(;;)switch(T){case"hex":return G(this,c,l,S);case"utf8":case"utf-8":return H(this,c,l,S);case"ascii":case"latin1":case"binary":return D(this,c,l,S);case"base64":return C(this,c,l,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,c,l,S);default:if(_)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),_=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(w,c,l){return c===0&&l===w.length?t.fromByteArray(w):t.fromByteArray(w.slice(c,l))}function W(w,c,l){l=Math.min(w.length,l);const S=[];let T=c;for(;T<l;){const v=w[T];let _=null,U=v>239?4:v>223?3:v>191?2:1;if(T+U<=l){let se,Se,Re,he;switch(U){case 1:v<128&&(_=v);break;case 2:se=w[T+1],(se&192)===128&&(he=(v&31)<<6|se&63,he>127&&(_=he));break;case 3:se=w[T+1],Se=w[T+2],(se&192)===128&&(Se&192)===128&&(he=(v&15)<<12|(se&63)<<6|Se&63,he>2047&&(he<55296||he>57343)&&(_=he));break;case 4:se=w[T+1],Se=w[T+2],Re=w[T+3],(se&192)===128&&(Se&192)===128&&(Re&192)===128&&(he=(v&15)<<18|(se&63)<<12|(Se&63)<<6|Re&63,he>65535&&he<1114112&&(_=he))}}_===null?(_=65533,U=1):_>65535&&(_-=65536,S.push(_>>>10&1023|55296),_=56320|_&1023),S.push(_),T+=U}return _e(S)}const X=4096;function _e(w){const c=w.length;if(c<=X)return String.fromCharCode.apply(String,w);let l="",S=0;for(;S<c;)l+=String.fromCharCode.apply(String,w.slice(S,S+=X));return l}function De(w,c,l){let S="";l=Math.min(w.length,l);for(let T=c;T<l;++T)S+=String.fromCharCode(w[T]&127);return S}function ae(w,c,l){let S="";l=Math.min(w.length,l);for(let T=c;T<l;++T)S+=String.fromCharCode(w[T]);return S}function de(w,c,l){const S=w.length;(!c||c<0)&&(c=0),(!l||l<0||l>S)&&(l=S);let T="";for(let v=c;v<l;++v)T+=et[w[v]];return T}function O(w,c,l){const S=w.slice(c,l);let T="";for(let v=0;v<S.length-1;v+=2)T+=String.fromCharCode(S[v]+S[v+1]*256);return T}a.prototype.slice=function(c,l){const S=this.length;c=~~c,l=l===void 0?S:~~l,c<0?(c+=S,c<0&&(c=0)):c>S&&(c=S),l<0?(l+=S,l<0&&(l=0)):l>S&&(l=S),l<c&&(l=c);const T=this.subarray(c,l);return Object.setPrototypeOf(T,a.prototype),T};function j(w,c,l){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+c>l)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(c,l,S){c=c>>>0,l=l>>>0,S||j(c,l,this.length);let T=this[c],v=1,_=0;for(;++_<l&&(v*=256);)T+=this[c+_]*v;return T},a.prototype.readUintBE=a.prototype.readUIntBE=function(c,l,S){c=c>>>0,l=l>>>0,S||j(c,l,this.length);let T=this[c+--l],v=1;for(;l>0&&(v*=256);)T+=this[c+--l]*v;return T},a.prototype.readUint8=a.prototype.readUInt8=function(c,l){return c=c>>>0,l||j(c,1,this.length),this[c]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||j(c,2,this.length),this[c]|this[c+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||j(c,2,this.length),this[c]<<8|this[c+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||j(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||j(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},a.prototype.readBigUInt64LE=Pe(function(c){c=c>>>0,M(c,"offset");const l=this[c],S=this[c+7];(l===void 0||S===void 0)&&$(c,this.length-8);const T=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,v=this[++c]+this[++c]*2**8+this[++c]*2**16+S*2**24;return BigInt(T)+(BigInt(v)<<BigInt(32))}),a.prototype.readBigUInt64BE=Pe(function(c){c=c>>>0,M(c,"offset");const l=this[c],S=this[c+7];(l===void 0||S===void 0)&&$(c,this.length-8);const T=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],v=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+S;return(BigInt(T)<<BigInt(32))+BigInt(v)}),a.prototype.readIntLE=function(c,l,S){c=c>>>0,l=l>>>0,S||j(c,l,this.length);let T=this[c],v=1,_=0;for(;++_<l&&(v*=256);)T+=this[c+_]*v;return v*=128,T>=v&&(T-=Math.pow(2,8*l)),T},a.prototype.readIntBE=function(c,l,S){c=c>>>0,l=l>>>0,S||j(c,l,this.length);let T=l,v=1,_=this[c+--T];for(;T>0&&(v*=256);)_+=this[c+--T]*v;return v*=128,_>=v&&(_-=Math.pow(2,8*l)),_},a.prototype.readInt8=function(c,l){return c=c>>>0,l||j(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},a.prototype.readInt16LE=function(c,l){c=c>>>0,l||j(c,2,this.length);const S=this[c]|this[c+1]<<8;return S&32768?S|4294901760:S},a.prototype.readInt16BE=function(c,l){c=c>>>0,l||j(c,2,this.length);const S=this[c+1]|this[c]<<8;return S&32768?S|4294901760:S},a.prototype.readInt32LE=function(c,l){return c=c>>>0,l||j(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},a.prototype.readInt32BE=function(c,l){return c=c>>>0,l||j(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},a.prototype.readBigInt64LE=Pe(function(c){c=c>>>0,M(c,"offset");const l=this[c],S=this[c+7];(l===void 0||S===void 0)&&$(c,this.length-8);const T=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(S<<24);return(BigInt(T)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),a.prototype.readBigInt64BE=Pe(function(c){c=c>>>0,M(c,"offset");const l=this[c],S=this[c+7];(l===void 0||S===void 0)&&$(c,this.length-8);const T=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(T)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+S)}),a.prototype.readFloatLE=function(c,l){return c=c>>>0,l||j(c,4,this.length),i.read(this,c,!0,23,4)},a.prototype.readFloatBE=function(c,l){return c=c>>>0,l||j(c,4,this.length),i.read(this,c,!1,23,4)},a.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||j(c,8,this.length),i.read(this,c,!0,52,8)},a.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||j(c,8,this.length),i.read(this,c,!1,52,8)};function Y(w,c,l,S,T,v){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>T||c<v)throw new RangeError('"value" argument is out of bounds');if(l+S>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(c,l,S,T){if(c=+c,l=l>>>0,S=S>>>0,!T){const U=Math.pow(2,8*S)-1;Y(this,c,l,S,U,0)}let v=1,_=0;for(this[l]=c&255;++_<S&&(v*=256);)this[l+_]=c/v&255;return l+S},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(c,l,S,T){if(c=+c,l=l>>>0,S=S>>>0,!T){const U=Math.pow(2,8*S)-1;Y(this,c,l,S,U,0)}let v=S-1,_=1;for(this[l+v]=c&255;--v>=0&&(_*=256);)this[l+v]=c/_&255;return l+S},a.prototype.writeUint8=a.prototype.writeUInt8=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,1,255,0),this[l]=c&255,l+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function K(w,c,l,S,T){be(c,S,T,w,l,7);let v=Number(c&BigInt(4294967295));w[l++]=v,v=v>>8,w[l++]=v,v=v>>8,w[l++]=v,v=v>>8,w[l++]=v;let _=Number(c>>BigInt(32)&BigInt(4294967295));return w[l++]=_,_=_>>8,w[l++]=_,_=_>>8,w[l++]=_,_=_>>8,w[l++]=_,l}function we(w,c,l,S,T){be(c,S,T,w,l,7);let v=Number(c&BigInt(4294967295));w[l+7]=v,v=v>>8,w[l+6]=v,v=v>>8,w[l+5]=v,v=v>>8,w[l+4]=v;let _=Number(c>>BigInt(32)&BigInt(4294967295));return w[l+3]=_,_=_>>8,w[l+2]=_,_=_>>8,w[l+1]=_,_=_>>8,w[l]=_,l+8}a.prototype.writeBigUInt64LE=Pe(function(c,l=0){return K(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Pe(function(c,l=0){return we(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(c,l,S,T){if(c=+c,l=l>>>0,!T){const se=Math.pow(2,8*S-1);Y(this,c,l,S,se-1,-se)}let v=0,_=1,U=0;for(this[l]=c&255;++v<S&&(_*=256);)c<0&&U===0&&this[l+v-1]!==0&&(U=1),this[l+v]=(c/_>>0)-U&255;return l+S},a.prototype.writeIntBE=function(c,l,S,T){if(c=+c,l=l>>>0,!T){const se=Math.pow(2,8*S-1);Y(this,c,l,S,se-1,-se)}let v=S-1,_=1,U=0;for(this[l+v]=c&255;--v>=0&&(_*=256);)c<0&&U===0&&this[l+v+1]!==0&&(U=1),this[l+v]=(c/_>>0)-U&255;return l+S},a.prototype.writeInt8=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},a.prototype.writeInt16LE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},a.prototype.writeInt16BE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},a.prototype.writeInt32LE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},a.prototype.writeInt32BE=function(c,l,S){return c=+c,l=l>>>0,S||Y(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},a.prototype.writeBigInt64LE=Pe(function(c,l=0){return K(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Pe(function(c,l=0){return we(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(w,c,l,S,T,v){if(l+S>w.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Le(w,c,l,S,T){return c=+c,l=l>>>0,T||Ee(w,c,l,4),i.write(w,c,l,S,23,4),l+4}a.prototype.writeFloatLE=function(c,l,S){return Le(this,c,l,!0,S)},a.prototype.writeFloatBE=function(c,l,S){return Le(this,c,l,!1,S)};function Oe(w,c,l,S,T){return c=+c,l=l>>>0,T||Ee(w,c,l,8),i.write(w,c,l,S,52,8),l+8}a.prototype.writeDoubleLE=function(c,l,S){return Oe(this,c,l,!0,S)},a.prototype.writeDoubleBE=function(c,l,S){return Oe(this,c,l,!1,S)},a.prototype.copy=function(c,l,S,T){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(S||(S=0),!T&&T!==0&&(T=this.length),l>=c.length&&(l=c.length),l||(l=0),T>0&&T<S&&(T=S),T===S||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),c.length-l<T-S&&(T=c.length-l+S);const v=T-S;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,S,T):Uint8Array.prototype.set.call(c,this.subarray(S,T),l),v},a.prototype.fill=function(c,l,S,T){if(typeof c=="string"){if(typeof l=="string"?(T=l,l=0,S=this.length):typeof S=="string"&&(T=S,S=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(c.length===1){const _=c.charCodeAt(0);(T==="utf8"&&_<128||T==="latin1")&&(c=_)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<S)throw new RangeError("Out of range index");if(S<=l)return this;l=l>>>0,S=S===void 0?this.length:S>>>0,c||(c=0);let v;if(typeof c=="number")for(v=l;v<S;++v)this[v]=c;else{const _=a.isBuffer(c)?c:a.from(c,T),U=_.length;if(U===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(v=0;v<S-l;++v)this[v+l]=_[v%U]}return this};const ee={};function re(w,c,l){ee[w]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(T){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:T,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(w,c){return`The "${w}" argument must be of type number. Received type ${typeof c}`},TypeError),re("ERR_OUT_OF_RANGE",function(w,c,l){let S=`The value of "${w}" is out of range.`,T=l;return Number.isInteger(l)&&Math.abs(l)>2**32?T=ce(String(l)):typeof l=="bigint"&&(T=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(T=ce(T)),T+="n"),S+=` It must be ${c}. Received ${T}`,S},RangeError);function ce(w){let c="",l=w.length;const S=w[0]==="-"?1:0;for(;l>=S+4;l-=3)c=`_${w.slice(l-3,l)}${c}`;return`${w.slice(0,l)}${c}`}function le(w,c,l){M(c,"offset"),(w[c]===void 0||w[c+l]===void 0)&&$(c,w.length-(l+1))}function be(w,c,l,S,T,v){if(w>l||w<c){const _=typeof c=="bigint"?"n":"";let U;throw c===0||c===BigInt(0)?U=`>= 0${_} and < 2${_} ** ${(v+1)*8}${_}`:U=`>= -(2${_} ** ${(v+1)*8-1}${_}) and < 2 ** ${(v+1)*8-1}${_}`,new ee.ERR_OUT_OF_RANGE("value",U,w)}le(S,T,v)}function M(w,c){if(typeof w!="number")throw new ee.ERR_INVALID_ARG_TYPE(c,"number",w)}function $(w,c,l){throw Math.floor(w)!==w?(M(w,l),new ee.ERR_OUT_OF_RANGE("offset","an integer",w)):c<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,w)}const ie=/[^+/0-9A-Za-z-_]/g;function pe(w){if(w=w.split("=")[0],w=w.trim().replace(ie,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function ye(w,c){c=c||1/0;let l;const S=w.length;let T=null;const v=[];for(let _=0;_<S;++_){if(l=w.charCodeAt(_),l>55295&&l<57344){if(!T){if(l>56319){(c-=3)>-1&&v.push(239,191,189);continue}else if(_+1===S){(c-=3)>-1&&v.push(239,191,189);continue}T=l;continue}if(l<56320){(c-=3)>-1&&v.push(239,191,189),T=l;continue}l=(T-55296<<10|l-56320)+65536}else T&&(c-=3)>-1&&v.push(239,191,189);if(T=null,l<128){if((c-=1)<0)break;v.push(l)}else if(l<2048){if((c-=2)<0)break;v.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;v.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;v.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return v}function me(w){const c=[];for(let l=0;l<w.length;++l)c.push(w.charCodeAt(l)&255);return c}function N(w,c){let l,S,T;const v=[];for(let _=0;_<w.length&&!((c-=2)<0);++_)l=w.charCodeAt(_),S=l>>8,T=l%256,v.push(T),v.push(S);return v}function P(w){return t.toByteArray(pe(w))}function oe(w,c,l,S){let T;for(T=0;T<S&&!(T+l>=c.length||T>=w.length);++T)c[T+l]=w[T];return T}function te(w,c){return w instanceof c||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===c.name}function Ue(w){return w!==w}const et=(function(){const w="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const S=l*16;for(let T=0;T<16;++T)c[S+T]=w[l]+w[T]}return c})();function Pe(w){return typeof BigInt>"u"?it:w}function it(){throw new Error("BigInt not supported")}})(Fn)),Fn}var yt=Bi();let Qe=!0;function yf(e){Qe=e}var Oi;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FIFO=1]="FIFO",e[e.CHR=2]="CHR",e[e.DIR=4]="DIR",e[e.BLK=6]="BLK",e[e.REG=8]="REG",e[e.LNK=10]="LNK",e[e.SOCK=12]="SOCK",e[e.WHT=14]="WHT"})(Oi||(Oi={}));function Rl(e){return(e&61440)>>12}let zl=class{ino;type;path;name};class pn{context;path;fs;internalPath;flag;inode;_buffer;_position=0;get position(){return this.flag&br?this.inode.size:this._position}set position(t){this._position=t}dirty=!1;closed=!1;get isClosed(){return this.closed}constructor(t,i,r,n,s,o){this.context=t,this.path=i,this.fs=r,this.internalPath=n,this.flag=s,this.inode=o}get _isSync(){return!!(this.flag&Ps||this.inode.flags&jt.Sync||this.fs.attributes.has("sync"))}[Symbol.dispose](){this.closeSync()}syncSync(){if(this.closed)throw Z("EBADF","sync",this.path);this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasyncSync(){return this.syncSync()}closeSync(){if(this.closed)throw Z("EBADF","close",this.path);this.syncSync(),this.disposeSync()}disposeSync(t){if(this.closed)throw Z("EBADF","close",this.path);if(this.dirty&&!t)throw Z("EBUSY","close",this.path);this.closed=!0}truncateSync(t){if(t<0)throw Z("EINVAL","truncate",this.path);if(this.closed)throw Z("EBADF","truncate",this.path);if(!(this.flag&Ct||this.flag&Ti))throw Z("EBADF","truncate",this.path);if(this.fs.attributes.has("readonly"))throw Z("EROFS","truncate",this.path);if(this.inode.flags&jt.Immutable)throw Z("EPERM","truncate",this.path);this.dirty=!0,this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.syncSync()}writeSync(t,i=0,r=t.byteLength-i,n=this.position){if(this.closed)throw Z("EBADF","write",this.path);if(!(this.flag&Ct||this.flag&Ti))throw Z("EBADF","write",this.path);if(this.fs.attributes.has("readonly"))throw Z("EROFS","write",this.path);if(this.inode.flags&jt.Immutable)throw Z("EPERM","write",this.path);this.dirty=!0;const s=n+r,o=t.subarray(i,i+r);return!rn(this.inode)&&!tn(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=n+o.byteLength,this.fs.writeSync(this.internalPath,o,n),this._isSync&&this.syncSync(),o.byteLength}readSync(t,i=0,r=t.byteLength-i,n=this.position){if(this.closed)throw Z("EBADF","read",this.path);if(this.flag&Ct)throw Z("EBADF","read",this.path);!(this.inode.flags&jt.NoAtime)&&!this.fs.attributes.has("no_atime")&&(this.dirty=!0,this.inode.atimeMs=Date.now());let s=n+r;!rn(this.inode)&&!tn(this.inode)&&s>this.inode.size&&(s=n+Math.max(this.inode.size-n,0)),this._position=s;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(i,i+r),n,s),this._isSync&&this.syncSync(),s-n}chmodSync(t){if(this.closed)throw Z("EBADF","chmod",this.path);this.dirty=!0,this.inode.mode=this.inode.mode&(t>ct?-61441:ct)|t,(this._isSync||t>ct)&&this.syncSync()}chownSync(t,i){if(this.closed)throw Z("EBADF","chmod",this.path);this.dirty=!0,ja(this.inode,t,i),this._isSync&&this.syncSync()}utimesSync(t,i){if(this.closed)throw Z("EBADF","utimes",this.path);this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=i,this._isSync&&this.syncSync()}async[Symbol.asyncDispose](){await this.close()}async sync(){if(this.closed)throw Z("EBADF","sync",this.path);this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}async close(){if(this.closed)throw Z("EBADF","close",this.path);await this.sync(),this.dispose()}dispose(t){if(this.closed)throw Z("EBADF","close",this.path);if(this.dirty&&!t)throw Z("EBUSY","close",this.path);this.closed=!0}stat(){if(this.closed)throw Z("EBADF","stat",this.path);return this.inode}async truncate(t){if(t<0)throw Z("EINVAL","truncate",this.path);if(this.closed)throw Z("EBADF","truncate",this.path);if(!(this.flag&Ct||this.flag&Ti))throw Z("EBADF","truncate",this.path);if(this.fs.attributes.has("readonly"))throw Z("EROFS","truncate",this.path);if(this.inode.flags&jt.Immutable)throw Z("EPERM","truncate",this.path);this.dirty=!0,this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&await this.sync()}async write(t,i=0,r=t.byteLength-i,n=this.position){if(this.closed)throw Z("EBADF","write",this.path);if(!(this.flag&Ct||this.flag&Ti))throw Z("EBADF","write",this.path);if(this.fs.attributes.has("readonly"))throw Z("EROFS","write",this.path);if(this.inode.flags&jt.Immutable)throw Z("EPERM","write",this.path);this.dirty=!0;const s=n+r,o=t.subarray(i,i+r);return!rn(this.inode)&&!tn(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=n+o.byteLength,await this.fs.write(this.internalPath,o,n),this._isSync&&await this.sync(),o.byteLength}async read(t,i=0,r=t.byteLength-i,n=this.position){if(this.closed)throw Z("EBADF","read",this.path);if(this.flag&Ct)throw Z("EBADF","read",this.path);!(this.inode.flags&jt.NoAtime)&&!this.fs.attributes.has("no_atime")&&(this.dirty=!0,this.inode.atimeMs=Date.now());let s=n+r;!rn(this.inode)&&!tn(this.inode)&&s>this.inode.size&&(s=n+Math.max(this.inode.size-n,0)),this._position=s;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(i,i+r),n,s),this._isSync&&await this.sync(),s-n}async chmod(t){if(this.closed)throw Z("EBADF","chmod",this.path);this.dirty=!0,this.inode.mode=this.inode.mode&(t>ct?-61441:ct)|t,(this._isSync||t>ct)&&await this.sync()}async chown(t,i){if(this.closed)throw Z("EBADF","chown",this.path);this.dirty=!0,ja(this.inode,t,i),this._isSync&&await this.sync()}async utimes(t,i){if(this.closed)throw Z("EBADF","utimes",this.path);this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=i,this._isSync&&await this.sync()}streamRead(t){if(this.closed)throw Z("EBADF","streamRead",this.path);return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Z("EBADF","write",this.path);if(this.inode.flags&jt.Immutable)throw Z("EPERM","write",this.path);if(this.fs.attributes.has("readonly"))throw Z("EROFS","write",this.path);return this.fs.streamWrite(this.internalPath,t)}}function Ws(e){const t=Jt(e.context).descriptors,i=Math.max(t.size?Math.max(...t.keys())+1:0,4);return t.set(i,e),i}function Mt(e,t){const r=Jt(e).descriptors.get(t);if(!r)throw V("EBADF");return r}function Ll(e,t){return Jt(e).descriptors.delete(t)}const gf=/[rwasx]{1,2}\+?/;function Ri(e){if(typeof e=="number")return e;if(!gf.test(e))throw V("EINVAL","Invalid flag string: "+e);return pf(e)}function pf(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw V("EINVAL","Invalid flag string: "+e);let t=e.includes("r")?sl:kn;return e.includes("w")&&(t|=An),e.includes("a")&&(t|=br),e.includes("+")?t|=Ti:e.includes("r")||(t|=Ct),e.includes("s")&&(t|=Ps),e.includes("x")&&(t|=On),t}function Cl(e){let t=0;return e&Ct||(t|=wt),(e&Ct||e&Ti)&&(t|=Et),t}function vs(e,t,i,r){const n=typeof i=="string"?{path:i,dest:r,syscall:t.endsWith("Sync")?t.slice(0,-4):t}:i,s=e[t];if(typeof s!="function")throw new TypeError(`${t} is not a function`);return function(...o){try{return s.call(e,...o)}catch(a){throw Tt(Object.assign(a,n))}}}function bf(e,t){return new Proxy(e,{get(i,r){const n=Reflect.get(i,r);return typeof n!="function"?n:function s(...o){try{const a=n.apply(i,o);return a instanceof Promise?a.catch(d=>{if("code"in d)throw Tt(Object.assign(d,t));if(d in Q){const u=Z(d,t);Error.captureStackTrace(u,s)}throw d}):a}catch(a){throw Tt(Object.assign(a,t))}}}})}const Qi=new Map;bn("/",of.create({label:"root"}));function bn(e,t){if(e[0]!="/"&&(e="/"+e),e=Ht.call(this,e),Qi.has(e))throw pt(V("EINVAL","Mount point is already in use: "+e));t._mountPoint=e,Qi.set(e,t),In(`Mounted ${t.name} on ${e}`),oi(`${t.name} attributes: ${[...t.attributes].map(([i,r])=>r!=null?i+"="+r:i).join(", ")}`)}function Ml(e){if(e[0]!="/"&&(e="/"+e),e=Ht.call(this,e),!Qi.has(e)){bt(e+" is already unmounted");return}Qi.delete(e),Ls("Unmounted "+e)}function ot(e,t,i){const{root:r}=Jt(t),n={path:e,...i};e=ze(st(r,e),!0),e=Ht.call(t,e);const s=[...Qi].sort((o,a)=>o[0].length>a[0].length?-1:1);for(const[o,a]of s){if(!Sf(o,e))continue;e=e.slice(o.length>1?o.length:0),e===""&&(e="/");const d=a.attributes.get("case_fold");return d==="lower"&&(e=e.toLowerCase()),d==="upper"&&(e=e.toUpperCase()),{fs:bf(a,n),path:e,mountPoint:o,root:r}}throw Qo(new vt(Q.EIO,"No file system for "+e))}function Pl(e,t){const i=e.usage(),r=i.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(i.freeNodes||Xt),files:(t?BigInt:Number)(i.totalNodes||Xt),bavail:(t?BigInt:Number)(i.freeSpace/r),bfree:(t?BigInt:Number)(i.freeSpace/r),blocks:(t?BigInt:Number)(i.totalSpace/r)}}function wf(e){const t=Jt(this);if(!Su(t.credentials))throw V("EPERM","Can not chroot() as non-root user");t.root??="/";const i=st(t.root,e);for(const r of t.descriptors?.values()??[]){if(!r.path.startsWith(t.root))throw Z("EBUSY","chroot",r.path);r.path=r.path.slice(t.root.length)}if(i.length>t.root.length)throw V("EPERM","Can not chroot() outside of current root");t.root=i}function Sf(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}function Yt(e,t,i,r){t=Ht.call(e,t);try{const f=ot(t,e),E=f.fs.statSync(f.path);if(!Zi(E)||i)return{...f,fullPath:t,stats:E};const g=Ht.call(e,Je(t),Is.call(e,t));return Yt(e,g,i,r)}catch(f){if(Tt(Object.assign(f,{syscall:"stat",path:t})),i)throw f}const{base:n,dir:s}=Rt(t),o=s=="/"?"/":Yt(e,s,!1,r).fullPath,a=st(o,n),d=ot(a,e);let u;try{u=d.fs.statSync(d.path)}catch(f){if(f.code==="ENOENT")return{...d,fullPath:t};throw Tt(Object.assign(f,{syscall:"stat",path:a}))}if(!Zi(u))return{...d,fullPath:a,stats:u};const h=Ht.call(e,o,Is.call(e,a));return Yt(e,h,!1,r)}function Gi(e,t){e=ze(e);const i=Mi(t.mode,420),r=Ri(t.flag);e=t.preserveSymlinks?e:Yt(this,e).fullPath;const{fs:n,path:s}=ot(e,this);let o;try{o=n.statSync(s)}catch{}if(!o){if(!(r&kn))throw Z("ENOENT","open",e);const d=n.statSync(Je(s));if(Qe&&!He(this,d,Et))throw Z("EACCES","open",e);if(!Dt(d))throw Z("ENOTDIR","open",e);if(!t.allowDirectory&&i&rt)throw Z("EISDIR","open",e);if(Qe&&!He(this,d,Et))throw Z("EACCES","open",e);const{euid:u,egid:h}=Jt(this).credentials,f=n.createFileSync(s,{mode:i,uid:d.mode&Xi?d.uid:u,gid:d.mode&Ji?d.gid:h});return new pn(this,e,n,s,r,f)}if(Qe&&(!He(this,o,i)||!He(this,o,Cl(r))))throw Z("EACCES","open",e);if(r&On)throw Z("EEXIST","open",e);const a=new pn(this,e,n,s,r,o);if(!t.allowDirectory&&o.mode&rt)throw Z("EISDIR","open",e);return r&An&&a.truncateSync(0),a}function Is(e){e=ze(e);const{fs:t,stats:i,path:r}=Yt(this,e,!0);if(!i)throw Z("ENOENT","readlink",e);if(Qe&&!He(this,i,wt))throw Z("EACCES","readlink",e);if(!Zi(i))throw Z("EINVAL","readlink",e);const n=i.size,s=new Uint8Array(n);return t.readSync(r,s,0,n),bi(s)}function Ef(e,t={}){e=ze(e);const{fs:i,path:r}=Yt(this,e),{euid:n,egid:s}=Jt(this).credentials,{mode:o=511,recursive:a}=t,d=(f,E,g)=>{if(Qe&&!He(this,g,Et))throw Z("EACCES","mkdir",Je(f));const b=i.mkdirSync(E,{mode:o,uid:g.mode&Xi?g.uid:n,gid:g.mode&Ji?g.gid:s});return $t(this,"rename",f),b};if(!a){d(e,r,i.statSync(Je(r)));return}const u=[];for(let f=r,E=e;!i.existsSync(f);f=Je(f),E=Je(E))u.unshift({resolved:f,original:E});if(!u.length)return;const h=[i.statSync(Je(u[0].resolved))];for(const[f,E]of u.entries())h.push(d(E.original,E.resolved,h[f]));return u[0].original}function vf(e,t={}){e=ze(e);const{fs:i,path:r}=Yt(this,e),n=i.statSync(r);if(Qe&&!He(this,n,wt))throw Z("EACCES","readdir",e);if(!Dt(n))throw Z("ENOTDIR","readdir",e);const s=i.readdirSync(r),o=[],a=d=>{let u;try{u=i.statSync(st(r,d))}catch(E){if(E.code=="ENOENT")return;throw E}const h=new zl;if(h.ino=u.ino,h.type=Rl(u.mode),h.path=d,h.name=ci(d),o.push(h),!Dt(u)||!t?.recursive)return;const f=i.readdirSync(st(r,d));for(const E of f)a(st(d,E))};for(const d of s)a(d);return o}function If(e,t){e=ze(e),t=ze(t);const i={syscall:"rename",path:e,dest:t},r=Yt(this,e,!0,i),n=ot(t,this,i);if(r.fs.uuid!==n.fs.uuid)throw Z("EXDEV",i);if(n.path.startsWith(r.path+"/"))throw Z("EBUSY",i);if(!r.stats)throw Z("ENOENT",i);const s=r.fs,o=s.statSync(Je(r.path)),a=s.statSync(Je(n.path));let d;try{d=s.statSync(n.path)}catch(u){if(u.code!="ENOENT")throw u}if(Qe&&(!He(this,o,wt)||!He(this,a,Et)))throw Z("EACCES",i);if(d&&!Dt(r.stats)&&Dt(d))throw Z("EISDIR",i);if(d&&Dt(r.stats)&&!Dt(d))throw Z("ENOTDIR",i);r.fs.renameSync(r.path,n.path),$t(this,"rename",e),$t(this,"change",t)}function xf(e,t){e=ze(e),t=ze(t);const i={syscall:"link",path:t,dest:e},{fs:r,path:n}=ot(e,this,i),s=ot(t,this,i);if(r.uuid!==s.fs.uuid)throw Z("EXDEV",i);const o=r.statSync(n);if(Qe){if(!He(this,o,wt))throw Z("EACCES",i);const a=r.statSync(Je(n));if(!He(this,a,wt))throw Z("EACCES",i);const d=r.statSync(Je(s.path));if(!He(this,d,Et))throw Z("EACCES",i)}return r.linkSync(n,s.path)}class Gr{ino;type;_name;get name(){const t=yt.Buffer.from(this._name);return this._encoding=="buffer"?t:t.toString(this._encoding)}_encoding;_parentPath;get parentPath(){return this._parentPath}get path(){return bt("Dirent.path was removed in Node v24, use parentPath instead"),this._parentPath}static from(t,i){const r=new Gr,{base:n,dir:s}=Rt(t.path);return r._parentPath=s||".",r._name=n,r.ino=t.ino,r.type=t.type,r._encoding=i,r}isFile(){return this.type===Oi.REG}isDirectory(){return this.type===Oi.DIR}isBlockDevice(){return this.type===Oi.BLK}isCharacterDevice(){return this.type===Oi.CHR}isSymbolicLink(){return this.type===Oi.LNK}isFIFO(){return this.type===Oi.FIFO}isSocket(){return this.type===Oi.SOCK}}class Vs{path;context;closed=!1;checkClosed(){if(this.closed)throw V("EBADF","Can not use closed Dir")}_entries;constructor(t,i){this.path=t,this.context=i}close(t){if(this.closed=!0,!t)return Promise.resolve();t(null)}closeSync(){this.closed=!0}async _read(){return this.checkClosed(),this._entries??=await Or.call(this.context,this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}read(t){if(!t)return this._read();this._read().then(i=>t(null,i))}readSync(){return this.checkClosed(),this._entries??=Xr.call(this.context,this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.dispose](){this.closed||this.closeSync()}async[Symbol.asyncDispose](){this.closed||await this.close()}}var Kr=function(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t},Hr=(function(e){return function(t){function i(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(a){return i(a),s()})}else n|=1}catch(a){i(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}})(typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function kf(e,t){return If.call(this,e,t)}function gr(e){e=ze(e);try{const{fs:t,path:i}=Yt(this,e);return t.existsSync(i)}catch(t){if(t.errno==Q.ENOENT)return!1;throw t}}function $r(e,t){e=ze(e);const{fs:i,path:r}=Yt(this,e);let n;try{n=i.statSync(r)}catch(s){throw Tt(Object.assign(s,{path:e}))}if(Qe&&!He(this,n,wt))throw Z("EACCES",{syscall:"stat",path:e});return t?.bigint?new tr(n):new Pi(n)}function qs(e,t){e=ze(e);const{base:i,dir:r}=Rt(e),{fs:n,path:s}=Yt(this,r),o=vs(n,"statSync",e)(i?st(s,i):s);if(Qe&&!He(this,o,wt))throw Z("EACCES",{syscall:"lstat",path:e});return t?.bigint?new tr(o):new Pi(o)}function Of(e,t=0){const i={stack:[],error:void 0,hasError:!1};try{const r=Kr(i,Gi.call(this,e,{flag:"r+"}),!1);if(t||=0,t<0)throw Z("EINVAL","truncate",e.toString());r.truncateSync(t)}catch(r){i.error=r,i.hasError=!0}finally{Hr(i)}}function Bl(e){e=ze(e);const{fs:t,path:i}=ot(e,this);try{if(Qe&&!He(this,t.statSync(i),Et))throw Z("EACCES","unlink");t.unlinkSync(i)}catch(r){throw Tt(Object.assign(r,{path:e}))}$t(this,"rename",e.toString())}function Gs(e,t,i=xn){return Ws(Gi.call(this,e,{flag:t,mode:i}))}function Tn(e,t,i){return Ws(Gi.call(this,e,{flag:t,mode:i,preserveSymlinks:!0}))}function Ks(e,t={}){const i={stack:[],error:void 0,hasError:!1};try{const r=Ni(t,null,"r",420);if(Ri(r.flag)&Ct)throw Z("EBADF","read",e.toString());const s=Kr(i,typeof e=="number"?Mt(this,e):Gi.call(this,e.toString(),{flag:r.flag,mode:420,preserveSymlinks:!1}),!1),{size:o}=s.stat(),a=yt.Buffer.alloc(o);return s.readSync(a,0,o,0),r.encoding?a.toString(r.encoding):a}catch(r){i.error=r,i.hasError=!0}finally{Hr(i)}}function Hs(e,t,i={}){const r={stack:[],error:void 0,hasError:!1};try{const n=Ni(i,"utf8","w+",420),s=Ri(n.flag);if(!(s&Ct||s&Ti))throw new vt(Q.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!n.encoding)throw new vt(Q.EINVAL,"Encoding not specified");const o=typeof t=="string"?yt.Buffer.from(t,n.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new vt(Q.EINVAL,"Data not specified");Kr(r,typeof e=="number"?Mt(this,e):Gi.call(this,e.toString(),{flag:s,mode:n.mode,preserveSymlinks:!0}),!1).writeSync(o,0,o.byteLength,0),$t(this,"change",e.toString())}catch(n){r.error=n,r.hasError=!0}finally{Hr(r)}}function Af(e,t,i={}){const r=Ni(i,"utf8","a+",420),n=Ri(r.flag);if(!(n&br))throw new vt(Q.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new vt(Q.EINVAL,"Encoding not specified");const s=typeof t=="string"?yt.Buffer.from(t,r.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=typeof e=="number"?Mt(this,e):Gi.call(this,ze(e),{flag:n,mode:r.mode,preserveSymlinks:!0});o.writeSync(s,0,s.byteLength),typeof o!="number"&&o.closeSync()}function Df(e,t){const i=Mt(this,e).stat();return t?.bigint?new tr(i):new Pi(i)}function Er(e){Mt(this,e).closeSync(),Ll(this,e)}function Tf(e,t=0){if(t||=0,t<0)throw new vt(Q.EINVAL);Mt(this,e).truncateSync(t)}function Nf(e){Mt(this,e).syncSync()}function Rf(e){Mt(this,e).datasyncSync()}function zf(e,t,i,r,n){let s,o,a,d;if(typeof t=="string"){d=typeof i=="number"?i:null;const f=typeof r=="string"?r:"utf8";o=0,s=yt.Buffer.from(t,f),a=s.byteLength}else s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=i,a=r,d=typeof n=="number"?n:null;const u=Mt(this,e);d??=u.position;const h=u.writeSync(s,o,a,d);return $t(this,"change",u.path),h}function Lf(e,t,i,r,n){const s=Mt(this,e),o=typeof i=="object"?i.offset:i;if(typeof i=="object"&&(r=i.length,n=i.position),n&&n>Number.MAX_SAFE_INTEGER)throw Z("EINVAL");return typeof n=="bigint"&&(n=Number(n)),n=Number.isSafeInteger(n)?n:s.position,s.readSync(t,o,r,n)}function Ul(e,t,i){Mt(this,e).chownSync(t,i)}function Ys(e,t){const i=Mi(t,-1);if(i<0)throw new vt(Q.EINVAL,"Invalid mode.");Mt(this,e).chmodSync(i)}function Xs(e,t,i){Mt(this,e).utimesSync(Wi(t),Wi(i))}function Fl(e){e=ze(e);const{fs:t,path:i}=Yt(this,e),r=vs(t,"statSync",e)(i);if(!Dt(r))throw Z("ENOTDIR","rmdir",e);if(Qe&&!He(this,r,Et))throw Z("EACCES","rmdir",e);vs(t,"rmdirSync",e)(i),$t(this,"rename",e.toString())}function Yr(e,t){t=typeof t=="object"?t:{mode:t};const i=Mi(t?.mode,511);return Ef.call(this,e,{...t,mode:i})}function Xr(e,t){t=typeof t=="object"?t:{encoding:t},e=ze(e);const i=[],r=vf.call(this,e,t??void 0);for(const n of r)t?.withFileTypes?i.push(Gr.from(n,t.encoding)):t?.encoding=="buffer"?i.push(yt.Buffer.from(n.path)):i.push(n.path);return i}function Cf(e,t){return xf.call(this,e,t)}function Mf(e,t,i="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(i))throw new TypeError("Invalid symlink type: "+i);t=ze(t);const n=Kr(r,Gi.call(this,t,{flag:"wx",mode:420}),!1);n.writeSync(Ai(ze(e,!0))),n.chmodSync(Ci)}catch(n){r.error=n,r.hasError=!0}finally{Hr(r)}}function Pf(e,t){const i=yt.Buffer.from(Is.call(this,e)),r=typeof t=="object"?t?.encoding:t;return r=="buffer"?i:i.toString(r??"utf-8")}function Bf(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{Kr(r,Gi.call(this,e,{flag:"r+",mode:xn}),!1).chownSync(t,i)}catch(n){r.error=n,r.hasError=!0}finally{Hr(r)}}function Uf(e,t,i){const r=Tn.call(this,e,"r+");Ul.call(this,r,t,i),Er.call(this,r)}function Ff(e,t){const i=Gs.call(this,e,"r+");Ys.call(this,i,t),Er.call(this,i)}function jf(e,t){const i=Tn.call(this,e,"r+");Ys.call(this,i,t),Er.call(this,i)}function jl(e,t,i){const r=Gs.call(this,e,"r+");Xs.call(this,r,t,i),Er.call(this,r)}function $f(e,t,i){const r=Tn.call(this,e,"r+");Xs.call(this,r,t,i),Er.call(this,r)}function Wf(e,t){const i=typeof t=="string"?t:t?.encoding??"utf8";e=ze(e,!0);const{fullPath:r}=Yt(this,e);if(i=="utf8"||i=="utf-8")return r;const n=yt.Buffer.from(r,"utf-8");return i=="buffer"?n:n.toString(i)}function Vf(e,t=384){if(Qe&&!He(this,$r.call(this,e),t))throw new vt(Q.EACCES)}function Js(e,t){e=ze(e);let i;try{i=qs.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!t?.force)throw r}if(i)switch(i.mode&ct){case rt:if(t?.recursive)for(const r of Xr.call(this,e))Js.call(this,st(e,r),t);Fl.call(this,e);break;case qt:case Ci:case er:case qi:Bl.call(this,e);break;case Sr:case wr:default:throw Z("ENOSYS","rm",e)}}function qf(e,t){const i=typeof t=="object"?t?.encoding:t||"utf8",r=Dn(e);return Yr.call(this,r),i=="buffer"?yt.Buffer.from(r):r}function Gf(e,t){const i=Dn(e);Yr.call(this,i);const r=()=>Js(i,{recursive:!0,force:!0});return{path:i,remove:r,[Symbol.dispose]:r}}function $l(e,t,i){if(e=ze(e),t=ze(t),i&&i&Ms&&gr(t))throw Z("EEXIST","copyFile",t);Hs.call(this,t,Ks(e)),$t(this,"rename",t.toString())}function Kf(e,t,i){const r=Mt(this,e);let n=0;for(const s of t)n+=r.readSync(s,0,s.byteLength,i+n);return n}function Hf(e,t,i){const r=Mt(this,e);let n=0;for(const s of t)n+=r.writeSync(new Uint8Array(s.buffer),0,s.byteLength,i+n);return n}function Yf(e,t){return e=ze(e),new Vs(e,this)}function Wl(e,t,i){e=ze(e),t=ze(t);const r=qs.call(this,e);if(i?.errorOnExist&&gr.call(this,t))throw Z("EEXIST","cp",t);switch(r.mode&ct){case rt:if(!i?.recursive)throw Z("EISDIR","cp",e);Yr.call(this,t,{recursive:!0});for(const n of Xr.call(this,e,{withFileTypes:!0}))i.filter&&!i.filter(st(e,n.name),st(t,n.name))||Wl.call(this,st(e,n.name),st(t,n.name),i);break;case qt:case Ci:$l.call(this,e,t);break;case er:case qi:case Sr:case wr:default:throw Z("ENOSYS","cp",e)}i?.preserveTimestamps&&jl.call(this,t,r.atime,r.mtime)}function Xf(e,t){e=ze(e);const{fs:i}=ot(e,this);return Pl(i,t?.bigint)}function Jf(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:i="/",withFileTypes:r=!1,exclude:n=()=>!1}=t,s=e.map(js),o=[];function a(d){const u=Xr(d,{withFileTypes:r,encoding:"utf8"});for(const h of u){const f=r?st(h.parentPath,h.name):d+"/"+h;(typeof n!="function"?n.some(E=>kl(E,f)):n(r?h:f))||($r(f).isDirectory()&&s.some(E=>E.source.includes(".*"))&&a(f),s.some(E=>E.test(f.replace(/^\/+/g,"")))&&o.push(r?h:f.replace(/^\/+/g,"")))}}return a(i),o}class Vl extends Rs{_context;path;off(t,i,r,n){return super.off(t,i,r,n)}removeListener(t,i,r,n){return super.removeListener(t,i,r,n)}constructor(t,i){super(),this._context=t,this.path=i}setMaxListeners(){throw Z("ENOSYS","Watcher.setMaxListeners")}getMaxListeners(){throw Z("ENOSYS","Watcher.getMaxListeners")}prependListener(){throw Z("ENOSYS","Watcher.prependListener")}prependOnceListener(){throw Z("ENOSYS","Watcher.prependOnceListener")}rawListeners(){throw Z("ENOSYS","Watcher.rawListeners")}ref(){return this}unref(){return this}}class ql extends Vl{options;realpath;constructor(t,i,r){const n=Jt(t);super(n,i),this.options=r,this.realpath=st(n.root,i),Qf(this.realpath,this)}close(){super.emit("close"),ed(this.realpath,this)}[Symbol.dispose](){this.close()}}class Zf extends Vl{options;intervalId;previous;constructor(t,i,r){super(t,i),this.options=r,this.start()}onInterval(){try{const t=$r(this.path);Qu(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=$r(this.path)}catch(i){this.emit("error",i);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const $i=new Map;function Qf(e,t){const i=ze(e);$i.has(i)||$i.set(i,new Set),$i.get(i).add(t)}function ed(e,t){const i=ze(e);$i.has(i)&&($i.get(i).delete(t),$i.get(i).size===0&&$i.delete(i))}function $t(e,t,i){const r=Jt(e);r&&(i=st(r.root??"/",i)),i=ze(i);for(let n=i;n!="/";n=Je(n)){const s=$i.get(n);if(s)for(const o of s)o.emit("change",t,xl.call(o._context,n,i)||ci(i))}}async function ni(e,t,i,r){if(t=Ht.call(e,t),i){const f=ot(t,e,r),E=await f.fs.stat(f.path).catch(()=>{});return{...f,fullPath:t,stats:E}}try{const f=ot(t,e),E=await f.fs.stat(f.path);if(!Zi(E))return{...f,fullPath:t,stats:E};const g=Ht.call(e,Je(t),await xs.call(e,t));return await ni(e,g,i,r)}catch{}const{base:n,dir:s}=Rt(t),o=s=="/"?"/":(await ni(e,s,!1,r)).fullPath,a=st(o,n),d=ot(a,e),u=await d.fs.stat(d.path).catch(f=>{if(f.code!="ENOENT")throw Tt(Object.assign(f,{syscall:"stat",path:a}))});if(!u)return{...d,fullPath:t};if(!Zi(u))return{...d,fullPath:a,stats:u};const h=Ht.call(e,o,await xs.call(e,a));return await ni(e,h,!1,r)}async function vr(e,t,i){t=ze(t);const r=Mi(i.mode,420),n=Ri(i.flag),s={syscall:"open",path:t},{fs:o,path:a,stats:d}=await ni(e,t,i.preserveSymlinks,s);if(!d){if(!(n&kn))throw Z("ENOENT",s);const h=await o.stat(Je(a));if(Qe&&!He(e,h,Et))throw Z("EACCES","open",Je(t));if(!Dt(h))throw Z("ENOTDIR","open",Je(t));if(!i.allowDirectory&&r&rt)throw Z("EISDIR","open",t);const{euid:f,egid:E}=Jt(e).credentials,g=await o.createFile(a,{mode:r,uid:h.mode&Xi?h.uid:f,gid:h.mode&Ji?h.gid:E});return new pn(e,t,o,a,n,g)}if(Qe&&!He(e,d,Cl(n)))throw Z("EACCES",s);if(n&On)throw Z("EEXIST",s);const u=new pn(e,t,o,a,n,d);if(!i.allowDirectory&&r&rt)throw Z("EISDIR","open",t);return n&An&&await u.truncate(0),u}async function xs(e){e=ze(e);const t={syscall:"readlink",path:e},{fs:i,stats:r,path:n}=await ni(this,e,!0,t);if(!r)throw Z("ENOENT",t);if(Qe&&!He(this,r,wt))throw Z("EACCES",t);if(!Zi(r))throw Z("EINVAL",t);const s=r.size,o=new Uint8Array(s);return await i.read(n,o,0,s),bi(o)}async function td(e,t={}){e=ze(e);const{euid:i,egid:r}=Jt(this).credentials,{mode:n=511,recursive:s}=t,{fs:o,path:a}=ot(e,this,{syscall:"mkdir"}),d=async(E,g,b)=>{if(Qe&&!He(this,b,Et))throw Z("EACCES","mkdir",E);const p=await o.mkdir(g,{mode:n,uid:b.mode&Xi?b.uid:i,gid:b.mode&Ji?b.gid:r});return $t(this,"rename",E),p};if(!s){await d(e,a,await o.stat(Je(a)));return}const u=[];let h=e;for(let E=a;!await o.exists(E);E=Je(E),h=Je(h))u.unshift([h,E]);if(!u.length)return;const f=[await o.stat(Je(u[0][1]))];for(const[E,[g,b]]of u.entries())f.push(await d(g,b,f[E]));return u[0][0]}async function id(e,t={}){e=ze(e);const i={syscall:"readdir",path:e},{fs:r,path:n,stats:s}=await ni(this,e,!1,i);if(!s)throw Z("ENOENT",i);if(Qe&&!He(this,s,wt))throw Z("EACCES",i);if(!Dt(s))throw Z("ENOTDIR",i);const o=await r.readdir(n),a=[],d=async u=>{const h=await r.stat(st(n,u)).catch(g=>{if(g.code!="ENOENT")throw g});if(!h)return;const f=new zl;if(f.ino=h.ino,f.type=Rl(h.mode),f.path=u,f.name=ci(u),a.push(f),!t.recursive||!Dt(h))return;const E=await r.readdir(st(n,u));for(const g of E)await d(st(u,g))};return await Promise.all(o.map(d)),a}async function rd(e,t){e=ze(e),t=ze(t);const i={syscall:"rename",path:e,dest:t},r=await ni(this,e,!0,i),n=ot(t,this,i);if(r.fs.uuid!==n.fs.uuid)throw Z("EXDEV",i);if(n.path.startsWith(r.path+"/"))throw Z("EBUSY",i);if(!r.stats)throw Z("ENOENT",i);const s=r.fs,o=await s.stat(Je(r.path)),a=await s.stat(Je(n.path)),d=await s.stat(n.path).catch(u=>{if(u.code=="ENOENT")return null;throw u});if(Qe&&(!He(this,o,wt)||!He(this,a,Et)))throw Z("EACCES",i);if(d&&!Dt(r.stats)&&Dt(d))throw Z("EISDIR",i);if(d&&Dt(r.stats)&&!Dt(d))throw Z("ENOTDIR",i);await r.fs.rename(r.path,n.path),$t(this,"rename",e),$t(this,"change",t)}async function nd(e,t){e=ze(e),t=ze(t);const i={syscall:"link",path:t,dest:e},{fs:r,path:n}=ot(e,this,i),s=ot(t,this,i);if(r.uuid!=s.fs.uuid)throw Z("EXDEV",i);const o=await r.stat(n);if(Qe){if(!He(this,o,wt))throw Z("EACCES",i);const a=await r.stat(Je(n));if(!He(this,a,wt))throw Z("EACCES",i);const d=await r.stat(Je(s.path));if(!He(this,d,Et))throw Z("EACCES",i)}return await r.link(n,s.path)}class Ka extends Rs{input;output;terminal;line="";_cursor=0;get cursor(){return this._cursor}_buffer="";_closed=!1;_paused=!1;_prompt="";_history=[];_historyIndex=-1;_currentLine="";constructor(t,i,r,n=!1){super(),this.input=t,this.output=i,this.terminal=n,this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}_onData=t=>{if(!(this._paused||this._closed)){this._buffer+=typeof t=="string"?t:t.toString("utf8");for(let i=this._buffer.indexOf(`
`);i>=0;i=this._buffer.indexOf(`
`)){let r=this._buffer.substring(0,i);r.endsWith("\r")&&(r=r.substring(0,r.length-1)),this._buffer=this._buffer.substring(i+1),this.line=r,r.trim()&&!r.trim().match(/^\s*$/)&&this._history.at(-1)!=r&&(this._history.push(r),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",r)}}};close(){if(!this._closed){if(this._closed=!0,this.input?.removeAllListeners?.(),this._buffer.length){const t=this._buffer;this._buffer="",this.line=t,this.emit("line",t)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:i}=this.getCursorPos();this.output.write(this._prompt),this._cursor=i}write(t,i){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!i||!this.terminal))switch((i.ctrl?"^":"")+i.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;ei(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;ei(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);sn(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);sn(this.output,0),ei(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const n=this.line.slice(0,r+1)+this.line.slice(this._cursor),s=r+1;this._renderLine(n),this._cursor=s,this._cursor=s,ei(this.output,-n.length,0),ei(this.output,s,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),i.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(i.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(i.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=i.name=="left"?-1:1;if(!this.output)return;const n=Math.max(0,Math.min(this.line.length,this._cursor+r));if(n==this._cursor)return;ei(this.output,r,0),this._cursor=n,this._cursor=n;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(ei(this.output,-this._cursor,0),ei(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);sn(this.output,0),ei(this.output,0,0),this.output.write(this._prompt+r),this.line=r,ei(this.output,-r.length,0),ei(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(sn(this.output,0),ei(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,i,r){const n=typeof i=="function"?i:r;if(this._closed||!this.output){n("");return}this.output.write(t),this.once("line",n)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,i){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,i),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,i){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,i),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return bt("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return bt("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:i,promise:r}=Promise.withResolvers();return this.once("line",n=>i({value:n,done:!1})),this.once("close",()=>{t=!0,i({value:void 0,done:t})}),r},return:async i=>t?{done:t,value:i}:(t=!0,this.close(),{done:t,value:i}),throw:async i=>{throw t||(t=!0,this.close()),i},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}[Symbol.dispose](){this.close()}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:i}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await i}rawListeners(t){return this.listeners(t)}}function sd(e,t,i,r){return"input"in e?new Ka(e.input,e.output,e.completer,e.terminal):new Ka(e,t,i,r)}function sn(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function ei(e,t,i){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),i<0?r+=`\x1B[${-i}A`:i>0&&(r+=`\x1B[${i}B`),r&&e.write(r),!0}var jn={exports:{}},$n={exports:{}},Wn,Ha;function St(){if(Ha)return Wn;Ha=1;class e extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let r="";for(let n=0;n<i.length;n++)r+=`    ${i[n].stack}
`;super(r),this.name="AggregateError",this.errors=i}}return Wn={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,i){return t.includes(i)},ArrayPrototypeIndexOf(t,i){return t.indexOf(i)},ArrayPrototypeJoin(t,i){return t.join(i)},ArrayPrototypeMap(t,i){return t.map(i)},ArrayPrototypePop(t,i){return t.pop(i)},ArrayPrototypePush(t,i){return t.push(i)},ArrayPrototypeSlice(t,i,r){return t.slice(i,r)},Error,FunctionPrototypeCall(t,i,...r){return t.call(i,...r)},FunctionPrototypeSymbolHasInstance(t,i){return Function.prototype[Symbol.hasInstance].call(t,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,i){return Object.defineProperties(t,i)},ObjectDefineProperty(t,i,r){return Object.defineProperty(t,i,r)},ObjectGetOwnPropertyDescriptor(t,i){return Object.getOwnPropertyDescriptor(t,i)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,i){return Object.setPrototypeOf(t,i)},Promise,PromisePrototypeCatch(t,i){return t.catch(i)},PromisePrototypeThen(t,i,r){return t.then(i,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,i){return t.test(i)},SafeSet:Set,String,StringPrototypeSlice(t,i,r){return t.slice(i,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,i,r){return t.set(i,r)},Boolean,Uint8Array},Wn}var Vn={exports:{}},qn,Ya;function Gl(){return Ya||(Ya=1,qn={format(e,...t){return e.replace(/%([sdifj])/g,function(...[i,r]){const n=t.shift();return r==="f"?n.toFixed(6):r==="j"?JSON.stringify(n):r==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),qn}var Gn,Xa;function Wt(){if(Xa)return Gn;Xa=1;const{format:e,inspect:t}=Gl(),{AggregateError:i}=St(),r=globalThis.AggregateError||i,n=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",d={};function u(m,y){if(!m)throw new d.ERR_INTERNAL_ASSERTION(y)}function h(m){let y="",I=m.length;const x=m[0]==="-"?1:0;for(;I>=x+4;I-=3)y=`_${m.slice(I-3,I)}${y}`;return`${m.slice(0,I)}${y}`}function f(m,y,I){if(typeof y=="function")return u(y.length<=I.length,`Code: ${m}; The provided arguments length (${I.length}) does not match the required ones (${y.length}).`),y(...I);const x=(y.match(/%[dfijoOs]/g)||[]).length;return u(x===I.length,`Code: ${m}; The provided arguments length (${I.length}) does not match the required ones (${x}).`),I.length===0?y:e(y,...I)}function E(m,y,I){I||(I=Error);class x extends I{constructor(...k){super(f(m,y,k))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(x.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),x.prototype.code=m,x.prototype[n]=!0,d[m]=x}function g(m){const y=a+m.name;return Object.defineProperty(m,"name",{value:y}),m}function b(m,y){if(m&&y&&m!==y){if(Array.isArray(y.errors))return y.errors.push(m),y;const I=new r([y,m],y.message);return I.code=y.code,I}return m||y}class p extends Error{constructor(y="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!="object")throw new d.ERR_INVALID_ARG_TYPE("options","Object",I);super(y,I),this.code="ABORT_ERR",this.name="AbortError"}}return E("ERR_ASSERTION","%s",Error),E("ERR_INVALID_ARG_TYPE",(m,y,I)=>{u(typeof m=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let x="The ";m.endsWith(" argument")?x+=`${m} `:x+=`"${m}" ${m.includes(".")?"property":"argument"} `,x+="must be ";const z=[],k=[],B=[];for(const G of y)u(typeof G=="string","All expected entries have to be of type string"),s.includes(G)?z.push(G.toLowerCase()):o.test(G)?k.push(G):(u(G!=="object",'The value "object" should be written as "Object"'),B.push(G));if(k.length>0){const G=z.indexOf("object");G!==-1&&(z.splice(z,G,1),k.push("Object"))}if(z.length>0){switch(z.length){case 1:x+=`of type ${z[0]}`;break;case 2:x+=`one of type ${z[0]} or ${z[1]}`;break;default:{const G=z.pop();x+=`one of type ${z.join(", ")}, or ${G}`}}(k.length>0||B.length>0)&&(x+=" or ")}if(k.length>0){switch(k.length){case 1:x+=`an instance of ${k[0]}`;break;case 2:x+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const G=k.pop();x+=`an instance of ${k.join(", ")}, or ${G}`}}B.length>0&&(x+=" or ")}switch(B.length){case 0:break;case 1:B[0].toLowerCase()!==B[0]&&(x+="an "),x+=`${B[0]}`;break;case 2:x+=`one of ${B[0]} or ${B[1]}`;break;default:{const G=B.pop();x+=`one of ${B.join(", ")}, or ${G}`}}if(I==null)x+=`. Received ${I}`;else if(typeof I=="function"&&I.name)x+=`. Received function ${I.name}`;else if(typeof I=="object"){var J;if((J=I.constructor)!==null&&J!==void 0&&J.name)x+=`. Received an instance of ${I.constructor.name}`;else{const G=t(I,{depth:-1});x+=`. Received ${G}`}}else{let G=t(I,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),x+=`. Received type ${typeof I} (${G})`}return x},TypeError),E("ERR_INVALID_ARG_VALUE",(m,y,I="is invalid")=>{let x=t(y);return x.length>128&&(x=x.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${I}. Received ${x}`},TypeError),E("ERR_INVALID_RETURN_VALUE",(m,y,I)=>{var x;const z=I!=null&&(x=I.constructor)!==null&&x!==void 0&&x.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${m} to be returned from the "${y}" function but got ${z}.`},TypeError),E("ERR_MISSING_ARGS",(...m)=>{u(m.length>0,"At least one arg needs to be specified");let y;const I=m.length;switch(m=(Array.isArray(m)?m:[m]).map(x=>`"${x}"`).join(" or "),I){case 1:y+=`The ${m[0]} argument`;break;case 2:y+=`The ${m[0]} and ${m[1]} arguments`;break;default:{const x=m.pop();y+=`The ${m.join(", ")}, and ${x} arguments`}break}return`${y} must be specified`},TypeError),E("ERR_OUT_OF_RANGE",(m,y,I)=>{u(y,'Missing "range" argument');let x;if(Number.isInteger(I)&&Math.abs(I)>2**32)x=h(String(I));else if(typeof I=="bigint"){x=String(I);const z=BigInt(2)**BigInt(32);(I>z||I<-z)&&(x=h(x)),x+="n"}else x=t(I);return`The value of "${m}" is out of range. It must be ${y}. Received ${x}`},RangeError),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),E("ERR_STREAM_WRITE_AFTER_END","write after end",Error),E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Gn={AbortError:p,aggregateTwoErrors:g(b),hideStackFrames:g,codes:d},Gn}var Cr={exports:{}},Ja;function Wr(){if(Ja)return Cr.exports;Ja=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Cr.exports=e,Cr.exports.AbortSignal=t,Cr.exports.default=e,Cr.exports}var an={exports:{}},Za;function Nn(){if(Za)return an.exports;Za=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,B,J){return Function.prototype.apply.call(k,B,J)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:i=function(k){return Object.getOwnPropertyNames(k)};function r(z){console&&console.warn&&console.warn(z)}var n=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}an.exports=s,an.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(z){if(typeof z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(z){if(typeof z!="number"||z<0||n(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");o=z}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||n(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function d(z){return z._maxListeners===void 0?s.defaultMaxListeners:z._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(k){for(var B=[],J=1;J<arguments.length;J++)B.push(arguments[J]);var G=k==="error",H=this._events;if(H!==void 0)G=G&&H.error===void 0;else if(!G)return!1;if(G){var D;if(B.length>0&&(D=B[0]),D instanceof Error)throw D;var C=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw C.context=D,C}var ne=H[k];if(ne===void 0)return!1;if(typeof ne=="function")t(ne,this,B);else for(var L=ne.length,W=b(ne,L),J=0;J<L;++J)t(W[J],this,B);return!0};function u(z,k,B,J){var G,H,D;if(a(B),H=z._events,H===void 0?(H=z._events=Object.create(null),z._eventsCount=0):(H.newListener!==void 0&&(z.emit("newListener",k,B.listener?B.listener:B),H=z._events),D=H[k]),D===void 0)D=H[k]=B,++z._eventsCount;else if(typeof D=="function"?D=H[k]=J?[B,D]:[D,B]:J?D.unshift(B):D.push(B),G=d(z),G>0&&D.length>G&&!D.warned){D.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=z,C.type=k,C.count=D.length,r(C)}return z}s.prototype.addListener=function(k,B){return u(this,k,B,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,B){return u(this,k,B,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(z,k,B){var J={fired:!1,wrapFn:void 0,target:z,type:k,listener:B},G=h.bind(J);return G.listener=B,J.wrapFn=G,G}s.prototype.once=function(k,B){return a(B),this.on(k,f(this,k,B)),this},s.prototype.prependOnceListener=function(k,B){return a(B),this.prependListener(k,f(this,k,B)),this},s.prototype.removeListener=function(k,B){var J,G,H,D,C;if(a(B),G=this._events,G===void 0)return this;if(J=G[k],J===void 0)return this;if(J===B||J.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete G[k],G.removeListener&&this.emit("removeListener",k,J.listener||B));else if(typeof J!="function"){for(H=-1,D=J.length-1;D>=0;D--)if(J[D]===B||J[D].listener===B){C=J[D].listener,H=D;break}if(H<0)return this;H===0?J.shift():p(J,H),J.length===1&&(G[k]=J[0]),G.removeListener!==void 0&&this.emit("removeListener",k,C||B)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var B,J,G;if(J=this._events,J===void 0)return this;if(J.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):J[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete J[k]),this;if(arguments.length===0){var H=Object.keys(J),D;for(G=0;G<H.length;++G)D=H[G],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=J[k],typeof B=="function")this.removeListener(k,B);else if(B!==void 0)for(G=B.length-1;G>=0;G--)this.removeListener(k,B[G]);return this};function E(z,k,B){var J=z._events;if(J===void 0)return[];var G=J[k];return G===void 0?[]:typeof G=="function"?B?[G.listener||G]:[G]:B?m(G):b(G,G.length)}s.prototype.listeners=function(k){return E(this,k,!0)},s.prototype.rawListeners=function(k){return E(this,k,!1)},s.listenerCount=function(z,k){return typeof z.listenerCount=="function"?z.listenerCount(k):g.call(z,k)},s.prototype.listenerCount=g;function g(z){var k=this._events;if(k!==void 0){var B=k[z];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function b(z,k){for(var B=new Array(k),J=0;J<k;++J)B[J]=z[J];return B}function p(z,k){for(;k+1<z.length;k++)z[k]=z[k+1];z.pop()}function m(z){for(var k=new Array(z.length),B=0;B<k.length;++B)k[B]=z[B].listener||z[B];return k}function y(z,k){return new Promise(function(B,J){function G(D){z.removeListener(k,H),J(D)}function H(){typeof z.removeListener=="function"&&z.removeListener("error",G),B([].slice.call(arguments))}x(z,k,H,{once:!0}),k!=="error"&&I(z,G,{once:!0})})}function I(z,k,B){typeof z.on=="function"&&x(z,"error",k,B)}function x(z,k,B,J){if(typeof z.on=="function")J.once?z.once(k,B):z.on(k,B);else if(typeof z.addEventListener=="function")z.addEventListener(k,function G(H){J.once&&z.removeEventListener(k,G),B(H)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z)}return an.exports}var Qa;function Gt(){return Qa||(Qa=1,(function(e){const t=Bi(),{format:i,inspect:r}=Gl(),{codes:{ERR_INVALID_ARG_TYPE:n}}=Wt(),{kResistStopPropagation:s,AggregateError:o,SymbolDispose:a}=St(),d=globalThis.AbortSignal||Wr().AbortSignal,u=globalThis.AbortController||Wr().AbortController,h=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,E=typeof f<"u"?function(m){return m instanceof f}:function(m){return!1},g=(p,m)=>{if(p!==void 0&&(p===null||typeof p!="object"||!("aborted"in p)))throw new n(m,"AbortSignal",p)},b=(p,m)=>{if(typeof p!="function")throw new n(m,"Function",p)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(p){let m=!1;return function(...y){m||(m=!0,p.apply(this,y))}},createDeferredPromise:function(){let p,m;return{promise:new Promise((I,x)=>{p=I,m=x}),resolve:p,reject:m}},promisify(p){return new Promise((m,y)=>{p((I,...x)=>I?y(I):m(...x))})},debuglog(){return function(){}},format:i,inspect:r,types:{isAsyncFunction(p){return p instanceof h},isArrayBufferView(p){return ArrayBuffer.isView(p)}},isBlob:E,deprecate(p,m){return p},addAbortListener:Nn().addAbortListener||function(m,y){if(m===void 0)throw new n("signal","AbortSignal",m);g(m,"signal"),b(y,"listener");let I;return m.aborted?queueMicrotask(()=>y()):(m.addEventListener("abort",y,{__proto__:null,once:!0,[s]:!0}),I=()=>{m.removeEventListener("abort",y)}),{__proto__:null,[a](){var x;(x=I)===null||x===void 0||x()}}},AbortSignalAny:d.any||function(m){if(m.length===1)return m[0];const y=new u,I=()=>y.abort();return m.forEach(x=>{g(x,"signals"),x.addEventListener("abort",I,{once:!0})}),y.signal.addEventListener("abort",()=>{m.forEach(x=>x.removeEventListener("abort",I))},{once:!0}),y.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Vn)),Vn.exports}var on={},Kn,eo;function Jr(){if(eo)return Kn;eo=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:i,ArrayPrototypeMap:r,NumberIsInteger:n,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:a,NumberParseInt:d,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:h,String:f,StringPrototypeToUpperCase:E,StringPrototypeTrim:g}=St(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:p,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:x}}=Wt(),{normalizeEncoding:z}=Gt(),{isAsyncFunction:k,isArrayBufferView:B}=Gt().types,J={};function G(N){return N===(N|0)}function H(N){return N===N>>>0}const D=/^[0-7]+$/,C="must be a 32-bit unsigned integer or an octal string";function ne(N,P,oe){if(typeof N>"u"&&(N=oe),typeof N=="string"){if(h(D,N)===null)throw new y(P,N,C);N=d(N,8)}return X(N,P),N}const L=b((N,P,oe=a,te=o)=>{if(typeof N!="number")throw new m(P,"number",N);if(!n(N))throw new I(P,"an integer",N);if(N<oe||N>te)throw new I(P,`>= ${oe} && <= ${te}`,N)}),W=b((N,P,oe=-2147483648,te=2147483647)=>{if(typeof N!="number")throw new m(P,"number",N);if(!n(N))throw new I(P,"an integer",N);if(N<oe||N>te)throw new I(P,`>= ${oe} && <= ${te}`,N)}),X=b((N,P,oe=!1)=>{if(typeof N!="number")throw new m(P,"number",N);if(!n(N))throw new I(P,"an integer",N);const te=oe?1:0,Ue=4294967295;if(N<te||N>Ue)throw new I(P,`>= ${te} && <= ${Ue}`,N)});function _e(N,P){if(typeof N!="string")throw new m(P,"string",N)}function De(N,P,oe=void 0,te){if(typeof N!="number")throw new m(P,"number",N);if(oe!=null&&N<oe||te!=null&&N>te||(oe!=null||te!=null)&&s(N))throw new I(P,`${oe!=null?`>= ${oe}`:""}${oe!=null&&te!=null?" && ":""}${te!=null?`<= ${te}`:""}`,N)}const ae=b((N,P,oe)=>{if(!t(oe,N)){const Ue="must be one of: "+i(r(oe,et=>typeof et=="string"?`'${et}'`:f(et)),", ");throw new y(P,N,Ue)}});function de(N,P){if(typeof N!="boolean")throw new m(P,"boolean",N)}function O(N,P,oe){return N==null||!u(N,P)?oe:N[P]}const j=b((N,P,oe=null)=>{const te=O(oe,"allowArray",!1),Ue=O(oe,"allowFunction",!1);if(!O(oe,"nullable",!1)&&N===null||!te&&e(N)||typeof N!="object"&&(!Ue||typeof N!="function"))throw new m(P,"Object",N)}),Y=b((N,P)=>{if(N!=null&&typeof N!="object"&&typeof N!="function")throw new m(P,"a dictionary",N)}),K=b((N,P,oe=0)=>{if(!e(N))throw new m(P,"Array",N);if(N.length<oe){const te=`must be longer than ${oe}`;throw new y(P,N,te)}});function we(N,P){K(N,P);for(let oe=0;oe<N.length;oe++)_e(N[oe],`${P}[${oe}]`)}function Ee(N,P){K(N,P);for(let oe=0;oe<N.length;oe++)de(N[oe],`${P}[${oe}]`)}function Le(N,P){K(N,P);for(let oe=0;oe<N.length;oe++){const te=N[oe],Ue=`${P}[${oe}]`;if(te==null)throw new m(Ue,"AbortSignal",te);le(te,Ue)}}function Oe(N,P="signal"){if(_e(N,P),J[N]===void 0)throw J[E(N)]!==void 0?new x(N+" (signals must use all capital letters)"):new x(N)}const ee=b((N,P="buffer")=>{if(!B(N))throw new m(P,["Buffer","TypedArray","DataView"],N)});function re(N,P){const oe=z(P),te=N.length;if(oe==="hex"&&te%2!==0)throw new y("encoding",P,`is invalid for data of length ${te}`)}function ce(N,P="Port",oe=!0){if(typeof N!="number"&&typeof N!="string"||typeof N=="string"&&g(N).length===0||+N!==+N>>>0||N>65535||N===0&&!oe)throw new p(P,N,oe);return N|0}const le=b((N,P)=>{if(N!==void 0&&(N===null||typeof N!="object"||!("aborted"in N)))throw new m(P,"AbortSignal",N)}),be=b((N,P)=>{if(typeof N!="function")throw new m(P,"Function",N)}),M=b((N,P)=>{if(typeof N!="function"||k(N))throw new m(P,"Function",N)}),$=b((N,P)=>{if(N!==void 0)throw new m(P,"undefined",N)});function ie(N,P,oe){if(!t(oe,N))throw new m(P,`('${i(oe,"|")}')`,N)}const pe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ye(N,P){if(typeof N>"u"||!h(pe,N))throw new y(P,N,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function me(N){if(typeof N=="string")return ye(N,"hints"),N;if(e(N)){const P=N.length;let oe="";if(P===0)return oe;for(let te=0;te<P;te++){const Ue=N[te];ye(Ue,"hints"),oe+=Ue,te!==P-1&&(oe+=", ")}return oe}throw new y("hints",N,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Kn={isInt32:G,isUint32:H,parseFileMode:ne,validateArray:K,validateStringArray:we,validateBooleanArray:Ee,validateAbortSignalArray:Le,validateBoolean:de,validateBuffer:ee,validateDictionary:Y,validateEncoding:re,validateFunction:be,validateInt32:W,validateInteger:L,validateNumber:De,validateObject:j,validateOneOf:ae,validatePlainFunction:M,validatePort:ce,validateSignalName:Oe,validateString:_e,validateUint32:X,validateUndefined:$,validateUnion:ie,validateAbortSignal:le,validateLinkHeaderValue:me},Kn}var ln={exports:{}},Hn={exports:{}},to;function rr(){if(to)return Hn.exports;to=1;var e=Hn.exports={},t,i;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch{t=r}try{typeof clearTimeout=="function"?i=clearTimeout:i=n}catch{i=n}})();function s(p){if(t===setTimeout)return setTimeout(p,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(p,0);try{return t(p,0)}catch{try{return t.call(null,p,0)}catch{return t.call(this,p,0)}}}function o(p){if(i===clearTimeout)return clearTimeout(p);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(p);try{return i(p)}catch{try{return i.call(null,p)}catch{return i.call(this,p)}}}var a=[],d=!1,u,h=-1;function f(){!d||!u||(d=!1,u.length?a=u.concat(a):h=-1,a.length&&E())}function E(){if(!d){var p=s(f);d=!0;for(var m=a.length;m;){for(u=a,a=[];++h<m;)u&&u[h].run();h=-1,m=a.length}u=null,d=!1,o(p)}}e.nextTick=function(p){var m=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)m[y-1]=arguments[y];a.push(new g(p,m)),a.length===1&&!d&&s(E)};function g(p,m){this.fun=p,this.array=m}g.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(p){return[]},e.binding=function(p){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(p){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Hn.exports}var Yn,io;function Ui(){if(io)return Yn;io=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:i}=St(),r=i("nodejs.stream.destroyed"),n=i("nodejs.stream.errored"),s=i("nodejs.stream.readable"),o=i("nodejs.stream.writable"),a=i("nodejs.stream.disturbed"),d=i("nodejs.webstream.isClosedPromise"),u=i("nodejs.webstream.controllerErrorFunction");function h(O,j=!1){var Y;return!!(O&&typeof O.pipe=="function"&&typeof O.on=="function"&&(!j||typeof O.pause=="function"&&typeof O.resume=="function")&&(!O._writableState||((Y=O._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!O._writableState||O._readableState))}function f(O){var j;return!!(O&&typeof O.write=="function"&&typeof O.on=="function"&&(!O._readableState||((j=O._writableState)===null||j===void 0?void 0:j.writable)!==!1))}function E(O){return!!(O&&typeof O.pipe=="function"&&O._readableState&&typeof O.on=="function"&&typeof O.write=="function")}function g(O){return O&&(O._readableState||O._writableState||typeof O.write=="function"&&typeof O.on=="function"||typeof O.pipe=="function"&&typeof O.on=="function")}function b(O){return!!(O&&!g(O)&&typeof O.pipeThrough=="function"&&typeof O.getReader=="function"&&typeof O.cancel=="function")}function p(O){return!!(O&&!g(O)&&typeof O.getWriter=="function"&&typeof O.abort=="function")}function m(O){return!!(O&&!g(O)&&typeof O.readable=="object"&&typeof O.writable=="object")}function y(O){return b(O)||p(O)||m(O)}function I(O,j){return O==null?!1:j===!0?typeof O[e]=="function":j===!1?typeof O[t]=="function":typeof O[e]=="function"||typeof O[t]=="function"}function x(O){if(!g(O))return null;const j=O._writableState,Y=O._readableState,K=j||Y;return!!(O.destroyed||O[r]||K!=null&&K.destroyed)}function z(O){if(!f(O))return null;if(O.writableEnded===!0)return!0;const j=O._writableState;return j!=null&&j.errored?!1:typeof j?.ended!="boolean"?null:j.ended}function k(O,j){if(!f(O))return null;if(O.writableFinished===!0)return!0;const Y=O._writableState;return Y!=null&&Y.errored?!1:typeof Y?.finished!="boolean"?null:!!(Y.finished||j===!1&&Y.ended===!0&&Y.length===0)}function B(O){if(!h(O))return null;if(O.readableEnded===!0)return!0;const j=O._readableState;return!j||j.errored?!1:typeof j?.ended!="boolean"?null:j.ended}function J(O,j){if(!h(O))return null;const Y=O._readableState;return Y!=null&&Y.errored?!1:typeof Y?.endEmitted!="boolean"?null:!!(Y.endEmitted||j===!1&&Y.ended===!0&&Y.length===0)}function G(O){return O&&O[s]!=null?O[s]:typeof O?.readable!="boolean"?null:x(O)?!1:h(O)&&O.readable&&!J(O)}function H(O){return O&&O[o]!=null?O[o]:typeof O?.writable!="boolean"?null:x(O)?!1:f(O)&&O.writable&&!z(O)}function D(O,j){return g(O)?x(O)?!0:!(j?.readable!==!1&&G(O)||j?.writable!==!1&&H(O)):null}function C(O){var j,Y;return g(O)?O.writableErrored?O.writableErrored:(j=(Y=O._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&j!==void 0?j:null:null}function ne(O){var j,Y;return g(O)?O.readableErrored?O.readableErrored:(j=(Y=O._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&j!==void 0?j:null:null}function L(O){if(!g(O))return null;if(typeof O.closed=="boolean")return O.closed;const j=O._writableState,Y=O._readableState;return typeof j?.closed=="boolean"||typeof Y?.closed=="boolean"?j?.closed||Y?.closed:typeof O._closed=="boolean"&&W(O)?O._closed:null}function W(O){return typeof O._closed=="boolean"&&typeof O._defaultKeepAlive=="boolean"&&typeof O._removedConnection=="boolean"&&typeof O._removedContLen=="boolean"}function X(O){return typeof O._sent100=="boolean"&&W(O)}function _e(O){var j;return typeof O._consuming=="boolean"&&typeof O._dumped=="boolean"&&((j=O.req)===null||j===void 0?void 0:j.upgradeOrConnect)===void 0}function De(O){if(!g(O))return null;const j=O._writableState,Y=O._readableState,K=j||Y;return!K&&X(O)||!!(K&&K.autoDestroy&&K.emitClose&&K.closed===!1)}function ae(O){var j;return!!(O&&((j=O[a])!==null&&j!==void 0?j:O.readableDidRead||O.readableAborted))}function de(O){var j,Y,K,we,Ee,Le,Oe,ee,re,ce;return!!(O&&((j=(Y=(K=(we=(Ee=(Le=O[n])!==null&&Le!==void 0?Le:O.readableErrored)!==null&&Ee!==void 0?Ee:O.writableErrored)!==null&&we!==void 0?we:(Oe=O._readableState)===null||Oe===void 0?void 0:Oe.errorEmitted)!==null&&K!==void 0?K:(ee=O._writableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&Y!==void 0?Y:(re=O._readableState)===null||re===void 0?void 0:re.errored)!==null&&j!==void 0?j:!((ce=O._writableState)===null||ce===void 0)&&ce.errored))}return Yn={isDestroyed:x,kIsDestroyed:r,isDisturbed:ae,kIsDisturbed:a,isErrored:de,kIsErrored:n,isReadable:G,kIsReadable:s,kIsClosedPromise:d,kControllerErrorFunction:u,kIsWritable:o,isClosed:L,isDuplexNodeStream:E,isFinished:D,isIterable:I,isReadableNodeStream:h,isReadableStream:b,isReadableEnded:B,isReadableFinished:J,isReadableErrored:ne,isNodeStream:g,isWebStream:y,isWritable:H,isWritableNodeStream:f,isWritableStream:p,isWritableEnded:z,isWritableFinished:k,isWritableErrored:C,isServerRequest:_e,isServerResponse:X,willEmitClose:De,isTransformStream:m},Yn}var ro;function Ki(){if(ro)return ln.exports;ro=1;const e=rr(),{AbortError:t,codes:i}=Wt(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:n}=i,{kEmptyObject:s,once:o}=Gt(),{validateAbortSignal:a,validateFunction:d,validateObject:u,validateBoolean:h}=Jr(),{Promise:f,PromisePrototypeThen:E,SymbolDispose:g}=St(),{isClosed:b,isReadable:p,isReadableNodeStream:m,isReadableStream:y,isReadableFinished:I,isReadableErrored:x,isWritable:z,isWritableNodeStream:k,isWritableStream:B,isWritableFinished:J,isWritableErrored:G,isNodeStream:H,willEmitClose:D,kIsClosedPromise:C}=Ui();let ne;function L(ae){return ae.setHeader&&typeof ae.abort=="function"}const W=()=>{};function X(ae,de,O){var j,Y;if(arguments.length===2?(O=de,de=s):de==null?de=s:u(de,"options"),d(O,"callback"),a(de.signal,"options.signal"),O=o(O),y(ae)||B(ae))return _e(ae,de,O);if(!H(ae))throw new r("stream",["ReadableStream","WritableStream","Stream"],ae);const K=(j=de.readable)!==null&&j!==void 0?j:m(ae),we=(Y=de.writable)!==null&&Y!==void 0?Y:k(ae),Ee=ae._writableState,Le=ae._readableState,Oe=()=>{ae.writable||ce()};let ee=D(ae)&&m(ae)===K&&k(ae)===we,re=J(ae,!1);const ce=()=>{re=!0,ae.destroyed&&(ee=!1),!(ee&&(!ae.readable||K))&&(!K||le)&&O.call(ae)};let le=I(ae,!1);const be=()=>{le=!0,ae.destroyed&&(ee=!1),!(ee&&(!ae.writable||we))&&(!we||re)&&O.call(ae)},M=N=>{O.call(ae,N)};let $=b(ae);const ie=()=>{$=!0;const N=G(ae)||x(ae);if(N&&typeof N!="boolean")return O.call(ae,N);if(K&&!le&&m(ae,!0)&&!I(ae,!1))return O.call(ae,new n);if(we&&!re&&!J(ae,!1))return O.call(ae,new n);O.call(ae)},pe=()=>{$=!0;const N=G(ae)||x(ae);if(N&&typeof N!="boolean")return O.call(ae,N);O.call(ae)},ye=()=>{ae.req.on("finish",ce)};L(ae)?(ae.on("complete",ce),ee||ae.on("abort",ie),ae.req?ye():ae.on("request",ye)):we&&!Ee&&(ae.on("end",Oe),ae.on("close",Oe)),!ee&&typeof ae.aborted=="boolean"&&ae.on("aborted",ie),ae.on("end",be),ae.on("finish",ce),de.error!==!1&&ae.on("error",M),ae.on("close",ie),$?e.nextTick(ie):Ee!=null&&Ee.errorEmitted||Le!=null&&Le.errorEmitted?ee||e.nextTick(pe):(!K&&(!ee||p(ae))&&(re||z(ae)===!1)||!we&&(!ee||z(ae))&&(le||p(ae)===!1)||Le&&ae.req&&ae.aborted)&&e.nextTick(pe);const me=()=>{O=W,ae.removeListener("aborted",ie),ae.removeListener("complete",ce),ae.removeListener("abort",ie),ae.removeListener("request",ye),ae.req&&ae.req.removeListener("finish",ce),ae.removeListener("end",Oe),ae.removeListener("close",Oe),ae.removeListener("finish",ce),ae.removeListener("end",be),ae.removeListener("error",M),ae.removeListener("close",ie)};if(de.signal&&!$){const N=()=>{const P=O;me(),P.call(ae,new t(void 0,{cause:de.signal.reason}))};if(de.signal.aborted)e.nextTick(N);else{ne=ne||Gt().addAbortListener;const P=ne(de.signal,N),oe=O;O=o((...te)=>{P[g](),oe.apply(ae,te)})}}return me}function _e(ae,de,O){let j=!1,Y=W;if(de.signal)if(Y=()=>{j=!0,O.call(ae,new t(void 0,{cause:de.signal.reason}))},de.signal.aborted)e.nextTick(Y);else{ne=ne||Gt().addAbortListener;const we=ne(de.signal,Y),Ee=O;O=o((...Le)=>{we[g](),Ee.apply(ae,Le)})}const K=(...we)=>{j||e.nextTick(()=>O.apply(ae,we))};return E(ae[C].promise,K,K),W}function De(ae,de){var O;let j=!1;return de===null&&(de=s),(O=de)!==null&&O!==void 0&&O.cleanup&&(h(de.cleanup,"cleanup"),j=de.cleanup),new f((Y,K)=>{const we=X(ae,de,Ee=>{j&&we(),Ee?K(Ee):Y()})})}return ln.exports=X,ln.exports.finished=De,ln.exports}var Xn,no;function Ir(){if(no)return Xn;no=1;const e=rr(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:r}=Wt(),{Symbol:n}=St(),{kIsDestroyed:s,isDestroyed:o,isFinished:a,isServerRequest:d}=Ui(),u=n("kDestroy"),h=n("kConstruct");function f(D,C,ne){D&&(D.stack,C&&!C.errored&&(C.errored=D),ne&&!ne.errored&&(ne.errored=D))}function E(D,C){const ne=this._readableState,L=this._writableState,W=L||ne;return L!=null&&L.destroyed||ne!=null&&ne.destroyed?(typeof C=="function"&&C(),this):(f(D,L,ne),L&&(L.destroyed=!0),ne&&(ne.destroyed=!0),W.constructed?g(this,D,C):this.once(u,function(X){g(this,t(X,D),C)}),this)}function g(D,C,ne){let L=!1;function W(X){if(L)return;L=!0;const _e=D._readableState,De=D._writableState;f(X,De,_e),De&&(De.closed=!0),_e&&(_e.closed=!0),typeof ne=="function"&&ne(X),X?e.nextTick(b,D,X):e.nextTick(p,D)}try{D._destroy(C||null,W)}catch(X){W(X)}}function b(D,C){m(D,C),p(D)}function p(D){const C=D._readableState,ne=D._writableState;ne&&(ne.closeEmitted=!0),C&&(C.closeEmitted=!0),(ne!=null&&ne.emitClose||C!=null&&C.emitClose)&&D.emit("close")}function m(D,C){const ne=D._readableState,L=D._writableState;L!=null&&L.errorEmitted||ne!=null&&ne.errorEmitted||(L&&(L.errorEmitted=!0),ne&&(ne.errorEmitted=!0),D.emit("error",C))}function y(){const D=this._readableState,C=this._writableState;D&&(D.constructed=!0,D.closed=!1,D.closeEmitted=!1,D.destroyed=!1,D.errored=null,D.errorEmitted=!1,D.reading=!1,D.ended=D.readable===!1,D.endEmitted=D.readable===!1),C&&(C.constructed=!0,C.destroyed=!1,C.closed=!1,C.closeEmitted=!1,C.errored=null,C.errorEmitted=!1,C.finalCalled=!1,C.prefinished=!1,C.ended=C.writable===!1,C.ending=C.writable===!1,C.finished=C.writable===!1)}function I(D,C,ne){const L=D._readableState,W=D._writableState;if(W!=null&&W.destroyed||L!=null&&L.destroyed)return this;L!=null&&L.autoDestroy||W!=null&&W.autoDestroy?D.destroy(C):C&&(C.stack,W&&!W.errored&&(W.errored=C),L&&!L.errored&&(L.errored=C),ne?e.nextTick(m,D,C):m(D,C))}function x(D,C){if(typeof D._construct!="function")return;const ne=D._readableState,L=D._writableState;ne&&(ne.constructed=!1),L&&(L.constructed=!1),D.once(h,C),!(D.listenerCount(h)>1)&&e.nextTick(z,D)}function z(D){let C=!1;function ne(L){if(C){I(D,L??new i);return}C=!0;const W=D._readableState,X=D._writableState,_e=X||W;W&&(W.constructed=!0),X&&(X.constructed=!0),_e.destroyed?D.emit(u,L):L?I(D,L,!0):e.nextTick(k,D)}try{D._construct(L=>{e.nextTick(ne,L)})}catch(L){e.nextTick(ne,L)}}function k(D){D.emit(h)}function B(D){return D?.setHeader&&typeof D.abort=="function"}function J(D){D.emit("close")}function G(D,C){D.emit("error",C),e.nextTick(J,D)}function H(D,C){!D||o(D)||(!C&&!a(D)&&(C=new r),d(D)?(D.socket=null,D.destroy(C)):B(D)?D.abort():B(D.req)?D.req.abort():typeof D.destroy=="function"?D.destroy(C):typeof D.close=="function"?D.close():C?e.nextTick(G,D,C):e.nextTick(J,D),D.destroyed||(D[s]=!0))}return Xn={construct:x,destroyer:H,destroy:E,undestroy:y,errorOrDestroy:I},Xn}var Jn,so;function Zs(){if(so)return Jn;so=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=St(),{EventEmitter:i}=Nn();function r(s){i.call(this,s)}t(r.prototype,i.prototype),t(r,i),r.prototype.pipe=function(s,o){const a=this;function d(p){s.writable&&s.write(p)===!1&&a.pause&&a.pause()}a.on("data",d);function u(){a.readable&&a.resume&&a.resume()}s.on("drain",u),!s._isStdio&&(!o||o.end!==!1)&&(a.on("end",f),a.on("close",E));let h=!1;function f(){h||(h=!0,s.end())}function E(){h||(h=!0,typeof s.destroy=="function"&&s.destroy())}function g(p){b(),i.listenerCount(this,"error")===0&&this.emit("error",p)}n(a,"error",g),n(s,"error",g);function b(){a.removeListener("data",d),s.removeListener("drain",u),a.removeListener("end",f),a.removeListener("close",E),a.removeListener("error",g),s.removeListener("error",g),a.removeListener("end",b),a.removeListener("close",b),s.removeListener("close",b)}return a.on("end",b),a.on("close",b),s.on("close",b),s.emit("pipe",a),s};function n(s,o,a){if(typeof s.prependListener=="function")return s.prependListener(o,a);!s._events||!s._events[o]?s.on(o,a):e(s._events[o])?s._events[o].unshift(a):s._events[o]=[a,s._events[o]]}return Jn={Stream:r,prependListener:n},Jn}var Zn={exports:{}},ao;function Rn(){return ao||(ao=1,(function(e){const{SymbolDispose:t}=St(),{AbortError:i,codes:r}=Wt(),{isNodeStream:n,isWebStream:s,kControllerErrorFunction:o}=Ui(),a=Ki(),{ERR_INVALID_ARG_TYPE:d}=r;let u;const h=(f,E)=>{if(typeof f!="object"||!("aborted"in f))throw new d(E,"AbortSignal",f)};e.exports.addAbortSignal=function(E,g){if(h(E,"signal"),!n(g)&&!s(g))throw new d("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(E,g)},e.exports.addAbortSignalNoValidate=function(f,E){if(typeof f!="object"||!("aborted"in f))return E;const g=n(E)?()=>{E.destroy(new i(void 0,{cause:f.reason}))}:()=>{E[o](new i(void 0,{cause:f.reason}))};if(f.aborted)g();else{u=u||Gt().addAbortListener;const b=u(f,g);a(E,b[t])}return E}})(Zn)),Zn.exports}var Qn,oo;function ad(){if(oo)return Qn;oo=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:i,Uint8Array:r}=St(),{Buffer:n}=Bi(),{inspect:s}=Gt();return Qn=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const d={data:a,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}unshift(a){const d={data:a,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let d=this.head,u=""+d.data;for(;(d=d.next)!==null;)u+=a+d.data;return u}concat(a){if(this.length===0)return n.alloc(0);const d=n.allocUnsafe(a>>>0);let u=this.head,h=0;for(;u;)i(d,u.data,h),h+=u.data.length,u=u.next;return d}consume(a,d){const u=this.head.data;if(a<u.length){const h=u.slice(0,a);return this.head.data=u.slice(a),h}return a===u.length?this.shift():d?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[t](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let d="",u=this.head,h=0;do{const f=u.data;if(a>f.length)d+=f,a-=f.length;else{a===f.length?(d+=f,++h,u.next?this.head=u.next:this.head=this.tail=null):(d+=e(f,0,a),this.head=u,u.data=e(f,a));break}++h}while((u=u.next)!==null);return this.length-=h,d}_getBuffer(a){const d=n.allocUnsafe(a),u=a;let h=this.head,f=0;do{const E=h.data;if(a>E.length)i(d,E,u-a),a-=E.length;else{a===E.length?(i(d,E,u-a),++f,h.next?this.head=h.next:this.head=this.tail=null):(i(d,new r(E.buffer,E.byteOffset,a),u-a),this.head=h,h.data=E.slice(a));break}++f}while((h=h.next)!==null);return this.length-=f,d}[Symbol.for("nodejs.util.inspect.custom")](a,d){return s(this,{...d,depth:0,customInspect:!1})}},Qn}var es,lo;function zn(){if(lo)return es;lo=1;const{MathFloor:e,NumberIsInteger:t}=St(),{validateInteger:i}=Jr(),{ERR_INVALID_ARG_VALUE:r}=Wt().codes;let n=16*1024,s=16;function o(h,f,E){return h.highWaterMark!=null?h.highWaterMark:f?h[E]:null}function a(h){return h?s:n}function d(h,f){i(f,"value",0),h?s=f:n=f}function u(h,f,E,g){const b=o(f,g,E);if(b!=null){if(!t(b)||b<0){const p=g?`options.${E}`:"options.highWaterMark";throw new r(p,b)}return e(b)}return a(h.objectMode)}return es={getHighWaterMark:u,getDefaultHighWaterMark:a,setDefaultHighWaterMark:d},es}var ts={},cn={exports:{}};var co;function od(){return co||(co=1,(function(e,t){var i=Bi(),r=i.Buffer;function n(o,a){for(var d in o)a[d]=o[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(n(i,t),t.Buffer=s);function s(o,a,d){return r(o,a,d)}s.prototype=Object.create(r.prototype),n(r,s),s.from=function(o,a,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,d)},s.alloc=function(o,a,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof d=="string"?u.fill(a,d):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}})(cn,cn.exports)),cn.exports}var uo;function ld(){if(uo)return ts;uo=1;var e=od().Buffer,t=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(y){if(!y)return"utf8";for(var I;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(I)return;y=(""+y).toLowerCase(),I=!0}}function r(y){var I=i(y);if(typeof I!="string"&&(e.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return I||y}ts.StringDecoder=n;function n(y){this.encoding=r(y);var I;switch(this.encoding){case"utf16le":this.text=f,this.end=E,I=4;break;case"utf8":this.fillLast=d,I=4;break;case"base64":this.text=g,this.end=b,I=3;break;default:this.write=p,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(I)}n.prototype.write=function(y){if(y.length===0)return"";var I,x;if(this.lastNeed){if(I=this.fillLast(y),I===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<y.length?I?I+this.text(y,x):this.text(y,x):I||""},n.prototype.end=h,n.prototype.text=u,n.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function s(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function o(y,I,x){var z=I.length-1;if(z<x)return 0;var k=s(I[z]);return k>=0?(k>0&&(y.lastNeed=k-1),k):--z<x||k===-2?0:(k=s(I[z]),k>=0?(k>0&&(y.lastNeed=k-2),k):--z<x||k===-2?0:(k=s(I[z]),k>=0?(k>0&&(k===2?k=0:y.lastNeed=k-3),k):0))}function a(y,I,x){if((I[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return y.lastNeed=2,""}}function d(y){var I=this.lastTotal-this.lastNeed,x=a(this,y);if(x!==void 0)return x;if(this.lastNeed<=y.length)return y.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,I,0,y.length),this.lastNeed-=y.length}function u(y,I){var x=o(this,y,I);if(!this.lastNeed)return y.toString("utf8",I);this.lastTotal=x;var z=y.length-(x-this.lastNeed);return y.copy(this.lastChar,0,z),y.toString("utf8",I,z)}function h(y){var I=y&&y.length?this.write(y):"";return this.lastNeed?I+"":I}function f(y,I){if((y.length-I)%2===0){var x=y.toString("utf16le",I);if(x){var z=x.charCodeAt(x.length-1);if(z>=55296&&z<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",I,y.length-1)}function E(y){var I=y&&y.length?this.write(y):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,x)}return I}function g(y,I){var x=(y.length-I)%3;return x===0?y.toString("base64",I):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",I,y.length-x))}function b(y){var I=y&&y.length?this.write(y):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function p(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return ts}var is,fo;function Kl(){if(fo)return is;fo=1;const e=rr(),{PromisePrototypeThen:t,SymbolAsyncIterator:i,SymbolIterator:r}=St(),{Buffer:n}=Bi(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:o}=Wt().codes;function a(d,u,h){let f;if(typeof u=="string"||u instanceof n)return new d({objectMode:!0,...h,read(){this.push(u),this.push(null)}});let E;if(u&&u[i])E=!0,f=u[i]();else if(u&&u[r])E=!1,f=u[r]();else throw new s("iterable",["Iterable"],u);const g=new d({objectMode:!0,highWaterMark:1,...h});let b=!1;g._read=function(){b||(b=!0,m())},g._destroy=function(y,I){t(p(y),()=>e.nextTick(I,y),x=>e.nextTick(I,x||y))};async function p(y){const I=y!=null,x=typeof f.throw=="function";if(I&&x){const{value:z,done:k}=await f.throw(y);if(await z,k)return}if(typeof f.return=="function"){const{value:z}=await f.return();await z}}async function m(){for(;;){try{const{value:y,done:I}=E?await f.next():f.next();if(I)g.push(null);else{const x=y&&typeof y.then=="function"?await y:y;if(x===null)throw b=!1,new o;if(g.push(x))continue;b=!1}}catch(y){g.destroy(y)}break}}return g}return is=a,is}var rs,ho;function Ln(){if(ho)return rs;ho=1;const e=rr(),{ArrayPrototypeIndexOf:t,NumberIsInteger:i,NumberIsNaN:r,NumberParseInt:n,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:a,Promise:d,SafeSet:u,SymbolAsyncDispose:h,SymbolAsyncIterator:f,Symbol:E}=St();rs=te,te.ReadableState=oe;const{EventEmitter:g}=Nn(),{Stream:b,prependListener:p}=Zs(),{Buffer:m}=Bi(),{addAbortSignal:y}=Rn(),I=Ki();let x=Gt().debuglog("stream",A=>{x=A});const z=ad(),k=Ir(),{getHighWaterMark:B,getDefaultHighWaterMark:J}=zn(),{aggregateTwoErrors:G,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:D,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:ne,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:L},AbortError:W}=Wt(),{validateObject:X}=Jr(),_e=E("kPaused"),{StringDecoder:De}=ld(),ae=Kl();a(te.prototype,b.prototype),a(te,b);const de=()=>{},{errorOrDestroy:O}=k,j=1,Y=2,K=4,we=8,Ee=16,Le=32,Oe=64,ee=128,re=256,ce=512,le=1024,be=2048,M=4096,$=8192,ie=16384,pe=32768,ye=65536,me=1<<17,N=1<<18;function P(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(R){R?this.state|=A:this.state&=~A}}}s(oe.prototype,{objectMode:P(j),ended:P(Y),endEmitted:P(K),reading:P(we),constructed:P(Ee),sync:P(Le),needReadable:P(Oe),emittedReadable:P(ee),readableListening:P(re),resumeScheduled:P(ce),errorEmitted:P(le),emitClose:P(be),autoDestroy:P(M),destroyed:P($),closed:P(ie),closeEmitted:P(pe),multiAwaitDrain:P(ye),readingMore:P(me),dataEmitted:P(N)});function oe(A,R,Ie){typeof Ie!="boolean"&&(Ie=R instanceof Li()),this.state=be|M|Ee|Le,A&&A.objectMode&&(this.state|=j),Ie&&A&&A.readableObjectMode&&(this.state|=j),this.highWaterMark=A?B(this,A,"readableHighWaterMark",Ie):J(!1),this.buffer=new z,this.length=0,this.pipes=[],this.flowing=null,this[_e]=null,A&&A.emitClose===!1&&(this.state&=~be),A&&A.autoDestroy===!1&&(this.state&=~M),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new De(A.encoding),this.encoding=A.encoding)}function te(A){if(!(this instanceof te))return new te(A);const R=this instanceof Li();this._readableState=new oe(A,this,R),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!R&&y(A.signal,this)),b.call(this,A),k.construct(this,()=>{this._readableState.needReadable&&T(this,this._readableState)})}te.prototype.destroy=k.destroy,te.prototype._undestroy=k.undestroy,te.prototype._destroy=function(A,R){R(A)},te.prototype[g.captureRejectionSymbol]=function(A){this.destroy(A)},te.prototype[h]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new W,this.destroy(A)),new d((R,Ie)=>I(this,xe=>xe&&xe!==A?Ie(xe):R(null)))},te.prototype.push=function(A,R){return Ue(this,A,R,!1)},te.prototype.unshift=function(A,R){return Ue(this,A,R,!0)};function Ue(A,R,Ie,xe){x("readableAddChunk",R);const Me=A._readableState;let xt;if((Me.state&j)===0&&(typeof R=="string"?(Ie=Ie||Me.defaultEncoding,Me.encoding!==Ie&&(xe&&Me.encoding?R=m.from(R,Ie).toString(Me.encoding):(R=m.from(R,Ie),Ie=""))):R instanceof m?Ie="":b._isUint8Array(R)?(R=b._uint8ArrayToBuffer(R),Ie=""):R!=null&&(xt=new H("chunk",["string","Buffer","Uint8Array"],R))),xt)O(A,xt);else if(R===null)Me.state&=~we,c(A,Me);else if((Me.state&j)!==0||R&&R.length>0)if(xe)if((Me.state&K)!==0)O(A,new L);else{if(Me.destroyed||Me.errored)return!1;et(A,Me,R,!0)}else if(Me.ended)O(A,new ne);else{if(Me.destroyed||Me.errored)return!1;Me.state&=~we,Me.decoder&&!Ie?(R=Me.decoder.write(R),Me.objectMode||R.length!==0?et(A,Me,R,!1):T(A,Me)):et(A,Me,R,!1)}else xe||(Me.state&=~we,T(A,Me));return!Me.ended&&(Me.length<Me.highWaterMark||Me.length===0)}function et(A,R,Ie,xe){R.flowing&&R.length===0&&!R.sync&&A.listenerCount("data")>0?((R.state&ye)!==0?R.awaitDrainWriters.clear():R.awaitDrainWriters=null,R.dataEmitted=!0,A.emit("data",Ie)):(R.length+=R.objectMode?1:Ie.length,xe?R.buffer.unshift(Ie):R.buffer.push(Ie),(R.state&Oe)!==0&&l(A)),T(A,R)}te.prototype.isPaused=function(){const A=this._readableState;return A[_e]===!0||A.flowing===!1},te.prototype.setEncoding=function(A){const R=new De(A);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;const Ie=this._readableState.buffer;let xe="";for(const Me of Ie)xe+=R.write(Me);return Ie.clear(),xe!==""&&Ie.push(xe),this._readableState.length=xe.length,this};const Pe=1073741824;function it(A){if(A>Pe)throw new C("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function w(A,R){return A<=0||R.length===0&&R.ended?0:(R.state&j)!==0?1:r(A)?R.flowing&&R.length?R.buffer.first().length:R.length:A<=R.length?A:R.ended?R.length:0}te.prototype.read=function(A){x("read",A),A===void 0?A=NaN:i(A)||(A=n(A,10));const R=this._readableState,Ie=A;if(A>R.highWaterMark&&(R.highWaterMark=it(A)),A!==0&&(R.state&=~ee),A===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return x("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?Bt(this):l(this),null;if(A=w(A,R),A===0&&R.ended)return R.length===0&&Bt(this),null;let xe=(R.state&Oe)!==0;if(x("need readable",xe),(R.length===0||R.length-A<R.highWaterMark)&&(xe=!0,x("length less than watermark",xe)),R.ended||R.reading||R.destroyed||R.errored||!R.constructed)xe=!1,x("reading, ended or constructing",xe);else if(xe){x("do read"),R.state|=we|Le,R.length===0&&(R.state|=Oe);try{this._read(R.highWaterMark)}catch(xt){O(this,xt)}R.state&=~Le,R.reading||(A=w(Ie,R))}let Me;return A>0?Me=lt(A,R):Me=null,Me===null?(R.needReadable=R.length<=R.highWaterMark,A=0):(R.length-=A,R.multiAwaitDrain?R.awaitDrainWriters.clear():R.awaitDrainWriters=null),R.length===0&&(R.ended||(R.needReadable=!0),Ie!==A&&R.ended&&Bt(this)),Me!==null&&!R.errorEmitted&&!R.closeEmitted&&(R.dataEmitted=!0,this.emit("data",Me)),Me};function c(A,R){if(x("onEofChunk"),!R.ended){if(R.decoder){const Ie=R.decoder.end();Ie&&Ie.length&&(R.buffer.push(Ie),R.length+=R.objectMode?1:Ie.length)}R.ended=!0,R.sync?l(A):(R.needReadable=!1,R.emittedReadable=!0,S(A))}}function l(A){const R=A._readableState;x("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(x("emitReadable",R.flowing),R.emittedReadable=!0,e.nextTick(S,A))}function S(A){const R=A._readableState;x("emitReadable_",R.destroyed,R.length,R.ended),!R.destroyed&&!R.errored&&(R.length||R.ended)&&(A.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,he(A)}function T(A,R){!R.readingMore&&R.constructed&&(R.readingMore=!0,e.nextTick(v,A,R))}function v(A,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){const Ie=R.length;if(x("maybeReadMore read 0"),A.read(0),Ie===R.length)break}R.readingMore=!1}te.prototype._read=function(A){throw new D("_read()")},te.prototype.pipe=function(A,R){const Ie=this,xe=this._readableState;xe.pipes.length===1&&(xe.multiAwaitDrain||(xe.multiAwaitDrain=!0,xe.awaitDrainWriters=new u(xe.awaitDrainWriters?[xe.awaitDrainWriters]:[]))),xe.pipes.push(A),x("pipe count=%d opts=%j",xe.pipes.length,R);const xt=(!R||R.end!==!1)&&A!==e.stdout&&A!==e.stderr?Tr:Fi;xe.endEmitted?e.nextTick(xt):Ie.once("end",xt),A.on("unpipe",Ut);function Ut(_i,Zt){x("onunpipe"),_i===Ie&&Zt&&Zt.hasUnpiped===!1&&(Zt.hasUnpiped=!0,Qr())}function Tr(){x("onend"),A.end()}let hi,Nr=!1;function Qr(){x("cleanup"),A.removeListener("close",ar),A.removeListener("finish",or),hi&&A.removeListener("drain",hi),A.removeListener("error",sr),A.removeListener("unpipe",Ut),Ie.removeListener("end",Tr),Ie.removeListener("end",Fi),Ie.removeListener("data",zr),Nr=!0,hi&&xe.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&hi()}function Rr(){Nr||(xe.pipes.length===1&&xe.pipes[0]===A?(x("false write response, pause",0),xe.awaitDrainWriters=A,xe.multiAwaitDrain=!1):xe.pipes.length>1&&xe.pipes.includes(A)&&(x("false write response, pause",xe.awaitDrainWriters.size),xe.awaitDrainWriters.add(A)),Ie.pause()),hi||(hi=_(Ie,A),A.on("drain",hi))}Ie.on("data",zr);function zr(_i){x("ondata");const Zt=A.write(_i);x("dest.write",Zt),Zt===!1&&Rr()}function sr(_i){if(x("onerror",_i),Fi(),A.removeListener("error",sr),A.listenerCount("error")===0){const Zt=A._writableState||A._readableState;Zt&&!Zt.errorEmitted?O(A,_i):A.emit("error",_i)}}p(A,"error",sr);function ar(){A.removeListener("finish",or),Fi()}A.once("close",ar);function or(){x("onfinish"),A.removeListener("close",ar),Fi()}A.once("finish",or);function Fi(){x("unpipe"),Ie.unpipe(A)}return A.emit("pipe",Ie),A.writableNeedDrain===!0?Rr():xe.flowing||(x("pipe resume"),Ie.resume()),A};function _(A,R){return function(){const xe=A._readableState;xe.awaitDrainWriters===R?(x("pipeOnDrain",1),xe.awaitDrainWriters=null):xe.multiAwaitDrain&&(x("pipeOnDrain",xe.awaitDrainWriters.size),xe.awaitDrainWriters.delete(R)),(!xe.awaitDrainWriters||xe.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}te.prototype.unpipe=function(A){const R=this._readableState,Ie={hasUnpiped:!1};if(R.pipes.length===0)return this;if(!A){const Me=R.pipes;R.pipes=[],this.pause();for(let xt=0;xt<Me.length;xt++)Me[xt].emit("unpipe",this,{hasUnpiped:!1});return this}const xe=t(R.pipes,A);return xe===-1?this:(R.pipes.splice(xe,1),R.pipes.length===0&&this.pause(),A.emit("unpipe",this,Ie),this)},te.prototype.on=function(A,R){const Ie=b.prototype.on.call(this,A,R),xe=this._readableState;return A==="data"?(xe.readableListening=this.listenerCount("readable")>0,xe.flowing!==!1&&this.resume()):A==="readable"&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,x("on readable",xe.length,xe.reading),xe.length?l(this):xe.reading||e.nextTick(se,this)),Ie},te.prototype.addListener=te.prototype.on,te.prototype.removeListener=function(A,R){const Ie=b.prototype.removeListener.call(this,A,R);return A==="readable"&&e.nextTick(U,this),Ie},te.prototype.off=te.prototype.removeListener,te.prototype.removeAllListeners=function(A){const R=b.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&e.nextTick(U,this),R};function U(A){const R=A._readableState;R.readableListening=A.listenerCount("readable")>0,R.resumeScheduled&&R[_e]===!1?R.flowing=!0:A.listenerCount("data")>0?A.resume():R.readableListening||(R.flowing=null)}function se(A){x("readable nexttick read 0"),A.read(0)}te.prototype.resume=function(){const A=this._readableState;return A.flowing||(x("resume"),A.flowing=!A.readableListening,Se(this,A)),A[_e]=!1,this};function Se(A,R){R.resumeScheduled||(R.resumeScheduled=!0,e.nextTick(Re,A,R))}function Re(A,R){x("resume",R.reading),R.reading||A.read(0),R.resumeScheduled=!1,A.emit("resume"),he(A),R.flowing&&!R.reading&&A.read(0)}te.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[_e]=!0,this};function he(A){const R=A._readableState;for(x("flow",R.flowing);R.flowing&&A.read()!==null;);}te.prototype.wrap=function(A){let R=!1;A.on("data",xe=>{!this.push(xe)&&A.pause&&(R=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",xe=>{O(this,xe)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{R&&A.resume&&(R=!1,A.resume())};const Ie=o(A);for(let xe=1;xe<Ie.length;xe++){const Me=Ie[xe];this[Me]===void 0&&typeof A[Me]=="function"&&(this[Me]=A[Me].bind(A))}return this},te.prototype[f]=function(){return ue(this)},te.prototype.iterator=function(A){return A!==void 0&&X(A,"options"),ue(this,A)};function ue(A,R){typeof A.read!="function"&&(A=te.wrap(A,{objectMode:!0}));const Ie=Fe(A,R);return Ie.stream=A,Ie}async function*Fe(A,R){let Ie=de;function xe(Ut){this===A?(Ie(),Ie=de):Ie=Ut}A.on("readable",xe);let Me;const xt=I(A,{writable:!1},Ut=>{Me=Ut?G(Me,Ut):null,Ie(),Ie=de});try{for(;;){const Ut=A.destroyed?null:A.read();if(Ut!==null)yield Ut;else{if(Me)throw Me;if(Me===null)return;await new d(xe)}}}catch(Ut){throw Me=G(Me,Ut),Me}finally{(Me||R?.destroyOnReturn!==!1)&&(Me===void 0||A._readableState.autoDestroy)?k.destroyer(A,null):(A.off("readable",xe),xt())}}s(te.prototype,{readable:{__proto__:null,get(){const A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(oe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[_e]!==!1},set(A){this[_e]=!!A}}}),te._fromList=lt;function lt(A,R){if(R.length===0)return null;let Ie;return R.objectMode?Ie=R.buffer.shift():!A||A>=R.length?(R.decoder?Ie=R.buffer.join(""):R.buffer.length===1?Ie=R.buffer.first():Ie=R.buffer.concat(R.length),R.buffer.clear()):Ie=R.buffer.consume(A,R.decoder),Ie}function Bt(A){const R=A._readableState;x("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,e.nextTick(ve,R,A))}function ve(A,R){if(x("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,R.emit("end"),R.writable&&R.allowHalfOpen===!1)e.nextTick(fe,R);else if(A.autoDestroy){const Ie=R._writableState;(!Ie||Ie.autoDestroy&&(Ie.finished||Ie.writable===!1))&&R.destroy()}}}function fe(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}te.from=function(A,R){return ae(te,A,R)};let Be;function Dr(){return Be===void 0&&(Be={}),Be}return te.fromWeb=function(A,R){return Dr().newStreamReadableFromReadableStream(A,R)},te.toWeb=function(A,R){return Dr().newReadableStreamFromStreamReadable(A,R)},te.wrap=function(A,R){var Ie,xe;return new te({objectMode:(Ie=(xe=A.readableObjectMode)!==null&&xe!==void 0?xe:A.objectMode)!==null&&Ie!==void 0?Ie:!0,...R,destroy(Me,xt){k.destroyer(A,Me),xt(Me)}}).wrap(A)},rs}var ns,_o;function Qs(){if(_o)return ns;_o=1;const e=rr(),{ArrayPrototypeSlice:t,Error:i,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:n,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:a,Symbol:d,SymbolHasInstance:u}=St();ns=X,X.WritableState=L;const{EventEmitter:h}=Nn(),f=Zs().Stream,{Buffer:E}=Bi(),g=Ir(),{addAbortSignal:b}=Rn(),{getHighWaterMark:p,getDefaultHighWaterMark:m}=zn(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:z,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:B,ERR_STREAM_NULL_VALUES:J,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:H}=Wt().codes,{errorOrDestroy:D}=g;o(X.prototype,f.prototype),o(X,f);function C(){}const ne=d("kOnFinished");function L(M,$,ie){typeof ie!="boolean"&&(ie=$ instanceof Li()),this.objectMode=!!(M&&M.objectMode),ie&&(this.objectMode=this.objectMode||!!(M&&M.writableObjectMode)),this.highWaterMark=M?p(this,M,"writableHighWaterMark",ie):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const pe=!!(M&&M.decodeStrings===!1);this.decodeStrings=!pe,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=O.bind(void 0,$),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,W(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!M||M.emitClose!==!1,this.autoDestroy=!M||M.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ne]=[]}function W(M){M.buffered=[],M.bufferedIndex=0,M.allBuffers=!0,M.allNoop=!0}L.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},n(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function X(M){const $=this instanceof Li();if(!$&&!r(X,this))return new X(M);this._writableState=new L(M,this,$),M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&b(M.signal,this)),f.call(this,M),g.construct(this,()=>{const ie=this._writableState;ie.writing||we(this,ie),ee(this,ie)})}n(X,u,{__proto__:null,value:function(M){return r(this,M)?!0:this!==X?!1:M&&M._writableState instanceof L}}),X.prototype.pipe=function(){D(this,new z)};function _e(M,$,ie,pe){const ye=M._writableState;if(typeof ie=="function")pe=ie,ie=ye.defaultEncoding;else{if(!ie)ie=ye.defaultEncoding;else if(ie!=="buffer"&&!E.isEncoding(ie))throw new H(ie);typeof pe!="function"&&(pe=C)}if($===null)throw new J;if(!ye.objectMode)if(typeof $=="string")ye.decodeStrings!==!1&&($=E.from($,ie),ie="buffer");else if($ instanceof E)ie="buffer";else if(f._isUint8Array($))$=f._uint8ArrayToBuffer($),ie="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],$);let me;return ye.ending?me=new G:ye.destroyed&&(me=new k("write")),me?(e.nextTick(pe,me),D(M,me,!0),me):(ye.pendingcb++,De(M,ye,$,ie,pe))}X.prototype.write=function(M,$,ie){return _e(this,M,$,ie)===!0},X.prototype.cork=function(){this._writableState.corked++},X.prototype.uncork=function(){const M=this._writableState;M.corked&&(M.corked--,M.writing||we(this,M))},X.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=a($)),!E.isEncoding($))throw new H($);return this._writableState.defaultEncoding=$,this};function De(M,$,ie,pe,ye){const me=$.objectMode?1:ie.length;$.length+=me;const N=$.length<$.highWaterMark;return N||($.needDrain=!0),$.writing||$.corked||$.errored||!$.constructed?($.buffered.push({chunk:ie,encoding:pe,callback:ye}),$.allBuffers&&pe!=="buffer"&&($.allBuffers=!1),$.allNoop&&ye!==C&&($.allNoop=!1)):($.writelen=me,$.writecb=ye,$.writing=!0,$.sync=!0,M._write(ie,pe,$.onwrite),$.sync=!1),N&&!$.errored&&!$.destroyed}function ae(M,$,ie,pe,ye,me,N){$.writelen=pe,$.writecb=N,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new k("write")):ie?M._writev(ye,$.onwrite):M._write(ye,me,$.onwrite),$.sync=!1}function de(M,$,ie,pe){--$.pendingcb,pe(ie),K($),D(M,ie)}function O(M,$){const ie=M._writableState,pe=ie.sync,ye=ie.writecb;if(typeof ye!="function"){D(M,new x);return}ie.writing=!1,ie.writecb=null,ie.length-=ie.writelen,ie.writelen=0,$?($.stack,ie.errored||(ie.errored=$),M._readableState&&!M._readableState.errored&&(M._readableState.errored=$),pe?e.nextTick(de,M,ie,$,ye):de(M,ie,$,ye)):(ie.buffered.length>ie.bufferedIndex&&we(M,ie),pe?ie.afterWriteTickInfo!==null&&ie.afterWriteTickInfo.cb===ye?ie.afterWriteTickInfo.count++:(ie.afterWriteTickInfo={count:1,cb:ye,stream:M,state:ie},e.nextTick(j,ie.afterWriteTickInfo)):Y(M,ie,1,ye))}function j({stream:M,state:$,count:ie,cb:pe}){return $.afterWriteTickInfo=null,Y(M,$,ie,pe)}function Y(M,$,ie,pe){for(!$.ending&&!M.destroyed&&$.length===0&&$.needDrain&&($.needDrain=!1,M.emit("drain"));ie-- >0;)$.pendingcb--,pe();$.destroyed&&K($),ee(M,$)}function K(M){if(M.writing)return;for(let ye=M.bufferedIndex;ye<M.buffered.length;++ye){var $;const{chunk:me,callback:N}=M.buffered[ye],P=M.objectMode?1:me.length;M.length-=P,N(($=M.errored)!==null&&$!==void 0?$:new k("write"))}const ie=M[ne].splice(0);for(let ye=0;ye<ie.length;ye++){var pe;ie[ye]((pe=M.errored)!==null&&pe!==void 0?pe:new k("end"))}W(M)}function we(M,$){if($.corked||$.bufferProcessing||$.destroyed||!$.constructed)return;const{buffered:ie,bufferedIndex:pe,objectMode:ye}=$,me=ie.length-pe;if(!me)return;let N=pe;if($.bufferProcessing=!0,me>1&&M._writev){$.pendingcb-=me-1;const P=$.allNoop?C:te=>{for(let Ue=N;Ue<ie.length;++Ue)ie[Ue].callback(te)},oe=$.allNoop&&N===0?ie:t(ie,N);oe.allBuffers=$.allBuffers,ae(M,$,!0,$.length,oe,"",P),W($)}else{do{const{chunk:P,encoding:oe,callback:te}=ie[N];ie[N++]=null;const Ue=ye?1:P.length;ae(M,$,!1,Ue,P,oe,te)}while(N<ie.length&&!$.writing);N===ie.length?W($):N>256?(ie.splice(0,N),$.bufferedIndex=0):$.bufferedIndex=N}$.bufferProcessing=!1}X.prototype._write=function(M,$,ie){if(this._writev)this._writev([{chunk:M,encoding:$}],ie);else throw new I("_write()")},X.prototype._writev=null,X.prototype.end=function(M,$,ie){const pe=this._writableState;typeof M=="function"?(ie=M,M=null,$=null):typeof $=="function"&&(ie=$,$=null);let ye;if(M!=null){const me=_e(this,M,$);me instanceof i&&(ye=me)}return pe.corked&&(pe.corked=1,this.uncork()),ye||(!pe.errored&&!pe.ending?(pe.ending=!0,ee(this,pe,!0),pe.ended=!0):pe.finished?ye=new B("end"):pe.destroyed&&(ye=new k("end"))),typeof ie=="function"&&(ye||pe.finished?e.nextTick(ie,ye):pe[ne].push(ie)),this};function Ee(M){return M.ending&&!M.destroyed&&M.constructed&&M.length===0&&!M.errored&&M.buffered.length===0&&!M.finished&&!M.writing&&!M.errorEmitted&&!M.closeEmitted}function Le(M,$){let ie=!1;function pe(ye){if(ie){D(M,ye??x());return}if(ie=!0,$.pendingcb--,ye){const me=$[ne].splice(0);for(let N=0;N<me.length;N++)me[N](ye);D(M,ye,$.sync)}else Ee($)&&($.prefinished=!0,M.emit("prefinish"),$.pendingcb++,e.nextTick(re,M,$))}$.sync=!0,$.pendingcb++;try{M._final(pe)}catch(ye){pe(ye)}$.sync=!1}function Oe(M,$){!$.prefinished&&!$.finalCalled&&(typeof M._final=="function"&&!$.destroyed?($.finalCalled=!0,Le(M,$)):($.prefinished=!0,M.emit("prefinish")))}function ee(M,$,ie){Ee($)&&(Oe(M,$),$.pendingcb===0&&(ie?($.pendingcb++,e.nextTick((pe,ye)=>{Ee(ye)?re(pe,ye):ye.pendingcb--},M,$)):Ee($)&&($.pendingcb++,re(M,$))))}function re(M,$){$.pendingcb--,$.finished=!0;const ie=$[ne].splice(0);for(let pe=0;pe<ie.length;pe++)ie[pe]();if(M.emit("finish"),$.autoDestroy){const pe=M._readableState;(!pe||pe.autoDestroy&&(pe.endEmitted||pe.readable===!1))&&M.destroy()}}s(X.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(M){this._writableState&&(this._writableState.destroyed=M)}},writable:{__proto__:null,get(){const M=this._writableState;return!!M&&M.writable!==!1&&!M.destroyed&&!M.errored&&!M.ending&&!M.ended},set(M){this._writableState&&(this._writableState.writable=!!M)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const M=this._writableState;return M?!M.destroyed&&!M.ending&&M.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ce=g.destroy;X.prototype.destroy=function(M,$){const ie=this._writableState;return!ie.destroyed&&(ie.bufferedIndex<ie.buffered.length||ie[ne].length)&&e.nextTick(K,ie),ce.call(this,M,$),this},X.prototype._undestroy=g.undestroy,X.prototype._destroy=function(M,$){$(M)},X.prototype[h.captureRejectionSymbol]=function(M){this.destroy(M)};let le;function be(){return le===void 0&&(le={}),le}return X.fromWeb=function(M,$){return be().newStreamWritableFromWritableStream(M,$)},X.toWeb=function(M){return be().newWritableStreamFromStreamWritable(M)},ns}var ss,mo;function cd(){if(mo)return ss;mo=1;const e=rr(),t=Bi(),{isReadable:i,isWritable:r,isIterable:n,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:a,isDuplexNodeStream:d,isReadableStream:u,isWritableStream:h}=Ui(),f=Ki(),{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:b}}=Wt(),{destroyer:p}=Ir(),m=Li(),y=Ln(),I=Qs(),{createDeferredPromise:x}=Gt(),z=Kl(),k=globalThis.Blob||t.Blob,B=typeof k<"u"?function(L){return L instanceof k}:function(L){return!1},J=globalThis.AbortController||Wr().AbortController,{FunctionPrototypeCall:G}=St();class H extends m{constructor(L){super(L),L?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),L?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}ss=function ne(L,W){if(d(L))return L;if(o(L))return C({readable:L});if(a(L))return C({writable:L});if(s(L))return C({writable:!1,readable:!1});if(u(L))return C({readable:y.fromWeb(L)});if(h(L))return C({writable:I.fromWeb(L)});if(typeof L=="function"){const{value:_e,write:De,final:ae,destroy:de}=D(L);if(n(_e))return z(H,_e,{objectMode:!0,write:De,final:ae,destroy:de});const O=_e?.then;if(typeof O=="function"){let j;const Y=G(O,_e,K=>{if(K!=null)throw new b("nully","body",K)},K=>{p(j,K)});return j=new H({objectMode:!0,readable:!1,write:De,final(K){ae(async()=>{try{await Y,e.nextTick(K,null)}catch(we){e.nextTick(K,we)}})},destroy:de})}throw new b("Iterable, AsyncIterable or AsyncFunction",W,_e)}if(B(L))return ne(L.arrayBuffer());if(n(L))return z(H,L,{objectMode:!0,writable:!1});if(u(L?.readable)&&h(L?.writable))return H.fromWeb(L);if(typeof L?.writable=="object"||typeof L?.readable=="object"){const _e=L!=null&&L.readable?o(L?.readable)?L?.readable:ne(L.readable):void 0,De=L!=null&&L.writable?a(L?.writable)?L?.writable:ne(L.writable):void 0;return C({readable:_e,writable:De})}const X=L?.then;if(typeof X=="function"){let _e;return G(X,L,De=>{De!=null&&_e.push(De),_e.push(null)},De=>{p(_e,De)}),_e=new H({objectMode:!0,writable:!1,read(){}})}throw new g(W,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],L)};function D(ne){let{promise:L,resolve:W}=x();const X=new J,_e=X.signal;return{value:ne((async function*(){for(;;){const ae=L;L=null;const{chunk:de,done:O,cb:j}=await ae;if(e.nextTick(j),O)return;if(_e.aborted)throw new E(void 0,{cause:_e.reason});({promise:L,resolve:W}=x()),yield de}})(),{signal:_e}),write(ae,de,O){const j=W;W=null,j({chunk:ae,done:!1,cb:O})},final(ae){const de=W;W=null,de({done:!0,cb:ae})},destroy(ae,de){X.abort(),de(ae)}}}function C(ne){const L=ne.readable&&typeof ne.readable.read!="function"?y.wrap(ne.readable):ne.readable,W=ne.writable;let X=!!i(L),_e=!!r(W),De,ae,de,O,j;function Y(K){const we=O;O=null,we?we(K):K&&j.destroy(K)}return j=new H({readableObjectMode:!!(L!=null&&L.readableObjectMode),writableObjectMode:!!(W!=null&&W.writableObjectMode),readable:X,writable:_e}),_e&&(f(W,K=>{_e=!1,K&&p(L,K),Y(K)}),j._write=function(K,we,Ee){W.write(K,we)?Ee():De=Ee},j._final=function(K){W.end(),ae=K},W.on("drain",function(){if(De){const K=De;De=null,K()}}),W.on("finish",function(){if(ae){const K=ae;ae=null,K()}})),X&&(f(L,K=>{X=!1,K&&p(L,K),Y(K)}),L.on("readable",function(){if(de){const K=de;de=null,K()}}),L.on("end",function(){j.push(null)}),j._read=function(){for(;;){const K=L.read();if(K===null){de=j._read;return}if(!j.push(K))return}}),j._destroy=function(K,we){!K&&O!==null&&(K=new E),de=null,De=null,ae=null,O===null?we(K):(O=we,p(W,K),p(L,K))},j}return ss}var as,yo;function Li(){if(yo)return as;yo=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:i,ObjectSetPrototypeOf:r}=St();as=o;const n=Ln(),s=Qs();r(o.prototype,n.prototype),r(o,n);{const h=i(s.prototype);for(let f=0;f<h.length;f++){const E=h[f];o.prototype[E]||(o.prototype[E]=s.prototype[E])}}function o(h){if(!(this instanceof o))return new o(h);n.call(this,h),s.call(this,h),h?(this.allowHalfOpen=h.allowHalfOpen!==!1,h.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),h.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(s.prototype,"writableLength")},writableFinished:{__proto__:null,...t(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(h){this._readableState&&this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}}});let a;function d(){return a===void 0&&(a={}),a}o.fromWeb=function(h,f){return d().newStreamDuplexFromReadableWritablePair(h,f)},o.toWeb=function(h){return d().newReadableWritablePairFromDuplex(h)};let u;return o.from=function(h){return u||(u=cd()),u(h,"body")},as}var os,go;function Hl(){if(go)return os;go=1;const{ObjectSetPrototypeOf:e,Symbol:t}=St();os=o;const{ERR_METHOD_NOT_IMPLEMENTED:i}=Wt().codes,r=Li(),{getHighWaterMark:n}=zn();e(o.prototype,r.prototype),e(o,r);const s=t("kCallback");function o(u){if(!(this instanceof o))return new o(u);const h=u?n(this,u,"readableHighWaterMark",!0):null;h===0&&(u={...u,highWaterMark:null,readableHighWaterMark:h,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[s]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",d)}function a(u){typeof this._flush=="function"&&!this.destroyed?this._flush((h,f)=>{if(h){u?u(h):this.destroy(h);return}f!=null&&this.push(f),this.push(null),u&&u()}):(this.push(null),u&&u())}function d(){this._final!==a&&a.call(this)}return o.prototype._final=a,o.prototype._transform=function(u,h,f){throw new i("_transform()")},o.prototype._write=function(u,h,f){const E=this._readableState,g=this._writableState,b=E.length;this._transform(u,h,(p,m)=>{if(p){f(p);return}m!=null&&this.push(m),g.ended||b===E.length||E.length<E.highWaterMark?f():this[s]=f})},o.prototype._read=function(){if(this[s]){const u=this[s];this[s]=null,u()}},os}var ls,po;function Yl(){if(po)return ls;po=1;const{ObjectSetPrototypeOf:e}=St();ls=i;const t=Hl();e(i.prototype,t.prototype),e(i,t);function i(r){if(!(this instanceof i))return new i(r);t.call(this,r)}return i.prototype._transform=function(r,n,s){s(null,r)},ls}var cs,bo;function ea(){if(bo)return cs;bo=1;const e=rr(),{ArrayIsArray:t,Promise:i,SymbolAsyncIterator:r,SymbolDispose:n}=St(),s=Ki(),{once:o}=Gt(),a=Ir(),d=Li(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:E,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:p}=Wt(),{validateFunction:m,validateAbortSignal:y}=Jr(),{isIterable:I,isReadable:x,isReadableNodeStream:z,isNodeStream:k,isTransformStream:B,isWebStream:J,isReadableStream:G,isReadableFinished:H}=Ui(),D=globalThis.AbortController||Wr().AbortController;let C,ne,L;function W(K,we,Ee){let Le=!1;K.on("close",()=>{Le=!0});const Oe=s(K,{readable:we,writable:Ee},ee=>{Le=!ee});return{destroy:ee=>{Le||(Le=!0,a.destroyer(K,ee||new g("pipe")))},cleanup:Oe}}function X(K){return m(K[K.length-1],"streams[stream.length - 1]"),K.pop()}function _e(K){if(I(K))return K;if(z(K))return De(K);throw new h("val",["Readable","Iterable","AsyncIterable"],K)}async function*De(K){ne||(ne=Ln()),yield*ne.prototype[r].call(K)}async function ae(K,we,Ee,{end:Le}){let Oe,ee=null;const re=be=>{if(be&&(Oe=be),ee){const M=ee;ee=null,M()}},ce=()=>new i((be,M)=>{Oe?M(Oe):ee=()=>{Oe?M(Oe):be()}});we.on("drain",re);const le=s(we,{readable:!1},re);try{we.writableNeedDrain&&await ce();for await(const be of K)we.write(be)||await ce();Le&&(we.end(),await ce()),Ee()}catch(be){Ee(Oe!==be?u(Oe,be):be)}finally{le(),we.off("drain",re)}}async function de(K,we,Ee,{end:Le}){B(we)&&(we=we.writable);const Oe=we.getWriter();try{for await(const ee of K)await Oe.ready,Oe.write(ee).catch(()=>{});await Oe.ready,Le&&await Oe.close(),Ee()}catch(ee){try{await Oe.abort(ee),Ee(ee)}catch(re){Ee(re)}}}function O(...K){return j(K,o(X(K)))}function j(K,we,Ee){if(K.length===1&&t(K[0])&&(K=K[0]),K.length<2)throw new E("streams");const Le=new D,Oe=Le.signal,ee=Ee?.signal,re=[];y(ee,"options.signal");function ce(){ye(new p)}L=L||Gt().addAbortListener;let le;ee&&(le=L(ee,ce));let be,M;const $=[];let ie=0;function pe(oe){ye(oe,--ie===0)}function ye(oe,te){var Ue;if(oe&&(!be||be.code==="ERR_STREAM_PREMATURE_CLOSE")&&(be=oe),!(!be&&!te)){for(;$.length;)$.shift()(be);(Ue=le)===null||Ue===void 0||Ue[n](),Le.abort(),te&&(be||re.forEach(et=>et()),e.nextTick(we,be,M))}}let me;for(let oe=0;oe<K.length;oe++){const te=K[oe],Ue=oe<K.length-1,et=oe>0,Pe=Ue||Ee?.end!==!1,it=oe===K.length-1;if(k(te)){let w=function(c){c&&c.name!=="AbortError"&&c.code!=="ERR_STREAM_PREMATURE_CLOSE"&&pe(c)};if(Pe){const{destroy:c,cleanup:l}=W(te,Ue,et);$.push(c),x(te)&&it&&re.push(l)}te.on("error",w),x(te)&&it&&re.push(()=>{te.removeListener("error",w)})}if(oe===0)if(typeof te=="function"){if(me=te({signal:Oe}),!I(me))throw new f("Iterable, AsyncIterable or Stream","source",me)}else I(te)||z(te)||B(te)?me=te:me=d.from(te);else if(typeof te=="function"){if(B(me)){var N;me=_e((N=me)===null||N===void 0?void 0:N.readable)}else me=_e(me);if(me=te(me,{signal:Oe}),Ue){if(!I(me,!0))throw new f("AsyncIterable",`transform[${oe-1}]`,me)}else{var P;C||(C=Yl());const w=new C({objectMode:!0}),c=(P=me)===null||P===void 0?void 0:P.then;if(typeof c=="function")ie++,c.call(me,T=>{M=T,T!=null&&w.write(T),Pe&&w.end(),e.nextTick(pe)},T=>{w.destroy(T),e.nextTick(pe,T)});else if(I(me,!0))ie++,ae(me,w,pe,{end:Pe});else if(G(me)||B(me)){const T=me.readable||me;ie++,ae(T,w,pe,{end:Pe})}else throw new f("AsyncIterable or Promise","destination",me);me=w;const{destroy:l,cleanup:S}=W(me,!1,!0);$.push(l),it&&re.push(S)}}else if(k(te)){if(z(me)){ie+=2;const w=Y(me,te,pe,{end:Pe});x(te)&&it&&re.push(w)}else if(B(me)||G(me)){const w=me.readable||me;ie++,ae(w,te,pe,{end:Pe})}else if(I(me))ie++,ae(me,te,pe,{end:Pe});else throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],me);me=te}else if(J(te)){if(z(me))ie++,de(_e(me),te,pe,{end:Pe});else if(G(me)||I(me))ie++,de(me,te,pe,{end:Pe});else if(B(me))ie++,de(me.readable,te,pe,{end:Pe});else throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],me);me=te}else me=d.from(te)}return(Oe!=null&&Oe.aborted||ee!=null&&ee.aborted)&&e.nextTick(ce),me}function Y(K,we,Ee,{end:Le}){let Oe=!1;if(we.on("close",()=>{Oe||Ee(new b)}),K.pipe(we,{end:!1}),Le){let ee=function(){Oe=!0,we.end()};H(K)?e.nextTick(ee):K.once("end",ee)}else Ee();return s(K,{readable:!0,writable:!1},ee=>{const re=K._readableState;ee&&ee.code==="ERR_STREAM_PREMATURE_CLOSE"&&re&&re.ended&&!re.errored&&!re.errorEmitted?K.once("end",Ee).once("error",Ee):Ee(ee)}),s(we,{readable:!1,writable:!0},Ee)}return cs={pipelineImpl:j,pipeline:O},cs}var us,wo;function Xl(){if(wo)return us;wo=1;const{pipeline:e}=ea(),t=Li(),{destroyer:i}=Ir(),{isNodeStream:r,isReadable:n,isWritable:s,isWebStream:o,isTransformStream:a,isWritableStream:d,isReadableStream:u}=Ui(),{AbortError:h,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:E}}=Wt(),g=Ki();return us=function(...p){if(p.length===0)throw new E("streams");if(p.length===1)return t.from(p[0]);const m=[...p];if(typeof p[0]=="function"&&(p[0]=t.from(p[0])),typeof p[p.length-1]=="function"){const C=p.length-1;p[C]=t.from(p[C])}for(let C=0;C<p.length;++C)if(!(!r(p[C])&&!o(p[C]))){if(C<p.length-1&&!(n(p[C])||u(p[C])||a(p[C])))throw new f(`streams[${C}]`,m[C],"must be readable");if(C>0&&!(s(p[C])||d(p[C])||a(p[C])))throw new f(`streams[${C}]`,m[C],"must be writable")}let y,I,x,z,k;function B(C){const ne=z;z=null,ne?ne(C):C?k.destroy(C):!D&&!H&&k.destroy()}const J=p[0],G=e(p,B),H=!!(s(J)||d(J)||a(J)),D=!!(n(G)||u(G)||a(G));if(k=new t({writableObjectMode:!!(J!=null&&J.writableObjectMode),readableObjectMode:!!(G!=null&&G.readableObjectMode),writable:H,readable:D}),H){if(r(J))k._write=function(ne,L,W){J.write(ne,L)?W():y=W},k._final=function(ne){J.end(),I=ne},J.on("drain",function(){if(y){const ne=y;y=null,ne()}});else if(o(J)){const L=(a(J)?J.writable:J).getWriter();k._write=async function(W,X,_e){try{await L.ready,L.write(W).catch(()=>{}),_e()}catch(De){_e(De)}},k._final=async function(W){try{await L.ready,L.close().catch(()=>{}),I=W}catch(X){W(X)}}}const C=a(G)?G.readable:G;g(C,()=>{if(I){const ne=I;I=null,ne()}})}if(D){if(r(G))G.on("readable",function(){if(x){const C=x;x=null,C()}}),G.on("end",function(){k.push(null)}),k._read=function(){for(;;){const C=G.read();if(C===null){x=k._read;return}if(!k.push(C))return}};else if(o(G)){const ne=(a(G)?G.readable:G).getReader();k._read=async function(){for(;;)try{const{value:L,done:W}=await ne.read();if(!k.push(L))return;if(W){k.push(null);return}}catch{return}}}}return k._destroy=function(C,ne){!C&&z!==null&&(C=new h),x=null,y=null,I=null,z===null?ne(C):(z=ne,r(G)&&i(G,C))},k},us}var So;function ud(){if(So)return on;So=1;const e=globalThis.AbortController||Wr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:n},AbortError:s}=Wt(),{validateAbortSignal:o,validateInteger:a,validateObject:d}=Jr(),u=St().Symbol("kWeak"),h=St().Symbol("kResistStopPropagation"),{finished:f}=Ki(),E=Xl(),{addAbortSignalNoValidate:g}=Rn(),{isWritable:b,isNodeStream:p}=Ui(),{deprecate:m}=Gt(),{ArrayPrototypePush:y,Boolean:I,MathFloor:x,Number:z,NumberIsNaN:k,Promise:B,PromiseReject:J,PromiseResolve:G,PromisePrototypeThen:H,Symbol:D}=St(),C=D("kEmpty"),ne=D("kEof");function L(ee,re){if(re!=null&&d(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),p(ee)&&!b(ee))throw new t("stream",ee,"must be writable");const ce=E(this,ee);return re!=null&&re.signal&&g(re.signal,ce),ce}function W(ee,re){if(typeof ee!="function")throw new i("fn",["Function","AsyncFunction"],ee);re!=null&&d(re,"options"),re?.signal!=null&&o(re.signal,"options.signal");let ce=1;re?.concurrency!=null&&(ce=x(re.concurrency));let le=ce-1;return re?.highWaterMark!=null&&(le=x(re.highWaterMark)),a(ce,"options.concurrency",1),a(le,"options.highWaterMark",0),le+=ce,async function*(){const M=Gt().AbortSignalAny([re?.signal].filter(I)),$=this,ie=[],pe={signal:M};let ye,me,N=!1,P=0;function oe(){N=!0,te()}function te(){P-=1,Ue()}function Ue(){me&&!N&&P<ce&&ie.length<le&&(me(),me=null)}async function et(){try{for await(let Pe of $){if(N)return;if(M.aborted)throw new s;try{if(Pe=ee(Pe,pe),Pe===C)continue;Pe=G(Pe)}catch(it){Pe=J(it)}P+=1,H(Pe,te,oe),ie.push(Pe),ye&&(ye(),ye=null),!N&&(ie.length>=le||P>=ce)&&await new B(it=>{me=it})}ie.push(ne)}catch(Pe){const it=J(Pe);H(it,te,oe),ie.push(it)}finally{N=!0,ye&&(ye(),ye=null)}}et();try{for(;;){for(;ie.length>0;){const Pe=await ie[0];if(Pe===ne)return;if(M.aborted)throw new s;Pe!==C&&(yield Pe),ie.shift(),Ue()}await new B(Pe=>{ye=Pe})}}finally{N=!0,me&&(me(),me=null)}}.call(this)}function X(ee=void 0){return ee!=null&&d(ee,"options"),ee?.signal!=null&&o(ee.signal,"options.signal"),async function*(){let ce=0;for await(const be of this){var le;if(ee!=null&&(le=ee.signal)!==null&&le!==void 0&&le.aborted)throw new s({cause:ee.signal.reason});yield[ce++,be]}}.call(this)}async function _e(ee,re=void 0){for await(const ce of O.call(this,ee,re))return!0;return!1}async function De(ee,re=void 0){if(typeof ee!="function")throw new i("fn",["Function","AsyncFunction"],ee);return!await _e.call(this,async(...ce)=>!await ee(...ce),re)}async function ae(ee,re){for await(const ce of O.call(this,ee,re))return ce}async function de(ee,re){if(typeof ee!="function")throw new i("fn",["Function","AsyncFunction"],ee);async function ce(le,be){return await ee(le,be),C}for await(const le of W.call(this,ce,re));}function O(ee,re){if(typeof ee!="function")throw new i("fn",["Function","AsyncFunction"],ee);async function ce(le,be){return await ee(le,be)?le:C}return W.call(this,ce,re)}class j extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(ee,re,ce){var le;if(typeof ee!="function")throw new i("reducer",["Function","AsyncFunction"],ee);ce!=null&&d(ce,"options"),ce?.signal!=null&&o(ce.signal,"options.signal");let be=arguments.length>1;if(ce!=null&&(le=ce.signal)!==null&&le!==void 0&&le.aborted){const ye=new s(void 0,{cause:ce.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(ye)),ye}const M=new e,$=M.signal;if(ce!=null&&ce.signal){const ye={once:!0,[u]:this,[h]:!0};ce.signal.addEventListener("abort",()=>M.abort(),ye)}let ie=!1;try{for await(const ye of this){var pe;if(ie=!0,ce!=null&&(pe=ce.signal)!==null&&pe!==void 0&&pe.aborted)throw new s;be?re=await ee(re,ye,{signal:$}):(re=ye,be=!0)}if(!ie&&!be)throw new j}finally{M.abort()}return re}async function K(ee){ee!=null&&d(ee,"options"),ee?.signal!=null&&o(ee.signal,"options.signal");const re=[];for await(const le of this){var ce;if(ee!=null&&(ce=ee.signal)!==null&&ce!==void 0&&ce.aborted)throw new s(void 0,{cause:ee.signal.reason});y(re,le)}return re}function we(ee,re){const ce=W.call(this,ee,re);return async function*(){for await(const be of ce)yield*be}.call(this)}function Ee(ee){if(ee=z(ee),k(ee))return 0;if(ee<0)throw new n("number",">= 0",ee);return ee}function Le(ee,re=void 0){return re!=null&&d(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),ee=Ee(ee),async function*(){var le;if(re!=null&&(le=re.signal)!==null&&le!==void 0&&le.aborted)throw new s;for await(const M of this){var be;if(re!=null&&(be=re.signal)!==null&&be!==void 0&&be.aborted)throw new s;ee--<=0&&(yield M)}}.call(this)}function Oe(ee,re=void 0){return re!=null&&d(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),ee=Ee(ee),async function*(){var le;if(re!=null&&(le=re.signal)!==null&&le!==void 0&&le.aborted)throw new s;for await(const M of this){var be;if(re!=null&&(be=re.signal)!==null&&be!==void 0&&be.aborted)throw new s;if(ee-- >0&&(yield M),ee<=0)return}}.call(this)}return on.streamReturningOperators={asIndexedPairs:m(X,"readable.asIndexedPairs will be removed in a future version."),drop:Le,filter:O,flatMap:we,map:W,take:Oe,compose:L},on.promiseReturningOperators={every:De,forEach:de,reduce:Y,toArray:K,some:_e,find:ae},on}var fs,Eo;function Jl(){if(Eo)return fs;Eo=1;const{ArrayPrototypePop:e,Promise:t}=St(),{isIterable:i,isNodeStream:r,isWebStream:n}=Ui(),{pipelineImpl:s}=ea(),{finished:o}=Ki();Zl();function a(...d){return new t((u,h)=>{let f,E;const g=d[d.length-1];if(g&&typeof g=="object"&&!r(g)&&!i(g)&&!n(g)){const b=e(d);f=b.signal,E=b.end}s(d,(b,p)=>{b?h(b):u(p)},{signal:f,end:E})})}return fs={finished:o,pipeline:a},fs}var vo;function Zl(){if(vo)return $n.exports;vo=1;const{Buffer:e}=Bi(),{ObjectDefineProperty:t,ObjectKeys:i,ReflectApply:r}=St(),{promisify:{custom:n}}=Gt(),{streamReturningOperators:s,promiseReturningOperators:o}=ud(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Wt(),d=Xl(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:h}=zn(),{pipeline:f}=ea(),{destroyer:E}=Ir(),g=Ki(),b=Jl(),p=Ui(),m=$n.exports=Zs().Stream;m.isDestroyed=p.isDestroyed,m.isDisturbed=p.isDisturbed,m.isErrored=p.isErrored,m.isReadable=p.isReadable,m.isWritable=p.isWritable,m.Readable=Ln();for(const I of i(s)){let z=function(...k){if(new.target)throw a();return m.Readable.from(r(x,this,k))};const x=s[I];t(z,"name",{__proto__:null,value:x.name}),t(z,"length",{__proto__:null,value:x.length}),t(m.Readable.prototype,I,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}for(const I of i(o)){let z=function(...k){if(new.target)throw a();return r(x,this,k)};const x=o[I];t(z,"name",{__proto__:null,value:x.name}),t(z,"length",{__proto__:null,value:x.length}),t(m.Readable.prototype,I,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}m.Writable=Qs(),m.Duplex=Li(),m.Transform=Hl(),m.PassThrough=Yl(),m.pipeline=f;const{addAbortSignal:y}=Rn();return m.addAbortSignal=y,m.finished=g,m.destroy=E,m.compose=d,m.setDefaultHighWaterMark=u,m.getDefaultHighWaterMark=h,t(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),t(f,n,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),t(g,n,{__proto__:null,enumerable:!0,get(){return b.finished}}),m.Stream=m,m._isUint8Array=function(x){return x instanceof Uint8Array},m._uint8ArrayToBuffer=function(x){return e.from(x.buffer,x.byteOffset,x.byteLength)},$n.exports}var Io;function fd(){return Io||(Io=1,(function(e){const t=Zl(),i=Jl(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(jn)),jn.exports}var Ql=fd();class ta extends Ql.Readable{pending=!0;_path="<unknown>";_bytesRead=0;reader;ready;constructor(t={},i){super({...t,encoding:t.encoding??void 0}),this.ready=Promise.resolve(i).then(r=>{this._path=r.vfs.path;const n=r.readableWebStream({start:t.start,end:t.end});this.reader=n.getReader(),this.pending=!1}).catch(r=>{this.destroy(r)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:i}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=i.byteLength,this.push(i)}catch(t){this.destroy(new vt(Q.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(i){t(new vt(Q.EIO,i.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class ia extends Ql.Writable{pending=!0;_path="<unknown>";_bytesWritten=0;writer;ready;constructor(t={},i){super(t),this.ready=Promise.resolve(i).then(r=>{this._path=r.vfs.path;const n=r.writableWebStream({start:t.start});this.writer=n.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,i,r){if(await this.ready,!this.writer)return r(bt(Z("EAGAIN","write",this._path)));if(i!="buffer")return r(bt(Z("ENOTSUP","write",this._path)));const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(n),this._bytesWritten+=t.byteLength,r()}catch(s){r(new vt(Q.EIO,s.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(i){t(new vt(Q.EIO,i.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(i){t(new vt(Q.EIO,i.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var ui=function(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t},fi=(function(e){return function(t){function i(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(a){return i(a),s()})}else n|=1}catch(a){i(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}})(typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Pt{context;fd;vfs;constructor(t,i){this.context=t,this.fd=i,this.vfs=Mt(t,i)}_emitChange(){$t(this.context,"change",this.vfs.path)}async chown(t,i){await this.vfs.chown(t,i),this._emitChange()}async chmod(t){const i=Mi(t,-1);if(i<0)throw Z("EINVAL","chmod",this.vfs.path);await this.vfs.chmod(i),this._emitChange()}datasync(){return this.sync()}async sync(){await this.vfs.sync()}async truncate(t=0){await this.vfs.truncate(t),this._emitChange()}async utimes(t,i){t=Wi(t),i=Wi(i),await this.vfs.utimes(t,i),this._emitChange()}async appendFile(t,i={}){const r=Ni(i,"utf8","a",420);if(!(Ri(r.flag)&br))throw Z("EBADF","write",this.vfs.path);const s=typeof t=="string"?yt.Buffer.from(t,r.encoding):t;await this.vfs.write(s,0,s.length),this._emitChange()}async read(t,i,r,n){if(typeof i=="object"&&i!=null&&(n=i.position,r=i.length,i=i.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(n=t.position,r=t.length,i=t.offset,t=t.buffer),n&&n>Number.MAX_SAFE_INTEGER)throw Z("EINVAL");return typeof n=="bigint"&&(n=Number(n)),n=Number.isSafeInteger(n)?n:this.vfs.position,t||=new Uint8Array(this.vfs.inode.size),i??=0,{bytesRead:await this.vfs.read(t,i,r??t.byteLength-i,n),buffer:t}}async readFile(t){const i=Ni(t,null,"r",292);if(Ri(i.flag)&Ct)throw Z("EBADF","read",this.vfs.path);const{size:n}=await this.stat(),s=new Uint8Array(n);await this.vfs.read(s,0,n,0);const o=yt.Buffer.from(s);return i.encoding?o.toString(i.encoding):o}readableWebStream(t={}){if(this.vfs.isClosed)throw Z("EBADF","readableWebStream",this.vfs.path);return this.vfs.fs.streamRead(this.vfs.internalPath,t)}writableWebStream(t={}){if(this.vfs.isClosed)throw Z("EBADF","writableWebStream",this.vfs.path);if(this.vfs.inode.flags&jt.Immutable)throw Z("EPERM","writableWebStream",this.vfs.path);return this.vfs.fs.streamWrite(this.vfs.internalPath,t)}readLines(t){if(this.vfs.isClosed||this.vfs.flag&Ct)throw Z("EBADF","read",this.vfs.path);return sd({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.vfs.isClosed)throw Z("EBADF","stat",this.vfs.path);if(Qe&&!He(this.context,this.vfs.inode,wt))throw Z("EACCES","stat",this.vfs.path);return t?.bigint?new tr(this.vfs.inode):new Pi(this.vfs.inode)}async write(t,i,r,n){let s,o,a;typeof i=="object"&&i!=null&&(r=i.length,n=i.position,i=i.offset),typeof t=="string"?(n=typeof i=="number"?i:null,o=0,s=yt.Buffer.from(t,typeof r=="string"?r:"utf8"),a=s.length):(s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=i??0,a=typeof r=="number"?r:s.byteLength,n=typeof n=="number"?n:null),n??=this.vfs.position;const d=await this.vfs.write(s,o,a,n);return this._emitChange(),{buffer:t,bytesWritten:d}}async writeFile(t,i={}){const r=Ni(i,"utf8","w",420),n=Ri(r.flag);if(!(n&Ct||n&Ti))throw Z("EBADF","writeFile",this.vfs.path);const s=typeof t=="string"?yt.Buffer.from(t,r.encoding):t;await this.vfs.write(s,0,s.length,0),this._emitChange()}async close(){await this.vfs.close(),Ll(this.context,this.fd)}async writev(t,i){typeof i=="number"&&(this.vfs.position=i);let r=0;for(const n of t)r+=(await this.write(n)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,i){typeof i=="number"&&(this.vfs.position=i);let r=0;for(const n of t)r+=(await this.read(n)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.vfs.isClosed||this.vfs.flag&Ct)throw Z("EBADF","createReadStream",this.vfs.path);return new ta(t,this)}createWriteStream(t={}){if(this.vfs.isClosed)throw Z("EBADF","createWriteStream",this.vfs.path);if(this.vfs.inode.flags&jt.Immutable)throw Z("EPERM","createWriteStream",this.vfs.path);if(this.vfs.fs.attributes.has("readonly"))throw Z("EROFS","createWriteStream",this.vfs.path);return new ia(t,this)}}async function ec(e,t){await rd.call(this,e,t)}async function xr(e){e=ze(e);try{const{fs:t,path:i}=await ni(this,e);return await t.exists(i)}catch(t){if(t instanceof vt&&t.code=="ENOENT")return!1;throw t}}async function kr(e,t){e=ze(e);const{fs:i,path:r}=await ni(this,e),n={syscall:"stat",path:e},s=await i.stat(r).catch(li(n));if(Qe&&!He(this,s,wt))throw Z("EACCES",n);return t?.bigint?new tr(s):new Pi(s)}async function Cn(e,t){e=ze(e);const i={syscall:"lstat",path:e},{base:r,dir:n}=Rt(e),{fs:s,path:o}=await ni(this,n),a=await s.stat(r?st(o,r):o).catch(li(i));if(Qe&&!He(this,a,wt))throw Z("EACCES",i);return t?.bigint?new tr(a):new Pi(a)}async function tc(e,t=0){const i={stack:[],error:void 0,hasError:!1};try{await ui(i,await di.call(this,e,"r+"),!0).truncate(t)}catch(r){i.error=r,i.hasError=!0}finally{const r=fi(i);r&&await r}}async function ra(e){e=ze(e);const{fs:t,path:i}=ot(e,this),r={syscall:"unlink",path:e},n=await t.stat(i).catch(li(r));if(Qe&&!He(this,n,Et))throw Z("EACCES",r);await t.unlink(i).catch(li(r)),$t(this,"rename",e.toString())}async function di(e,t="r",i=420){const r=await vr(this,e,{flag:t,mode:i});return new Pt(this,Ws(r))}async function na(e,t){const i={stack:[],error:void 0,hasError:!1};try{const r=Ni(t,null,"r",292);return await ui(i,typeof e=="object"&&"fd"in e?e:await di.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){i.error=r,i.hasError=!0}finally{const r=fi(i);r&&await r}}async function sa(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=Ni(i,"utf8","w+",420),s=ui(r,e instanceof Pt?e:await di.call(this,e.toString(),n.flag,n.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t);await s.writeFile(o,n)}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function ic(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{const n=Ni(i,"utf8","a",420),s=Ri(n.flag),o={syscall:"write",path:e instanceof Pt?e.vfs.path:e.toString()};if(!(s&br))throw Z("EBADF",o);const a=typeof t=="string"?yt.Buffer.from(t,n.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await ui(r,typeof e=="object"&&"fd"in e?e:await di.call(this,e,n.flag,n.mode),!0).appendFile(a,n)}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function aa(e){e=ze(e);const{fs:t,path:i}=await ni(this,e),r={syscall:"rmdir",path:e},n=await t.stat(i).catch(li(r));if(!n)throw Z("ENOENT",r);if(!Dt(n))throw Z("ENOTDIR",r);if(Qe&&!He(this,n,Et))throw Z("EACCES",r);await t.rmdir(i).catch(li(r)),$t(this,"rename",e.toString())}async function nr(e,t){t=typeof t=="object"?t:{mode:t};const i=Mi(t?.mode,511);return await td.call(this,e,{...t,mode:i})}async function Or(e,t){e=ze(e);const i=typeof t=="object"&&t!=null?t:{encoding:t,withFileTypes:!1,recursive:!1},r=await id.call(this,e,i),n=[];for(const s of r)i.withFileTypes?n.push(Gr.from(s,i.encoding)):i.encoding=="buffer"?n.push(yt.Buffer.from(s.path)):n.push(s.path);return n}async function rc(e,t){return await nd.call(this,e,t)}async function nc(e,t,i="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(i))throw new TypeError("Invalid symlink type: "+i);if(t=ze(t),await xr.call(this,t))throw Z("EEXIST","symlink",t);const n=ui(r,await vr(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0),s=Ai(ze(e,!0));await n.write(s,0,s.length,0),await n.chmod(Ci)}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function sc(e,t){e=ze(e);const i=yt.Buffer.from(await xs.call(this,e),"utf-8"),r=typeof t=="object"?t?.encoding:t;return r=="buffer"?i:i.toString(r??"utf-8")}async function ac(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{await ui(r,await di.call(this,e,"r+"),!0).chown(t,i)}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function oc(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{await ui(r,await vr(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,i)}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function lc(e,t){const i={stack:[],error:void 0,hasError:!1};try{await ui(i,await di.call(this,e,"r+"),!0).chmod(t)}catch(r){i.error=r,i.hasError=!0}finally{const r=fi(i);r&&await r}}async function cc(e,t){const i={stack:[],error:void 0,hasError:!1};try{t=Mi(t),await ui(i,await vr(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){i.error=r,i.hasError=!0}finally{const r=fi(i);r&&await r}}async function oa(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{await ui(r,await vr(this,e,{flag:"r+",allowDirectory:!0}),!0).utimes(Wi(t),Wi(i))}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function uc(e,t,i){const r={stack:[],error:void 0,hasError:!1};try{await ui(r,await vr(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(Wi(t),Wi(i))}catch(n){r.error=n,r.hasError=!0}finally{const n=fi(r);n&&await n}}async function fc(e,t){const i=typeof t=="string"?t:t?.encoding??"utf8";e=ze(e);const{fullPath:r}=await ni(this,e);if(i=="utf8"||i=="utf-8")return r;const n=yt.Buffer.from(r,"utf-8");return i=="buffer"?n:n.toString(i)}function dd(e,t={}){const i=new ql(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let n=!1;i.on("change",(o,a)=>{r.shift()?.({value:{eventType:o,filename:a},done:!1})});function s(){n=!0,i.close();for(const o of r)o({value:null,done:n});return r.length=0,Promise.resolve({value:void 0,done:!0})}return{async next(){if(n)return Promise.resolve({value:void 0,done:n});const{promise:o,resolve:a}=Promise.withResolvers();return r.push(a),o},return:s,throw:s,async[Symbol.asyncDispose](){await s()},[Symbol.asyncIterator](){return this}}}async function dc(e,t=xn){if(!Qe)return;if(!(await kr.call(this,e)).hasAccess(t,this))throw Z("EACCES","access",e.toString())}async function Mn(e,t){e=ze(e);const i=await Cn.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&t?.force))throw r});if(i)switch(i.mode&ct){case rt:if(t?.recursive)for(const r of await Or.call(this,e))await Mn.call(this,st(e,r),t);await aa.call(this,e);break;case qt:case Ci:case er:case qi:await ra.call(this,e);break;case Sr:case wr:default:throw Z("ENOSYS","rm",e)}}async function hc(e,t){const i=typeof t=="object"?t?.encoding:t||"utf8",r=Dn(e);return await nr.call(this,r),i=="buffer"?yt.Buffer.from(r):r}async function hd(e,t){const i=Dn(e);await nr.call(this,i);const r=()=>Mn(i,{recursive:!0,force:!0});return{path:i,remove:r,[Symbol.asyncDispose]:r}}async function la(e,t,i){if(e=ze(e),t=ze(t),i&&i&Ms&&await xr.call(this,t))throw Z("EEXIST","copyFile",t);await sa.call(this,t,await na.call(this,e)),$t(this,"rename",t.toString())}function _c(e,t){return e=ze(e),Promise.resolve(new Vs(e,this))}async function ca(e,t,i){e=ze(e),t=ze(t);const r=await Cn.call(this,e);if(i?.errorOnExist&&await xr.call(this,t))throw Z("EEXIST","cp",t);switch(r.mode&ct){case rt:{if(!i?.recursive)throw Z("EISDIR","cp",e);const[n]=await Promise.all([Or.call(this,e,{withFileTypes:!0}),nr.call(this,t,{recursive:!0})]),s=async o=>{i.filter&&!i.filter(st(e,o.name),st(t,o.name))||await ca.call(this,st(e,o.name),st(t,o.name),i)};await Promise.all(n.map(s));break}case qt:case Ci:await la.call(this,e,t);break;case er:case qi:case Sr:case wr:default:throw Z("ENOSYS","cp",e)}i?.preserveTimestamps&&await oa.call(this,t,r.atime,r.mtime)}async function mc(e,t){e=ze(e);const{fs:i}=ot(e,this);return Promise.resolve(Pl(i,t?.bigint))}function yc(e,t){e=Array.isArray(e)?e:[e];const{cwd:i="/",withFileTypes:r=!1,exclude:n=()=>!1}=t||{},s=e.map(js);async function*o(a){const d=await Or(a,{withFileTypes:r,encoding:"utf8"});for(const u of d){const h=r?st(u.parentPath,u.name):a+"/"+u;(typeof n!="function"?n.some(f=>kl(f,h)):n(r?u:h))||((await kr(h)).isDirectory()&&s.some(f=>f.source.includes(".*"))&&(yield*o(h)),s.some(f=>f.test(h.replace(/^\/+/g,"")))&&(yield r?u:h.replace(/^\/+/g,"")))}}return o(i)}const _d=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Pt,access:dc,appendFile:ic,chmod:lc,chown:ac,constants:ml,copyFile:la,cp:ca,exists:xr,glob:yc,lchmod:cc,lchown:oc,link:rc,lstat:Cn,lutimes:uc,mkdir:nr,mkdtemp:hc,mkdtempDisposable:hd,open:di,opendir:_c,readFile:na,readdir:Or,readlink:sc,realpath:fc,rename:ec,rm:Mn,rmdir:aa,stat:kr,statfs:mc,symlink:nc,truncate:tc,unlink:ra,utimes:oa,watch:dd,writeFile:sa},Symbol.toStringTag,{value:"Module"}));function gc(e,t){t.disableAsyncCache&&e.attributes.set("no_async_preload"),t.caseFold&&e.attributes.set("case_fold",t.caseFold)}function xo(e){return tl(e)||Cs(e)||e instanceof zi}async function pc(e,t=0){if(typeof e!="object"||e==null)throw pt(V("EINVAL","Invalid options on mount configuration"));if(!xo(e))throw pt(V("EINVAL","Invalid mount configuration"));if(e instanceof zi)return await e.ready(),e;Cs(e)&&(e={backend:e});for(const[n,s]of Object.entries(e))if(n!="backend"&&xo(s)){if(In("Resolving nested mount configuration: "+n),t>10)throw pt(V("EINVAL","Invalid configuration, too deep and possibly infinite"));e[n]=await pc(s,++t)}const{backend:i}=e;if(typeof i.isAvailable=="function"&&!await i.isAvailable(e))throw pt(V("EPERM","Backend not available: "+i.name));wu(i,e);const r=await i.create(e);return gc(r,e),await r.ready(),r}async function ko(e,t){if(e=="/"){bn(e,t);return}const i=await kr(e).catch(()=>null);if(!i)await nr(e,{recursive:!0});else if(!i.isDirectory())throw V("ENOTDIR","Missing directory at mount point: "+e);bn(e,t)}const md=["/tmp","/var","/etc"];async function yd(e){if(Object.assign(nl.credentials,il({uid:e.uid||0,gid:e.gid||0})),yf(!e.disableAccessChecks),e.log&&pu(e.log),e.mounts)for(const[t,i]of Object.entries(e.mounts).sort(([r],[n])=>r.length>n.length?1:-1)){const r=t.startsWith("/")?t:"/"+t;tl(i)&&(i.disableAsyncCache??=e.disableAsyncCache||!1,i.caseFold??=e.caseFold),r=="/"&&Ml("/"),await ko(r,await pc(i))}for(const t of Qi.values())gc(t,e);if(e.addDevices&&!Qi.has("/dev")){const t=new lf;t.addDefaults(),await t.ready(),await ko("/dev",t)}if(e.defaultDirectories)for(const t of md)await xr(t)?(await kr(t)).isDirectory()||bt("Default directory exists but is not a directory: "+t):await nr(t)}const gd=["delete"];Math.max(...gd.map(e=>e.length));const bc=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let i=0;i<8;i++)t=t&1?2197175160^t>>>1:t>>>1;bc[e]=t}function pd(e){let t=4294967295;for(let i=0;i<e.length;i++)t=t>>>8^bc[(t^e[i])&255];return(t^4294967295)>>>0}var ht=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},$e=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0};const Vt=e=>"0x"+e.toString(16).padStart(8,"0"),{format:bd}=new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:2,unit:"byte",unitDisplay:"narrow"});let wd=(()=>{var e,t,i,r;let n=[Ye.packed("MetadataEntry")],s,o=[],a,d=Si,u,h=[],f=[],E,g=[],b=[],p,m=[],y=[],I,x=[],z=[];return class extends d{static{a=this}static{const k=typeof Symbol=="function"&&Symbol.metadata?Object.create(d[Symbol.metadata]??null):void 0;u=[(e=q).uint32.bind(e)],E=[(t=q).uint32.bind(t)],p=[(i=q).uint32.bind(i)],I=[(r=q).uint32.bind(r)],ht(this,null,u,{kind:"accessor",name:"id",static:!1,private:!1,access:{has:B=>"id"in B,get:B=>B.id,set:(B,J)=>{B.id=J}},metadata:k},h,f),ht(this,null,E,{kind:"accessor",name:"offset_",static:!1,private:!1,access:{has:B=>"offset_"in B,get:B=>B.offset_,set:(B,J)=>{B.offset_=J}},metadata:k},g,b),ht(this,null,p,{kind:"accessor",name:"offset",static:!1,private:!1,access:{has:B=>"offset"in B,get:B=>B.offset,set:(B,J)=>{B.offset=J}},metadata:k},m,y),ht(this,null,I,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:B=>"size"in B,get:B=>B.size,set:(B,J)=>{B.size=J}},metadata:k},x,z),ht(null,s={value:a},n,{kind:"class",name:a.name,metadata:k},null,o),a=s.value,k&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k}),$e(a,o)}#e=$e(this,h,void 0);get id(){return this.#e}set id(k){this.#e=k}#t=($e(this,f),$e(this,g,void 0));get offset_(){return this.#t}set offset_(k){this.#t=k}#i=($e(this,b),$e(this,m,void 0));get offset(){return this.#i}set offset(k){this.#i=k}#r=($e(this,y),$e(this,x,void 0));get size(){return this.#r}set size(k){this.#r=k}toString(){return`<MetadataEntry @ ${Vt(this.byteOffset)}>`}constructor(){super(...arguments),$e(this,z)}},a})();const Sd=255,Oo=5;let yi=(()=>{var e,t,i,r;let n=[Ye.packed("MetadataBlock")],s,o=[],a,d=wi.typed(Int32Array),u,h=[],f=[],E,g=[],b=[],p,m=[],y=[],I,x=[],z=[],k,B=[],J=[];var G=class extends d{static{a=this}static{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(d[Symbol.metadata]??null):void 0;u=[(e=q).uint32.bind(e)],E=[(t=q).uint64.bind(t)],p=[(i=q).uint32.bind(i)],I=[gi(Bu(wd,Sd))],k=[(r=q).int32.bind(r)],ht(this,null,u,{kind:"accessor",name:"checksum",static:!1,private:!1,access:{has:D=>"checksum"in D,get:D=>D.checksum,set:(D,C)=>{D.checksum=C}},metadata:H},h,f),ht(this,null,E,{kind:"accessor",name:"timestamp",static:!1,private:!1,access:{has:D=>"timestamp"in D,get:D=>D.timestamp,set:(D,C)=>{D.timestamp=C}},metadata:H},g,b),ht(this,null,p,{kind:"accessor",name:"previous_offset",static:!1,private:!1,access:{has:D=>"previous_offset"in D,get:D=>D.previous_offset,set:(D,C)=>{D.previous_offset=C}},metadata:H},m,y),ht(this,null,I,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:D=>"items"in D,get:D=>D.items,set:(D,C)=>{D.items=C}},metadata:H},x,z),ht(this,null,k,{kind:"accessor",name:"locked",static:!1,private:!1,access:{has:D=>"locked"in D,get:D=>D.locked,set:(D,C)=>{D.locked=C}},metadata:H},B,J),ht(null,s={value:a},n,{kind:"class",name:a.name,metadata:H},null,o),G=a=s.value,H&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H})}static lockIndex=vl(G,"locked")/Int32Array.BYTES_PER_ELEMENT;#e=$e(this,h,void 0);get checksum(){return this.#e}set checksum(H){this.#e=H}#t=($e(this,f),$e(this,g,BigInt(Date.now())));get timestamp(){return this.#t}set timestamp(H){this.#t=H}#i=($e(this,b),$e(this,m,void 0));get previous_offset(){return this.#i}set previous_offset(H){this.#i=H}_previous=$e(this,y);get previous(){if(this.previous_offset)return this._previous??=new G(this.buffer,this.previous_offset),this._previous}#r=$e(this,x,void 0);get items(){return this.#r}set items(H){this.#r=H}toString(H=!1){if(!H)return`<MetadataBlock @ ${Vt(this.byteOffset)}>`;let D=[`---- Metadata block at ${Vt(this.byteOffset)} ----`,`Checksum: ${Vt(this.checksum)}`,`Last updated: ${new Date(Number(this.timestamp)).toLocaleString()}`,`Previous block: ${Vt(this.previous_offset)}`,"Entries:"].join(`
`);for(const C of this.items)C.offset&&(D+=`
	${Vt(C.id)}: ${bd(C.size).padStart(5)} at ${Vt(C.offset)}`);return D}#n=($e(this,z),$e(this,B,void 0));get locked(){return this.#n}set locked(H){this.#n=H}waitUnlocked(H=0){if(H>Oo)throw pi(V("EBUSY",`sbfs: exceeded max attempts waiting for metadata block at ${Vt(this.byteOffset)} to be unlocked`));if(Atomics.load(this,G.lockIndex))switch(Atomics.wait(this,G.lockIndex,1)){case"ok":break;case"not-equal":return H++,pt(`sbfs: waiting for metadata block at ${Vt(this.byteOffset)} to be unlocked (${H}/${Oo})`),this.waitUnlocked(H);case"timed-out":throw pi(V("EBUSY",`sbfs: timed out waiting for metadata block at ${Vt(this.byteOffset)} to be unlocked`))}}lock(){this.waitUnlocked(),Atomics.store(this,G.lockIndex,1);const H=()=>{Atomics.store(this,G.lockIndex,0),Atomics.notify(this,G.lockIndex,1)};return H[Symbol.dispose]=H,H}constructor(){super(...arguments),$e(this,J)}static{$e(a,o)}};return G=a})();const Ao=1651715706,Do=2;(()=>{var e,t,i,r,n,s,o,a,d,u;let h=[Ye.packed("Superblock")],f,E=[],g,b=wi.typed(BigUint64Array),p,m=[],y=[],I,x=[],z=[],k,B=[],J=[],G,H=[],D=[],C,ne=[],L=[],W,X=[],_e=[],De,ae=[],de=[],O,j=[],Y=[],K,we=[],Ee=[],Le,Oe=[],ee=[],re,ce=[],le=[],be,M=[],$=[],ie,pe=[],ye=[];var me=class extends b{static{g=this}static{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(b[Symbol.metadata]??null):void 0;p=[(e=q).uint32.bind(e)],I=[(t=q).uint32.bind(t)],k=[(i=q).uint16.bind(i)],G=[(r=q).uint16.bind(r)],C=[(n=q).uint32.bind(n)],W=[(s=q).uint64.bind(s)],De=[(o=q).uint64.bind(o)],O=[q.uint8(16)],K=[(a=q).uint32.bind(a)],Le=[(d=q).uint32.bind(d)],re=[(u=q).uint32.bind(u)],be=[q.char(64)],ie=[q.char(132)],ht(this,null,p,{kind:"accessor",name:"checksum",static:!1,private:!1,access:{has:P=>"checksum"in P,get:P=>P.checksum,set:(P,oe)=>{P.checksum=oe}},metadata:N},m,y),ht(this,null,I,{kind:"accessor",name:"magic",static:!1,private:!1,access:{has:P=>"magic"in P,get:P=>P.magic,set:(P,oe)=>{P.magic=oe}},metadata:N},x,z),ht(this,null,k,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:P=>"version"in P,get:P=>P.version,set:(P,oe)=>{P.version=oe}},metadata:N},B,J),ht(this,null,G,{kind:"accessor",name:"inode_format",static:!1,private:!1,access:{has:P=>"inode_format"in P,get:P=>P.inode_format,set:(P,oe)=>{P.inode_format=oe}},metadata:N},H,D),ht(this,null,C,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:P=>"flags"in P,get:P=>P.flags,set:(P,oe)=>{P.flags=oe}},metadata:N},ne,L),ht(this,null,W,{kind:"accessor",name:"used_bytes",static:!1,private:!1,access:{has:P=>"used_bytes"in P,get:P=>P.used_bytes,set:(P,oe)=>{P.used_bytes=oe}},metadata:N},X,_e),ht(this,null,De,{kind:"accessor",name:"total_bytes",static:!1,private:!1,access:{has:P=>"total_bytes"in P,get:P=>P.total_bytes,set:(P,oe)=>{P.total_bytes=oe}},metadata:N},ae,de),ht(this,null,O,{kind:"accessor",name:"uuid",static:!1,private:!1,access:{has:P=>"uuid"in P,get:P=>P.uuid,set:(P,oe)=>{P.uuid=oe}},metadata:N},j,Y),ht(this,null,K,{kind:"accessor",name:"metadata_block_size",static:!1,private:!1,access:{has:P=>"metadata_block_size"in P,get:P=>P.metadata_block_size,set:(P,oe)=>{P.metadata_block_size=oe}},metadata:N},we,Ee),ht(this,null,Le,{kind:"accessor",name:"metadata_offset_",static:!1,private:!1,access:{has:P=>"metadata_offset_"in P,get:P=>P.metadata_offset_,set:(P,oe)=>{P.metadata_offset_=oe}},metadata:N},Oe,ee),ht(this,null,re,{kind:"accessor",name:"metadata_offset",static:!1,private:!1,access:{has:P=>"metadata_offset"in P,get:P=>P.metadata_offset,set:(P,oe)=>{P.metadata_offset=oe}},metadata:N},ce,le),ht(this,null,be,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:P=>"label"in P,get:P=>P.label,set:(P,oe)=>{P.label=oe}},metadata:N},M,$),ht(this,null,ie,{kind:"accessor",name:"_padding",static:!1,private:!1,access:{has:P=>"_padding"in P,get:P=>P._padding,set:(P,oe)=>{P._padding=oe}},metadata:N},pe,ye),ht(null,f={value:g},h,{kind:"class",name:g.name,metadata:N},null,E),me=g=f.value,N&&Object.defineProperty(g,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),$e(g,E)}constructor(...N){if(super(...N),$e(this,ye),this.magic!=Ao){bt("sbfs: Invalid magic value, assuming this is a fresh super block");const P=new yi(this.buffer,at(me));Object.assign(this,{metadata:P,metadata_offset:P.byteOffset,used_bytes:BigInt(at(me)+at(yi)),total_bytes:BigInt(this.buffer.byteLength),magic:Ao,version:1,inode_format:Ua,metadata_block_size:at(yi),uuid:du(crypto.randomUUID())}),un(this),un(P);return}if(this.checksum!==mn(this))throw pi(V("EIO","sbfs: checksum mismatch for super block"));if(this.metadata=new yi(this.buffer,this.metadata_offset),this.metadata.checksum!==mn(this.metadata))throw pi(V("EIO",`sbfs: checksum mismatch for metadata block (saved ${Vt(this.metadata.checksum)}, computed ${Vt(mn(this.metadata))})`));if(this.inode_format!=Ua)throw pi(V("EIO","sbfs: inode format mismatch"));if(this.metadata_block_size!=at(yi))throw pi(V("EIO","sbfs: metadata block size mismatch"))}#e=$e(this,m,void 0);get checksum(){return this.#e}set checksum(N){this.#e=N}#t=($e(this,y),$e(this,x,void 0));get magic(){return this.#t}set magic(N){this.#t=N}#i=($e(this,z),$e(this,B,void 0));get version(){return this.#i}set version(N){this.#i=N}#r=($e(this,J),$e(this,H,void 0));get inode_format(){return this.#r}set inode_format(N){this.#r=N}#n=($e(this,D),$e(this,ne,void 0));get flags(){return this.#n}set flags(N){this.#n=N}#s=($e(this,L),$e(this,X,void 0));get used_bytes(){return this.#s}set used_bytes(N){this.#s=N}#a=($e(this,_e),$e(this,ae,void 0));get total_bytes(){return this.#a}set total_bytes(N){this.#a=N}#o=($e(this,de),$e(this,j,void 0));get uuid(){return this.#o}set uuid(N){this.#o=N}#l=($e(this,Y),$e(this,we,void 0));get metadata_block_size(){return this.#l}set metadata_block_size(N){this.#l=N}#c=($e(this,Ee),$e(this,Oe,void 0));get metadata_offset_(){return this.#c}set metadata_offset_(N){this.#c=N}#u=($e(this,ee),$e(this,ce,void 0));get metadata_offset(){return this.#u}set metadata_offset(N){this.#u=N}metadata=$e(this,le);#f=$e(this,M,void 0);get label(){return this.#f}set label(N){this.#f=N}#d=($e(this,$),$e(this,pe,void 0));get _padding(){return this.#d}set _padding(N){this.#d=N}rotateMetadata(){const N=this.used_bytes%BigInt(4);Atomics.add(this,Do,N);const P=Number(Atomics.add(this,Do,BigInt(at(yi)))),oe=new yi(this.buffer,P);return oe.previous_offset=this.metadata_offset,this.metadata=oe,this.metadata_offset=oe.byteOffset,un(oe),un(this),oi(`sbfs: rotated metadata block at ${Vt(oe.previous_offset)} with new block at ${Vt(P)}`),oe}isUnused(N,P){if(!P)return!0;if(N+P>this.total_bytes||N<at(me))return!1;for(let oe=this.metadata;oe;oe=oe.previous){if(N<oe.byteOffset+at(yi)&&N+P>oe.byteOffset)return!1;for(const te of oe.items)if(te.offset&&(N>=te.offset&&N<te.offset+te.size||N+P>te.offset&&N+P<=te.offset+te.size||N<=te.offset&&N+P>=te.offset+te.size))return!1}return!0}};return me=g})();function mn(e){let t=at(e)-4;return e instanceof yi&&(t-=Int32Array.BYTES_PER_ELEMENT),pd(new Uint8Array(e.buffer,e.byteOffset+4,t))}function un(e){e instanceof yi&&(e.timestamp=BigInt(Date.now())),e.checksum=mn(e)}const We=()=>{};async function Ed(e){const t=[];for await(const i of e)t.push(i);return t}function vd(e,t,i=We){ec.call(this,e,t).then(()=>i(null)).catch(i)}function Id(e,t=We){xr.call(this,e).then(t).catch(()=>t(!1))}function xd(e,t,i=We){i=typeof t=="function"?t:i,kr.call(this,e,typeof t!="function"?t:{}).then(r=>i(null,r)).catch(i)}function kd(e,t,i=We){i=typeof t=="function"?t:i,Cn.call(this,e,typeof t!="function"?t:{}).then(r=>i(null,r)).catch(i)}function Od(e,t=0,i=We){i=typeof t=="function"?t:i;const r=typeof t=="number"?t:0;tc.call(this,e,r).then(()=>i(null)).catch(i)}function Ad(e,t=We){ra.call(this,e).then(()=>t(null)).catch(t)}function Dd(e,t,i,r=We){const n=Mi(i,420);r=typeof i=="function"?i:r,di.call(this,e,t,n).then(s=>r(null,s.fd)).catch(r)}function Td(e,t,i=We){i=typeof t=="function"?t:i,na.call(this,e,typeof t=="function"?null:t).then(r=>i(null,r)).catch(i)}function Nd(e,t,i,r=We){r=typeof i=="function"?i:r,sa.call(this,e,t,typeof i!="function"?i:null).then(()=>r(null)).catch(r)}function Rd(e,t,i,r=We){const n=typeof i!="function"?i:void 0;r=typeof i=="function"?i:r,ic.call(this,e,t,n).then(()=>r(null)).catch(r)}function zd(e,t,i=We){i=typeof t=="function"?t:i,new Pt(this,e).stat().then(r=>i(null,typeof t=="object"&&t?.bigint?new tr(r):r)).catch(i)}function Ld(e,t=We){new Pt(this,e).close().then(()=>t(null)).catch(t)}function Cd(e,t,i=We){const r=typeof t=="number"?t:0;i=typeof t=="function"?t:i;const n=new Pt(this,e);if(r<0)throw V("EINVAL");n.truncate(r).then(()=>i(null)).catch(i)}function Md(e,t=We){new Pt(this,e).sync().then(()=>t(null)).catch(t)}function Pd(e,t=We){new Pt(this,e).datasync().then(()=>t(null)).catch(t)}function Bd(e,t,i,r,n,s=We){let o,a,d,u,h;const f=new Pt(this,e);if(typeof t=="string"){switch(h="utf8",typeof i){case"function":s=i;break;case"number":u=i,h=typeof r=="string"?r:"utf8",s=typeof n=="function"?n:s;break;default:s=typeof r=="function"?r:typeof n=="function"?n:s,s(V("EINVAL"));return}o=yt.Buffer.from(t),a=0,d=o.length;const E=s;f.write(o,a,d,u).then(({bytesWritten:g})=>E(null,g,o.toString(h))).catch(E)}else{o=yt.Buffer.from(t.buffer),a=i,d=r,u=typeof n=="number"?n:null;const E=typeof n=="function"?n:s;f.write(o,a,d,u).then(({bytesWritten:g})=>E(null,g,o)).catch(E)}}function Ud(e,t,i,r,n,s=We){new Pt(this,e).read(t,i,r,n).then(({bytesRead:o,buffer:a})=>s(null,o,a)).catch(s)}function Fd(e,t,i,r=We){new Pt(this,e).chown(t,i).then(()=>r(null)).catch(r)}function jd(e,t,i){new Pt(this,e).chmod(t).then(()=>i(null)).catch(i)}function $d(e,t,i,r=We){new Pt(this,e).utimes(t,i).then(()=>r(null)).catch(r)}function Wd(e,t=We){aa.call(this,e).then(()=>t(null)).catch(t)}function Vd(e,t,i=We){nr.call(this,e,t).then(()=>i(null)).catch(i)}function qd(e,t,i=We){i=typeof t=="function"?t:i;const r=typeof t!="function"?t:{};Or.call(this,e,r).then(n=>i(null,n)).catch(i)}function Gd(e,t,i=We){rc.call(this,e,t).then(()=>i(null)).catch(i)}function Kd(e,t,i,r=We){const n=typeof i=="string"?i:"file";r=typeof i=="function"?i:r,nc.call(this,e,t,n).then(()=>r(null)).catch(r)}function Hd(e,t,i=We){i=typeof t=="function"?t:i,sc.call(this,e).then(r=>i(null,r)).catch(i)}function Yd(e,t,i,r=We){ac.call(this,e,t,i).then(()=>r(null)).catch(r)}function Xd(e,t,i,r=We){oc.call(this,e,t,i).then(()=>r(null)).catch(r)}function Jd(e,t,i=We){lc.call(this,e,t).then(()=>i(null)).catch(i)}function Zd(e,t,i=We){cc.call(this,e,t).then(()=>i(null)).catch(i)}function Qd(e,t,i,r=We){oa.call(this,e,t,i).then(()=>r(null)).catch(r)}function eh(e,t,i,r=We){uc.call(this,e,t,i).then(()=>r(null)).catch(r)}function th(e,t,i=We){i=typeof t=="function"?t:i,fc.call(this,e,typeof t=="function"?null:t).then(r=>i(null,r)).catch(i)}function ih(e,t,i=We){const r=typeof t=="number"?t:wt;i=typeof t=="function"?t:i,dc.call(this,e,r).then(()=>i(null)).catch(i)}const cr=new Map;function rh(e,t,i){const r=ze(e),n=typeof t!="function"?t:{};if(typeof t=="function"&&(i=t),!i)throw Z("EINVAL","watch",e.toString());if(cr.has(r)){const o=cr.get(r);o&&o.listeners.add(i);return}const s=new Zf(this,r,n);s.on("change",(o,a)=>{const d=cr.get(r);if(d)for(const u of d.listeners)u(o,a)}),cr.set(r,{watcher:s,listeners:new Set})}function nh(e,t=We){const i=ze(e),r=cr.get(i);r&&(t&&t!==We?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),cr.delete(i)))}function sh(e,t,i){const r=new ql(this,ze(e),typeof t=="object"?t:{});return i=typeof t=="function"?t:i,r.on("change",i||We),r}function ah(e,t){t=typeof t=="object"?t:{encoding:t};const i=di.call(this,e,"r",t?.mode);return new ta({...t,autoClose:!0},i)}function oh(e,t){t=typeof t=="object"?t:{encoding:t};const i=di.call(this,e,"w",t?.mode);return new ia(t,i)}function lh(e,t,i=We){i=typeof t=="function"?t:i,Mn.call(this,e,typeof t=="function"?void 0:t).then(()=>i(null)).catch(i)}function ch(e,t,i=We){i=typeof t=="function"?t:i,hc.call(this,e,typeof t!="function"?t:null).then(r=>i(null,r)).catch(i)}function uh(e,t,i,r=We){r=typeof i=="function"?i:r,la.call(this,e,t,typeof i=="function"?void 0:i).then(()=>r(null)).catch(r)}function fh(e,t,i,r=We){r=typeof i=="function"?i:r,new Pt(this,e).readv(t,typeof i=="function"?void 0:i).then(({buffers:n,bytesRead:s})=>r(null,s,n)).catch(r)}function dh(e,t,i,r=We){r=typeof i=="function"?i:r,new Pt(this,e).writev(t,typeof i=="function"?void 0:i).then(({buffers:n,bytesWritten:s})=>r(null,s,n)).catch(r)}function hh(e,t,i=We){i=typeof t=="function"?t:i,_c.call(this,e,typeof t=="function"?void 0:t).then(r=>i(null,r)).catch(i)}function _h(e,t,i,r=We){r=typeof i=="function"?i:r,ca.call(this,e,t,typeof i=="function"?void 0:i).then(()=>r(null)).catch(r)}function mh(e,t,i=We){i=typeof t=="function"?t:i,mc.call(this,e,typeof t=="function"?void 0:t).then(r=>i(null,r)).catch(i)}async function yh(e,t){const i=await di.call(this,e.toString(),"r"),r=await i.readFile();return await i.close(),new Blob([r],t)}function gh(e,t,i=We){i=typeof t=="function"?t:i;const r=yc.call(this,e,typeof t=="function"?void 0:t);Ed(r).then(n=>i(null,n??[])).catch(n=>i(n))}const ph=[];function Ar(e,t,i,r){if(!t.startsWith("user.")&&!ph.includes(t))throw Z("ENOTSUP",r,i)}async function bh(e,t,i={}){e=ze(e);const{fs:r,path:n}=ot(e,this);Ar(this,t,e,"xattr.get");const s=await r.stat(n).catch(li("xattr.get",e));if(Qe&&!He(this,s,wt))throw Z("EACCES","xattr.get",e);s.attributes??=new ir;const o=s.attributes.get(t);if(!o)throw Z("ENODATA","xattr.get",e);const a=yt.Buffer.from(o);return i.encoding=="buffer"||!i.encoding?a:a.toString(i.encoding)}function wh(e,t,i={}){e=ze(e),Ar(this,t,e,"xattr.get");const{fs:r,path:n}=ot(e,this);let s;try{s=r.statSync(n)}catch(d){throw Tt(Object.assign(d,{path:e}))}if(Qe&&!He(this,s,wt))throw Z("EACCES","xattr.get",e);s.attributes??=new ir;const o=s.attributes.get(t);if(!o)throw Z("ENODATA","xattr.get",e);const a=yt.Buffer.from(o);return i.encoding=="buffer"||!i.encoding?a:a.toString(i.encoding)}async function Sh(e,t,i,r={}){e=ze(e);const{fs:n,path:s}=ot(e,this);Ar(this,t,e,"xattr.set");const o=await n.stat(s).catch(li("xattr.set",e));if(Qe&&!He(this,o,Et))throw Z("EACCES","xattr.set",e);o.attributes??=new ir;const a=o.attributes.get(t);if(r.create&&a)throw Z("EEXIST","xattr.set",e);if(r.replace&&!a)throw Z("ENODATA","xattr.set",e);o.attributes.set(t,yt.Buffer.from(i)),await n.touch(s,o).catch(li("xattr.set",e))}function Eh(e,t,i,r={}){e=ze(e);const{fs:n,path:s}=ot(e,this);Ar(this,t,e,"xattr.set");let o;try{o=n.statSync(s)}catch(d){throw Tt(Object.assign(d,{path:e}))}if(Qe&&!He(this,o,Et))throw Z("EACCES","xattr.set",e);o.attributes??=new ir;const a=o.attributes.get(t);if(r.create&&a)throw Z("EEXIST","xattr.set",e);if(r.replace&&!a)throw Z("ENODATA","xattr.set",e);o.attributes.set(t,yt.Buffer.from(i));try{n.touchSync(s,o)}catch(d){throw Tt(Object.assign(d,{path:e}))}}async function vh(e,t){e=ze(e);const{fs:i,path:r}=ot(e,this);Ar(this,t,e,"xattr.remove");const n=await i.stat(r).catch(li("xattr.remove",e));if(Qe&&!He(this,n,Et))throw Z("EACCES","xattr.remove",e);if(n.attributes??=new ir,!n.attributes.get(t))throw Z("ENODATA","xattr.remove",e);n.attributes.remove(t),await i.touch(r,n)}function Ih(e,t){e=ze(e);const{fs:i,path:r}=ot(e,this);Ar(this,t,e,"xattr.remove");let n;try{n=i.statSync(r)}catch(o){throw Tt(Object.assign(o,{path:e}))}if(Qe&&!He(this,n,Et))throw Z("EACCES","xattr.remove",e);if(n.attributes??=new ir,!n.attributes.get(t))throw Z("ENODATA","xattr.remove",e);n.attributes.remove(t);try{i.touchSync(r,n)}catch(o){throw Tt(Object.assign(o,{path:e}))}}async function xh(e){e=ze(e);const{fs:t,path:i}=ot(e,this),r=await t.stat(i).catch(li("xattr.list",e));return r.attributes?r.attributes.keys().toArray():[]}function kh(e){e=ze(e);const{fs:t,path:i}=ot(e,this);let r;try{r=t.statSync(i)}catch(n){throw Tt(Object.assign(n,{path:e}))}return r.attributes?r.attributes.keys().toArray():[]}const Oh=Object.freeze(Object.defineProperty({__proto__:null,get:bh,getSync:wh,list:xh,listSync:kh,remove:vh,removeSync:Ih,set:Sh,setSync:Eh},Symbol.toStringTag,{value:"Module"}));function wc(e){class t extends e{constructor(...r){super(...r),this.attributes.set("no_write")}async rename(){throw V("EROFS")}renameSync(){throw V("EROFS")}async createFile(){throw V("EROFS")}createFileSync(){throw V("EROFS")}async unlink(){throw V("EROFS")}unlinkSync(){throw V("EROFS")}async rmdir(){throw V("EROFS")}rmdirSync(){throw V("EROFS")}async mkdir(){throw V("EROFS")}mkdirSync(){throw V("EROFS")}async link(){throw V("EROFS")}linkSync(){throw V("EROFS")}async touch(){throw V("EROFS")}touchSync(){throw V("EROFS")}async sync(){throw V("EROFS")}syncSync(){throw V("EROFS")}async write(){throw V("EROFS")}writeSync(){throw V("EROFS")}streamWrite(){throw V("EROFS")}}return t}function Sc(e){class t extends e{async exists(r){return this.existsSync(r)}async rename(r,n){return this.renameSync(r,n)}async stat(r){return this.statSync(r)}async touch(r,n){return this.touchSync(r,n)}async createFile(r,n){return this.createFileSync(r,n)}async unlink(r){return this.unlinkSync(r)}async rmdir(r){return this.rmdirSync(r)}async mkdir(r,n){return this.mkdirSync(r,n)}async readdir(r){return this.readdirSync(r)}async link(r,n){return this.linkSync(r,n)}async sync(){return this.syncSync()}async read(r,n,s,o){return this.readSync(r,n,s,o)}async write(r,n,s){return this.writeSync(r,n,s)}}return t}var Hi=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},Kt=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0},wn;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(wn||(wn={}));let Ec=(()=>{var e,t,i,r,n;let s=[Ye("fsxattr")],o,a=[],d,u=Si,h,f=[],E=[],g,b=[],p=[],m,y=[],I=[],x,z=[],k=[],B,J=[],G=[],H,D=[],C=[];var ne=class extends u{static{d=this}static{const L=typeof Symbol=="function"&&Symbol.metadata?Object.create(u[Symbol.metadata]??null):void 0;h=[(e=q).uint32.bind(e)],g=[(t=q).uint32.bind(t)],m=[(i=q).uint32.bind(i)],x=[(r=q).uint32.bind(r)],B=[(n=q).uint32.bind(n)],H=[q.char(8)],Hi(this,null,h,{kind:"accessor",name:"xflags",static:!1,private:!1,access:{has:W=>"xflags"in W,get:W=>W.xflags,set:(W,X)=>{W.xflags=X}},metadata:L},f,E),Hi(this,null,g,{kind:"accessor",name:"extsize",static:!1,private:!1,access:{has:W=>"extsize"in W,get:W=>W.extsize,set:(W,X)=>{W.extsize=X}},metadata:L},b,p),Hi(this,null,m,{kind:"accessor",name:"nextents",static:!1,private:!1,access:{has:W=>"nextents"in W,get:W=>W.nextents,set:(W,X)=>{W.nextents=X}},metadata:L},y,I),Hi(this,null,x,{kind:"accessor",name:"projid",static:!1,private:!1,access:{has:W=>"projid"in W,get:W=>W.projid,set:(W,X)=>{W.projid=X}},metadata:L},z,k),Hi(this,null,B,{kind:"accessor",name:"cowextsize",static:!1,private:!1,access:{has:W=>"cowextsize"in W,get:W=>W.cowextsize,set:(W,X)=>{W.cowextsize=X}},metadata:L},J,G),Hi(this,null,H,{kind:"accessor",name:"pad",static:!1,private:!1,access:{has:W=>"pad"in W,get:W=>W.pad,set:(W,X)=>{W.pad=X}},metadata:L},D,C),Hi(null,o={value:d},s,{kind:"class",name:d.name,metadata:L},null,a),ne=d=o.value,L&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:L}),Kt(d,a)}#e=Kt(this,f,void 0);get xflags(){return this.#e}set xflags(L){this.#e=L}#t=(Kt(this,E),Kt(this,b,void 0));get extsize(){return this.#t}set extsize(L){this.#t=L}#i=(Kt(this,p),Kt(this,y,void 0));get nextents(){return this.#i}set nextents(L){this.#i=L}#r=(Kt(this,I),Kt(this,z,void 0));get projid(){return this.#r}set projid(L){this.#r=L}#n=(Kt(this,k),Kt(this,J,void 0));get cowextsize(){return this.#n}set cowextsize(L){this.#n=L}#s=(Kt(this,G),Kt(this,D,[]));get pad(){return this.#s}set pad(L){this.#s=L}constructor(L=Xe(new vt(Q.EINVAL,"fsxattr must be initialized with an inode"))){super(new ArrayBuffer(at(ne))),Kt(this,C),this.extsize=L.size,this.nextents=1,this.projid=L.uid,this.cowextsize=L.size;for(const W of Object.keys(jt))L.flags&jt[W]&&W in wn&&(this.xflags|=wn[W])}};return ne=d})();var To;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(To||(To={}));var _t;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(_t||(_t={}));var ai;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(ai||(ai={}));async function Ah(e,t,...i){e=ze(e);const{fs:r,path:n}=ot(e,this);try{const s=new tt(await r.stat(n));switch(t){case _t.GetFlags:case ai.GetFlags:return s.flags;case _t.SetFlags:case ai.SetFlags:s.flags=i[0],await r.touch(n,s);return;case _t.GetVersion:case ai.GetVersion:return s.version;case _t.SetVersion:case ai.SetVersion:s.version=i[0],await r.touch(n,s);return;case _t.Fiemap:break;case _t.GetXattr:return new Ec(s);case _t.SetXattr:break;case _t.GetLabel:return r.label;case _t.SetLabel:r.label=i[0];return;case _t.GetUUID:return r.uuid;case _t.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(s){throw Tt(Object.assign(s,{syscall:"ioctl",path:e}))}throw Z("ENOTSUP","ioctl",e)}function Dh(e,t,...i){e=ze(e);const{fs:r,path:n}=ot(e,this);try{const s=new tt(r.statSync(n));switch(t){case _t.GetFlags:case ai.GetFlags:return s.flags;case _t.SetFlags:case ai.SetFlags:s.flags=i[0],r.touchSync(n,s);return;case _t.GetVersion:case ai.GetVersion:return s.version;case _t.SetVersion:case ai.SetVersion:s.version=i[0],r.touchSync(n,s);return;case _t.Fiemap:break;case _t.GetXattr:return new Ec(s);case _t.SetXattr:break;case _t.GetLabel:return r.label;case _t.SetLabel:r.label=i[0];return;case _t.GetUUID:return r.uuid;case _t.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(s){throw Tt(Object.assign(s,{syscall:"ioctl",path:e}))}throw Z("ENOTSUP","ioctl",e)}const ua=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:tf,Dir:Vs,Dirent:Gr,get IOC(){return _t},get IOC32(){return ai},ReadStream:ta,Stats:Pi,StatsFs:ef,WriteStream:ia,access:ih,accessSync:Vf,appendFile:Rd,appendFileSync:Af,chmod:Jd,chmodSync:Ff,chown:Yd,chownSync:Bf,chroot:wf,close:Ld,closeSync:Er,constants:ml,copyFile:uh,copyFileSync:$l,cp:_h,cpSync:Wl,createReadStream:ah,createWriteStream:oh,exists:Id,existsSync:gr,fchmod:jd,fchmodSync:Ys,fchown:Fd,fchownSync:Ul,fdatasync:Pd,fdatasyncSync:Rf,fstat:zd,fstatSync:Df,fsync:Md,fsyncSync:Nf,ftruncate:Cd,ftruncateSync:Tf,futimes:$d,futimesSync:Xs,glob:gh,globSync:Jf,ioctl:Ah,ioctlSync:Dh,lchmod:Zd,lchmodSync:jf,lchown:Xd,lchownSync:Uf,link:Gd,linkSync:Cf,lopenSync:Tn,lstat:kd,lstatSync:qs,lutimes:eh,lutimesSync:$f,mkdir:Vd,mkdirSync:Yr,mkdtemp:ch,mkdtempDisposableSync:Gf,mkdtempSync:qf,mount:bn,open:Dd,openAsBlob:yh,openSync:Gs,opendir:hh,opendirSync:Yf,promises:_d,read:Ud,readFile:Td,readFileSync:Ks,readSync:Lf,readdir:qd,readdirSync:Xr,readlink:Hd,readlinkSync:Pf,readv:fh,readvSync:Kf,realpath:th,realpathSync:Wf,rename:vd,renameSync:kf,rm:lh,rmSync:Js,rmdir:Wd,rmdirSync:Fl,stat:xd,statSync:$r,statfs:mh,statfsSync:Xf,symlink:Kd,symlinkSync:Mf,truncate:Od,truncateSync:Of,umount:Ml,unlink:Ad,unlinkSync:Bl,unwatchFile:nh,utimes:Qd,utimesSync:jl,watch:sh,watchFile:rh,write:Bd,writeFile:Nd,writeFileSync:Hs,writeSync:zf,writev:dh,writevSync:Hf,xattr:Oh},Symbol.toStringTag,{value:"Module"})),Th="2.4.4",Nh={version:Th};globalThis.__zenfs__=Object.assign(Object.create(ua),{_version:Nh.version});var ds=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},Mr=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0},ur;(function(e){e[e.CONTINUE=1]="CONTINUE",e[e.CURRENT=2]="CURRENT",e[e.PARENT=4]="PARENT",e[e.ROOT=8]="ROOT"})(ur||(ur={}));let Rh=(()=>{var e,t;let i=[Ye.packed("SLComponentRecord")],r,n=[],s,o=Si,a,d=[],u=[],h,f=[],E=[];return class extends o{static{s=this}static{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;a=[(e=q).uint8.bind(e)],h=[(t=q).uint8.bind(t)],ds(this,null,a,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:b=>"flags"in b,get:b=>b.flags,set:(b,p)=>{b.flags=p}},metadata:g},d,u),ds(this,null,h,{kind:"accessor",name:"componentLength",static:!1,private:!1,access:{has:b=>"componentLength"in b,get:b=>b.componentLength,set:(b,p)=>{b.componentLength=p}},metadata:g},f,E),ds(null,r={value:s},i,{kind:"class",name:s.name,metadata:g},null,n),s=r.value,g&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g}),Mr(s,n)}#e=Mr(this,d,void 0);get flags(){return this.#e}set flags(g){this.#e=g}#t=(Mr(this,u),Mr(this,f,void 0));get componentLength(){return this.#t}set componentLength(g){this.#t=g}get length(){return 2+this.componentLength}content(g){return g(new Uint8Array(this.buffer,this.byteOffset+2,this.componentLength))}constructor(){super(...arguments),Mr(this,E)}},s})();var At=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},Ze=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0};let xi=(()=>{var e;let t=[Ye.packed("LongFormDate")],i,r=[],n,s=Si,o,a=[],d=[],u,h=[],f=[],E,g=[],b=[],p,m=[],y=[],I,x=[],z=[],k,B=[],J=[],G,H=[],D=[],C,ne=[],L=[];return class extends s{static{n=this}static{const W=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[q.char(4)],u=[q.char(2)],E=[q.char(2)],p=[q.char(2)],I=[q.char(2)],k=[q.char(2)],G=[q.char(2)],C=[(e=q).uint8.bind(e)],At(this,null,o,{kind:"accessor",name:"_year",static:!1,private:!1,access:{has:X=>"_year"in X,get:X=>X._year,set:(X,_e)=>{X._year=_e}},metadata:W},a,d),At(this,null,u,{kind:"accessor",name:"_month",static:!1,private:!1,access:{has:X=>"_month"in X,get:X=>X._month,set:(X,_e)=>{X._month=_e}},metadata:W},h,f),At(this,null,E,{kind:"accessor",name:"_day",static:!1,private:!1,access:{has:X=>"_day"in X,get:X=>X._day,set:(X,_e)=>{X._day=_e}},metadata:W},g,b),At(this,null,p,{kind:"accessor",name:"_hour",static:!1,private:!1,access:{has:X=>"_hour"in X,get:X=>X._hour,set:(X,_e)=>{X._hour=_e}},metadata:W},m,y),At(this,null,I,{kind:"accessor",name:"_minute",static:!1,private:!1,access:{has:X=>"_minute"in X,get:X=>X._minute,set:(X,_e)=>{X._minute=_e}},metadata:W},x,z),At(this,null,k,{kind:"accessor",name:"_second",static:!1,private:!1,access:{has:X=>"_second"in X,get:X=>X._second,set:(X,_e)=>{X._second=_e}},metadata:W},B,J),At(this,null,G,{kind:"accessor",name:"_centisecond",static:!1,private:!1,access:{has:X=>"_centisecond"in X,get:X=>X._centisecond,set:(X,_e)=>{X._centisecond=_e}},metadata:W},H,D),At(this,null,C,{kind:"accessor",name:"offsetFromGMT",static:!1,private:!1,access:{has:X=>"offsetFromGMT"in X,get:X=>X.offsetFromGMT,set:(X,_e)=>{X.offsetFromGMT=_e}},metadata:W},ne,L),At(null,i={value:n},t,{kind:"class",name:n.name,metadata:W},null,r),n=i.value,W&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:W}),Ze(n,r)}#e=Ze(this,a,"");get _year(){return this.#e}set _year(W){this.#e=W}get year(){return parseInt(this._year)}set year(W){this._year=W.toFixed()}#t=(Ze(this,d),Ze(this,h,""));get _month(){return this.#t}set _month(W){this.#t=W}get month(){return parseInt(this._month)}set month(W){this._month=W.toFixed()}#i=(Ze(this,f),Ze(this,g,""));get _day(){return this.#i}set _day(W){this.#i=W}get day(){return parseInt(this._day)}set day(W){this._day=W.toFixed()}#r=(Ze(this,b),Ze(this,m,""));get _hour(){return this.#r}set _hour(W){this.#r=W}get hour(){return parseInt(this._hour)}set hour(W){this._hour=W.toFixed()}#n=(Ze(this,y),Ze(this,x,""));get _minute(){return this.#n}set _minute(W){this.#n=W}get minute(){return parseInt(this._minute)}set minute(W){this._minute=W.toFixed()}#s=(Ze(this,z),Ze(this,B,""));get _second(){return this.#s}set _second(W){this.#s=W}get second(){return parseInt(this._second)}set second(W){this._second=W.toFixed()}#a=(Ze(this,J),Ze(this,H,""));get _centisecond(){return this.#a}set _centisecond(W){this.#a=W}get centisecond(){return parseInt(this._centisecond)}set centisecond(W){this._centisecond=W.toFixed()}#o=(Ze(this,D),Ze(this,ne,void 0));get offsetFromGMT(){return this.#o}set offsetFromGMT(W){this.#o=W}get date(){return new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.centisecond*10)}constructor(){super(...arguments),Ze(this,L)}},n})(),vc=(()=>{var e,t,i,r,n,s,o;let a=[Ye.packed("ShortFormDate")],d,u=[],h,f=wi.typed(Uint8Array),E=[],g,b=[],p=[],m,y=[],I=[],x,z=[],k=[],B,J=[],G=[],H,D=[],C=[],ne,L=[],W=[],X,_e=[],De=[],ae;return class extends f{static{h=this}static{const de=typeof Symbol=="function"&&Symbol.metadata?Object.create(f[Symbol.metadata]??null):void 0;g=[(e=q).uint8.bind(e)],m=[(t=q).uint8.bind(t)],x=[(i=q).uint8.bind(i)],B=[(r=q).uint8.bind(r)],H=[(n=q).uint8.bind(n)],ne=[(s=q).uint8.bind(s)],X=[(o=q).uint8.bind(o)],ae=[Ii],At(this,null,g,{kind:"accessor",name:"year",static:!1,private:!1,access:{has:O=>"year"in O,get:O=>O.year,set:(O,j)=>{O.year=j}},metadata:de},b,p),At(this,null,m,{kind:"accessor",name:"month",static:!1,private:!1,access:{has:O=>"month"in O,get:O=>O.month,set:(O,j)=>{O.month=j}},metadata:de},y,I),At(this,null,x,{kind:"accessor",name:"day",static:!1,private:!1,access:{has:O=>"day"in O,get:O=>O.day,set:(O,j)=>{O.day=j}},metadata:de},z,k),At(this,null,B,{kind:"accessor",name:"hour",static:!1,private:!1,access:{has:O=>"hour"in O,get:O=>O.hour,set:(O,j)=>{O.hour=j}},metadata:de},J,G),At(this,null,H,{kind:"accessor",name:"minute",static:!1,private:!1,access:{has:O=>"minute"in O,get:O=>O.minute,set:(O,j)=>{O.minute=j}},metadata:de},D,C),At(this,null,ne,{kind:"accessor",name:"second",static:!1,private:!1,access:{has:O=>"second"in O,get:O=>O.second,set:(O,j)=>{O.second=j}},metadata:de},L,W),At(this,null,X,{kind:"accessor",name:"offsetFromGMT",static:!1,private:!1,access:{has:O=>"offsetFromGMT"in O,get:O=>O.offsetFromGMT,set:(O,j)=>{O.offsetFromGMT=j}},metadata:de},_e,De),At(this,null,ae,{kind:"getter",name:"date",static:!1,private:!1,access:{has:O=>"date"in O,get:O=>O.date},metadata:de},null,E),At(null,d={value:h},a,{kind:"class",name:h.name,metadata:de},null,u),h=d.value,de&&Object.defineProperty(h,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:de}),Ze(h,u)}#e=(Ze(this,E),Ze(this,b,void 0));get year(){return this.#e}set year(de){this.#e=de}#t=(Ze(this,p),Ze(this,y,void 0));get month(){return this.#t}set month(de){this.#t=de}#i=(Ze(this,I),Ze(this,z,void 0));get day(){return this.#i}set day(de){this.#i=de}#r=(Ze(this,k),Ze(this,J,void 0));get hour(){return this.#r}set hour(de){this.#r=de}#n=(Ze(this,G),Ze(this,D,void 0));get minute(){return this.#n}set minute(de){this.#n=de}#s=(Ze(this,C),Ze(this,L,void 0));get second(){return this.#s}set second(de){this.#s=de}#a=(Ze(this,W),Ze(this,_e,void 0));get offsetFromGMT(){return this.#a}set offsetFromGMT(de){this.#a=de}get date(){return new Date(1900+this.year,this.month-1,this.day,this.hour,this.minute,this.second)}constructor(){super(...arguments),Ze(this,De)}},h})();var Sn;(function(e){e[e.Hidden=1]="Hidden",e[e.Directory=2]="Directory",e[e.AssociatedFile=4]="AssociatedFile",e[e.EARContainsInfo=8]="EARContainsInfo",e[e.EARContainsPerms=16]="EARContainsPerms",e[e.FinalDirectoryRecordForFile=32]="FinalDirectoryRecordForFile"})(Sn||(Sn={}));var qe=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},Ne=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0},kt;(function(e){e[e.CE=17221]="CE",e[e.PD=20548]="PD",e[e.SP=21328]="SP",e[e.ST=21332]="ST",e[e.ER=17746]="ER",e[e.ES=17747]="ES",e[e.PX=20568]="PX",e[e.PN=20558]="PN",e[e.SL=21324]="SL",e[e.NM=20045]="NM",e[e.CL=17228]="CL",e[e.PL=20556]="PL",e[e.RE=21061]="RE",e[e.TF=21574]="TF",e[e.SF=21318]="SF",e[e.RR=21074]="RR"})(kt||(kt={}));let zt=(()=>{var e,t,i;let r=[Ye.packed("SystemUseEntry")],n,s=[],o,a=Si,d,u=[],h=[],f,E=[],g=[],b,p=[],m=[];return class extends a{static{o=this}static{const y=typeof Symbol=="function"&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;d=[(e=q).uint16.bind(e)],f=[(t=q).uint8.bind(t)],b=[(i=q).uint8.bind(i)],qe(this,null,d,{kind:"accessor",name:"signature",static:!1,private:!1,access:{has:I=>"signature"in I,get:I=>I.signature,set:(I,x)=>{I.signature=x}},metadata:y},u,h),qe(this,null,f,{kind:"accessor",name:"length",static:!1,private:!1,access:{has:I=>"length"in I,get:I=>I.length,set:(I,x)=>{I.length=x}},metadata:y},E,g),qe(this,null,b,{kind:"accessor",name:"suVersion",static:!1,private:!1,access:{has:I=>"suVersion"in I,get:I=>I.suVersion,set:(I,x)=>{I.suVersion=x}},metadata:y},p,m),qe(null,n={value:o},r,{kind:"class",name:o.name,metadata:y},null,s),o=n.value,y&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y}),Ne(o,s)}#e=Ne(this,u,void 0);get signature(){return this.#e}set signature(y){this.#e=y}get signatureString(){return bi(new Uint8Array(this.buffer,this.byteOffset,2))}#t=(Ne(this,h),Ne(this,E,void 0));get length(){return this.#t}set length(y){this.#t=y}#i=(Ne(this,g),Ne(this,p,void 0));get suVersion(){return this.#i}set suVersion(y){this.#i=y}constructor(){super(...arguments),Ne(this,m)}},o})(),Ic=(()=>{var e,t,i;let r=[Ye.packed("CEEntry")],n,s=[],o,a=zt,d,u=[],h=[],f,E=[],g=[],b,p=[],m=[];return class extends a{static{o=this}static{const y=typeof Symbol=="function"&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;d=[(e=q).uint64.bind(e)],f=[(t=q).uint64.bind(t)],b=[(i=q).uint64.bind(i)],qe(this,null,d,{kind:"accessor",name:"extent",static:!1,private:!1,access:{has:I=>"extent"in I,get:I=>I.extent,set:(I,x)=>{I.extent=x}},metadata:y},u,h),qe(this,null,f,{kind:"accessor",name:"offset",static:!1,private:!1,access:{has:I=>"offset"in I,get:I=>I.offset,set:(I,x)=>{I.offset=x}},metadata:y},E,g),qe(this,null,b,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:I=>"size"in I,get:I=>I.size,set:(I,x)=>{I.size=x}},metadata:y},p,m),qe(null,n={value:o},r,{kind:"class",name:o.name,metadata:y},null,s),o=n.value,y&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y}),Ne(o,s)}_entries=[];#e=Ne(this,u,void 0);get extent(){return this.#e}set extent(y){this.#e=y}#t=(Ne(this,h),Ne(this,E,void 0));get offset(){return this.#t}set offset(y){this.#t=y}#i=(Ne(this,g),Ne(this,p,void 0));get size(){return this.#i}set size(y){this.#i=y}entries(){return this._entries||=zc(this.buffer,Number(this.extent*2048n+this.offset),this.size),this._entries}constructor(){super(...arguments),Ne(this,m)}},o})(),zh=(()=>{let e=[Ye.packed("PDEntry")],t,i=[],r,n=zt;return class extends n{static{r=this}static{const s=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;qe(null,t={value:r},e,{kind:"class",name:r.name,metadata:s},null,i),r=t.value,s&&Object.defineProperty(r,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s}),Ne(r,i)}},r})(),xc=(()=>{var e;let t=[Ye.packed("SPEntry")],i,r=[],n,s=zt,o,a=[],d=[],u,h=[],f=[];return class extends s{static{n=this}static{const E=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[q.uint8(2)],u=[(e=q).uint8.bind(e)],qe(this,null,o,{kind:"accessor",name:"magic",static:!1,private:!1,access:{has:g=>"magic"in g,get:g=>g.magic,set:(g,b)=>{g.magic=b}},metadata:E},a,d),qe(this,null,u,{kind:"accessor",name:"skip",static:!1,private:!1,access:{has:g=>"skip"in g,get:g=>g.skip,set:(g,b)=>{g.skip=b}},metadata:E},h,f),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:E},null,r),n=i.value,E&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:E}),Ne(n,r)}#e=Ne(this,a,void 0);get magic(){return this.#e}set magic(E){this.#e=E}checkMagic(){return this.magic[0]==190&&this.magic[1]==239}#t=(Ne(this,d),Ne(this,h,void 0));get skip(){return this.#t}set skip(E){this.#t=E}constructor(){super(...arguments),Ne(this,f)}},n})(),kc=(()=>{let e=[Ye.packed("STEntry")],t,i=[],r,n=zt;return class extends n{static{r=this}static{const s=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;qe(null,t={value:r},e,{kind:"class",name:r.name,metadata:s},null,i),r=t.value,s&&Object.defineProperty(r,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s}),Ne(r,i)}},r})(),Oc=(()=>{var e,t,i,r;let n=[Ye.packed("EREntry")],s,o=[],a,d=zt,u,h=[],f=[],E,g=[],b=[],p,m=[],y=[],I,x=[],z=[];return class extends d{static{a=this}static{const k=typeof Symbol=="function"&&Symbol.metadata?Object.create(d[Symbol.metadata]??null):void 0;u=[(e=q).uint8.bind(e)],E=[(t=q).uint8.bind(t)],p=[(i=q).uint8.bind(i)],I=[(r=q).uint8.bind(r)],qe(this,null,u,{kind:"accessor",name:"idLength",static:!1,private:!1,access:{has:B=>"idLength"in B,get:B=>B.idLength,set:(B,J)=>{B.idLength=J}},metadata:k},h,f),qe(this,null,E,{kind:"accessor",name:"descriptorLength",static:!1,private:!1,access:{has:B=>"descriptorLength"in B,get:B=>B.descriptorLength,set:(B,J)=>{B.descriptorLength=J}},metadata:k},g,b),qe(this,null,p,{kind:"accessor",name:"sourceLength",static:!1,private:!1,access:{has:B=>"sourceLength"in B,get:B=>B.sourceLength,set:(B,J)=>{B.sourceLength=J}},metadata:k},m,y),qe(this,null,I,{kind:"accessor",name:"extensionVersion",static:!1,private:!1,access:{has:B=>"extensionVersion"in B,get:B=>B.extensionVersion,set:(B,J)=>{B.extensionVersion=J}},metadata:k},x,z),qe(null,s={value:a},n,{kind:"class",name:a.name,metadata:k},null,o),a=s.value,k&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k}),Ne(a,o)}#e=Ne(this,h,void 0);get idLength(){return this.#e}set idLength(k){this.#e=k}#t=(Ne(this,f),Ne(this,g,void 0));get descriptorLength(){return this.#t}set descriptorLength(k){this.#t=k}#i=(Ne(this,b),Ne(this,m,void 0));get sourceLength(){return this.#i}set sourceLength(k){this.#i=k}#r=(Ne(this,y),Ne(this,x,void 0));get extensionVersion(){return this.#r}set extensionVersion(k){this.#r=k}get extensionIdentifier(){return bi(new Uint8Array(this.buffer,this.byteOffset+8,this.idLength))}get extensionDescriptor(){return bi(new Uint8Array(this.buffer,this.byteOffset+8+this.idLength,this.descriptorLength))}get extensionSource(){return bi(new Uint8Array(this.buffer,8+this.idLength+this.descriptorLength,this.sourceLength))}constructor(){super(...arguments),Ne(this,z)}},a})(),Lh=(()=>{var e;let t=[Ye.packed("ESEntry")],i,r=[],n,s=zt,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint8.bind(e)],qe(this,null,o,{kind:"accessor",name:"extensionSequence",static:!1,private:!1,access:{has:h=>"extensionSequence"in h,get:h=>h.extensionSequence,set:(h,f)=>{h.extensionSequence=f}},metadata:u},a,d),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),Ne(n,r)}#e=Ne(this,a,void 0);get extensionSequence(){return this.#e}set extensionSequence(u){this.#e=u}constructor(){super(...arguments),Ne(this,d)}},n})(),Ac=(()=>{let e=[Ye.packed("RREntry")],t,i=[],r,n=zt;return class extends n{static{r=this}static{const s=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;qe(null,t={value:r},e,{kind:"class",name:r.name,metadata:s},null,i),r=t.value,s&&Object.defineProperty(r,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s}),Ne(r,i)}},r})(),Dc=(()=>{var e,t,i,r,n;let s=[Ye.packed("PXEntry")],o,a=[],d,u=zt,h,f=[],E=[],g,b=[],p=[],m,y=[],I=[],x,z=[],k=[],B,J=[],G=[];return class extends u{static{d=this}static{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(u[Symbol.metadata]??null):void 0;h=[(e=q).uint64.bind(e)],g=[(t=q).uint64.bind(t)],m=[(i=q).uint64.bind(i)],x=[(r=q).uint64.bind(r)],B=[(n=q).uint64.bind(n)],qe(this,null,h,{kind:"accessor",name:"mode",static:!1,private:!1,access:{has:D=>"mode"in D,get:D=>D.mode,set:(D,C)=>{D.mode=C}},metadata:H},f,E),qe(this,null,g,{kind:"accessor",name:"nlinks",static:!1,private:!1,access:{has:D=>"nlinks"in D,get:D=>D.nlinks,set:(D,C)=>{D.nlinks=C}},metadata:H},b,p),qe(this,null,m,{kind:"accessor",name:"uid",static:!1,private:!1,access:{has:D=>"uid"in D,get:D=>D.uid,set:(D,C)=>{D.uid=C}},metadata:H},y,I),qe(this,null,x,{kind:"accessor",name:"gid",static:!1,private:!1,access:{has:D=>"gid"in D,get:D=>D.gid,set:(D,C)=>{D.gid=C}},metadata:H},z,k),qe(this,null,B,{kind:"accessor",name:"inode",static:!1,private:!1,access:{has:D=>"inode"in D,get:D=>D.inode,set:(D,C)=>{D.inode=C}},metadata:H},J,G),qe(null,o={value:d},s,{kind:"class",name:d.name,metadata:H},null,a),d=o.value,H&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H}),Ne(d,a)}#e=Ne(this,f,void 0);get mode(){return this.#e}set mode(H){this.#e=H}#t=(Ne(this,E),Ne(this,b,void 0));get nlinks(){return this.#t}set nlinks(H){this.#t=H}#i=(Ne(this,p),Ne(this,y,void 0));get uid(){return this.#i}set uid(H){this.#i=H}#r=(Ne(this,I),Ne(this,z,void 0));get gid(){return this.#r}set gid(H){this.#r=H}#n=(Ne(this,k),Ne(this,J,void 0));get inode(){return this.#n}set inode(H){this.#n=H}constructor(){super(...arguments),Ne(this,G)}},d})(),Ch=(()=>{var e,t;let i=[Ye.packed("PNEntry")],r,n=[],s,o=zt,a,d=[],u=[],h,f=[],E=[];return class extends o{static{s=this}static{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;a=[(e=q).uint64.bind(e)],h=[(t=q).uint64.bind(t)],qe(this,null,a,{kind:"accessor",name:"dev_high",static:!1,private:!1,access:{has:b=>"dev_high"in b,get:b=>b.dev_high,set:(b,p)=>{b.dev_high=p}},metadata:g},d,u),qe(this,null,h,{kind:"accessor",name:"dev_low",static:!1,private:!1,access:{has:b=>"dev_low"in b,get:b=>b.dev_low,set:(b,p)=>{b.dev_low=p}},metadata:g},f,E),qe(null,r={value:s},i,{kind:"class",name:s.name,metadata:g},null,n),s=r.value,g&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g}),Ne(s,n)}#e=Ne(this,d,void 0);get dev_high(){return this.#e}set dev_high(g){this.#e=g}#t=(Ne(this,u),Ne(this,f,void 0));get dev_low(){return this.#t}set dev_low(g){this.#t=g}constructor(){super(...arguments),Ne(this,E)}},s})(),ks=(()=>{var e;let t=[Ye.packed("SLEntry")],i,r=[],n,s=zt,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint8.bind(e)],qe(this,null,o,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:h=>"flags"in h,get:h=>h.flags,set:(h,f)=>{h.flags=f}},metadata:u},a,d),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),Ne(n,r)}#e=Ne(this,a,void 0);get flags(){return this.#e}set flags(u){this.#e=u}get continueFlag(){return this.flags&1}get componentRecords(){const u=[];let h=5;for(;h<this.length;){const f=new Rh(this.buffer,this.byteOffset+h);u.push(f),h+=f.length}return u}constructor(){super(...arguments),Ne(this,d)}},n})();var Br;(function(e){e[e.CONTINUE=1]="CONTINUE",e[e.CURRENT=2]="CURRENT",e[e.PARENT=4]="PARENT"})(Br||(Br={}));let Tc=(()=>{var e;let t=[Ye.packed("NMEntry")],i,r=[],n,s=zt,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint8.bind(e)],qe(this,null,o,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:h=>"flags"in h,get:h=>h.flags,set:(h,f)=>{h.flags=f}},metadata:u},a,d),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),Ne(n,r)}#e=Ne(this,a,void 0);get flags(){return this.#e}set flags(u){this.#e=u}name(u){return u(new Uint8Array(this.buffer,this.byteOffset+5,this.length))}constructor(){super(...arguments),Ne(this,d)}},n})(),fa=(()=>{var e;let t=[Ye.packed("CLEntry")],i,r=[],n,s=zt,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint32.bind(e)],qe(this,null,o,{kind:"accessor",name:"childDirectoryLba",static:!1,private:!1,access:{has:h=>"childDirectoryLba"in h,get:h=>h.childDirectoryLba,set:(h,f)=>{h.childDirectoryLba=f}},metadata:u},a,d),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),Ne(n,r)}#e=Ne(this,a,void 0);get childDirectoryLba(){return this.#e}set childDirectoryLba(u){this.#e=u}constructor(){super(...arguments),Ne(this,d)}},n})(),Mh=(()=>{var e;let t=[Ye.packed("PLEntry")],i,r=[],n,s=zt,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint32.bind(e)],qe(this,null,o,{kind:"accessor",name:"parentDirectoryLba",static:!1,private:!1,access:{has:h=>"parentDirectoryLba"in h,get:h=>h.parentDirectoryLba,set:(h,f)=>{h.parentDirectoryLba=f}},metadata:u},a,d),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),Ne(n,r)}#e=Ne(this,a,void 0);get parentDirectoryLba(){return this.#e}set parentDirectoryLba(u){this.#e=u}constructor(){super(...arguments),Ne(this,d)}},n})(),Nc=(()=>{let e=[Ye.packed("REEntry")],t,i=[],r,n=zt;return class extends n{static{r=this}static{const s=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;qe(null,t={value:r},e,{kind:"class",name:r.name,metadata:s},null,i),r=t.value,s&&Object.defineProperty(r,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s}),Ne(r,i)}},r})();var ti;(function(e){e[e.CREATION=1]="CREATION",e[e.MODIFY=2]="MODIFY",e[e.ACCESS=4]="ACCESS",e[e.ATTRIBUTES=8]="ATTRIBUTES",e[e.BACKUP=16]="BACKUP",e[e.EXPIRATION=32]="EXPIRATION",e[e.EFFECTIVE=64]="EFFECTIVE",e[e.LONG_FORM=128]="LONG_FORM"})(ti||(ti={}));let Rc=(()=>{var e;let t=[Ye.packed("TFEntry")],i,r=[],n,s=zt,o,a=[],d=[];return class extends s{static{n=this}static{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;o=[(e=q).uint8.bind(e)],qe(this,null,o,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:h=>"flags"in h,get:h=>h.flags,set:(h,f)=>{h.flags=f}},metadata:u},a,d),qe(null,i={value:n},t,{kind:"class",name:n.name,metadata:u},null,r),n=i.value,u&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u}),Ne(n,r)}#e=Ne(this,a,void 0);get flags(){return this.#e}set flags(u){this.#e=u}_getDate(u){if(!(this.flags&u))return;let h=0;for(let b=0;b<u-1;b++)h+=this.flags&1<<b?1:0;const f=this.flags&ti.LONG_FORM?xi:vc,E=5+h*at(f);return new f(this.buffer,this.byteOffset+E,at(f)).date}get creation(){return this._getDate(ti.CREATION)}get modify(){return this._getDate(ti.MODIFY)}get access(){return this._getDate(ti.ACCESS)}get backup(){return this._getDate(ti.BACKUP)}get expiration(){return this._getDate(ti.EXPIRATION)}get effective(){return this._getDate(ti.EFFECTIVE)}constructor(){super(...arguments),Ne(this,d)}},n})(),Ph=(()=>{var e,t,i;let r=zt,n,s=[],o=[],a,d=[],u=[],h,f=[],E=[];return class extends r{static{const b=typeof Symbol=="function"&&Symbol.metadata?Object.create(r[Symbol.metadata]??null):void 0;n=[(e=q).uint64.bind(e)],a=[(t=q).uint64.bind(t)],h=[(i=q).uint8.bind(i)],qe(this,null,n,{kind:"accessor",name:"virtualSizeHigh",static:!1,private:!1,access:{has:p=>"virtualSizeHigh"in p,get:p=>p.virtualSizeHigh,set:(p,m)=>{p.virtualSizeHigh=m}},metadata:b},s,o),qe(this,null,a,{kind:"accessor",name:"virtualSizeLow",static:!1,private:!1,access:{has:p=>"virtualSizeLow"in p,get:p=>p.virtualSizeLow,set:(p,m)=>{p.virtualSizeLow=m}},metadata:b},d,u),qe(this,null,h,{kind:"accessor",name:"tableDepth",static:!1,private:!1,access:{has:p=>"tableDepth"in p,get:p=>p.tableDepth,set:(p,m)=>{p.tableDepth=m}},metadata:b},f,E),b&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b})}#e=Ne(this,s,void 0);get virtualSizeHigh(){return this.#e}set virtualSizeHigh(b){this.#e=b}#t=(Ne(this,o),Ne(this,d,void 0));get virtualSizeLow(){return this.#t}set virtualSizeLow(b){this.#t=b}#i=(Ne(this,u),Ne(this,f,void 0));get tableDepth(){return this.#i}set tableDepth(b){this.#i=b}constructor(){super(...arguments),Ne(this,E)}}})();const No={[kt.CE]:Ic,[kt.PD]:zh,[kt.SP]:xc,[kt.ST]:kc,[kt.ER]:Oc,[kt.ES]:Lh,[kt.PX]:Dc,[kt.PN]:Ch,[kt.SL]:ks,[kt.NM]:Tc,[kt.CL]:fa,[kt.PL]:Mh,[kt.RE]:Nc,[kt.TF]:Rc,[kt.SF]:Ph,[kt.RR]:Ac};function zc(e,t,i){i-=4n;const r=[];for(;t<i;){const n=new zt(e,t),s=n.signature in No?new No[n.signature](e,t):n,o=s.length;if(!o)return r;if(t+=o,s instanceof kc)break;r.push(...s instanceof Ic?s.entries():[s])}return r}class Bh extends Map{record;dotEntry;constructor(t){super(),this.record=t;let i=t.lba,r=i+t.dataLength;if(!(t.fileFlags&Sn.Directory)){const s=t.suEntries.find(o=>o instanceof fa);if(!s)throw new ReferenceError("No CL entry");i=s.childDirectoryLba*2048,r=1/0}const n=new Uint8Array(t.buffer);for(;i<r;){if(!n[i]){i++;continue}const o=new En(t.buffer,i);o.rockRidgeOffset=t.rockRidgeOffset;const a=o.fileName;a!=="\0"&&a!==""&&(!o.hasRockRidge||!o.suEntries.filter(d=>d instanceof Nc).length)?this.set(a,o):r===1/0&&(r=i+o.dataLength),i+=o.length}this.dotEntry=new En(t.buffer,t.lba),this.dotEntry.rockRidgeOffset=t.rockRidgeOffset}}var nt=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0},gt=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0};let En=(()=>{var e,t,i,r,n,s,o,a,d,u,h,f;let E=[Ye.packed("DirectoryRecord")],g,b=[],p,m=Si,y=[],I,x=[],z=[],k,B=[],J=[],G,H=[],D=[],C,ne=[],L=[],W,X=[],_e=[],De,ae=[],de=[],O,j=[],Y=[],K,we=[],Ee=[],Le,Oe=[],ee=[],re,ce=[],le=[],be,M=[],$=[],ie,pe=[],ye=[],me,N=[],P=[],oe,te=[],Ue=[],et,Pe,it,w,c,l,S,T;return class extends m{static{p=this}static{const v=typeof Symbol=="function"&&Symbol.metadata?Object.create(m[Symbol.metadata]??null):void 0;I=[(e=q).uint8.bind(e)],k=[(t=q).uint8.bind(t)],G=[(i=q).uint32.bind(i)],C=[(r=q).uint32.bind(r)],W=[(n=q).uint32.bind(n)],De=[(s=q).uint32.bind(s)],O=[gi(vc)],K=[(o=q).uint8.bind(o)],Le=[(a=q).uint8.bind(a)],re=[(d=q).uint8.bind(d)],be=[(u=q).uint16.bind(u)],ie=[(h=q).uint16.bind(h)],me=[(f=q).uint8.bind(f)],oe=[q.char(0,{countedBy:"identifierLength"})],et=[Ii],Pe=[Ii],it=[Ii],w=[Ii],c=[Ii],l=[Ii],S=[Ii],T=[Ii],gt(this,null,I,{kind:"accessor",name:"length",static:!1,private:!1,access:{has:_=>"length"in _,get:_=>_.length,set:(_,U)=>{_.length=U}},metadata:v},x,z),gt(this,null,k,{kind:"accessor",name:"extendedAttributeRecordLength",static:!1,private:!1,access:{has:_=>"extendedAttributeRecordLength"in _,get:_=>_.extendedAttributeRecordLength,set:(_,U)=>{_.extendedAttributeRecordLength=U}},metadata:v},B,J),gt(this,null,G,{kind:"accessor",name:"_lba",static:!1,private:!1,access:{has:_=>"_lba"in _,get:_=>_._lba,set:(_,U)=>{_._lba=U}},metadata:v},H,D),gt(this,null,C,{kind:"accessor",name:"_lbaBE",static:!1,private:!1,access:{has:_=>"_lbaBE"in _,get:_=>_._lbaBE,set:(_,U)=>{_._lbaBE=U}},metadata:v},ne,L),gt(this,null,W,{kind:"accessor",name:"dataLength",static:!1,private:!1,access:{has:_=>"dataLength"in _,get:_=>_.dataLength,set:(_,U)=>{_.dataLength=U}},metadata:v},X,_e),gt(this,null,De,{kind:"accessor",name:"dataLengthBE",static:!1,private:!1,access:{has:_=>"dataLengthBE"in _,get:_=>_.dataLengthBE,set:(_,U)=>{_.dataLengthBE=U}},metadata:v},ae,de),gt(this,null,O,{kind:"accessor",name:"date",static:!1,private:!1,access:{has:_=>"date"in _,get:_=>_.date,set:(_,U)=>{_.date=U}},metadata:v},j,Y),gt(this,null,K,{kind:"accessor",name:"fileFlags",static:!1,private:!1,access:{has:_=>"fileFlags"in _,get:_=>_.fileFlags,set:(_,U)=>{_.fileFlags=U}},metadata:v},we,Ee),gt(this,null,Le,{kind:"accessor",name:"fileUnitSize",static:!1,private:!1,access:{has:_=>"fileUnitSize"in _,get:_=>_.fileUnitSize,set:(_,U)=>{_.fileUnitSize=U}},metadata:v},Oe,ee),gt(this,null,re,{kind:"accessor",name:"interleaveGapSize",static:!1,private:!1,access:{has:_=>"interleaveGapSize"in _,get:_=>_.interleaveGapSize,set:(_,U)=>{_.interleaveGapSize=U}},metadata:v},ce,le),gt(this,null,be,{kind:"accessor",name:"volumeSequenceNumber",static:!1,private:!1,access:{has:_=>"volumeSequenceNumber"in _,get:_=>_.volumeSequenceNumber,set:(_,U)=>{_.volumeSequenceNumber=U}},metadata:v},M,$),gt(this,null,ie,{kind:"accessor",name:"volumeSequenceNumberBE",static:!1,private:!1,access:{has:_=>"volumeSequenceNumberBE"in _,get:_=>_.volumeSequenceNumberBE,set:(_,U)=>{_.volumeSequenceNumberBE=U}},metadata:v},pe,ye),gt(this,null,me,{kind:"accessor",name:"identifierLength",static:!1,private:!1,access:{has:_=>"identifierLength"in _,get:_=>_.identifierLength,set:(_,U)=>{_.identifierLength=U}},metadata:v},N,P),gt(this,null,oe,{kind:"accessor",name:"_identifier",static:!1,private:!1,access:{has:_=>"_identifier"in _,get:_=>_._identifier,set:(_,U)=>{_._identifier=U}},metadata:v},te,Ue),gt(this,null,et,{kind:"getter",name:"fileName",static:!1,private:!1,access:{has:_=>"fileName"in _,get:_=>_.fileName},metadata:v},null,y),gt(this,null,Pe,{kind:"getter",name:"isSymlink",static:!1,private:!1,access:{has:_=>"isSymlink"in _,get:_=>_.isSymlink},metadata:v},null,y),gt(this,null,it,{kind:"getter",name:"symlinkPath",static:!1,private:!1,access:{has:_=>"symlinkPath"in _,get:_=>_.symlinkPath},metadata:v},null,y),gt(this,null,w,{kind:"getter",name:"file",static:!1,private:!1,access:{has:_=>"file"in _,get:_=>_.file},metadata:v},null,y),gt(this,null,c,{kind:"getter",name:"directory",static:!1,private:!1,access:{has:_=>"directory"in _,get:_=>_.directory},metadata:v},null,y),gt(this,null,l,{kind:"getter",name:"suEntries",static:!1,private:!1,access:{has:_=>"suEntries"in _,get:_=>_.suEntries},metadata:v},null,y),gt(this,null,S,{kind:"getter",name:"string",static:!1,private:!1,access:{has:_=>"string"in _,get:_=>_.string},metadata:v},null,y),gt(this,null,T,{kind:"getter",name:"_rockRidgeFilename",static:!1,private:!1,access:{has:_=>"_rockRidgeFilename"in _,get:_=>_._rockRidgeFilename},metadata:v},null,y),gt(null,g={value:p},E,{kind:"class",name:p.name,metadata:v},null,b),p=g.value,v&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v}),nt(p,b)}_kind=nt(this,y);rockRidgeOffset=-1;get hasRockRidge(){return this.rockRidgeOffset>-1}#e=nt(this,x,void 0);get length(){return this.#e}set length(v){this.#e=v}#t=(nt(this,z),nt(this,B,void 0));get extendedAttributeRecordLength(){return this.#t}set extendedAttributeRecordLength(v){this.#t=v}#i=(nt(this,J),nt(this,H,void 0));get _lba(){return this.#i}set _lba(v){this.#i=v}#r=(nt(this,D),nt(this,ne,void 0));get _lbaBE(){return this.#r}set _lbaBE(v){this.#r=v}get lba(){return this._lba*2048}set lba(v){if(!Number.isInteger(v/2048))throw V("EINVAL","Invalid LBA value");this._lba=v/2048}#n=(nt(this,L),nt(this,X,void 0));get dataLength(){return this.#n}set dataLength(v){this.#n=v}#s=(nt(this,_e),nt(this,ae,void 0));get dataLengthBE(){return this.#s}set dataLengthBE(v){this.#s=v}#a=(nt(this,de),nt(this,j,void 0));get date(){return this.#a}set date(v){this.#a=v}get recordingDate(){return this.date.date}#o=(nt(this,Y),nt(this,we,void 0));get fileFlags(){return this.#o}set fileFlags(v){this.#o=v}#l=(nt(this,Ee),nt(this,Oe,void 0));get fileUnitSize(){return this.#l}set fileUnitSize(v){this.#l=v}#c=(nt(this,ee),nt(this,ce,void 0));get interleaveGapSize(){return this.#c}set interleaveGapSize(v){this.#c=v}#u=(nt(this,le),nt(this,M,void 0));get volumeSequenceNumber(){return this.#u}set volumeSequenceNumber(v){this.#u=v}#f=(nt(this,$),nt(this,pe,void 0));get volumeSequenceNumberBE(){return this.#f}set volumeSequenceNumberBE(v){this.#f=v}#d=(nt(this,ye),nt(this,N,void 0));get identifierLength(){return this.#d}set identifierLength(v){this.#d=v}#h=(nt(this,P),nt(this,te,void 0));get _identifier(){return this.#h}set _identifier(v){this.#h=v}get identifier(){return this._decode(new Uint8Array(this.buffer,this.byteOffset+vl(this,"_identifier"),this.identifierLength))}get fileName(){if(this._rockRidgeFilename)return this._rockRidgeFilename;if(this.isDirectory())return this.identifier;const v=this.identifier.indexOf(";");return v===-1?this.identifier:this.identifier.at(-1)==="."?this.identifier.slice(0,v-1):this.identifier.slice(0,v)}isDirectory(){let v=!!(this.fileFlags&Sn.Directory);return!v&&this.hasRockRidge&&(v=this.suEntries.filter(_=>_ instanceof fa).length>0),v}get isSymlink(){return this.hasRockRidge&&this.suEntries.filter(v=>v instanceof ks).length>0}get symlinkPath(){let v="";for(const _ of this.suEntries){if(!(_ instanceof ks))continue;const U=_.componentRecords;for(const se of U){const Se=se.flags;Se&ur.CURRENT?v+="./":Se&ur.PARENT?v+="../":Se&ur.ROOT?v+="/":(v+=se.content(this._decode),Se&ur.CONTINUE||(v+="/"))}if(!_.continueFlag)break}return v.endsWith("/")?v.slice(0,-1):v}get file(){if(!this.buffer)throw pt(V("ENODATA"));if(this.isDirectory())throw pt(V("EISDIR"));return new Uint8Array(this.buffer,this.lba,this.dataLength)}get directory(){if(!this.buffer)throw pt(V("ENODATA"));if(!this.isDirectory())throw pt(V("ENOTDIR"));return new Bh(this)}get suEntries(){if(!this.buffer)throw pt(V("ENODATA"));let v=at(this);return v%2===1&&v++,v+=this.rockRidgeOffset,zc(this.buffer,v,BigInt(this.length))}get string(){if(!this.buffer)throw pt(V("ENODATA"));return this._decode(new Uint8Array(this.buffer,this.byteOffset))}_decoder=nt(this,Ue);get _decode(){return this._decoder||=new TextDecoder(this._kind=="Joliet"?"utf-16be":"utf-8"),v=>this._decoder.decode(v).toLowerCase()}get _rockRidgeFilename(){if(!this.hasRockRidge)return null;const v=this.suEntries.filter(U=>U instanceof Tc);if(!v.length||v[0].flags&(Br.CURRENT|Br.PARENT))return null;let _="";for(const U of v)if(_+=U.name(this._decode),!(U.flags&Br.CONTINUE))break;return _}},p})();var Ke=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},Ae=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0};const Uh="IEEE_P1282";var Yi;(function(e){e[e.BootRecord=0]="BootRecord",e[e.Primary=1]="Primary",e[e.Supplementary=2]="Supplementary",e[e.Partition=3]="Partition",e[e.SetTerminator=255]="SetTerminator"})(Yi||(Yi={}));let Fh=(()=>{var e,t,i;let r=[Ye.packed("VolumeDescriptor")],n,s=[],o,a=Si,d,u=[],h=[],f,E=[],g=[],b,p=[],m=[],y,I=[],x=[];return class extends a{static{o=this}static{const z=typeof Symbol=="function"&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;d=[(e=q).uint8.bind(e)],f=[q.char(5)],b=[(t=q).uint8.bind(t)],y=[(i=q).char.bind(i)],Ke(this,null,d,{kind:"accessor",name:"type",static:!1,private:!1,access:{has:k=>"type"in k,get:k=>k.type,set:(k,B)=>{k.type=B}},metadata:z},u,h),Ke(this,null,f,{kind:"accessor",name:"standardIdentifier",static:!1,private:!1,access:{has:k=>"standardIdentifier"in k,get:k=>k.standardIdentifier,set:(k,B)=>{k.standardIdentifier=B}},metadata:z},E,g),Ke(this,null,b,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:k=>"version"in k,get:k=>k.version,set:(k,B)=>{k.version=B}},metadata:z},p,m),Ke(this,null,y,{kind:"accessor",name:"__padding__7",static:!1,private:!1,access:{has:k=>"__padding__7"in k,get:k=>k.__padding__7,set:(k,B)=>{k.__padding__7=B}},metadata:z},I,x),Ke(null,n={value:o},r,{kind:"class",name:o.name,metadata:z},null,s),o=n.value,z&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:z}),Ae(o,s)}#e=Ae(this,u,void 0);get type(){return this.#e}set type(z){this.#e=z}#t=(Ae(this,h),Ae(this,E,""));get standardIdentifier(){return this.#t}set standardIdentifier(z){this.#t=z}#i=(Ae(this,g),Ae(this,p,void 0));get version(){return this.#i}set version(z){this.#i=z}#r=(Ae(this,m),Ae(this,I,void 0));get __padding__7(){return this.#r}set __padding__7(z){this.#r=z}constructor(){super(...arguments),Ae(this,x)}},o})(),Ro=(()=>{var e,t,i,r,n,s,o,a,d,u,h,f,E,g,b;let p=[Ye.packed("PrimaryVolumeDescriptor")],m,y=[],I,x=Fh,z,k=[],B=[],J,G=[],H=[],D,C=[],ne=[],L,W=[],X=[],_e,De=[],ae=[],de,O=[],j=[],Y,K=[],we=[],Ee,Le=[],Oe=[],ee,re=[],ce=[],le,be=[],M=[],$,ie=[],pe=[],ye,me=[],N=[],P,oe=[],te=[],Ue,et=[],Pe=[],it,w=[],c=[],l,S=[],T=[],v,_=[],U=[],se,Se=[],Re=[],he,ue=[],Fe=[],lt,Bt=[],ve=[],fe,Be=[],Dr=[],A,R=[],Ie=[],xe,Me=[],xt=[],Ut,Tr=[],hi=[],Nr,Qr=[],Rr=[],zr,sr=[],ar=[],or,Fi=[],_i=[],Zt,_a=[],ma=[],ya,ga=[],pa=[],ba,wa=[],Sa=[],Ea,va=[],Ia=[],xa,ka=[],Oa=[],Aa,Da=[],Ta=[];return class extends x{static{I=this}static{const ge=typeof Symbol=="function"&&Symbol.metadata?Object.create(x[Symbol.metadata]??null):void 0;z=[q.char(32)],J=[q.char(32)],D=[q.char(8)],L=[(e=q).uint32.bind(e)],_e=[(t=q).uint32.bind(t)],de=[q.char(32)],Y=[(i=q).uint16.bind(i)],Ee=[(r=q).uint16.bind(r)],ee=[(n=q).uint16.bind(n)],le=[(s=q).uint16.bind(s)],$=[(o=q).uint16.bind(o)],ye=[(a=q).uint16.bind(a)],P=[(d=q).uint32.bind(d)],Ue=[(u=q).uint32.bind(u)],it=[(h=q).uint32.bind(h)],l=[(f=q).uint32.bind(f)],v=[(E=q).uint32.bind(E)],se=[(g=q).uint32.bind(g)],he=[gi(En)],lt=[q.char(128)],fe=[q.char(128)],A=[q.char(128)],xe=[q.char(128)],Ut=[q.char(38)],Nr=[q.char(36)],zr=[q.char(37)],or=[gi(xi)],Zt=[gi(xi)],ya=[gi(xi)],ba=[gi(xi)],Ea=[(b=q).uint8.bind(b)],xa=[q.char(512)],Aa=[q.char(653)],Ke(this,null,z,{kind:"accessor",name:"_systemIdentifier",static:!1,private:!1,access:{has:F=>"_systemIdentifier"in F,get:F=>F._systemIdentifier,set:(F,Te)=>{F._systemIdentifier=Te}},metadata:ge},k,B),Ke(this,null,J,{kind:"accessor",name:"_volumeIdentifier",static:!1,private:!1,access:{has:F=>"_volumeIdentifier"in F,get:F=>F._volumeIdentifier,set:(F,Te)=>{F._volumeIdentifier=Te}},metadata:ge},G,H),Ke(this,null,D,{kind:"accessor",name:"__padding__72",static:!1,private:!1,access:{has:F=>"__padding__72"in F,get:F=>F.__padding__72,set:(F,Te)=>{F.__padding__72=Te}},metadata:ge},C,ne),Ke(this,null,L,{kind:"accessor",name:"volumeSpaceSize",static:!1,private:!1,access:{has:F=>"volumeSpaceSize"in F,get:F=>F.volumeSpaceSize,set:(F,Te)=>{F.volumeSpaceSize=Te}},metadata:ge},W,X),Ke(this,null,_e,{kind:"accessor",name:"_volumeSpaceSizeBE",static:!1,private:!1,access:{has:F=>"_volumeSpaceSizeBE"in F,get:F=>F._volumeSpaceSizeBE,set:(F,Te)=>{F._volumeSpaceSizeBE=Te}},metadata:ge},De,ae),Ke(this,null,de,{kind:"accessor",name:"escapeSequence",static:!1,private:!1,access:{has:F=>"escapeSequence"in F,get:F=>F.escapeSequence,set:(F,Te)=>{F.escapeSequence=Te}},metadata:ge},O,j),Ke(this,null,Y,{kind:"accessor",name:"volumeSetSize",static:!1,private:!1,access:{has:F=>"volumeSetSize"in F,get:F=>F.volumeSetSize,set:(F,Te)=>{F.volumeSetSize=Te}},metadata:ge},K,we),Ke(this,null,Ee,{kind:"accessor",name:"_volumeSetSizeBE",static:!1,private:!1,access:{has:F=>"_volumeSetSizeBE"in F,get:F=>F._volumeSetSizeBE,set:(F,Te)=>{F._volumeSetSizeBE=Te}},metadata:ge},Le,Oe),Ke(this,null,ee,{kind:"accessor",name:"volumeSequenceNumber",static:!1,private:!1,access:{has:F=>"volumeSequenceNumber"in F,get:F=>F.volumeSequenceNumber,set:(F,Te)=>{F.volumeSequenceNumber=Te}},metadata:ge},re,ce),Ke(this,null,le,{kind:"accessor",name:"_volumeSequenceNumberBE",static:!1,private:!1,access:{has:F=>"_volumeSequenceNumberBE"in F,get:F=>F._volumeSequenceNumberBE,set:(F,Te)=>{F._volumeSequenceNumberBE=Te}},metadata:ge},be,M),Ke(this,null,$,{kind:"accessor",name:"logicalBlockSize",static:!1,private:!1,access:{has:F=>"logicalBlockSize"in F,get:F=>F.logicalBlockSize,set:(F,Te)=>{F.logicalBlockSize=Te}},metadata:ge},ie,pe),Ke(this,null,ye,{kind:"accessor",name:"_logicalBlockSizeBE",static:!1,private:!1,access:{has:F=>"_logicalBlockSizeBE"in F,get:F=>F._logicalBlockSizeBE,set:(F,Te)=>{F._logicalBlockSizeBE=Te}},metadata:ge},me,N),Ke(this,null,P,{kind:"accessor",name:"pathTableSize",static:!1,private:!1,access:{has:F=>"pathTableSize"in F,get:F=>F.pathTableSize,set:(F,Te)=>{F.pathTableSize=Te}},metadata:ge},oe,te),Ke(this,null,Ue,{kind:"accessor",name:"_pathTableSizeBE",static:!1,private:!1,access:{has:F=>"_pathTableSizeBE"in F,get:F=>F._pathTableSizeBE,set:(F,Te)=>{F._pathTableSizeBE=Te}},metadata:ge},et,Pe),Ke(this,null,it,{kind:"accessor",name:"locationOfTypeLPathTable",static:!1,private:!1,access:{has:F=>"locationOfTypeLPathTable"in F,get:F=>F.locationOfTypeLPathTable,set:(F,Te)=>{F.locationOfTypeLPathTable=Te}},metadata:ge},w,c),Ke(this,null,l,{kind:"accessor",name:"locationOfOptionalTypeLPathTable",static:!1,private:!1,access:{has:F=>"locationOfOptionalTypeLPathTable"in F,get:F=>F.locationOfOptionalTypeLPathTable,set:(F,Te)=>{F.locationOfOptionalTypeLPathTable=Te}},metadata:ge},S,T),Ke(this,null,v,{kind:"accessor",name:"_locationOfTypeMPathTable",static:!1,private:!1,access:{has:F=>"_locationOfTypeMPathTable"in F,get:F=>F._locationOfTypeMPathTable,set:(F,Te)=>{F._locationOfTypeMPathTable=Te}},metadata:ge},_,U),Ke(this,null,se,{kind:"accessor",name:"_locationOfOptionalTypeMPathTable",static:!1,private:!1,access:{has:F=>"_locationOfOptionalTypeMPathTable"in F,get:F=>F._locationOfOptionalTypeMPathTable,set:(F,Te)=>{F._locationOfOptionalTypeMPathTable=Te}},metadata:ge},Se,Re),Ke(this,null,he,{kind:"accessor",name:"_root",static:!1,private:!1,access:{has:F=>"_root"in F,get:F=>F._root,set:(F,Te)=>{F._root=Te}},metadata:ge},ue,Fe),Ke(this,null,lt,{kind:"accessor",name:"_volumeSetIdentifier",static:!1,private:!1,access:{has:F=>"_volumeSetIdentifier"in F,get:F=>F._volumeSetIdentifier,set:(F,Te)=>{F._volumeSetIdentifier=Te}},metadata:ge},Bt,ve),Ke(this,null,fe,{kind:"accessor",name:"_publisherIdentifier",static:!1,private:!1,access:{has:F=>"_publisherIdentifier"in F,get:F=>F._publisherIdentifier,set:(F,Te)=>{F._publisherIdentifier=Te}},metadata:ge},Be,Dr),Ke(this,null,A,{kind:"accessor",name:"_dataPreparerIdentifier",static:!1,private:!1,access:{has:F=>"_dataPreparerIdentifier"in F,get:F=>F._dataPreparerIdentifier,set:(F,Te)=>{F._dataPreparerIdentifier=Te}},metadata:ge},R,Ie),Ke(this,null,xe,{kind:"accessor",name:"_applicationIdentifier",static:!1,private:!1,access:{has:F=>"_applicationIdentifier"in F,get:F=>F._applicationIdentifier,set:(F,Te)=>{F._applicationIdentifier=Te}},metadata:ge},Me,xt),Ke(this,null,Ut,{kind:"accessor",name:"_copyrightFileIdentifier",static:!1,private:!1,access:{has:F=>"_copyrightFileIdentifier"in F,get:F=>F._copyrightFileIdentifier,set:(F,Te)=>{F._copyrightFileIdentifier=Te}},metadata:ge},Tr,hi),Ke(this,null,Nr,{kind:"accessor",name:"_abstractFileIdentifier",static:!1,private:!1,access:{has:F=>"_abstractFileIdentifier"in F,get:F=>F._abstractFileIdentifier,set:(F,Te)=>{F._abstractFileIdentifier=Te}},metadata:ge},Qr,Rr),Ke(this,null,zr,{kind:"accessor",name:"_bibliographicFileIdentifier",static:!1,private:!1,access:{has:F=>"_bibliographicFileIdentifier"in F,get:F=>F._bibliographicFileIdentifier,set:(F,Te)=>{F._bibliographicFileIdentifier=Te}},metadata:ge},sr,ar),Ke(this,null,or,{kind:"accessor",name:"volumeCreationDate",static:!1,private:!1,access:{has:F=>"volumeCreationDate"in F,get:F=>F.volumeCreationDate,set:(F,Te)=>{F.volumeCreationDate=Te}},metadata:ge},Fi,_i),Ke(this,null,Zt,{kind:"accessor",name:"volumeModificationDate",static:!1,private:!1,access:{has:F=>"volumeModificationDate"in F,get:F=>F.volumeModificationDate,set:(F,Te)=>{F.volumeModificationDate=Te}},metadata:ge},_a,ma),Ke(this,null,ya,{kind:"accessor",name:"volumeExpirationDate",static:!1,private:!1,access:{has:F=>"volumeExpirationDate"in F,get:F=>F.volumeExpirationDate,set:(F,Te)=>{F.volumeExpirationDate=Te}},metadata:ge},ga,pa),Ke(this,null,ba,{kind:"accessor",name:"volumeEffectiveDate",static:!1,private:!1,access:{has:F=>"volumeEffectiveDate"in F,get:F=>F.volumeEffectiveDate,set:(F,Te)=>{F.volumeEffectiveDate=Te}},metadata:ge},wa,Sa),Ke(this,null,Ea,{kind:"accessor",name:"fileStructureVersion",static:!1,private:!1,access:{has:F=>"fileStructureVersion"in F,get:F=>F.fileStructureVersion,set:(F,Te)=>{F.fileStructureVersion=Te}},metadata:ge},va,Ia),Ke(this,null,xa,{kind:"accessor",name:"applicationUsed",static:!1,private:!1,access:{has:F=>"applicationUsed"in F,get:F=>F.applicationUsed,set:(F,Te)=>{F.applicationUsed=Te}},metadata:ge},ka,Oa),Ke(this,null,Aa,{kind:"accessor",name:"reserved",static:!1,private:!1,access:{has:F=>"reserved"in F,get:F=>F.reserved,set:(F,Te)=>{F.reserved=Te}},metadata:ge},Da,Ta),Ke(null,m={value:I},p,{kind:"class",name:I.name,metadata:ge},null,y),I=m.value,ge&&Object.defineProperty(I,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ge}),Ae(I,y)}name;constructor(ge=Xe(V("EINVAL","VolumeDescriptor.name is required")),...F){super(...F),Ae(this,Ta),this.name=ge,this._root=new En(this.buffer,this.byteOffset+156),this._root._kind=this.name;const Te=this._root.directory.dotEntry;if(Te.suEntries.length&&Te.suEntries[0]instanceof xc&&Te.suEntries[0].checkMagic()){for(const Pn of Te.suEntries.slice(1))if(Pn instanceof Ac||Pn instanceof Oc&&Pn.extensionIdentifier===Uh){this._root.rockRidgeOffset=Te.suEntries[0].skip;break}}this._root.rockRidgeOffset>-1&&(Te._dir=void 0)}_decoder;_decode(ge){return this._decoder||=new TextDecoder(this.name=="Joilet"?"utf-16be":"utf-8"),this._decoder.decode(ge).toLowerCase()}#e=Ae(this,k,new Uint8Array(32));get _systemIdentifier(){return this.#e}set _systemIdentifier(ge){this.#e=ge}get systemIdentifier(){return this._decode(this._systemIdentifier)}#t=(Ae(this,B),Ae(this,G,new Uint8Array(32)));get _volumeIdentifier(){return this.#t}set _volumeIdentifier(ge){this.#t=ge}get volumeIdentifier(){return this._decode(this._volumeIdentifier)}#i=(Ae(this,H),Ae(this,C,new Uint8Array(8)));get __padding__72(){return this.#i}set __padding__72(ge){this.#i=ge}#r=(Ae(this,ne),Ae(this,W,void 0));get volumeSpaceSize(){return this.#r}set volumeSpaceSize(ge){this.#r=ge}#n=(Ae(this,X),Ae(this,De,void 0));get _volumeSpaceSizeBE(){return this.#n}set _volumeSpaceSizeBE(ge){this.#n=ge}#s=(Ae(this,ae),Ae(this,O,new Uint8Array(32)));get escapeSequence(){return this.#s}set escapeSequence(ge){this.#s=ge}#a=(Ae(this,j),Ae(this,K,void 0));get volumeSetSize(){return this.#a}set volumeSetSize(ge){this.#a=ge}#o=(Ae(this,we),Ae(this,Le,void 0));get _volumeSetSizeBE(){return this.#o}set _volumeSetSizeBE(ge){this.#o=ge}#l=(Ae(this,Oe),Ae(this,re,void 0));get volumeSequenceNumber(){return this.#l}set volumeSequenceNumber(ge){this.#l=ge}#c=(Ae(this,ce),Ae(this,be,void 0));get _volumeSequenceNumberBE(){return this.#c}set _volumeSequenceNumberBE(ge){this.#c=ge}#u=(Ae(this,M),Ae(this,ie,void 0));get logicalBlockSize(){return this.#u}set logicalBlockSize(ge){this.#u=ge}#f=(Ae(this,pe),Ae(this,me,void 0));get _logicalBlockSizeBE(){return this.#f}set _logicalBlockSizeBE(ge){this.#f=ge}#d=(Ae(this,N),Ae(this,oe,void 0));get pathTableSize(){return this.#d}set pathTableSize(ge){this.#d=ge}#h=(Ae(this,te),Ae(this,et,void 0));get _pathTableSizeBE(){return this.#h}set _pathTableSizeBE(ge){this.#h=ge}#_=(Ae(this,Pe),Ae(this,w,void 0));get locationOfTypeLPathTable(){return this.#_}set locationOfTypeLPathTable(ge){this.#_=ge}#m=(Ae(this,c),Ae(this,S,void 0));get locationOfOptionalTypeLPathTable(){return this.#m}set locationOfOptionalTypeLPathTable(ge){this.#m=ge}#y=(Ae(this,T),Ae(this,_,void 0));get _locationOfTypeMPathTable(){return this.#y}set _locationOfTypeMPathTable(ge){this.#y=ge}get locationOfTypeMPathTable(){return new DataView(this.buffer).getUint32(148)}#g=(Ae(this,U),Ae(this,Se,void 0));get _locationOfOptionalTypeMPathTable(){return this.#g}set _locationOfOptionalTypeMPathTable(ge){this.#g=ge}locationOfOptionalTypeMPathTable(){return new DataView(this.buffer).getUint32(152)}#p=(Ae(this,Re),Ae(this,ue,void 0));get _root(){return this.#p}set _root(ge){this.#p=ge}get root(){return this._root&&this._root.buffer?this._root:this._root}#b=(Ae(this,Fe),Ae(this,Bt,new Uint8Array(128)));get _volumeSetIdentifier(){return this.#b}set _volumeSetIdentifier(ge){this.#b=ge}get volumeSetIdentifier(){return this._decode(this._volumeIdentifier)}#w=(Ae(this,ve),Ae(this,Be,new Uint8Array(128)));get _publisherIdentifier(){return this.#w}set _publisherIdentifier(ge){this.#w=ge}get publisherIdentifier(){return this._decode(this._publisherIdentifier)}#S=(Ae(this,Dr),Ae(this,R,new Uint8Array(128)));get _dataPreparerIdentifier(){return this.#S}set _dataPreparerIdentifier(ge){this.#S=ge}get dataPreparerIdentifier(){return this._decode(this._dataPreparerIdentifier)}#E=(Ae(this,Ie),Ae(this,Me,new Uint8Array(128)));get _applicationIdentifier(){return this.#E}set _applicationIdentifier(ge){this.#E=ge}get applicationIdentifier(){return this._decode(this._applicationIdentifier)}#v=(Ae(this,xt),Ae(this,Tr,new Uint8Array(38)));get _copyrightFileIdentifier(){return this.#v}set _copyrightFileIdentifier(ge){this.#v=ge}get copyrightFileIdentifier(){return this._decode(this._copyrightFileIdentifier)}#I=(Ae(this,hi),Ae(this,Qr,new Uint8Array(36)));get _abstractFileIdentifier(){return this.#I}set _abstractFileIdentifier(ge){this.#I=ge}get abstractFileIdentifier(){return this._decode(this._abstractFileIdentifier)}#x=(Ae(this,Rr),Ae(this,sr,new Uint8Array(37)));get _bibliographicFileIdentifier(){return this.#x}set _bibliographicFileIdentifier(ge){this.#x=ge}get bibliographicFileIdentifier(){return this._decode(this._bibliographicFileIdentifier)}#k=(Ae(this,ar),Ae(this,Fi,new xi));get volumeCreationDate(){return this.#k}set volumeCreationDate(ge){this.#k=ge}#O=(Ae(this,_i),Ae(this,_a,new xi));get volumeModificationDate(){return this.#O}set volumeModificationDate(ge){this.#O=ge}#A=(Ae(this,ma),Ae(this,ga,new xi));get volumeExpirationDate(){return this.#A}set volumeExpirationDate(ge){this.#A=ge}#D=(Ae(this,pa),Ae(this,wa,new xi));get volumeEffectiveDate(){return this.#D}set volumeEffectiveDate(ge){this.#D=ge}#T=(Ae(this,Sa),Ae(this,va,void 0));get fileStructureVersion(){return this.#T}set fileStructureVersion(ge){this.#T=ge}#N=(Ae(this,Ia),Ae(this,ka,new Uint8Array(512)));get applicationUsed(){return this.#N}set applicationUsed(ge){this.#N=ge}#R=(Ae(this,Oa),Ae(this,Da,new Uint8Array(653)));get reserved(){return this.#R}set reserved(ge){this.#R=ge}toString(){return`${this.name} CD-ROM
				System id: ${this.systemIdentifier}
				Volume id: ${this.volumeIdentifier}
				Volume set id: ${this.volumeSetIdentifier}
				Publisher id: ${this.publisherIdentifier}
				Data preparer id: ${this.dataPreparerIdentifier}
				Application id: ${this.applicationIdentifier}
				Copyright file id: ${this.copyrightFileIdentifier}
				Abstract file id: ${this.abstractFileIdentifier}
				Bibliographic file id: ${this.bibliographicFileIdentifier}
				Volume set size: ${this.volumeSetSize}
				Volume sequence number: ${this.volumeSequenceNumber}
				Logical block size: ${this.logicalBlockSize}
				Volume size: ${this.volumeSpaceSize}`.replaceAll("	","")}},I})();class P_ extends wc(Sc(zi)){data;pvd;constructor(t){super(543781743,"iso9660"),this.data=t;let i;for(let r=16*2048,n=!1;r<t.length&&!n;r+=2048)switch(t[r]){case Yi.Primary:i?.type==Yi.Supplementary?Ls("iso9660: Skipping primary volume descriptor at 0x"+r.toString(16)):(oi("iso9660: Found primary volume descriptor at 0x"+r.toString(16)),i=new Ro("ISO9660",t.buffer,r));break;case Yi.Supplementary:{const s=new Ro("Joliet",t.buffer,r);if(s.type!==Yi.Supplementary)throw Qo(V("EIO","iso9660: Supplementary volume descriptor signature mismatch (something is very wrong!)"));if(s.escapeSequence[0]!==37||s.escapeSequence[1]!==47||![64,67,69].includes(s.escapeSequence[2]))throw V("EIO","Unrecognized escape sequence for supplementary volume descriptor: "+zs(s.escapeSequence));oi("iso9660: Found supplementary volume descriptor at 0x"+r.toString(16)),i=s;break}case Yi.SetTerminator:oi("iso9660: Found set terminator at 0x"+r.toString(16)),n=!0;break}if(!i)throw V("EIO","iso9660: unable to find a suitable volume descriptor");In("iso9660: Using volume descriptor at 0x"+i.byteOffset.toString(16)),this.pvd=i}usage(){return{totalSpace:this.data.byteLength,freeSpace:0}}statSync(t){const i=this._getDirectoryRecord(t);if(!i)throw V("ENOENT");return this._get(t,i)}readdirSync(t){const i=this._getDirectoryRecord(t);if(!i)throw V("ENOENT");if(i.isDirectory())return Array.from(i.directory.keys());throw V("ENOTDIR")}readSync(t,i,r,n){const s=this._getDirectoryRecord(t);if(!s)throw V("ENOENT");if(s.isDirectory())throw V("EISDIR");i.set(s.file.subarray(r,n))}_getDirectoryRecord(t){if(t==="/")return this.pvd.root;let i=this.pvd.root;for(const r of t.split("/").slice(1))if(!i.isDirectory()||(i=i.directory.get(r),!i))return;return i}_get(t,i){if(i.isSymlink){const d=Ht(t,i.symlinkPath),u=this._getDirectoryRecord(d);return u?this._get(d,u):void 0}let r=365;const n=i.recordingDate.getTime();let s=n,o=n,a=n;if(i.hasRockRidge)for(const d of i.suEntries){if(d instanceof Dc){r=Number(d.mode);continue}if(!(d instanceof Rc))continue;const u=d.flags;u&ti.ACCESS&&(s=d.access.getTime()),u&ti.MODIFY&&(o=d.modify.getTime()),u&ti.CREATION&&(a=d.creation.getTime())}return r&=365,new tt({mode:r|(i.isDirectory()?rt:qt),size:i.dataLength,atimeMs:s,mtimeMs:o,ctimeMs:a})}}var ii=Uint8Array,fr=Uint16Array,jh=Int32Array,Lc=new ii([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Cc=new ii([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$h=new ii([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mc=function(e,t){for(var i=new fr(31),r=0;r<31;++r)i[r]=t+=1<<e[r-1];for(var n=new jh(i[30]),r=1;r<30;++r)for(var s=i[r];s<i[r+1];++s)n[s]=s-i[r]<<5|r;return{b:i,r:n}},Pc=Mc(Lc,2),Bc=Pc.b,Wh=Pc.r;Bc[28]=258,Wh[258]=28;var Vh=Mc(Cc,0),qh=Vh.b,Os=new fr(32768);for(var mt=0;mt<32768;++mt){var ji=(mt&43690)>>1|(mt&21845)<<1;ji=(ji&52428)>>2|(ji&13107)<<2,ji=(ji&61680)>>4|(ji&3855)<<4,Os[mt]=((ji&65280)>>8|(ji&255)<<8)>>1}var Ur=(function(e,t,i){for(var r=e.length,n=0,s=new fr(t);n<r;++n)e[n]&&++s[e[n]-1];var o=new fr(t);for(n=1;n<t;++n)o[n]=o[n-1]+s[n-1]<<1;var a;if(i){a=new fr(1<<t);var d=15-t;for(n=0;n<r;++n)if(e[n])for(var u=n<<4|e[n],h=t-e[n],f=o[e[n]-1]++<<h,E=f|(1<<h)-1;f<=E;++f)a[Os[f]>>d]=u}else for(a=new fr(r),n=0;n<r;++n)e[n]&&(a[n]=Os[o[e[n]-1]++]>>15-e[n]);return a}),Zr=new ii(288);for(var mt=0;mt<144;++mt)Zr[mt]=8;for(var mt=144;mt<256;++mt)Zr[mt]=9;for(var mt=256;mt<280;++mt)Zr[mt]=7;for(var mt=280;mt<288;++mt)Zr[mt]=8;var Uc=new ii(32);for(var mt=0;mt<32;++mt)Uc[mt]=5;var Gh=Ur(Zr,9,1),Kh=Ur(Uc,5,1),hs=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},si=function(e,t,i){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&i},_s=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},Hh=function(e){return(e+7)/8|0},Yh=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new ii(e.subarray(t,i))},Xh=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ki=function(e,t,i){var r=new Error(t||Xh[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,ki),!i)throw r;return r},Jh=function(e,t,i,r){var n=e.length,s=0;if(!n||t.f&&!t.l)return i||new ii(0);var o=!i,a=o||t.i!=2,d=t.i;o&&(i=new ii(n*3));var u=function(le){var be=i.length;if(le>be){var M=new ii(Math.max(be*2,le));M.set(i),i=M}},h=t.f||0,f=t.p||0,E=t.b||0,g=t.l,b=t.d,p=t.m,m=t.n,y=n*8;do{if(!g){h=si(e,f,1);var I=si(e,f+1,3);if(f+=3,I)if(I==1)g=Gh,b=Kh,p=9,m=5;else if(I==2){var B=si(e,f,31)+257,J=si(e,f+10,15)+4,G=B+si(e,f+5,31)+1;f+=14;for(var H=new ii(G),D=new ii(19),C=0;C<J;++C)D[$h[C]]=si(e,f+C*3,7);f+=J*3;for(var ne=hs(D),L=(1<<ne)-1,W=Ur(D,ne,1),C=0;C<G;){var X=W[si(e,f,L)];f+=X&15;var x=X>>4;if(x<16)H[C++]=x;else{var _e=0,De=0;for(x==16?(De=3+si(e,f,3),f+=2,_e=H[C-1]):x==17?(De=3+si(e,f,7),f+=3):x==18&&(De=11+si(e,f,127),f+=7);De--;)H[C++]=_e}}var ae=H.subarray(0,B),de=H.subarray(B);p=hs(ae),m=hs(de),g=Ur(ae,p,1),b=Ur(de,m,1)}else ki(1);else{var x=Hh(f)+4,z=e[x-4]|e[x-3]<<8,k=x+z;if(k>n){d&&ki(0);break}a&&u(E+z),i.set(e.subarray(x,k),E),t.b=E+=z,t.p=f=k*8,t.f=h;continue}if(f>y){d&&ki(0);break}}a&&u(E+131072);for(var O=(1<<p)-1,j=(1<<m)-1,Y=f;;Y=f){var _e=g[_s(e,f)&O],K=_e>>4;if(f+=_e&15,f>y){d&&ki(0);break}if(_e||ki(2),K<256)i[E++]=K;else if(K==256){Y=f,g=null;break}else{var we=K-254;if(K>264){var C=K-257,Ee=Lc[C];we=si(e,f,(1<<Ee)-1)+Bc[C],f+=Ee}var Le=b[_s(e,f)&j],Oe=Le>>4;Le||ki(3),f+=Le&15;var de=qh[Oe];if(Oe>3){var Ee=Cc[Oe];de+=_s(e,f)&(1<<Ee)-1,f+=Ee}if(f>y){d&&ki(0);break}a&&u(E+131072);var ee=E+we;if(E<de){var re=s-de,ce=Math.min(de,ee);for(re+E<0&&ki(3);E<ce;++E)i[E]=r[re+E]}for(;E<ee;++E)i[E]=i[E-de]}}t.l=g,t.p=Y,t.b=E,t.f=h,g&&(h=1,t.m=p,t.d=b,t.n=m)}while(!h);return E!=i.length&&o?Yh(i,0,E):i.subarray(0,E)},Zh=new ii(0);function Qh(e,t){return Jh(e,{i:2},t,t)}var e_=typeof TextDecoder<"u"&&new TextDecoder,t_=0;try{e_.decode(Zh,{stream:!0}),t_=1}catch{}var pr;(function(e){e[e.STORED=0]="STORED",e[e.SHRUNK=1]="SHRUNK",e[e.REDUCED_1=2]="REDUCED_1",e[e.REDUCED_2=3]="REDUCED_2",e[e.REDUCED_3=4]="REDUCED_3",e[e.REDUCED_4=5]="REDUCED_4",e[e.IMPLODE=6]="IMPLODE",e[e.DEFLATE=8]="DEFLATE",e[e.DEFLATE64=9]="DEFLATE64",e[e.TERSE_OLD=10]="TERSE_OLD",e[e.BZIP2=12]="BZIP2",e[e.LZMA=14]="LZMA",e[e.TERSE_NEW=18]="TERSE_NEW",e[e.LZ77=19]="LZ77",e[e.WAVPACK=97]="WAVPACK",e[e.PPMD=98]="PPMD"})(pr||(pr={}));const i_={[pr.DEFLATE](e){return Qh(e)},[pr.STORED](e,t,i){return e.subarray(0,t)}};function Fc(e){return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)*2)}const r_=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "];async function vn(e,t,i,r){if(r===0)return"";const n=await e.get(i,r);return t?bi(n):[...n].map(s=>s>127?r_[s-128]:String.fromCharCode(s)).join("")}var Ve=function(e,t,i,r,n,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,d=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,E=!1,g=i.length-1;g>=0;g--){var b={};for(var p in r)b[p]=p==="access"?{}:r[p];for(var p in r.access)b.access[p]=r.access[p];b.addInitializer=function(y){if(E)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,i[g])(a==="accessor"?{get:h.get,set:h.set}:h[d],b);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(h.get=f),(f=o(m.set))&&(h.set=f),(f=o(m.init))&&n.unshift(f)}else(f=o(m))&&(a==="field"?n.unshift(f):h[d]=f)}u&&Object.defineProperty(u,r.name,h),E=!0},ke=function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0},zo;(function(e){e[e.MSDOS=0]="MSDOS",e[e.AMIGA=1]="AMIGA",e[e.OPENVMS=2]="OPENVMS",e[e.UNIX=3]="UNIX",e[e.VM_CMS=4]="VM_CMS",e[e.ATARI_ST=5]="ATARI_ST",e[e.OS2_HPFS=6]="OS2_HPFS",e[e.MAC=7]="MAC",e[e.Z_SYSTEM=8]="Z_SYSTEM",e[e.CP_M=9]="CP_M",e[e.NTFS=10]="NTFS",e[e.MVS=11]="MVS",e[e.VSE=12]="VSE",e[e.ACORN_RISC=13]="ACORN_RISC",e[e.VFAT=14]="VFAT",e[e.ALT_MVS=15]="ALT_MVS",e[e.BEOS=16]="BEOS",e[e.TANDEM=17]="TANDEM",e[e.OS_400=18]="OS_400",e[e.OSX=19]="OSX"})(zo||(zo={}));let Lo=(()=>{var e,t,i,r,n,s,o,a,d,u;let h=[Ye.packed("LocalFileHeader")],f,E=[],g,b=wi.typed(Uint8Array),p,m=[],y=[],I,x=[],z=[],k,B=[],J=[],G,H=[],D=[],C,ne=[],L=[],W,X=[],_e=[],De,ae=[],de=[],O,j=[],Y=[],K,we=[],Ee=[],Le,Oe=[],ee=[];var re=class extends b{static{g=this}static{const ce=typeof Symbol=="function"&&Symbol.metadata?Object.create(b[Symbol.metadata]??null):void 0;p=[(e=q).uint32.bind(e)],I=[(t=q).uint16.bind(t)],k=[(i=q).uint16.bind(i)],G=[(r=q).uint16.bind(r)],C=[(n=q).uint32.bind(n)],W=[(s=q).uint32.bind(s)],De=[(o=q).uint32.bind(o)],O=[(a=q).uint32.bind(a)],K=[(d=q).uint16.bind(d)],Le=[(u=q).uint16.bind(u)],Ve(this,null,p,{kind:"accessor",name:"signature",static:!1,private:!1,access:{has:le=>"signature"in le,get:le=>le.signature,set:(le,be)=>{le.signature=be}},metadata:ce},m,y),Ve(this,null,I,{kind:"accessor",name:"versionNeeded",static:!1,private:!1,access:{has:le=>"versionNeeded"in le,get:le=>le.versionNeeded,set:(le,be)=>{le.versionNeeded=be}},metadata:ce},x,z),Ve(this,null,k,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:le=>"flags"in le,get:le=>le.flags,set:(le,be)=>{le.flags=be}},metadata:ce},B,J),Ve(this,null,G,{kind:"accessor",name:"compressionMethod",static:!1,private:!1,access:{has:le=>"compressionMethod"in le,get:le=>le.compressionMethod,set:(le,be)=>{le.compressionMethod=be}},metadata:ce},H,D),Ve(this,null,C,{kind:"accessor",name:"datetime",static:!1,private:!1,access:{has:le=>"datetime"in le,get:le=>le.datetime,set:(le,be)=>{le.datetime=be}},metadata:ce},ne,L),Ve(this,null,W,{kind:"accessor",name:"crc32",static:!1,private:!1,access:{has:le=>"crc32"in le,get:le=>le.crc32,set:(le,be)=>{le.crc32=be}},metadata:ce},X,_e),Ve(this,null,De,{kind:"accessor",name:"compressedSize",static:!1,private:!1,access:{has:le=>"compressedSize"in le,get:le=>le.compressedSize,set:(le,be)=>{le.compressedSize=be}},metadata:ce},ae,de),Ve(this,null,O,{kind:"accessor",name:"uncompressedSize",static:!1,private:!1,access:{has:le=>"uncompressedSize"in le,get:le=>le.uncompressedSize,set:(le,be)=>{le.uncompressedSize=be}},metadata:ce},j,Y),Ve(this,null,K,{kind:"accessor",name:"nameLength",static:!1,private:!1,access:{has:le=>"nameLength"in le,get:le=>le.nameLength,set:(le,be)=>{le.nameLength=be}},metadata:ce},we,Ee),Ve(this,null,Le,{kind:"accessor",name:"extraLength",static:!1,private:!1,access:{has:le=>"extraLength"in le,get:le=>le.extraLength,set:(le,be)=>{le.extraLength=be}},metadata:ce},Oe,ee),Ve(null,f={value:g},h,{kind:"class",name:g.name,metadata:ce},null,E),re=g=f.value,ce&&Object.defineProperty(g,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ce}),ke(g,E)}_source;#e=ke(this,m,void 0);get signature(){return this.#e}set signature(ce){this.#e=ce}check(){if(this.signature!==67324752)throw V("EINVAL","Invalid Zip file: Local file header has invalid signature: "+this.signature)}#t=(ke(this,y),ke(this,x,void 0));get versionNeeded(){return this.#t}set versionNeeded(ce){this.#t=ce}#i=(ke(this,z),ke(this,B,void 0));get flags(){return this.#i}set flags(ce){this.#i=ce}#r=(ke(this,J),ke(this,H,void 0));get compressionMethod(){return this.#r}set compressionMethod(ce){this.#r=ce}#n=(ke(this,D),ke(this,ne,void 0));get datetime(){return this.#n}set datetime(ce){this.#n=ce}get lastModified(){return Fc(this.datetime)}#s=(ke(this,L),ke(this,X,void 0));get crc32(){return this.#s}set crc32(ce){this.#s=ce}#a=(ke(this,_e),ke(this,ae,void 0));get compressedSize(){return this.#a}set compressedSize(ce){this.#a=ce}#o=(ke(this,de),ke(this,j,void 0));get uncompressedSize(){return this.#o}set uncompressedSize(ce){this.#o=ce}#l=(ke(this,Y),ke(this,we,void 0));get nameLength(){return this.#l}set nameLength(ce){this.#l=ce}#c=(ke(this,Ee),ke(this,Oe,void 0));get extraLength(){return this.#c}set extraLength(ce){this.#c=ce}name=ke(this,ee);extra;get size(){return re.size+this.nameLength+this.extraLength}get useUTF8(){return!!(this.flags&2048)}static async from(ce,le){const be=await ce.get(le,re.size),M=new re(be.buffer,be.byteOffset);return M._source=ce,le+=re.size,M.name=await vn(ce,M.useUTF8,le,M.nameLength),le+=M.nameLength,M.extra=await ce.get(le,M.extraLength),le+=M.extraLength,M}};return re=g})();(()=>{var e,t;let i=[Ye.packed("ExtraDataRecord")],r,n=[],s,o=wi.typed(Uint8Array),a,d=[],u=[],h,f=[],E=[];var g=class extends o{static{s=this}static{const b=typeof Symbol=="function"&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;a=[(e=q).uint32.bind(e)],h=[(t=q).uint32.bind(t)],Ve(this,null,a,{kind:"accessor",name:"signature",static:!1,private:!1,access:{has:p=>"signature"in p,get:p=>p.signature,set:(p,m)=>{p.signature=m}},metadata:b},d,u),Ve(this,null,h,{kind:"accessor",name:"length",static:!1,private:!1,access:{has:p=>"length"in p,get:p=>p.length,set:(p,m)=>{p.length=m}},metadata:b},f,E),Ve(null,r={value:s},i,{kind:"class",name:s.name,metadata:b},null,n),g=s=r.value,b&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b}),ke(s,n)}_source;#e=ke(this,d,void 0);get signature(){return this.#e}set signature(b){this.#e=b}check(){if(this.signature!=134630224)throw V("EINVAL","Invalid archive extra data record signature: "+this.signature)}#t=(ke(this,u),ke(this,f,void 0));get length(){return this.#t}set length(b){this.#t=b}extraField=ke(this,E);static async from(b,p){const m=await b.get(p,g.size),y=new g(m.buffer,m.byteOffset);return y._source=b,p+=g.size,y.extraField=await b.get(p,y.length),y}};return g=s})();let n_=(()=>{var e,t,i,r,n,s,o,a,d,u,h,f,E,g,b,p,m;let y=[Ye.packed("FileEntry")],I,x=[],z,k=wi.typed(Uint8Array),B,J=[],G=[],H,D=[],C=[],ne,L=[],W=[],X,_e=[],De=[],ae,de=[],O=[],j,Y=[],K=[],we,Ee=[],Le=[],Oe,ee=[],re=[],ce,le=[],be=[],M,$=[],ie=[],pe,ye=[],me=[],N,P=[],oe=[],te,Ue=[],et=[],Pe,it=[],w=[],c,l=[],S=[],T,v=[],_=[],U,se=[],Se=[];var Re=class extends k{static{z=this}static{const he=typeof Symbol=="function"&&Symbol.metadata?Object.create(k[Symbol.metadata]??null):void 0;B=[(e=q).uint32.bind(e)],H=[(t=q).uint8.bind(t)],ne=[(i=q).uint8.bind(i)],X=[(r=q).uint16.bind(r)],ae=[(n=q).uint16.bind(n)],j=[(s=q).uint16.bind(s)],we=[(o=q).uint32.bind(o)],Oe=[(a=q).uint32.bind(a)],ce=[(d=q).uint32.bind(d)],M=[(u=q).uint32.bind(u)],pe=[(h=q).uint16.bind(h)],N=[(f=q).uint16.bind(f)],te=[(E=q).uint16.bind(E)],Pe=[(g=q).uint16.bind(g)],c=[(b=q).uint16.bind(b)],T=[(p=q).uint32.bind(p)],U=[(m=q).uint32.bind(m)],Ve(this,null,B,{kind:"accessor",name:"signature",static:!1,private:!1,access:{has:ue=>"signature"in ue,get:ue=>ue.signature,set:(ue,Fe)=>{ue.signature=Fe}},metadata:he},J,G),Ve(this,null,H,{kind:"accessor",name:"zipVersion",static:!1,private:!1,access:{has:ue=>"zipVersion"in ue,get:ue=>ue.zipVersion,set:(ue,Fe)=>{ue.zipVersion=Fe}},metadata:he},D,C),Ve(this,null,ne,{kind:"accessor",name:"attributeCompat",static:!1,private:!1,access:{has:ue=>"attributeCompat"in ue,get:ue=>ue.attributeCompat,set:(ue,Fe)=>{ue.attributeCompat=Fe}},metadata:he},L,W),Ve(this,null,X,{kind:"accessor",name:"versionNeeded",static:!1,private:!1,access:{has:ue=>"versionNeeded"in ue,get:ue=>ue.versionNeeded,set:(ue,Fe)=>{ue.versionNeeded=Fe}},metadata:he},_e,De),Ve(this,null,ae,{kind:"accessor",name:"flag",static:!1,private:!1,access:{has:ue=>"flag"in ue,get:ue=>ue.flag,set:(ue,Fe)=>{ue.flag=Fe}},metadata:he},de,O),Ve(this,null,j,{kind:"accessor",name:"compressionMethod",static:!1,private:!1,access:{has:ue=>"compressionMethod"in ue,get:ue=>ue.compressionMethod,set:(ue,Fe)=>{ue.compressionMethod=Fe}},metadata:he},Y,K),Ve(this,null,we,{kind:"accessor",name:"datetime",static:!1,private:!1,access:{has:ue=>"datetime"in ue,get:ue=>ue.datetime,set:(ue,Fe)=>{ue.datetime=Fe}},metadata:he},Ee,Le),Ve(this,null,Oe,{kind:"accessor",name:"crc32",static:!1,private:!1,access:{has:ue=>"crc32"in ue,get:ue=>ue.crc32,set:(ue,Fe)=>{ue.crc32=Fe}},metadata:he},ee,re),Ve(this,null,ce,{kind:"accessor",name:"compressedSize",static:!1,private:!1,access:{has:ue=>"compressedSize"in ue,get:ue=>ue.compressedSize,set:(ue,Fe)=>{ue.compressedSize=Fe}},metadata:he},le,be),Ve(this,null,M,{kind:"accessor",name:"uncompressedSize",static:!1,private:!1,access:{has:ue=>"uncompressedSize"in ue,get:ue=>ue.uncompressedSize,set:(ue,Fe)=>{ue.uncompressedSize=Fe}},metadata:he},$,ie),Ve(this,null,pe,{kind:"accessor",name:"nameLength",static:!1,private:!1,access:{has:ue=>"nameLength"in ue,get:ue=>ue.nameLength,set:(ue,Fe)=>{ue.nameLength=Fe}},metadata:he},ye,me),Ve(this,null,N,{kind:"accessor",name:"extraLength",static:!1,private:!1,access:{has:ue=>"extraLength"in ue,get:ue=>ue.extraLength,set:(ue,Fe)=>{ue.extraLength=Fe}},metadata:he},P,oe),Ve(this,null,te,{kind:"accessor",name:"commentLength",static:!1,private:!1,access:{has:ue=>"commentLength"in ue,get:ue=>ue.commentLength,set:(ue,Fe)=>{ue.commentLength=Fe}},metadata:he},Ue,et),Ve(this,null,Pe,{kind:"accessor",name:"startDisk",static:!1,private:!1,access:{has:ue=>"startDisk"in ue,get:ue=>ue.startDisk,set:(ue,Fe)=>{ue.startDisk=Fe}},metadata:he},it,w),Ve(this,null,c,{kind:"accessor",name:"internalAttributes",static:!1,private:!1,access:{has:ue=>"internalAttributes"in ue,get:ue=>ue.internalAttributes,set:(ue,Fe)=>{ue.internalAttributes=Fe}},metadata:he},l,S),Ve(this,null,T,{kind:"accessor",name:"externalAttributes",static:!1,private:!1,access:{has:ue=>"externalAttributes"in ue,get:ue=>ue.externalAttributes,set:(ue,Fe)=>{ue.externalAttributes=Fe}},metadata:he},v,_),Ve(this,null,U,{kind:"accessor",name:"headerRelativeOffset",static:!1,private:!1,access:{has:ue=>"headerRelativeOffset"in ue,get:ue=>ue.headerRelativeOffset,set:(ue,Fe)=>{ue.headerRelativeOffset=Fe}},metadata:he},se,Se),Ve(null,I={value:z},y,{kind:"class",name:z.name,metadata:he},null,x),Re=z=I.value,he&&Object.defineProperty(z,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:he}),ke(z,x)}_source;#e=ke(this,J,void 0);get signature(){return this.#e}set signature(he){this.#e=he}check(){if(this.signature!=33639248)throw V("EINVAL","Invalid Zip file: Central directory record has invalid signature: "+this.signature)}#t=(ke(this,G),ke(this,D,void 0));get zipVersion(){return this.#t}set zipVersion(he){this.#t=he}#i=(ke(this,C),ke(this,L,void 0));get attributeCompat(){return this.#i}set attributeCompat(he){this.#i=he}#r=(ke(this,W),ke(this,_e,void 0));get versionNeeded(){return this.#r}set versionNeeded(he){this.#r=he}#n=(ke(this,De),ke(this,de,void 0));get flag(){return this.#n}set flag(he){this.#n=he}get useUTF8(){return!!(this.flag&2048)}get isEncrypted(){return!!(this.flag&1)}#s=(ke(this,O),ke(this,Y,void 0));get compressionMethod(){return this.#s}set compressionMethod(he){this.#s=he}#a=(ke(this,K),ke(this,Ee,void 0));get datetime(){return this.#a}set datetime(he){this.#a=he}get lastModified(){return Fc(this.datetime)}#o=(ke(this,Le),ke(this,ee,void 0));get crc32(){return this.#o}set crc32(he){this.#o=he}#l=(ke(this,re),ke(this,le,void 0));get compressedSize(){return this.#l}set compressedSize(he){this.#l=he}#c=(ke(this,be),ke(this,$,void 0));get uncompressedSize(){return this.#c}set uncompressedSize(he){this.#c=he}#u=(ke(this,ie),ke(this,ye,void 0));get nameLength(){return this.#u}set nameLength(he){this.#u=he}#f=(ke(this,me),ke(this,P,void 0));get extraLength(){return this.#f}set extraLength(he){this.#f=he}#d=(ke(this,oe),ke(this,Ue,void 0));get commentLength(){return this.#d}set commentLength(he){this.#d=he}#h=(ke(this,et),ke(this,it,void 0));get startDisk(){return this.#h}set startDisk(he){this.#h=he}#_=(ke(this,w),ke(this,l,void 0));get internalAttributes(){return this.#_}set internalAttributes(he){this.#_=he}#m=(ke(this,S),ke(this,v,void 0));get externalAttributes(){return this.#m}set externalAttributes(he){this.#m=he}#y=(ke(this,_),ke(this,se,void 0));get headerRelativeOffset(){return this.#y}set headerRelativeOffset(he){this.#y=he}name=ke(this,Se);extra;comment;get size(){return at(Re)+this.nameLength+this.extraLength+this.commentLength}get isDirectory(){return!!(this.externalAttributes&16)||this.name.at(-1)=="/"}get isFile(){return!this.isDirectory}async loadContents(){const he=await this._source.get(this.headerRelativeOffset,at(Lo)),{compressionMethod:ue,size:Fe,name:lt}=new Lo(he.buffer,he.byteOffset),Bt=await this._source.get(this.headerRelativeOffset+Fe,this.compressedSize),ve=i_[ue];if(typeof ve!="function"){const fe=ue in pr?pr[ue]:ue.toString();throw V("EINVAL",`Invalid compression method on file "${lt}": ${fe}`)}this.contents=ve(Bt,this.compressedSize,this.uncompressedSize,this.flag)}contents;get data(){return this.contents}static async from(he,ue){const Fe=await he.get(ue,Re.size),lt=new Re(Fe.buffer,Fe.byteOffset);return lt._source=he,ue+=Re.size,lt.name=await vn(he,lt.useUTF8,ue,lt.nameLength),ue+=lt.nameLength,lt.extra=await he.get(ue,lt.extraLength),ue+=lt.extraLength,lt.comment=await vn(he,lt.useUTF8,ue,lt.commentLength),lt}};return Re=z})();(()=>{var e,t;let i=[Ye.packed("DigitalSignature")],r,n=[],s,o=wi.typed(Uint8Array),a,d=[],u=[],h,f=[],E=[];var g=class extends o{static{s=this}static{const b=typeof Symbol=="function"&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;a=[(e=q).uint32.bind(e)],h=[(t=q).uint16.bind(t)],Ve(this,null,a,{kind:"accessor",name:"signature",static:!1,private:!1,access:{has:p=>"signature"in p,get:p=>p.signature,set:(p,m)=>{p.signature=m}},metadata:b},d,u),Ve(this,null,h,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,m)=>{p.size=m}},metadata:b},f,E),Ve(null,r={value:s},i,{kind:"class",name:s.name,metadata:b},null,n),g=s=r.value,b&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b}),ke(s,n)}_source;#e=ke(this,d,void 0);get signature(){return this.#e}set signature(b){this.#e=b}check(){if(this.signature!=84233040)throw V("EINVAL","Invalid digital signature signature: "+this.signature)}#t=(ke(this,u),ke(this,f,void 0));get size(){return this.#t}set size(b){this.#t=b}signatureData=ke(this,E);static async from(b,p){const m=await b.get(p,g.size),y=new g(m.buffer,m.byteOffset);return y._source=b,p+=g.size,y.signatureData=await b.get(p,y.size),y}};return g=s})();let Co=(()=>{var e,t,i,r,n,s,o,a;let d=[Ye.packed("Header")],u,h=[],f,E=wi.typed(Uint8Array),g,b=[],p=[],m,y=[],I=[],x,z=[],k=[],B,J=[],G=[],H,D=[],C=[],ne,L=[],W=[],X,_e=[],De=[],ae,de=[],O=[];return class extends E{static{f=this}static{const j=typeof Symbol=="function"&&Symbol.metadata?Object.create(E[Symbol.metadata]??null):void 0;g=[(e=q).uint32.bind(e)],m=[(t=q).uint16.bind(t)],x=[(i=q).uint16.bind(i)],B=[(r=q).uint16.bind(r)],H=[(n=q).uint16.bind(n)],ne=[(s=q).uint32.bind(s)],X=[(o=q).uint32.bind(o)],ae=[(a=q).uint16.bind(a)],Ve(this,null,g,{kind:"accessor",name:"signature",static:!1,private:!1,access:{has:Y=>"signature"in Y,get:Y=>Y.signature,set:(Y,K)=>{Y.signature=K}},metadata:j},b,p),Ve(this,null,m,{kind:"accessor",name:"disk",static:!1,private:!1,access:{has:Y=>"disk"in Y,get:Y=>Y.disk,set:(Y,K)=>{Y.disk=K}},metadata:j},y,I),Ve(this,null,x,{kind:"accessor",name:"entriesDisk",static:!1,private:!1,access:{has:Y=>"entriesDisk"in Y,get:Y=>Y.entriesDisk,set:(Y,K)=>{Y.entriesDisk=K}},metadata:j},z,k),Ve(this,null,B,{kind:"accessor",name:"diskEntryCount",static:!1,private:!1,access:{has:Y=>"diskEntryCount"in Y,get:Y=>Y.diskEntryCount,set:(Y,K)=>{Y.diskEntryCount=K}},metadata:j},J,G),Ve(this,null,H,{kind:"accessor",name:"totalEntryCount",static:!1,private:!1,access:{has:Y=>"totalEntryCount"in Y,get:Y=>Y.totalEntryCount,set:(Y,K)=>{Y.totalEntryCount=K}},metadata:j},D,C),Ve(this,null,ne,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:Y=>"size"in Y,get:Y=>Y.size,set:(Y,K)=>{Y.size=K}},metadata:j},L,W),Ve(this,null,X,{kind:"accessor",name:"offset",static:!1,private:!1,access:{has:Y=>"offset"in Y,get:Y=>Y.offset,set:(Y,K)=>{Y.offset=K}},metadata:j},_e,De),Ve(this,null,ae,{kind:"accessor",name:"commentLength",static:!1,private:!1,access:{has:Y=>"commentLength"in Y,get:Y=>Y.commentLength,set:(Y,K)=>{Y.commentLength=K}},metadata:j},de,O),Ve(null,u={value:f},d,{kind:"class",name:f.name,metadata:j},null,h),f=u.value,j&&Object.defineProperty(f,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:j}),ke(f,h)}_source;#e=ke(this,b,void 0);get signature(){return this.#e}set signature(j){this.#e=j}check(){if(this.signature!=101010256)throw V("EINVAL","Invalid Zip file: End of central directory record has invalid signature: 0x"+this.signature.toString(16))}#t=(ke(this,p),ke(this,y,void 0));get disk(){return this.#t}set disk(j){this.#t=j}#i=(ke(this,I),ke(this,z,void 0));get entriesDisk(){return this.#i}set entriesDisk(j){this.#i=j}#r=(ke(this,k),ke(this,J,void 0));get diskEntryCount(){return this.#r}set diskEntryCount(j){this.#r=j}#n=(ke(this,G),ke(this,D,void 0));get totalEntryCount(){return this.#n}set totalEntryCount(j){this.#n=j}#s=(ke(this,C),ke(this,L,void 0));get size(){return this.#s}set size(j){this.#s=j}#a=(ke(this,W),ke(this,_e,void 0));get offset(){return this.#a}set offset(j){this.#a=j}#o=(ke(this,De),ke(this,de,void 0));get commentLength(){return this.#o}set commentLength(j){this.#o=j}comment=ke(this,O)},f})();async function s_(e){for(let t=e.size-22;t>e.size-65535;t--){const i=await e.get(t,22);if((i[0]|i[1]<<8|i[2]<<16|i[3]<<24)>>>0===101010256){oi("zipfs: found End of Central Directory signature at 0x"+t.toString(16));const n=new Co(i.buffer,i.byteOffset);return n._source=e,n.comment=await vn(e,!0,t+Co.size,n.commentLength),n}}throw pt(V("EINVAL","zipfs: could not locate End of Central Directory signature"))}class a_ extends wc(zi){label;data;lazy;files=new Map;directories=new Map;_time=Date.now();_ready=!1;eocd;async ready(){if(await super.ready(),this._ready)return;if(this._ready=!0,this.eocd=await s_(this.data),this.eocd.disk!=this.eocd.entriesDisk)throw V("EINVAL","ZipFS does not support spanned zip files.");let t=this.eocd.offset;if(t===4294967295)throw V("EINVAL","ZipFS does not support Zip64.");const i=t+this.eocd.size;for(;t<i;){const r=await n_.from(this.data,t);if(this.lazy||await r.loadContents(),r.name.startsWith("/"))throw V("EPERM","Unexpectedly encountered an absolute path in a zip file.");const n=r.name.endsWith("/")?r.name.slice(0,-1):r.name;this.files.set("/"+n,r),t+=r.size}for(const r of this.files.keys()){const{dir:n,base:s}=Rt(r);this.directories.has(n)||this.directories.set(n,new Set),this.directories.get(n).add(s)}for(const r of this.directories.keys()){const{dir:n,base:s}=Rt(r);s!=""&&(this.directories.has(n)||this.directories.set(n,new Set),this.directories.get(n).add(s))}}constructor(t,i,r=!1){super(544893296,"zipfs"),this.label=t,this.data=i,this.lazy=r}usage(){return{totalSpace:this.data.size,freeSpace:0}}async stat(t){return this.statSync(t)}statSync(t){if(this.directories.has(t))return new tt({mode:365|rt,size:4096,mtimeMs:this._time,ctimeMs:this._time,atimeMs:Date.now(),birthtimeMs:this._time});const i=this.files.get(t);if(!i)throw V("ENOENT");return new tt({mode:365|(i.isDirectory?rt:qt),size:i.uncompressedSize,mtimeMs:i.lastModified.getTime()})}async readdir(t){if(!((await this.stat(t)).mode&rt))throw V("ENOTDIR");const r=this.directories.get(t);if(!r)throw V("ENODATA");return Array.from(r)}readdirSync(t){if(!(this.statSync(t).mode&rt))throw V("ENOTDIR");const r=this.directories.get(t);if(!r)throw V("ENODATA");return Array.from(r)}async read(t,i,r,n){if(this.directories.has(t))throw V("EISDIR");const s=this.files.get(t)??Xe(V("ENOENT"));s.contents||await s.loadContents(),i.set(s.contents.subarray(r,n))}readSync(t,i,r,n){if(this.directories.has(t))throw V("EISDIR");const s=this.files.get(t)??Xe(V("ENOENT"));if(!s.contents)throw s.loadContents(),V("EAGAIN");i.set(s.contents.subarray(r,n))}}const o_=e=>typeof e=="object"&&e!==null&&e.constructor.name==="SharedArrayBuffer";function l_(e){if(e instanceof ArrayBuffer||o_(e))return{size:e.byteLength,get(t,i){return new Uint8Array(e,t,i)},set(t,i){new Uint8Array(e,t,i.byteLength).set(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}};if(ArrayBuffer.isView(e))return{size:e.byteLength,get(t,i){return new Uint8Array(e.buffer,e.byteOffset+t,i)},set(t,i){new Uint8Array(e.buffer,e.byteOffset+t,i.byteLength).set(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}};if(typeof e=="object"&&e!==null&&"size"in e&&typeof e.size=="number"&&typeof e.get=="function")return e;throw pt(V("EINVAL","Invalid zip data source"))}const c_={name:"Zip",options:{data:{type:[ArrayBuffer,Object.getPrototypeOf(Uint8Array),function(t){return typeof t=="object"&&t!==null&&"size"in t&&typeof t.size=="number"&&"get"in t&&typeof t.get=="function"}],required:!0},name:{type:"string",required:!1},lazy:{type:"boolean",required:!1}},isAvailable(){return!0},create(e){return new a_(e.name??"",l_(e.data),e.lazy)}},u_=c_;class f_{get name(){return jc.name}constructor(t){this.storage=t}clear(){this.storage.clear()}clearSync(){this.storage.clear()}async sync(){}transaction(){return new Dl(this)}keys(){return Object.keys(this.storage).map(t=>Number(t))}get(t){const i=this.storage.getItem(t.toString());if(typeof i=="string")return Jo(i)}set(t,i){try{this.storage.setItem(t.toString(),zs(i))}catch{throw V("ENOSPC")}}delete(t){try{this.storage.removeItem(t.toString())}catch(i){throw V("EIO",`Unable to delete '${t}': ${i}`)}}}const d_={name:"WebStorage",options:{storage:{type:"object",required:!1}},isAvailable(e){return(e?.storage??globalThis.localStorage)instanceof globalThis.Storage},create({storage:e=globalThis.localStorage}){return new $s(new f_(e))}},jc=d_;function fn(e){const t={};for(const i of jr){const r=e.getAttribute(i);r!=null&&(t[i]=parseInt(r,16))}return new tt(t)}function Mo(e,t){for(const i of Object.keys(t))!(i in jr)||t[i]===void 0||e.setAttribute(i,t[i].toString(16))}function ms(e,t=!1){let i;try{const r=t?e.textContent:e.getAttribute("paths");i=JSON.parse(r||"[]")}catch{i=[]}return i}class B_ extends Sc(zi){constructor(t=new DOMParser().parseFromString("<fs></fs>","application/xml").documentElement){super(544763244,"xmltmpfs"),this.root=t;try{this.mkdirSync("/",{uid:0,gid:0,mode:511})}catch(i){const r=i;if(r.code!="EEXIST")throw r}}renameSync(t,i){const r=this.get("rename",t);this.remove("rename",r,t),this.add("rename",r,i)}statSync(t){return fn(this.get("stat",t))}createFileSync(t,i){const r=this.statSync(Je(t)),n=new tt({mode:i.mode|qt,uid:r.mode&Xi?r.uid:i.uid,gid:r.mode&Ji?r.gid:i.gid});return this.create("createFile",t,n),n}unlinkSync(t){const i=this.get("unlink",t);if(fn(i).mode&rt)throw V("EISDIR");this.remove("unlink",i,t)}rmdirSync(t){const i=this.get("rmdir",t);if(i.textContent?.length)throw V("ENOTEMPTY");if(!(fn(i).mode&rt))throw V("ENOTDIR");this.remove("rmdir",i,t)}mkdirSync(t,i){const r=this.statSync(Je(t)),n=new tt({mode:i.mode|rt,uid:r.mode&Xi?r.uid:i.uid,gid:r.mode&Ji?r.gid:i.gid});return this.create("mkdir",t,n).textContent="[]",n}readdirSync(t){const i=this.get("readdir",t);if(!(fn(i).mode&rt))throw V("ENOTDIR");try{return JSON.parse(i.textContent)}catch(r){throw V("EIO","Invalid directory listing: "+r)}}linkSync(t,i){const r=this.get("link",t);this.add("link",r,i)}touchSync(t,i){const r=this.get("touch",t);Mo(r,i)}syncSync(){}readSync(t,i,r,n){const s=this.get("read",t),o=Jo(s.textContent.slice(r,n));i.set(o)}writeSync(t,i,r){const n=this.get("write",t),s=zs(i),o=n.textContent.slice(r+s.length);n.textContent=n.textContent.slice(0,r)+s+o}toString(){return new XMLSerializer().serializeToString(this.root)}get(t,i){const r=this.root.children;if(!r)throw V("EIO");for(let n=0;n<r.length;n++)if(ms(r[n]).includes(i))return r[n];throw V("ENOENT")}create(t,i,r){if(this.existsSync(i))throw V("EEXIST");const n=document.createElement("file");return this.add(t,n,i),Mo(n,new tt({...r,uid:r.mode})),this.root.append(n),n}add(t,i,r,n=!1){const s=ms(i,n);if(s.push(r),n){i.textContent=JSON.stringify(s);return}if(i.setAttribute("paths",JSON.stringify(s)),i.setAttribute("nlink",s.length.toString(16)),r!="/"){const o=this.get(t,Je(r));this.add(t,o,ci(r),!0)}}remove(t,i,r,n=!1){const s=ms(i,n),o=s.indexOf(r);if(o!=-1){if(s.splice(o,1),n){i.textContent=JSON.stringify(s);return}if(s.length?(i.setAttribute("paths",JSON.stringify(s)),i.setAttribute("nlink",s.length.toString(16))):i.remove(),r!="/"){const a=this.get(t,Je(r));this.remove(t,a,ci(r),!0)}}}}const h_=e=>{const t=e.split("/").slice(0,-1).join("/");return t===""?e.startsWith("/")?"/":".":t};function __(e,t){return e==="."?t:e.endsWith("/")?__(e.substring(0,e.length-1),t):t==="."?e:`${e}/${t}`}let dn=null;async function U_(e=!1){return dn||(dn=(async()=>{const t={},i=await Promise.all(qc.map(async r=>[r,await fetch(`/libraries/${r}.zip`).then(n=>n.arrayBuffer())]));for(const[r,n]of i)n.byteLength>0&&(t[`/libraries/${r}`]={backend:u_,data:n});await yd({mounts:{...e?{"/src":{backend:jc}}:{},...t}})})(),dn)}const F_=Ko(function(t,i){if(console.debug("Reading file",t,i),ua&&gr(t))return Ks(t,"utf8");if(i!==void 0)return i;throw new Error(`File ${t} does not exist`)}),j_=Ko(function(t,i,r=!1){if(!ua||gr(t)&&!r)return;const n=h_(t);n!==""&&!gr(n)&&Yr(n,{recursive:!0}),Hs(t,i,"utf8")});function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},As.apply(null,arguments)}var $c=Ce.memo(Ce.forwardRef(function(e,t){var i=Hc.getPTI(e);return Ce.createElement("svg",As({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),Ce.createElement("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"}))}));$c.displayName="MinusIcon";function hr(){return hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},hr.apply(null,arguments)}function Ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function m_(e){if(Array.isArray(e))return Ds(e)}function y_(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wc(e,t){if(e){if(typeof e=="string")return Ds(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ds(e,t):void 0}}function g_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lr(e){return m_(e)||y_(e)||Wc(e)||g_()}function Vr(e){"@babel/helpers - typeof";return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(e)}function p_(e,t){if(Vr(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(Vr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b_(e){var t=p_(e,"string");return Vr(t)=="symbol"?t:t+""}function da(e,t,i){return(t=b_(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function w_(e){if(Array.isArray(e))return e}function S_(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var r,n,s,o,a=[],d=!0,u=!1;try{if(s=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(r=s.call(i)).done)&&(a.push(r.value),a.length!==t);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&i.return!=null&&(o=i.return(),Object(o)!==o))return}finally{if(u)throw n}}return a}}function E_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(e,t){return w_(e)||S_(e,t)||Wc(e,t)||E_()}var v_={root:function(t){var i=t.props;return ri("p-tree p-component",{"p-tree-selectable":i.selectionMode,"p-tree-loading":i.loading,"p-disabled":i.disabled})},loadingOverlay:"p-tree-loading-overlay p-component-overlay",loadingIcon:"p-tree-loading-icon",filterContainer:"p-tree-filter-container",input:"p-tree-filter p-inputtext p-component",searchIcon:"p-tree-filter-icon",container:"p-tree-container",node:function(t){var i=t.leaf;return ri("p-treenode",{"p-treenode-leaf":i})},content:function(t){var i=t.nodeProps,r=t.checked,n=t.selected,s=t.isCheckboxSelectionMode;return ri("p-treenode-content",{"p-treenode-selectable":i.selectionMode&&i.node.selectable!==!1,"p-highlight":s()?r:n,"p-highlight-contextmenu":i.contextMenuSelectionKey&&i.contextMenuSelectionKey===i.node.key,"p-disabled":i.disabled})},toggler:"p-tree-toggler p-link",togglerIcon:"p-tree-toggler-icon",nodeCheckbox:function(t){var i=t.partialChecked;return ri({"p-indeterminate":i})},nodeIcon:"p-treenode-icon",label:"p-treenode-label",subgroup:"p-treenode-children",checkIcon:"p-checkbox-icon",emptyMessage:"p-treenode p-tree-empty-message",droppoint:"p-treenode-droppoint",header:"p-tree-header",footer:"p-tree-footer"},Pr=Vo.extend({defaultProps:{__TYPE:"Tree",__parentMetadata:null,id:null,value:null,ariaLabel:null,ariaLabelledBy:null,checkboxIcon:null,className:null,collapseIcon:null,contentClassName:null,contentStyle:null,contextMenuSelectionKey:null,disabled:!1,dragdropScope:null,emptyMessage:null,expandIcon:null,expandedKeys:null,filter:!1,filterBy:"label",filterDelay:300,filterIcon:null,filterLocale:void 0,filterMode:"lenient",filterPlaceholder:null,filterTemplate:null,filterValue:null,footer:null,header:null,level:0,loading:!1,loadingIcon:null,metaKeySelection:!1,nodeTemplate:null,onCollapse:null,onContextMenu:null,onContextMenuSelectionChange:null,onDragDrop:null,onExpand:null,onFilterValueChange:null,onNodeClick:null,onNodeDoubleClick:null,onSelect:null,onSelectionChange:null,onToggle:null,onUnselect:null,propagateSelectionDown:!0,propagateSelectionUp:!0,selectionKeys:null,selectionMode:null,showHeader:!0,style:null,togglerTemplate:null,children:void 0},css:{classes:v_}}),I_={box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon",root:function(t){var i=t.props,r=t.checked,n=t.context;return ri("p-checkbox p-component",{"p-highlight":r,"p-disabled":i.disabled,"p-invalid":i.invalid,"p-variant-filled":i.variant?i.variant==="filled":n&&n.inputStyle==="filled"})}},hn=Vo.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,invalid:!1,variant:null,name:null,onChange:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0},css:{classes:I_}});function Po(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Bo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Po(Object(i),!0).forEach(function(r){da(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Po(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Vc=Ce.memo(Ce.forwardRef(function(e,t){var i=Ns(),r=Ce.useContext(Wo),n=hn.getProps(e,r),s=Ce.useState(!1),o=Ts(s,2),a=o[0],d=o[1],u=hn.setMetaData({props:n,state:{focused:a},context:{checked:n.checked===n.trueValue,disabled:n.disabled}}),h=u.ptm,f=u.cx,E=u.isUnstyled;qo(hn.css.styles,E,{name:"checkbox"});var g=Ce.useRef(null),b=Ce.useRef(n.inputRef),p=function(){return n.checked===n.trueValue},m=function(D){if(!(n.disabled||n.readOnly)&&n.onChange){var C,ne=p(),L=ne?n.falseValue:n.trueValue,W={originalEvent:D,value:n.value,checked:L,stopPropagation:function(){D?.stopPropagation()},preventDefault:function(){D?.preventDefault()},target:{type:"checkbox",name:n.name,id:n.id,value:n.value,checked:L}};if(n==null||(C=n.onChange)===null||C===void 0||C.call(n,W),D.defaultPrevented)return;Ot.focus(b.current)}},y=function(D){var C;d(!0),n==null||(C=n.onFocus)===null||C===void 0||C.call(n,D)},I=function(D){var C;d(!1),n==null||(C=n.onBlur)===null||C===void 0||C.call(n,D)};Ce.useImperativeHandle(t,function(){return{props:n,focus:function(){return Ot.focus(b.current)},getElement:function(){return g.current},getInput:function(){return b.current}}}),Ce.useEffect(function(){Lt.combinedRefs(b,n.inputRef)},[b,n.inputRef]),Go(function(){b.current.checked=p()},[n.checked,n.trueValue]),Zc(function(){n.autoFocus&&Ot.focus(b.current,n.autoFocus)});var x=p(),z=Lt.isNotEmpty(n.tooltip),k=hn.getOtherProps(n),B=i({id:n.id,className:ri(n.className,f("root",{checked:x,context:r})),style:n.style,"data-p-highlight":x,"data-p-disabled":n.disabled,onContextMenu:n.onContextMenu,onMouseDown:n.onMouseDown},k,h("root")),J=function(){var D=Lt.reduceKeys(k,Ot.ARIA_PROPS),C=i(Bo({id:n.inputId,type:"checkbox",className:f("input"),name:n.name,tabIndex:n.tabIndex,onFocus:function(L){return y(L)},onBlur:function(L){return I(L)},onChange:function(L){return m(L)},disabled:n.disabled,readOnly:n.readOnly,required:n.required,"aria-invalid":n.invalid,checked:x},D),h("input"));return Ce.createElement("input",hr({ref:b},C))},G=function(){var D=i({className:f("icon")},h("icon")),C=i({className:f("box",{checked:x}),"data-p-highlight":x,"data-p-disabled":n.disabled},h("box")),ne=x?n.icon||Ce.createElement(Ho,D):null,L=dr.getJSXIcon(ne,Bo({},D),{props:n,checked:x});return Ce.createElement("div",C,L)};return Ce.createElement(Ce.Fragment,null,Ce.createElement("div",hr({ref:g},B),J(),G()),z&&Ce.createElement(Qc,hr({target:g,content:n.tooltip,pt:h("tooltip")},n.tooltipOptions)))}));Vc.displayName="Checkbox";function x_(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=k_(e))||t){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var u=i.next();return o=u.done,u},e:function(u){a=!0,s=u},f:function(){try{o||i.return==null||i.return()}finally{if(a)throw s}}}}function k_(e,t){if(e){if(typeof e=="string")return Uo(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Uo(e,t):void 0}}function Uo(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function Fo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function mi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Fo(Object(i),!0).forEach(function(r){da(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fo(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var ha=Ce.memo(function(e){var t=Ce.useRef(null),i=Ce.useRef(null),r=Ce.useRef(!1),n=Ns(),s=e.isNodeLeaf(e.node),o=e.node.label,a=e.isFiltering,d=(e.expandedKeys?e.expandedKeys[e.node.key]!==void 0:!1)||!a&&e.node.expanded,u=e.ptm,h=e.cx,f=function(_){return u(_,{hostName:e.hostName,context:{selected:re()?!1:K(),expanded:d||!1,checked:re()?we():!1,leaf:s}})},E=function(_){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,se=e.expandedKeys?mi({},e.expandedKeys):{};se[e.node.key]=!0,e.onToggle({originalEvent:_,value:se,navigateFocusToChild:U}),p(_,!0)},g=function(_){var U=mi({},e.expandedKeys);delete U[e.node.key],e.onToggle({originalEvent:_,value:U}),p(_,!1)},b=function(_){e.disabled||(d?g(_):E(_,!1),_.preventDefault(),_.stopPropagation())},p=function(_,U){U?e.onExpand&&e.onExpand({originalEvent:_,node:e.node}):e.onCollapse&&e.onCollapse({originalEvent:_,node:e.node})},m=function(_){var U=_.nextSibling;if(U){var se=U.getAttribute("data-pc-section")==="droppoint";return se?U.nextElementSibling?U.nextElementSibling:null:U}return null},y=function(_){var U=x(_);return U?m(U)||y(U):null},I=function(_){var U=_.children[1];if(U){var se=e.dragdropScope?2:1,Se=U.children[U.children.length-se];return I(Se)}return _},x=function(_){var U=_.parentElement.parentElement;return Ot.hasClass(U,"p-treenode")?U:null},z=function(_){_&&_.focus()},k=function(_){e.onClick&&e.onClick({originalEvent:_,node:e.node});var U=_.target.nodeName;if(!(e.disabled||U==="INPUT"||U==="BUTTON"||U==="A"||Ot.hasClass(_.target,"p-clickable"))){if(e.selectionMode&&e.node.selectable!==!1){var se;if(re()){var Se=we();se=e.selectionKeys?mi({},e.selectionKeys):{},Se?(e.propagateSelectionDown?Y(e.node,!1,se):delete se[e.node.key],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:_,check:!1,selectionKeys:se}),e.onUnselect&&e.onUnselect({originalEvent:_,node:e.node})):(e.propagateSelectionDown?Y(e.node,!0,se):se[e.node.key]={checked:!0},e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:_,check:!0,selectionKeys:se}),e.onSelect&&e.onSelect({originalEvent:_,node:e.node}))}else{var Re=K(),he=r.current?!1:e.metaKeySelection;if(he){var ue=_.metaKey||_.ctrlKey;Re&&ue?(Oe()?se=null:(se=mi({},e.selectionKeys),delete se[e.node.key]),e.onUnselect&&e.onUnselect({originalEvent:_,node:e.node})):(Oe()?se=e.node.key:ee()&&(se=ue?e.selectionKeys?mi({},e.selectionKeys):{}:{},se[e.node.key]=!0),e.onSelect&&e.onSelect({originalEvent:_,node:e.node}))}else Oe()?Re?(se=null,e.onUnselect&&e.onUnselect({originalEvent:_,node:e.node})):(se=e.node.key,e.onSelect&&e.onSelect({originalEvent:_,node:e.node})):Re?(se=mi({},e.selectionKeys),delete se[e.node.key],e.onUnselect&&e.onUnselect({originalEvent:_,node:e.node})):(se=e.selectionKeys?mi({},e.selectionKeys):{},se[e.node.key]=!0,e.onSelect&&e.onSelect({originalEvent:_,node:e.node}))}e.onSelectionChange&&e.onSelectionChange({originalEvent:_,value:se})}r.current=!1}},B=function(_){e.onDoubleClick&&e.onDoubleClick({originalEvent:_,node:e.node})},J=function(_){e.disabled||(Ot.clearSelection(),e.onContextMenuSelectionChange&&e.onContextMenuSelectionChange({originalEvent:_,value:e.node.key}),e.onContextMenu&&e.onContextMenu({originalEvent:_,node:e.node}))},G=function(_){if(Ee(_))switch(_.code){case"Tab":_e();break;case"ArrowDown":H(_);break;case"ArrowUp":ne(_);break;case"ArrowRight":L(_);break;case"ArrowLeft":W(_);break;case"Enter":case"NumpadEnter":X(_);break;case"Space":["INPUT"].includes(_.target.nodeName)||X(_);break}},H=function(_){var U=_.target.getAttribute("data-pc-section")==="toggler"?_.target.closest('[role="treeitem"]'):_.target,se=U.children[1],Se=C(U);if(se)de(U,e.dragdropScope?se.children[1]:se.children[0]);else if(Se)de(U,Se);else{var Re=y(U);Re&&de(U,Re)}_.preventDefault()},D=function(_){var U=_.previousElementSibling;return U?e.dragdropScope?U.previousElementSibling:U:null},C=function(_){var U=_.nextElementSibling;return U?e.dragdropScope?U.nextElementSibling:U:null},ne=function(_){var U=_.target,se=D(U);if(se)de(U,se,I(se));else{var Se=x(U);Se&&de(U,Se)}_.preventDefault()},L=function(_){s||d||(_.currentTarget.tabIndex=-1,E(_,!0))},W=function(_){var U=Ot.findSingle(_.currentTarget,'[data-pc-section="toggler"]');if(e.level===0&&!d)return!1;if(d&&!s)return U.click(),!1;var se=O(_.currentTarget);se&&de(_.currentTarget,se)},X=function(_){ae(_,r.current),k(_),_.preventDefault()},_e=function(){De()},De=function(){var _=Ot.find(t.current.closest('[data-pc-section="container"]'),'[role="treeitem"]'),U=lr(_).some(function(Se){return Se.getAttribute("aria-selected")==="true"||Se.getAttribute("aria-checked")==="true"});if(lr(_).forEach(function(Se){Se.tabIndex=-1}),U){var se=lr(_).filter(function(Se){return Se.getAttribute("aria-selected")==="true"||Se.getAttribute("aria-checked")==="true"});se[0].tabIndex=0;return}lr(_)[0].tabIndex=0},ae=function(_,U){if(e.selectionMode!==null){var se=lr(Ot.find(i.current.parentElement,'[role="treeitem"]'));_.currentTarget.tabIndex=U===!1?-1:0,se.every(function(Se){return Se.tabIndex===-1})&&(se[0].tabIndex=0)}},de=function(_,U,se){_.tabIndex="-1",U.tabIndex="0",z(se||U)},O=function(_){var U=_.closest("ul").closest("li");if(U){var se=Ot.findSingle(U,"button");return se&&se.style.visibility!=="hidden"?U:O(_.previousElementSibling)}return null},j=function(_){var U=_.check,se=_.selectionKeys,Se=0,Re=x_(e.node.children),he;try{for(Re.s();!(he=Re.n()).done;){var ue=he.value;se[ue.key]&&se[ue.key].checked&&Se++}}catch(fe){Re.e(fe)}finally{Re.f()}var Fe=e.node.key,lt=Lt.findChildrenByKey(e.originalOptions,Fe),Bt=lt.some(function(fe){return fe.key in se}),ve=lt.every(function(fe){return fe.key in se&&se[fe.key].checked});Bt&&!ve?se[Fe]={checked:!1,partialChecked:!0}:ve?se[Fe]={checked:!0,partialChecked:!1}:U?se[Fe]={checked:!1,partialChecked:!1}:delete se[Fe],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp(_)},Y=function(_,U,se){if(U?se[_.key]={checked:!0,partialChecked:!1}:delete se[_.key],_.children&&_.children.length)for(var Se=0;Se<_.children.length;Se++)Y(_.children[Se],U,se)},K=function(){return e.selectionMode&&e.selectionKeys?Oe()?e.selectionKeys===e.node.key:e.selectionKeys[e.node.key]!==void 0:!1},we=function(){return(e.selectionKeys?e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].checked:!1)||!1},Ee=function(_){return _.currentTarget&&(_.currentTarget.isSameNode(_.target)||_.currentTarget.isSameNode(_.target.closest('[role="treeitem"]')))},Le=function(){return e.selectionKeys?e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].partialChecked:!1},Oe=function(){return e.selectionMode&&e.selectionMode==="single"},ee=function(){return e.selectionMode&&e.selectionMode==="multiple"},re=function(){return e.selectionMode&&e.selectionMode==="checkbox"},ce=function(){r.current=!0},le=function(_,U){if(_.preventDefault(),Ot.removeClass(_.target,"p-treenode-droppoint-active"),e.onDropPoint){var se=U===-1?e.index:e.index+1;e.onDropPoint({originalEvent:_,path:e.path,index:se,position:U})}},be=function(_){e.dragdropScope&&_.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&(_.dataTransfer.dropEffect="move",_.preventDefault())},M=function(_){e.dragdropScope&&_.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&Ot.addClass(_.target,"p-treenode-droppoint-active")},$=function(_){e.dragdropScope&&_.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&Ot.removeClass(_.target,"p-treenode-droppoint-active")},ie=function(_){e.dragdropScope&&e.node.droppable!==!1&&(Ot.removeClass(t.current,"p-treenode-dragover"),_.preventDefault(),_.stopPropagation(),e.onDrop&&e.onDrop({originalEvent:_,path:e.path,index:e.index}))},pe=function(_){e.dragdropScope&&_.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&e.node.droppable!==!1&&(_.dataTransfer.dropEffect="move",_.preventDefault(),_.stopPropagation())},ye=function(_){e.dragdropScope&&_.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&e.node.droppable!==!1&&Ot.addClass(t.current,"p-treenode-dragover")},me=function(_){if(e.dragdropScope&&_.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&e.node.droppable!==!1){var U=_.currentTarget.getBoundingClientRect();(_.nativeEvent.x>U.left+U.width||_.nativeEvent.x<U.left||_.nativeEvent.y>=Math.floor(U.top+U.height)||_.nativeEvent.y<U.top)&&Ot.removeClass(t.current,"p-treenode-dragover")}},N=function(_){_.dataTransfer.setData("text",e.dragdropScope),_.dataTransfer.setData(e.dragdropScope,e.dragdropScope),e.onDragStart&&e.onDragStart({originalEvent:_,path:e.path,index:e.index})},P=function(_){e.onDragEnd&&e.onDragEnd({originalEvent:_})},oe=function(){var _=n({className:h("label")},f("label")),U=Ce.createElement("span",_,o);if(e.nodeTemplate){var se={onTogglerClick:b,className:"p-treenode-label",element:U,props:e,expanded:d};U=Lt.getJSXElement(e.nodeTemplate,e.node,se)}return U},te=function(){if(re()&&e.node.selectable!==!1){var _,U=we(),se=Le(),Se=n({className:h("checkIcon")}),Re=U?e.checkboxIcon||Ce.createElement(Ho,Se):se?e.checkboxIcon||Ce.createElement($c,Se):null,he=dr.getJSXIcon(Re,mi({},Se),e),ue=n({className:h("nodeCheckbox",{partialChecked:se}),checked:U||se,icon:he,tabIndex:-1,unstyled:e==null||(_=e.isUnstyled)===null||_===void 0?void 0:_.call(e),"data-p-checked":U,"data-p-partialchecked":se,onChange:k},f("nodeCheckbox"));return Ce.createElement(Vc,ue)}return null},Ue=function(){var _=e.node.icon||(d?e.node.expandedIcon:e.node.collapsedIcon);if(_){var U=n({className:ri(_,h("nodeIcon"))},f("nodeIcon"));return dr.getJSXIcon(_,mi({},U),{props:e})}return null},et=function(){var _=n({className:h("togglerIcon"),"aria-hidden":!0},f("togglerIcon")),U=d?e.collapseIcon||Ce.createElement(iu,_):e.expandIcon||Ce.createElement(Gc,_),se=dr.getJSXIcon(U,mi({},_),{props:e,expanded:d}),Se=n({type:"button",className:h("toggler"),tabIndex:-1,"aria-hidden":!1,onClick:b},f("toggler")),Re=Ce.createElement("button",Se,se,Ce.createElement(Jc,null));if(e.togglerTemplate){var he={onClick:b,containerClassName:"p-tree-toggler p-link",iconClassName:"p-tree-toggler-icon",element:Re,props:e,expanded:d};Re=Lt.getJSXElement(e.togglerTemplate,e.node,he)}return Re},Pe=function(_){if(e.dragdropScope){var U=n({className:h("droppoint"),role:"treeitem",onDrop:function(Se){return le(Se,_)},onDragOver:be,onDragEnter:M,onDragLeave:$},f("droppoint"));return Ce.createElement("li",U)}return null},it=function(){var _=K(),U=we(),se=et(),Se=te(),Re=Ue(),he=oe(),ue=n({ref:t,className:ri(e.node.className,h("content",{checked:U,selected:_,nodeProps:e,isCheckboxSelectionMode:re})),style:e.node.style,onClick:k,onDoubleClick:B,onContextMenu:J,onTouchEnd:ce,draggable:e.dragdropScope&&e.node.draggable!==!1&&!e.disabled,onDrop:ie,onDragOver:pe,onDragEnter:ye,onDragLeave:me,onDragStart:N,onDragEnd:P,"data-p-highlight":re()?U:_},f("content"));return Ce.createElement("div",ue,se,Se,Re,he)},w=function(){var _=n({className:h("subgroup"),role:"group"},f("subgroup"));return Lt.isNotEmpty(e.node.children)&&d?Ce.createElement("ul",_,e.node.children.map(function(U,se){return Ce.createElement(ha,{key:U.key||U.label,node:U,checkboxIcon:e.checkboxIcon,collapseIcon:e.collapseIcon,contextMenuSelectionKey:e.contextMenuSelectionKey,cx:h,disabled:e.disabled,dragdropScope:e.dragdropScope,expandIcon:e.expandIcon,expandedKeys:e.expandedKeys,isFiltering:e.isFiltering,index:se,isNodeLeaf:e.isNodeLeaf,last:se===e.node.children.length-1,metaKeySelection:e.metaKeySelection,nodeTemplate:e.nodeTemplate,onClick:e.onClick,onCollapse:e.onCollapse,onContextMenu:e.onContextMenu,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onDoubleClick:e.onDoubleClick,onDragEnd:e.onDragEnd,onDragStart:e.onDragStart,onDrop:e.onDrop,onDropPoint:e.onDropPoint,onExpand:e.onExpand,onPropagateUp:j,onSelect:e.onSelect,onSelectionChange:e.onSelectionChange,onToggle:e.onToggle,onUnselect:e.onUnselect,originalOptions:e.originalOptions,parent:e.node,path:e.path+"-"+se,propagateSelectionDown:e.propagateSelectionDown,propagateSelectionUp:e.propagateSelectionUp,ptm:u,selectionKeys:e.selectionKeys,selectionMode:e.selectionMode,togglerTemplate:e.togglerTemplate})})):null},c=function(){var _=e.disabled||e.index!==0?-1:0,U=K(),se=we(),Se=it(),Re=w(),he=n({ref:i,className:ri(e.node.className,h("node",{leaf:s})),style:e.node.style,tabIndex:_,role:"treeitem","aria-label":o,"aria-level":e.level,"aria-expanded":d,"aria-checked":se,"aria-setsize":e.node.children?e.node.children.length:0,"aria-posinset":e.index+1,onKeyDown:G,"aria-selected":se||U},f("node"));return Ce.createElement("li",he,Se,Re)},l=c();if(e.dragdropScope&&!e.disabled&&(!e.parent||e.parent.droppable!==!1)){var S=Pe(-1),T=e.last?Pe(1):null;return Ce.createElement(Ce.Fragment,null,S,l,T)}return l});ha.displayName="UITreeNode";function ys(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=O_(e))||t){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var u=i.next();return o=u.done,u},e:function(u){a=!0,s=u},f:function(){try{o||i.return==null||i.return()}finally{if(a)throw s}}}}function O_(e,t){if(e){if(typeof e=="string")return jo(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?jo(e,t):void 0}}function jo(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function $o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function vi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?$o(Object(i),!0).forEach(function(r){da(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$o(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var A_=Ce.memo(Ce.forwardRef(function(e,t){var i=Ns(),r=Ce.useContext(Wo),n=Pr.getProps(e,r),s=Yc("",n.filterDelay||0),o=Ts(s,3),a=o[0],d=o[1],u=o[2],h=Ce.useState(n.expandedKeys),f=Ts(h,2),E=f[0],g=f[1],b=Ce.useRef(null),p=Ce.useRef([]),m=Ce.useRef(null),y=Ce.useRef(!1),I=n.onFilterValueChange?n.filterValue:d,x=n.filter&&I,z=n.onToggle?n.expandedKeys:E,k=Ce.useRef({}),B=Ce.useRef(null),J=Pr.setMetaData({props:n,state:{filterValue:I,expandedKeys:z}}),G=J.ptm,H=J.cx,D=J.isUnstyled;qo(Pr.css.styles,D,{name:"tree"});var C={filter:function(l){return Le(l)},reset:function(){return le()}},ne=function(){return n.filter&&p.current?p.current:n.value},L=function(l){var S=l.originalEvent,T=l.value,v=l.navigateFocusToChild;S==null&&x?n.onToggle?n.onToggle({originalEvent:S,value:vi(vi({},n.expandedKeys),T)}):g(vi(vi({},E),T)):n.onToggle?n.onToggle({originalEvent:S,value:T}):(v&&(B.current=S),g(T))};Go(function(){if(B.current){var c=B.current,l=c.target.getAttribute("data-pc-section")==="toggler"?c.target.closest('[role="treeitem"]'):c.target,S=l.children[1];if(S){l&&(l.tabIndex="-1");var T=n.dragdropScope?S.children[1]:S.children[0];T&&(T.tabIndex="0",T.focus())}B.current=null}},[z]),Ce.useEffect(function(){n.filter&&ee()},[I,n.value,n.filter]);var W=function(l){m.current={path:l.path,index:l.index}},X=function(){m.current=null},_e=function(l){if(Array.isArray(l))return l.map(_e);if(l&&Object.getPrototypeOf(l)===Object.prototype){var S={};for(var T in l)T!=="data"?S[T]=_e(l[T]):S[T]=l[T];return S}return l},De=function(l){var S;if(O((S=m.current)===null||S===void 0?void 0:S.path,l.path)){var T=_e(ne()),v=m.current.path.split("-");v.pop();var _=K(T,v),U=_?_.children[m.current.index]:T[m.current.index],se=K(T,l.path.split("-"));se.children?se.children.push(U):se.children=[U],_?_.children.splice(m.current.index,1):T.splice(m.current.index,1),n.onDragDrop&&n.onDragDrop({originalEvent:l.originalEvent,value:T,dragNode:U,dropNode:se,dropIndex:l.index})}},ae=function(l){if(j(l)){var S=_e(ne()),T=m.current.path.split("-");T.pop();var v=l.path.split("-");v.pop();var _=K(S,T),U=K(S,v),se=_?_.children[m.current.index]:S[m.current.index],Se=Y(m.current.path,l.path);if(_?_.children.splice(m.current.index,1):S.splice(m.current.index,1),l.position<0){var Re=Se?m.current.index>l.index?l.index:l.index-1:l.index;U?U.children.splice(Re,0,se):S.splice(Re,0,se)}else U?U.children.push(se):S.push(se);n.onDragDrop&&n.onDragDrop({originalEvent:l.originalEvent,value:S,dragNode:se,dropNode:U,dropIndex:l.index})}},de=function(l,S){return!(!l||l===S||S.indexOf(l)===0)},O=function(l,S){var T=de(l,S);return T?!(l.indexOf("-")>0&&l.substring(0,l.lastIndexOf("-"))===S):!1},j=function(l){var S,T=de((S=m.current)===null||S===void 0?void 0:S.path,l.path);return T?!(l.position===-1&&Y(m.current.path,l.path)&&m.current.index+1===l.index):!1},Y=function(l,S){return l.length===1&&S.length===1?!0:l.substring(0,l.lastIndexOf("-"))===S.substring(0,S.lastIndexOf("-"))},K=function(l,S){if(S.length===0)return null;var T=parseInt(S[0],10),v=l.children?l.children[T]:l[T];return S.length===1?v:(S.shift(),K(v,S))},we=function(l){return l.leaf===!1?!1:!(l.children&&l.children.length)},Ee=function(l){l.which===13&&l.preventDefault()},Le=function(l){y.current=!0;var S=l.target.value;n.onFilterValueChange?n.onFilterValueChange({originalEvent:l,value:S}):u(S)},Oe=function(l){u(Lt.isNotEmpty(l)?l:"")},ee=function(){if(y.current){if(Lt.isEmpty(I))p.current=n.value;else{p.current=[];var l=n.filterBy.split(","),S=I.toLocaleLowerCase(n.filterLocale),T=n.filterMode==="strict",v=ys(n.value),_;try{for(v.s();!(_=v.n()).done;){var U=_.value,se=vi({},U),Se={searchFields:l,filterText:S,isStrictMode:T};(T&&(re(se,Se)||ce(se,Se))||!T&&(ce(se,Se)||re(se,Se)))&&p.current.push(se)}}catch(Re){v.e(Re)}finally{v.f()}}L({originalEvent:null,value:k.current,navigateFocusToChild:!1}),k.current={},y.current=!1}},re=function(l,S){if(l){var T=!1;if(l.children){var v=lr(l.children);l.children=[];var _=ys(v),U;try{for(_.s();!(U=_.n()).done;){var se=U.value,Se=vi({},se);ce(Se,S)&&(T=!0,l.children.push(Se))}}catch(Re){_.e(Re)}finally{_.f()}}if(T)return k.current[l.key]=!0,!0}},ce=function(l,S){var T=S.searchFields,v=S.filterText,_=S.isStrictMode,U=!1,se=ys(T),Se;try{for(se.s();!(Se=se.n()).done;){var Re=Se.value,he=String(Lt.resolveFieldData(l,Re)).toLocaleLowerCase(n.filterLocale);he.indexOf(v)>-1&&(U=!0)}}catch(ue){se.e(ue)}finally{se.f()}return(!U||_&&!we(l))&&(U=re(l,{searchFields:T,filterText:v,isStrictMode:_})||U),U},le=function(){u("")};Ce.useImperativeHandle(t,function(){return{props:n,filter:Oe,getElement:function(){return b.current}}});var be=function(l,S,T){return Ce.createElement(ha,{hostName:"Tree",key:l.key||l.label,node:l,level:n.level+1,originalOptions:n.value,index:S,last:T,path:String(S),checkboxIcon:n.checkboxIcon,collapseIcon:n.collapseIcon,contextMenuSelectionKey:n.contextMenuSelectionKey,cx:H,disabled:n.disabled,dragdropScope:n.dragdropScope,expandIcon:n.expandIcon,expandedKeys:z,isFiltering:x,isNodeLeaf:we,metaKeySelection:n.metaKeySelection,nodeTemplate:n.nodeTemplate,onClick:n.onNodeClick,onCollapse:n.onCollapse,onContextMenu:n.onContextMenu,onContextMenuSelectionChange:n.onContextMenuSelectionChange,onDoubleClick:n.onNodeDoubleClick,onDragEnd:X,onDragStart:W,onDrop:De,onDropPoint:ae,onExpand:n.onExpand,onSelect:n.onSelect,onSelectionChange:n.onSelectionChange,onToggle:L,onUnselect:n.onUnselect,propagateSelectionDown:n.propagateSelectionDown,propagateSelectionUp:n.propagateSelectionUp,ptm:G,selectionKeys:n.selectionKeys,selectionMode:n.selectionMode,togglerTemplate:n.togglerTemplate,isUnstyled:D})},M=function(){var l=i({className:ri(n.contentClassName,H("emptyMessage")),role:"treeitem"},G("emptyMessage")),S=Lt.getJSXElement(n.emptyMessage,n)||Xc("emptyMessage");return Ce.createElement("li",l,Ce.createElement("span",{className:"p-treenode-content"},S))},$=function(l){var S=i(vi({className:ri(n.contentClassName,H("container")),role:"tree","aria-label":n.ariaLabel,"aria-labelledby":n.ariaLabelledBy,style:n.contentStyle},te),G("container"));return Ce.createElement("ul",S,l)},ie=function(l){return l.map(function(S,T){return be(S,T,T===l.length-1)})},pe=function(){if(n.value){n.filter&&(y.current=!0);var l=ne();if(l.length>0){var S=ie(l);return $(S)}var T=M();return $(T)}return null},ye=function(){if(n.loading){var l=i({className:H("loadingIcon")},G("loadingIcon")),S=n.loadingIcon||Ce.createElement(eu,hr({},l,{spin:!0})),T=dr.getJSXIcon(S,vi({},l),{props:n}),v=i({className:H("loadingOverlay")},G("loadingOverlay"));return Ce.createElement("div",v,T)}return null},me=function(){if(n.filter){var l=n.onFilterValueChange?n.filterValue:a;l=Lt.isNotEmpty(l)?l:"";var S=i({className:H("searchIcon")},G("searchIcon")),T=n.filterIcon||Ce.createElement(tu,S),v=dr.getJSXIcon(T,vi({},S),{props:n}),_=i({className:H("filterContainer")},G("filterContainer")),U=i({type:"text",value:l,autoComplete:"off",className:H("input"),placeholder:n.filterPlaceholder,"aria-label":n.filterPlaceholder,onKeyDown:Ee,onChange:Le,disabled:n.disabled},G("input")),se=Ce.createElement("div",_,Ce.createElement("input",U),v);if(n.filterTemplate){var Se={className:"p-tree-filter-container",element:se,filterOptions:C,filterInputKeyDown:Ee,filterInputChange:Le,filterIconClassName:"p-dropdown-filter-icon",props:n};se=Lt.getJSXElement(n.filterTemplate,Se)}return Ce.createElement(Ce.Fragment,null,se)}return null},N=function(){if(n.showHeader){var l=me(),S=l;if(n.header){var T={filterContainerClassName:"p-tree-filter-container",filterIconClassName:"p-tree-filter-icon",filterInput:{className:"p-tree-filter p-inputtext p-component",onKeyDown:Ee,onChange:Le},filterElement:l,element:S,props:n};S=Lt.getJSXElement(n.header,T)}var v=i({className:H("header")},G("header"));return Ce.createElement("div",v,S)}return null},P=function(){var l=Lt.getJSXElement(n.footer,n),S=i({className:H("footer")},G("footer"));return Ce.createElement("div",S,l)},oe=Pr.getOtherProps(n),te=Lt.reduceKeys(oe,Ot.ARIA_PROPS),Ue=ye(),et=pe(),Pe=N(),it=P(),w=i({ref:b,className:ri(n.className,H("root")),style:n.style,id:n.id},Pr.getOtherProps(n),G("root"));return Ce.createElement("div",w,Ue,Pe,et,it)}));A_.displayName="Tree";export{$c as M,A_ as T,Xr as a,j_ as b,F_ as c,U_ as d,gr as e,ua as f,Js as g,__ as j,qs as l,Yr as m,Ks as r,$r as s,Bl as u,Hs as w};
