{"version":3,"file":"ModelCard-VbN0lOo1.js","sources":["../../node_modules/primereact/card/card.esm.js","../../src/components/ModelStats.tsx","../../src/components/ModelCard.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { useMergeProps } from 'primereact/hooks';\nimport { ObjectUtils, classNames } from 'primereact/utils';\n\nvar classes = {\n  root: 'p-card p-component',\n  header: 'p-card-header',\n  title: 'p-card-title',\n  subTitle: 'p-card-subtitle',\n  content: 'p-card-content',\n  footer: 'p-card-footer',\n  body: 'p-card-body'\n};\nvar styles = \"\\n@layer primereact {\\n    .p-card-header img {\\n        width: 100%;\\n    }\\n}\\n\";\nvar CardBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Card',\n    id: null,\n    header: null,\n    footer: null,\n    title: null,\n    subTitle: null,\n    style: null,\n    className: null,\n    children: undefined\n  },\n  css: {\n    classes: classes,\n    styles: styles\n  }\n});\n\nvar Card = /*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = CardBase.getProps(inProps, context);\n  var elementRef = React.useRef(ref);\n  var _CardBase$setMetaData = CardBase.setMetaData({\n      props: props\n    }),\n    ptm = _CardBase$setMetaData.ptm,\n    cx = _CardBase$setMetaData.cx,\n    isUnstyled = _CardBase$setMetaData.isUnstyled;\n  useHandleStyle(CardBase.css.styles, isUnstyled, {\n    name: 'card'\n  });\n  var createHeader = function createHeader() {\n    var headerProps = mergeProps({\n      className: cx('header')\n    }, ptm('header'));\n    if (props.header) {\n      return /*#__PURE__*/React.createElement(\"div\", headerProps, ObjectUtils.getJSXElement(props.header, props));\n    }\n    return null;\n  };\n  var createBody = function createBody() {\n    var titleProps = mergeProps({\n      className: cx('title')\n    }, ptm('title'));\n    var title = props.title && /*#__PURE__*/React.createElement(\"div\", titleProps, ObjectUtils.getJSXElement(props.title, props));\n    var subTitleProps = mergeProps({\n      className: cx('subTitle')\n    }, ptm('subTitle'));\n    var subTitle = props.subTitle && /*#__PURE__*/React.createElement(\"div\", subTitleProps, ObjectUtils.getJSXElement(props.subTitle, props));\n    var contentProps = mergeProps({\n      className: cx('content')\n    }, ptm('content'));\n    var children = props.children && /*#__PURE__*/React.createElement(\"div\", contentProps, props.children);\n    var footerProps = mergeProps({\n      className: cx('footer')\n    }, ptm('footer'));\n    var footer = props.footer && /*#__PURE__*/React.createElement(\"div\", footerProps, ObjectUtils.getJSXElement(props.footer, props));\n    var bodyProps = mergeProps({\n      className: cx('body')\n    }, ptm('body'));\n    return /*#__PURE__*/React.createElement(\"div\", bodyProps, title, subTitle, children, footer);\n  };\n  React.useEffect(function () {\n    ObjectUtils.combinedRefs(elementRef, ref);\n  }, [elementRef, ref]);\n  var rootProps = mergeProps({\n    id: props.id,\n    ref: elementRef,\n    style: props.style,\n    className: classNames(props.className, cx('root'))\n  }, CardBase.getOtherProps(props), ptm('root'));\n  var header = createHeader();\n  var body = createBody();\n  return /*#__PURE__*/React.createElement(\"div\", rootProps, header, body);\n});\nCard.displayName = 'Card';\n\nexport { Card };\n","import { SupabaseService, ViewModel } from '../services/SupabaseService.ts';\nimport React, { useState } from 'react';\n\nimport { useUserContext } from '../state/UseUserContext.tsx';\n\ninterface ModelStatsProps {\n  model: ViewModel;\n}\n\nexport function ModelStats({ model }: ModelStatsProps) {\n  const [likes, setLikes] = useState(model.likes ?? 0);\n  const userContext = useUserContext();\n\n  const handleLike = (e: React.MouseEvent) => {\n    if (!userContext.user) return;\n    e.stopPropagation();\n    const wasLiked = userContext.likedModelIds.has(model.id);\n    SupabaseService.updateModelLike(model.id, !wasLiked).then(() =>\n      setLikes((l) => l + (wasLiked ? -1 : 1)),\n    );\n    if (wasLiked) {\n      userContext.likedModelIds.delete(model.id);\n    } else {\n      userContext.likedModelIds.add(model.id);\n    }\n  };\n\n  const iLiked = userContext.likedModelIds.has(model.id);\n  const iCommented = userContext.commentedModelIds.has(model.id);\n  return (\n    <div style={{ display: 'flex', gap: 16, alignItems: 'center' }}>\n      <span\n        className={userContext.user ? 'clickable' : undefined}\n        style={{ display: 'flex', alignItems: 'center', gap: 4 }}\n        onClick={handleLike}\n      >\n        <i\n          className=\"pi pi-heart\"\n          style={{\n            color: iLiked ? 'var(--theme-color)' : undefined,\n          }}\n        />\n        {likes}\n      </span>\n      <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n        <i\n          className=\"pi pi-comment\"\n          style={{ color: iCommented ? 'var(--theme-color)' : undefined }}\n        />\n        {model.comments ?? 0}\n      </span>\n    </div>\n  );\n}\n","import { Card } from 'primereact/card';\nimport React, { CSSProperties } from 'react';\nimport { ViewModel } from '../services/SupabaseService.ts';\nimport { ModelStats } from './ModelStats.tsx';\n\ninterface ModelCardProps {\n  model: ViewModel;\n  style?: CSSProperties;\n}\n\nexport function ModelCard(props: ModelCardProps) {\n  const preview = (\n    <img\n      onClick={() => (window.location.hash = `/model/${props.model.id}`)}\n      src={props.model.preview_url}\n      alt={props.model.title}\n      style={{ background: '#111', aspectRatio: '1/1', cursor: 'pointer' }}\n      loading=\"lazy\"\n    />\n  );\n  const subtitle = (\n    <>\n      by <a href={`#/user/${props.model.username}`}>{props.model.username}</a> on{' '}\n      {props.model.created_at}\n    </>\n  );\n  return (\n    <div>\n      <Card\n        key={props.model.id}\n        className=\"model-card\"\n        title={props.model.title}\n        subTitle={subtitle}\n        style={{ ...props.style }}\n        header={preview}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') window.location.hash = `/model/${props.model.id}`;\n        }}\n        footer={<ModelStats model={props.model} />}\n        aria-label={`View model ${props.model.title}`}\n      />\n    </div>\n  );\n}\n"],"names":["classes","styles","CardBase","ComponentBase","Card","React.forwardRef","inProps","ref","mergeProps","useMergeProps","context","React.useContext","PrimeReactContext","props","elementRef","React.useRef","_CardBase$setMetaData","ptm","cx","isUnstyled","useHandleStyle","createHeader","headerProps","React.createElement","ObjectUtils","createBody","titleProps","title","subTitleProps","subTitle","contentProps","children","footerProps","footer","bodyProps","React.useEffect","rootProps","classNames","header","body","ModelStats","model","likes","setLikes","useState","userContext","useUserContext","handleLike","e","wasLiked","SupabaseService","l","iLiked","iCommented","jsxs","jsx","ModelCard","preview","subtitle","Fragment"],"mappings":"wJAOA,IAAIA,EAAU,CACZ,KAAM,qBACN,OAAQ,gBACR,MAAO,eACP,SAAU,kBACV,QAAS,iBACT,OAAQ,gBACR,KAAM,aACR,EACIC,EAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EACTC,EAAWC,EAAc,OAAO,CAClC,aAAc,CACZ,OAAQ,OACR,GAAI,KACJ,OAAQ,KACR,OAAQ,KACR,MAAO,KACP,SAAU,KACV,MAAO,KACP,UAAW,KACX,SAAU,MACd,EACE,IAAK,CACH,QAASH,EACT,OAAQC,CACZ,CACA,CAAC,EAEGG,EAAoBC,EAAAA,WAAiB,SAAUC,EAASC,EAAK,CAC/D,IAAIC,EAAaC,EAAa,EAC1BC,EAAUC,EAAAA,WAAiBC,CAAiB,EAC5CC,EAAQX,EAAS,SAASI,EAASI,CAAO,EAC1CI,EAAaC,EAAAA,OAAaR,CAAG,EAC7BS,EAAwBd,EAAS,YAAY,CAC7C,MAAOW,CACb,CAAK,EACDI,EAAMD,EAAsB,IAC5BE,EAAKF,EAAsB,GAC3BG,EAAaH,EAAsB,WACrCI,EAAelB,EAAS,IAAI,OAAQiB,EAAY,CAC9C,KAAM,MACV,CAAG,EACD,IAAIE,EAAe,UAAwB,CACzC,IAAIC,EAAcd,EAAW,CAC3B,UAAWU,EAAG,QAAQ,CAC5B,EAAOD,EAAI,QAAQ,CAAC,EAChB,OAAIJ,EAAM,OACYU,EAAAA,cAAoB,MAAOD,EAAaE,EAAY,cAAcX,EAAM,OAAQA,CAAK,CAAC,EAErG,IACT,EACIY,EAAa,UAAsB,CACrC,IAAIC,EAAalB,EAAW,CAC1B,UAAWU,EAAG,OAAO,CAC3B,EAAOD,EAAI,OAAO,CAAC,EACXU,EAAQd,EAAM,OAAsBU,EAAAA,cAAoB,MAAOG,EAAYF,EAAY,cAAcX,EAAM,MAAOA,CAAK,CAAC,EACxHe,EAAgBpB,EAAW,CAC7B,UAAWU,EAAG,UAAU,CAC9B,EAAOD,EAAI,UAAU,CAAC,EACdY,EAAWhB,EAAM,UAAyBU,EAAAA,cAAoB,MAAOK,EAAeJ,EAAY,cAAcX,EAAM,SAAUA,CAAK,CAAC,EACpIiB,EAAetB,EAAW,CAC5B,UAAWU,EAAG,SAAS,CAC7B,EAAOD,EAAI,SAAS,CAAC,EACbc,EAAWlB,EAAM,UAAyBU,EAAAA,cAAoB,MAAOO,EAAcjB,EAAM,QAAQ,EACjGmB,EAAcxB,EAAW,CAC3B,UAAWU,EAAG,QAAQ,CAC5B,EAAOD,EAAI,QAAQ,CAAC,EACZgB,EAASpB,EAAM,QAAuBU,EAAAA,cAAoB,MAAOS,EAAaR,EAAY,cAAcX,EAAM,OAAQA,CAAK,CAAC,EAC5HqB,EAAY1B,EAAW,CACzB,UAAWU,EAAG,MAAM,CAC1B,EAAOD,EAAI,MAAM,CAAC,EACd,OAAoBM,EAAAA,cAAoB,MAAOW,EAAWP,EAAOE,EAAUE,EAAUE,CAAM,CAC7F,EACAE,EAAAA,UAAgB,UAAY,CAC1BX,EAAY,aAAaV,EAAYP,CAAG,CAC1C,EAAG,CAACO,EAAYP,CAAG,CAAC,EACpB,IAAI6B,EAAY5B,EAAW,CACzB,GAAIK,EAAM,GACV,IAAKC,EACL,MAAOD,EAAM,MACb,UAAWwB,EAAWxB,EAAM,UAAWK,EAAG,MAAM,CAAC,CACrD,EAAKhB,EAAS,cAAcW,CAAK,EAAGI,EAAI,MAAM,CAAC,EACzCqB,EAASjB,EAAY,EACrBkB,EAAOd,EAAU,EACrB,OAAoBF,EAAAA,cAAoB,MAAOa,EAAWE,EAAQC,CAAI,CACxE,CAAC,EACDnC,EAAK,YAAc,OCpFZ,SAASoC,EAAW,CAAE,MAAAC,GAA0B,CACrD,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAASH,EAAM,OAAS,CAAC,EAC7CI,EAAcC,EAAA,EAEdC,EAAcC,GAAwB,CAC1C,GAAI,CAACH,EAAY,KAAM,OACvBG,EAAE,gBAAA,EACF,MAAMC,EAAWJ,EAAY,cAAc,IAAIJ,EAAM,EAAE,EACvDS,EAAgB,gBAAgBT,EAAM,GAAI,CAACQ,CAAQ,EAAE,KAAK,IACxDN,EAAUQ,GAAMA,GAAKF,EAAW,GAAK,EAAE,CAAA,EAErCA,EACFJ,EAAY,cAAc,OAAOJ,EAAM,EAAE,EAEzCI,EAAY,cAAc,IAAIJ,EAAM,EAAE,CAE1C,EAEMW,EAASP,EAAY,cAAc,IAAIJ,EAAM,EAAE,EAC/CY,EAAaR,EAAY,kBAAkB,IAAIJ,EAAM,EAAE,EAC7D,OACEa,OAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,GAAI,WAAY,QAAA,EAClD,SAAA,CAAAA,EAAAA,KAAC,OAAA,CACC,UAAWT,EAAY,KAAO,YAAc,OAC5C,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,CAAA,EACrD,QAASE,EAET,SAAA,CAAAQ,EAAAA,IAAC,IAAA,CACC,UAAU,cACV,MAAO,CACL,MAAOH,EAAS,qBAAuB,MAAA,CACzC,CAAA,EAEDV,CAAA,CAAA,CAAA,EAEHY,EAAAA,KAAC,OAAA,CAAK,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,CAAA,EACzD,SAAA,CAAAC,EAAAA,IAAC,IAAA,CACC,UAAU,gBACV,MAAO,CAAE,MAAOF,EAAa,qBAAuB,MAAA,CAAU,CAAA,EAE/DZ,EAAM,UAAY,CAAA,CAAA,CACrB,CAAA,EACF,CAEJ,CC3CO,SAASe,EAAU3C,EAAuB,CAC/C,MAAM4C,EACJF,EAAAA,IAAC,MAAA,CACC,QAAS,IAAO,OAAO,SAAS,KAAO,UAAU1C,EAAM,MAAM,EAAE,GAC/D,IAAKA,EAAM,MAAM,YACjB,IAAKA,EAAM,MAAM,MACjB,MAAO,CAAE,WAAY,OAAQ,YAAa,MAAO,OAAQ,SAAA,EACzD,QAAQ,MAAA,CAAA,EAGN6C,EACJJ,EAAAA,KAAAK,EAAAA,SAAA,CAAE,SAAA,CAAA,MACGJ,EAAAA,IAAC,IAAA,CAAE,KAAM,UAAU1C,EAAM,MAAM,QAAQ,GAAK,SAAAA,EAAM,MAAM,QAAA,CAAS,EAAI,MAAI,IAC3EA,EAAM,MAAM,UAAA,EACf,EAEF,aACG,MAAA,CACC,SAAA0C,EAAAA,IAACnD,EAAA,CAEC,UAAU,aACV,MAAOS,EAAM,MAAM,MACnB,SAAU6C,EACV,MAAO,CAAE,GAAG7C,EAAM,KAAA,EAClB,OAAQ4C,EACR,UAAYT,GAAM,EACZA,EAAE,MAAQ,SAAWA,EAAE,MAAQ,OAAK,OAAO,SAAS,KAAO,UAAUnC,EAAM,MAAM,EAAE,GACzF,EACA,OAAQ0C,EAAAA,IAACf,EAAA,CAAW,MAAO3B,EAAM,MAAO,EACxC,aAAY,cAAcA,EAAM,MAAM,KAAK,EAAA,EAVtCA,EAAM,MAAM,EAAA,EAYrB,CAEJ","x_google_ignoreList":[0]}