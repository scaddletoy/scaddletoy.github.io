import{r as l,R as ot,I as pr,u as ct,P as mt,C as gt,a as Et,b as Cn,c as pt,d as ue,D as W,e as We,f as un,g as jt,O as ce,U as hr,h as eo,i as na,k as ns,Z as it,T as rs,l as Je,m as to,n as ss,o as no,p as ro,E as so,j,q as Yt,s as ao,_ as ps,t as Ln,v as ra,K as Cr,w as sa,x as oo,M as hs,y as io}from"../index.js";import{C as Fr,M as lo,a as co}from"./ModelCard-Drve7K6_.js";import{C as uo,z as fo}from"./zip-archives-CwnkgIOs.js";import{T as sr,O as aa,D as ms,I as gs}from"./dropdown.esm-Dhy0QZCf.js";import{B as qt}from"./button.esm-S6-zueF2.js";import{T as po,e as Mt,r as Ir,s as ys,w as Rr,m as vs,u as bs,a as ho,M as mo,j as Or,b as Mr,c as $n,d as go,f as yo}from"./filesystem-DrAWZsLT.js";import{_ as vo,a as bo,b as xo,T as xs,C as wo,S as Eo,c as mr,d as oa}from"./index.esm-CE4dR0UA.js";import{A as as,t as ia,m as ws,s as la,f as kr,a as So,g as To,h as Co}from"./utils-DRB1n_X_.js";import*as Fe from"monaco-editor";import{P as Io}from"./index.esm-0dnXiuBX.js";import{D as Ro}from"./dialog.esm-BZoZToNL.js";import{SupabaseService as fn}from"./SupabaseService-BE7KA2gQ.js";function Oo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function os(t,e){var n=function(a){return e&&l.isValidElement(a)?e(a):a},s=Object.create(null);return t&&l.Children.map(t,function(r){return r}).forEach(function(r){s[r.key]=n(r)}),s}function Mo(t,e){t=t||{},e=e||{};function n(p){return p in e?e[p]:t[p]}var s=Object.create(null),r=[];for(var a in t)a in e?r.length&&(s[a]=r,r=[]):r.push(a);var i,o={};for(var u in e){if(s[u])for(i=0;i<s[u].length;i++){var d=s[u][i];o[s[u][i]]=n(d)}o[u]=n(u)}for(i=0;i<r.length;i++)o[r[i]]=n(r[i]);return o}function Nt(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Po(t,e){return os(t.children,function(n){return l.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Nt(n,"appear",t),enter:Nt(n,"enter",t),exit:Nt(n,"exit",t)})})}function Ao(t,e,n){var s=os(t.children),r=Mo(e,s);return Object.keys(r).forEach(function(a){var i=r[a];if(l.isValidElement(i)){var o=a in e,u=a in s,d=e[a],p=l.isValidElement(d)&&!d.props.in;u&&(!o||p)?r[a]=l.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:Nt(i,"exit",t),enter:Nt(i,"enter",t)}):!u&&o&&!p?r[a]=l.cloneElement(i,{in:!1}):u&&o&&l.isValidElement(d)&&(r[a]=l.cloneElement(i,{onExited:n.bind(null,i),in:d.props.in,exit:Nt(i,"exit",t),enter:Nt(i,"enter",t)}))}}),r}var No=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},_o={component:"div",childFactory:function(e){return e}},is=(function(t){vo(e,t);function e(s,r){var a;a=t.call(this,s,r)||this;var i=a.handleExited.bind(Oo(a));return a.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,a){var i=a.children,o=a.handleExited,u=a.firstRender;return{children:u?Po(r,o):Ao(r,i,o),firstRender:!1}},n.handleExited=function(r,a){var i=os(this.props.children);r.key in i||(r.props.onExited&&r.props.onExited(a),this.mounted&&this.setState(function(o){var u=bo({},o.children);return delete u[r.key],{children:u}}))},n.render=function(){var r=this.props,a=r.component,i=r.childFactory,o=xo(r,["component","childFactory"]),u=this.state.contextValue,d=No(this.state.children).map(i);return delete o.appear,delete o.enter,delete o.exit,a===null?ot.createElement(xs.Provider,{value:u},d):ot.createElement(xs.Provider,{value:u},ot.createElement(a,o,d))},e})(ot.Component);is.propTypes={};is.defaultProps=_o;function Lr(){return Lr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Lr.apply(null,arguments)}var ca=l.memo(l.forwardRef(function(t,e){var n=pr.getPTI(t);return l.createElement("svg",Lr({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{d:"M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z",fill:"currentColor"}))}));ca.displayName="ChevronLeftIcon";function $r(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function jo(t){if(Array.isArray(t))return $r(t)}function Fo(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ua(t,e){if(t){if(typeof t=="string")return $r(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(t,e):void 0}}function ko(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(t){return jo(t)||Fo(t)||ua(t)||ko()}function mn(t){"@babel/helpers - typeof";return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(t)}function $o(t,e){if(mn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(mn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Do(t){var e=$o(t,"string");return mn(e)=="symbol"?e:e+""}function fa(t,e,n){return(e=Do(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bo(t){if(Array.isArray(t))return t}function Uo(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function Vo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tn(t,e){return Bo(t)||Uo(t,e)||ua(t,e)||Vo()}function Es(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Es(Object(n),!0).forEach(function(s){fa(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var zo={navcontent:"p-tabview-nav-content",nav:"p-tabview-nav",inkbar:"p-tabview-ink-bar",panelcontainer:function(e){var n=e.props;return ue("p-tabview-panels",n.panelContainerClassName)},prevbutton:"p-tabview-nav-prev p-tabview-nav-btn p-link",nextbutton:"p-tabview-nav-next p-tabview-nav-btn p-link",root:function(e){var n=e.props;return ue("p-tabview p-component",{"p-tabview-scrollable":n.scrollable})},navcontainer:"p-tabview-nav-container",tab:{header:function(e){var n=e.selected,s=e.disabled,r=e.headerClassName,a=e._className;return ue("p-unselectable-text",{"p-tabview-selected p-highlight":n,"p-disabled":s},r,a)},headertitle:"p-tabview-title",headeraction:"p-tabview-nav-link",closeIcon:"p-tabview-close",content:function(e){var n=e.props,s=e.selected,r=e.getTabProp,a=e.tab,i=e.isSelected,o=e.shouldUseTab,u=e.index;return o(a,u)&&(!n.renderActiveOnly||i(u))?ue(r(a,"contentClassName"),r(a,"className"),"p-tabview-panel",{"p-hidden":!s}):void 0}}},Ho={tab:{header:function(e){var n=e.headerStyle,s=e._style;return Dn(Dn({},n||{}),s||{})},content:function(e){var n=e.props,s=e.getTabProp,r=e.tab,a=e.isSelected,i=e.shouldUseTab,o=e.index;return i(r,o)&&(!n.renderActiveOnly||a(o))?Dn(Dn({},s(r,"contentStyle")||{}),s(r,"style")||{}):void 0}}},Bn=gt.extend({defaultProps:{__TYPE:"TabView",id:null,activeIndex:0,className:null,onBeforeTabChange:null,onBeforeTabClose:null,onTabChange:null,onTabClose:null,panelContainerClassName:null,panelContainerStyle:null,renderActiveOnly:!0,scrollable:!1,style:null,children:void 0},css:{classes:zo,inlineStyles:Ho}}),Ht=gt.extend({defaultProps:{__TYPE:"TabPanel",children:void 0,className:null,closable:!1,closeIcon:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,leftIcon:null,nextButton:null,prevButton:null,rightIcon:null,style:null,visible:!0},getCProp:function(e,n){return ce.getComponentProp(e,n,Ht.defaultProps)},getCProps:function(e){return ce.getComponentProps(e,Ht.defaultProps)},getCOtherProps:function(e){return ce.getComponentDiffProps(e,Ht.defaultProps)}});function Ss(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ss(Object(n),!0).forEach(function(s){fa(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var nr=function(){},da=l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=Bn.getProps(t,s),a=l.useState(r.id),i=tn(a,2),o=i[0],u=i[1],d=l.useState(!0),p=tn(d,2),h=p[0],S=p[1],N=l.useState(!1),M=tn(N,2),F=M[0],T=M[1],f=l.useState([]),E=tn(f,2),v=E[0],w=E[1],b=l.useState(r.activeIndex),x=tn(b,2),c=x[0],m=x[1],g=l.useRef(null),y=l.useRef(null),C=l.useRef(null),k=l.useRef(null),A=l.useRef(null),z=l.useRef(null),_=l.useRef({}),V=r.onTabChange?r.activeIndex:c,I=l.Children.count(r.children),$={props:r,state:{id:o,isPrevButtonDisabled:h,isNextButtonDisabled:F,hiddenTabsState:v,activeIndex:c}},K=Bn.setMetaData(Un({},$)),X=K.ptm,ee=K.ptmo,ae=K.cx,Oe=K.sx,Se=K.isUnstyled;Et(Bn.css.styles,Se,{name:"tabview"});var Z=function(O,U,H){var q={props:O.props,parent:$,context:{index:H,count:I,first:H===0,last:H===I-1,active:H==c,disabled:Ie(O,"disabled")}};return n(X("tab.".concat(U),{tab:q}),X("tabpanel.".concat(U),{tabpanel:q}),X("tabpanel.".concat(U),q),ee(Ie(O,"pt"),U,q))},oe=function(O){return O===V},Ie=function(O,U){return Ht.getCProp(O,U)},ke=function(O){return O&&Ie(O,"visible")&&ce.isValidChild(O,"TabPanel")&&v.every(function(U){return U!==O.key})},Le=function(O){var U=l.Children.map(r.children,function(H,q){if(ke(H))return{tab:H,index:q}});return U.find(function(H){var q=H.tab,ye=H.index;return!Ie(q,"disabled")&&ye>=O})||U.reverse().find(function(H){var q=H.tab,ye=H.index;return!Ie(q,"disabled")&&O>ye})},le=function(O,U){O.preventDefault();var H=r.onBeforeTabClose,q=r.onTabClose,ye=r.children,dt=ye[U].key;H&&H({originalEvent:O,index:U})===!1||(w([].concat(Lo(v),[dt])),q&&q({originalEvent:O,index:U}))},Re=function(O,U,H){Ne(O,U,H)},Ne=function(O,U,H){if(O&&O.preventDefault(),!Ie(U,"disabled")){if(r.onBeforeTabChange&&r.onBeforeTabChange({originalEvent:O,index:H})===!1)return;r.onTabChange?r.onTabChange({originalEvent:O,index:H}):m(H)}B({index:H})},_e=function(O,U,H){switch(O.code){case"ArrowLeft":be(O);break;case"ArrowRight":Be(O);break;case"Home":He(O);break;case"End":$e(O);break;case"PageDown":Ue(O);break;case"PageUp":et(O);break;case"Enter":case"NumpadEnter":case"Space":tt(O,U,H);break}},Be=function(O){var U=Ge(O.target.parentElement);U?D(U):He(O),O.preventDefault()},be=function(O){var U=Ae(O.target.parentElement);U?D(U):$e(O),O.preventDefault()},He=function(O){var U=at();D(U),O.preventDefault()},$e=function(O){var U=pe();D(U),O.preventDefault()},Ue=function(O){B({index:l.Children.count(r.children)-1}),O.preventDefault()},et=function(O){B({index:0}),O.preventDefault()},tt=function(O,U,H){Ne(O,U,H),O.preventDefault()},Ge=function(O){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,H=U?O:O.nextElementSibling;return H?W.getAttribute(H,"data-p-disabled")||W.getAttribute(H,"data-pc-section")==="inkbar"?Ge(H):W.findSingle(H,'[data-pc-section="headeraction"]'):null},Ae=function(O){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,H=U?O:O.previousElementSibling;return H?W.getAttribute(H,"data-p-disabled")||W.getAttribute(H,"data-pc-section")==="inkbar"?Ae(H):W.findSingle(H,'[data-pc-section="headeraction"]'):null},at=function(){return Ge(C.current.firstElementChild,!0)},pe=function(){return Ae(C.current.lastElementChild,!0)},D=function(O){O&&(W.focus(O),B({element:O}))},L=function(){var O=_.current["tab_".concat(V)];k.current.style.width=W.getWidth(O)+"px",k.current.style.left=W.getOffset(O).left-W.getOffset(C.current).left+"px"},B=function(O){var U=O.index,H=O.element,q=H||_.current["tab_".concat(U)];q&&q.scrollIntoView&&q.scrollIntoView({block:"nearest"})},re=function(){var O=y.current,U=O.scrollLeft,H=O.scrollWidth,q=W.getWidth(y.current);S(U===0),T(parseInt(U)===H-q)},me=function(O){r.scrollable&&re(),O.preventDefault()},xe=function(){return[A.current,z.current].reduce(function(O,U){return U?O+W.getWidth(U):O},0)},we=function(){var O=W.getWidth(y.current)-xe(),U=y.current.scrollLeft-O;y.current.scrollLeft=U<=0?0:U},Ye=function(){var O=W.getWidth(y.current)-xe(),U=y.current.scrollLeft+O,H=y.current.scrollWidth-O;y.current.scrollLeft=U>=H?H:U},De=function(){S(!0),T(!1),w([]),r.onTabChange?r.onTabChange({index:V}):m(r.activeIndex)};l.useEffect(function(){L(),re()}),Cn(function(){o||u(hr())}),pt(function(){if(ce.isNotEmpty(v)){var ne=Le(v[v.length-1]);ne&&Re(null,ne.tab,ne.index)}},[v]),pt(function(){r.activeIndex!==c&&B({index:r.activeIndex})},[r.activeIndex]),l.useImperativeHandle(e,function(){return{props:r,reset:De,getElement:function(){return g.current}}});var se=function(O,U){switch(O.preventDefault(),O.stopPropagation(),O.code){case"Space":case"NumpadEnter":case"Enter":le(O,U);break}},P=function(O,U){var H=oe(U),q=Ht.getCProps(O),ye=q.headerStyle,dt=q.headerClassName,Zt=q.style,Qt=q.className,en=q.disabled,Mn=q.leftIcon,Pn=q.rightIcon,It=q.header,An=q.headerTemplate,br=q.closable,xr=q.closeIcon,wr=o+"_header_"+U,Nn=o+U+"_content",Er=en||!H?-1:0,_n=Mn&&We.getJSXIcon(Mn,void 0,{props:r}),Sr=n({className:ae("tab.headertitle")},Z(O,"headertitle",U)),jn=l.createElement("span",Sr,It),Fn=Pn&&We.getJSXIcon(Pn,void 0,{props:r}),kn=n({className:ae("tab.closeIcon"),onClick:function(ve){return le(ve,U)},onKeyDown:function(ve){return se(ve,U)},tabIndex:0,"aria-label":un("close")||"Close"},Z(O,"closeIcon",U)),Tr=xr||l.createElement(sr,kn),J=br?We.getJSXIcon(Tr,Un({},kn),{props:r}):null,R=n({id:wr,role:"tab",className:ae("tab.headeraction"),tabIndex:Er,"aria-controls":Nn,"aria-selected":H,"aria-disabled":en,onClick:function(ve){return Re(ve,O,U)},onKeyDown:function(ve){return _e(ve,O,U)}},Z(O,"headeraction",U)),G=l.createElement("a",R,_n,jn,Fn,J,l.createElement(jt,null));if(An){var he={className:"p-tabview-nav-link",titleClassName:"p-tabview-title",onClick:function(ve){return Re(ve,O,U)},onKeyDown:function(ve){return _e(ve,O,U)},leftIconElement:_n,titleElement:jn,rightIconElement:Fn,element:G,props:r,index:U,selected:H,ariaControls:Nn};G=ce.getJSXElement(An,he)}var ge=n({ref:function(ve){return _.current["tab_".concat(U)]=ve},className:ae("tab.header",{selected:H,disabled:en,headerClassName:dt,_className:Qt}),style:Oe("tab.header",{headerStyle:ye,_style:Zt}),role:"presentation"},Z(O,"root",U),Z(O,"header",U));return l.createElement("li",ge,G)},Q=function(){return l.Children.map(r.children,function(O,U){if(ke(O))return P(O,U)})},ie=function(){var O=Q(),U=n({id:o+"_navcontent",ref:y,className:ae("navcontent"),style:r.style,onScroll:me},X("navcontent")),H=n({ref:C,className:ae("nav"),role:"tablist"},X("nav")),q=n({ref:k,"aria-hidden":"true",role:"presentation",className:ae("inkbar")},X("inkbar"));return l.createElement("div",U,l.createElement("ul",H,O,l.createElement("li",q)))},Me=function(){var O=n({className:ae("panelcontainer"),style:r.panelContainerStyle},X("panelcontainer")),U=l.Children.map(r.children,function(H,q){if(ke(H)&&(!r.renderActiveOnly||oe(q))){var ye=oe(q),dt=o+q+"_content",Zt=o+"_header_"+q,Qt=n({id:dt,className:ae("tab.content",{props:r,selected:ye,getTabProp:Ie,tab:H,isSelected:oe,shouldUseTab:ke,index:q}),style:Oe("tab.content",{props:r,getTabProp:Ie,tab:H,isSelected:oe,shouldUseTab:ke,index:q}),role:"tabpanel","aria-labelledby":Zt},Ht.getCOtherProps(H),Z(H,"root",q),Z(H,"content",q));return l.createElement("div",Qt,r.renderActiveOnly?ye&&Ie(H,"children"):Ie(H,"children"))}});return l.createElement("div",O,U)},yt=function(){var O=n({"aria-hidden":"true"},X("previcon")),U=r.prevButton||l.createElement(ca,O),H=We.getJSXIcon(U,Un({},O),{props:r}),q=n({ref:A,type:"button",className:ae("prevbutton"),"aria-label":un("prevPageLabel"),onClick:function(dt){return we()}},X("prevbutton"));return r.scrollable&&!h?l.createElement("button",q,H,l.createElement(jt,null)):null},ut=function(){var O=n({"aria-hidden":"true"},X("nexticon")),U=r.nextButton||l.createElement(uo,O),H=We.getJSXIcon(U,Un({},O),{props:r}),q=n({ref:z,type:"button",className:ae("nextbutton"),"aria-label":un("nextPageLabel"),onClick:function(dt){return Ye()}},X("nextbutton"));if(r.scrollable&&!F)return l.createElement("button",q,H,l.createElement(jt,null))},St=n({id:o,ref:g,style:r.style,className:ue(r.className,ae("root"))},Bn.getOtherProps(r),X("root")),ft=n({className:ae("navcontainer")},X("navcontainer")),Xt=ie(),Tt=Me(),Ke=yt(),Ct=ut();return l.createElement("div",St,l.createElement("div",ft,Ke,Xt,Ct),Tt)});nr.displayName="TabPanel";da.displayName="TabView";function Ts(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Ko(t){if(Array.isArray(t))return t}function Wo(t,e,n){return(e=Qo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Go(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function Yo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cs(Object(n),!0).forEach(function(s){Wo(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function qo(t,e){if(t==null)return{};var n,s,r=Jo(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jo(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function Xo(t,e){return Ko(t)||Go(t,e)||ei(t,e)||Yo()}function Zo(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qo(t){var e=Zo(t,"string");return typeof e=="symbol"?e:e+""}function ei(t,e){if(t){if(typeof t=="string")return Ts(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ts(t,e):void 0}}function ti(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rs(Object(n),!0).forEach(function(s){ti(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ni(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,a){return a(r)},s)}}function ln(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e.apply(n,[].concat(r,o))}}}function ar(t){return{}.toString.call(t).includes("Object")}function ri(t){return!Object.keys(t).length}function gn(t){return typeof t=="function"}function si(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ai(t,e){return ar(e)||xt("changeType"),Object.keys(e).some(function(n){return!si(t,n)})&&xt("changeField"),e}function oi(t){gn(t)||xt("selectorType")}function ii(t){gn(t)||ar(t)||xt("handlerType"),ar(t)&&Object.values(t).some(function(e){return!gn(e)})&&xt("handlersType")}function li(t){t||xt("initialIsRequired"),ar(t)||xt("initialType"),ri(t)&&xt("initialContent")}function ci(t,e){throw new Error(t[e]||t.default)}var ui={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},xt=ln(ci)(ui),Vn={changes:ai,selector:oi,handler:ii,initial:li};function fi(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vn.initial(t),Vn.handler(e);var n={current:t},s=ln(hi)(n,e),r=ln(pi)(n),a=ln(Vn.changes)(t),i=ln(di)(n);function o(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return Vn.selector(d),d(n.current)}function u(d){ni(s,r,a,i)(d)}return[o,u]}function di(t,e){return gn(e)?e(t.current):e}function pi(t,e){return t.current=Os(Os({},t.current),e),e}function hi(t,e,n){return gn(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var mi={create:fi},gi={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function yi(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e.apply(n,[].concat(r,o))}}}function vi(t){return{}.toString.call(t).includes("Object")}function bi(t){return t||Ms("configIsRequired"),vi(t)||Ms("configType"),t.urls?(xi(),{paths:{vs:t.urls.monacoBase}}):t}function xi(){console.warn(pa.deprecation)}function wi(t,e){throw new Error(t[e]||t.default)}var pa={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ms=yi(wi)(pa),Ei={config:bi},Si=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(a,i){return i(a)},r)}};function ha(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],ha(t[n],e[n]))}),Is(Is({},t),e)}var Ti={type:"cancelation",msg:"operation is manually canceled"};function Pr(t){var e=!1,n=new Promise(function(s,r){t.then(function(a){return e?r(Ti):s(a)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var Ci=["monaco"],Ii=mi.create({config:gi,isInitialized:!1,resolve:null,reject:null,monaco:null}),ma=Xo(Ii,2),In=ma[0],gr=ma[1];function Ri(t){var e=Ei.config(t),n=e.monaco,s=qo(e,Ci);gr(function(r){return{config:ha(r.config,s),monaco:n}})}function Oi(){var t=In(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(gr({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Pr(Ar);if(window.monaco&&window.monaco.editor)return ga(window.monaco),t.resolve(window.monaco),Pr(Ar);Si(Mi,Ai)(Ni)}return Pr(Ar)}function Mi(t){return document.body.appendChild(t)}function Pi(t){var e=document.createElement("script");return t&&(e.src=t),e}function Ai(t){var e=In(function(s){var r=s.config,a=s.reject;return{config:r,reject:a}}),n=Pi("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Ni(){var t=In(function(n){var s=n.config,r=n.resolve,a=n.reject;return{config:s,resolve:r,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;ga(s),t.resolve(s)},function(n){t.reject(n)})}function ga(t){In().monaco||gr({monaco:t})}function _i(){return In(function(t){var e=t.monaco;return e})}var Ar=new Promise(function(t,e){return gr({resolve:t,reject:e})}),ls={config:Ri,init:Oi,__getMonacoInstance:_i},ji={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Nr=ji,Fi={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ki=Fi;function Li({children:t}){return ot.createElement("div",{style:ki.container},t)}var $i=Li,Di=$i;function Bi({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:a,wrapperProps:i}){return ot.createElement("section",{style:{...Nr.wrapper,width:t,height:e},...i},!n&&ot.createElement(Di,null,s),ot.createElement("div",{ref:r,style:{...Nr.fullWidth,...!n&&Nr.hide},className:a}))}var Ui=Bi,ya=l.memo(Ui);function Vi(t){l.useEffect(t,[])}var va=Vi;function zi(t,e,n=!0){let s=l.useRef(!0);l.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var qe=zi;function dn(){}function Vt(t,e,n,s){return Hi(t,s)||Ki(t,e,n,s)}function Hi(t,e){return t.editor.getModel(ba(t,e))}function Ki(t,e,n,s){return t.editor.createModel(e,n,s?ba(t,s):void 0)}function ba(t,e){return t.Uri.parse(e)}function Wi({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:a,modifiedModelPath:i,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:u=!1,theme:d="light",loading:p="Loading...",options:h={},height:S="100%",width:N="100%",className:M,wrapperProps:F={},beforeMount:T=dn,onMount:f=dn}){let[E,v]=l.useState(!1),[w,b]=l.useState(!0),x=l.useRef(null),c=l.useRef(null),m=l.useRef(null),g=l.useRef(f),y=l.useRef(T),C=l.useRef(!1);va(()=>{let _=ls.init();return _.then(V=>(c.current=V)&&b(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>x.current?z():_.cancel()}),qe(()=>{if(x.current&&c.current){let _=x.current.getOriginalEditor(),V=Vt(c.current,t||"",s||n||"text",a||"");V!==_.getModel()&&_.setModel(V)}},[a],E),qe(()=>{if(x.current&&c.current){let _=x.current.getModifiedEditor(),V=Vt(c.current,e||"",r||n||"text",i||"");V!==_.getModel()&&_.setModel(V)}},[i],E),qe(()=>{let _=x.current.getModifiedEditor();_.getOption(c.current.editor.EditorOption.readOnly)?_.setValue(e||""):e!==_.getValue()&&(_.executeEdits("",[{range:_.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),_.pushUndoStop())},[e],E),qe(()=>{x.current?.getModel()?.original.setValue(t||"")},[t],E),qe(()=>{let{original:_,modified:V}=x.current.getModel();c.current.editor.setModelLanguage(_,s||n||"text"),c.current.editor.setModelLanguage(V,r||n||"text")},[n,s,r],E),qe(()=>{c.current?.editor.setTheme(d)},[d],E),qe(()=>{x.current?.updateOptions(h)},[h],E);let k=l.useCallback(()=>{if(!c.current)return;y.current(c.current);let _=Vt(c.current,t||"",s||n||"text",a||""),V=Vt(c.current,e||"",r||n||"text",i||"");x.current?.setModel({original:_,modified:V})},[n,e,r,t,s,a,i]),A=l.useCallback(()=>{!C.current&&m.current&&(x.current=c.current.editor.createDiffEditor(m.current,{automaticLayout:!0,...h}),k(),c.current?.editor.setTheme(d),v(!0),C.current=!0)},[h,d,k]);l.useEffect(()=>{E&&g.current(x.current,c.current)},[E]),l.useEffect(()=>{!w&&!E&&A()},[w,E,A]);function z(){let _=x.current?.getModel();o||_?.original?.dispose(),u||_?.modified?.dispose(),x.current?.dispose()}return ot.createElement(ya,{width:N,height:S,isEditorReady:E,loading:p,_ref:m,className:M,wrapperProps:F})}var Gi=Wi;l.memo(Gi);function Yi(t){let e=l.useRef();return l.useEffect(()=>{e.current=t},[t]),e.current}var qi=Yi,zn=new Map;function Ji({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:a,theme:i="light",line:o,loading:u="Loading...",options:d={},overrideServices:p={},saveViewState:h=!0,keepCurrentModel:S=!1,width:N="100%",height:M="100%",className:F,wrapperProps:T={},beforeMount:f=dn,onMount:E=dn,onChange:v,onValidate:w=dn}){let[b,x]=l.useState(!1),[c,m]=l.useState(!0),g=l.useRef(null),y=l.useRef(null),C=l.useRef(null),k=l.useRef(E),A=l.useRef(f),z=l.useRef(),_=l.useRef(s),V=qi(a),I=l.useRef(!1),$=l.useRef(!1);va(()=>{let ee=ls.init();return ee.then(ae=>(g.current=ae)&&m(!1)).catch(ae=>ae?.type!=="cancelation"&&console.error("Monaco initialization: error:",ae)),()=>y.current?X():ee.cancel()}),qe(()=>{let ee=Vt(g.current,t||s||"",e||r||"",a||n||"");ee!==y.current?.getModel()&&(h&&zn.set(V,y.current?.saveViewState()),y.current?.setModel(ee),h&&y.current?.restoreViewState(zn.get(a)))},[a],b),qe(()=>{y.current?.updateOptions(d)},[d],b),qe(()=>{!y.current||s===void 0||(y.current.getOption(g.current.editor.EditorOption.readOnly)?y.current.setValue(s):s!==y.current.getValue()&&($.current=!0,y.current.executeEdits("",[{range:y.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),y.current.pushUndoStop(),$.current=!1))},[s],b),qe(()=>{let ee=y.current?.getModel();ee&&r&&g.current?.editor.setModelLanguage(ee,r)},[r],b),qe(()=>{o!==void 0&&y.current?.revealLine(o)},[o],b),qe(()=>{g.current?.editor.setTheme(i)},[i],b);let K=l.useCallback(()=>{if(!(!C.current||!g.current)&&!I.current){A.current(g.current);let ee=a||n,ae=Vt(g.current,s||t||"",e||r||"",ee||"");y.current=g.current?.editor.create(C.current,{model:ae,automaticLayout:!0,...d},p),h&&y.current.restoreViewState(zn.get(ee)),g.current.editor.setTheme(i),o!==void 0&&y.current.revealLine(o),x(!0),I.current=!0}},[t,e,n,s,r,a,d,p,h,i,o]);l.useEffect(()=>{b&&k.current(y.current,g.current)},[b]),l.useEffect(()=>{!c&&!b&&K()},[c,b,K]),_.current=s,l.useEffect(()=>{b&&v&&(z.current?.dispose(),z.current=y.current?.onDidChangeModelContent(ee=>{$.current||v(y.current.getValue(),ee)}))},[b,v]),l.useEffect(()=>{if(b){let ee=g.current.editor.onDidChangeMarkers(ae=>{let Oe=y.current.getModel()?.uri;if(Oe&&ae.find(Se=>Se.path===Oe.path)){let Se=g.current.editor.getModelMarkers({resource:Oe});w?.(Se)}});return()=>{ee?.dispose()}}return()=>{}},[b,w]);function X(){z.current?.dispose(),S?h&&zn.set(a,y.current.saveViewState()):y.current.getModel()?.dispose(),y.current.dispose()}return ot.createElement(ya,{width:N,height:M,isEditorReady:b,loading:u,_ref:C,className:F,wrapperProps:T})}var Xi=Ji,Zi=l.memo(Xi),Qi=Zi;function Ft(){return Ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ft.apply(null,arguments)}function Dr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function el(t){if(Array.isArray(t))return Dr(t)}function tl(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xa(t,e){if(t){if(typeof t=="string")return Dr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(t,e):void 0}}function nl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rl(t){return el(t)||tl(t)||xa(t)||nl()}function yn(t){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(t)}function sl(t,e){if(yn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(yn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function al(t){var e=sl(t,"string");return yn(e)=="symbol"?e:e+""}function or(t,e,n){return(e=al(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ol(t){if(Array.isArray(t))return t}function il(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function ll(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nn(t,e){return ol(t)||il(t,e)||xa(t,e)||ll()}var cl={root:function(e){var n=e.props,s=e.focusedState,r=e.context,a=e.overlayVisibleState,i=e.isValueEmpty;return ue("p-treeselect p-component p-inputwrapper",{"p-treeselect-chip":n.display==="chip","p-treeselect-clearable":n.showClear&&!n.disabled,"p-disabled":n.disabled,"p-invalid":n.invalid,"p-focus":s,"p-variant-filled":n.variant?n.variant==="filled":r&&r.inputStyle==="filled","p-inputwrapper-filled":!i,"p-inputwrapper-focus":s||a})},label:function(e){var n=e.props,s=e.isValueEmpty,r=e.getLabel;return ue("p-treeselect-label",{"p-placeholder":r()===n.placeholder,"p-treeselect-label-empty":!n.placeholder&&s})},panel:function(e){var n=e.panelProps,s=e.context;return ue("p-treeselect-panel p-component",n.panelClassName,{"p-input-filled":s&&s.inputStyle==="filled"||Je.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||Je.ripple===!1})},labelContainer:"p-treeselect-label-container",tokenLabel:"p-treeselect-token-label",token:"p-treeselect-token",trigger:"p-treeselect-trigger",triggerIcon:"p-treeselect-trigger-icon p-clickable",emptyMessage:"p-treeselect-empty-message",filterContainer:"p-treeselect-filter-container",filter:"p-treeselect-filter p-inputtext p-component",filterIcon:"p-treeselect-filter-icon",closeIcon:"p-treeselect-close-icon",clearIcon:"p-treeselect-clear-icon p-clickable",closeButton:"p-treeselect-close p-link",header:"p-treeselect-header",wrapper:"p-treeselect-items-wrapper",transition:"p-connected-overlay"},ul=`
@layer primereact {
    .p-treeselect {
        display: inline-flex;
        cursor: pointer;
        position: relative;
        user-select: none;
    }

    .p-treeselect-trigger {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .p-treeselect-label-container {
        overflow: hidden;
        flex: 1 1 auto;
        cursor: pointer;
    }

    .p-treeselect-label  {
        display: block;
        white-space: nowrap;
        cursor: pointer;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .p-treeselect-label-empty {
        overflow: hidden;
        visibility: hidden;
    }

    .p-treeselect-token {
        cursor: default;
        display: inline-flex;
        align-items: center;
        flex: 0 0 auto;
    }

    .p-treeselect .p-treeselect-panel {
        min-width: 100%;
    }

    .p-treeselect-items-wrapper {
        overflow: auto;
    }

    .p-treeselect-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .p-treeselect-filter-container {
        position: relative;
        flex: 1 1 auto;
    }

    .p-treeselect-filter-icon {
        position: absolute;
        top: 50%;
        margin-top: -.5rem;
    }

    .p-treeselect-filter-container .p-inputtext {
        width: 100%;
    }

    .p-treeselect-close {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        overflow: hidden;
        position: relative;
        margin-left: auto;
    }

    .p-treeselect-clear-icon {
        position: absolute;
        top: 50%;
        margin-top: -.5rem;
    }

    .p-fluid .p-treeselect {
        display: flex;
}
}
`,rn=gt.extend({defaultProps:{__TYPE:"TreeSelect",appendTo:null,ariaLabel:null,ariaLabelledBy:null,className:null,closeIcon:null,clearIcon:null,disabled:!1,display:"comma",dropdownIcon:null,emptyMessage:null,expandedKeys:null,filter:!1,filterBy:"label",filterDelay:300,filterIcon:null,filterInputAutoFocus:!0,filterLocale:void 0,filterMode:"lenient",filterPlaceholder:null,filterTemplate:null,filterValue:null,inputId:null,inputRef:null,invalid:!1,variant:null,metaKeySelection:!1,name:null,nodeTemplate:null,onChange:null,onFocus:null,onBlur:null,onFilterValueChange:null,onHide:null,onNodeClick:null,onNodeCollapse:null,onNodeDoubleClick:null,onNodeExpand:null,onNodeSelect:null,onNodeUnselect:null,onShow:null,options:null,panelClassName:null,panelFooterTemplate:null,panelHeaderTemplate:null,panelStyle:null,placeholder:null,resetFilterOnHide:!1,scrollHeight:"400px",selectionMode:"single",showClear:!1,style:null,tabIndex:null,togglerTemplate:null,transitionOptions:null,value:null,valueTemplate:null,children:void 0},css:{classes:cl,styles:ul}});function Ps(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ps(Object(n),!0).forEach(function(s){or(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var wa=l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=t.ptm,a=t.cx,i=function(h,S){return r(h,fl({hostName:t.hostName},S))},o=function(h){h.key==="Escape"&&(h.preventDefault(),t.hide())},u=function(){var h={maxHeight:t.scrollHeight||"auto"},S=n({className:a("panel",{panelProps:t,context:s}),style:t.panelStyle,onKeyDown:o,onClick:t.onClick},i("panel")),N=n({className:a("wrapper"),style:h},i("wrapper")),M=n({classNames:a("transition"),in:t.in,timeout:{enter:120,exit:100},options:t.transitionOptions,unmountOnExit:!0,onEnter:t.onEnter,onEntered:t.onEntered,onExit:t.onExit,onExited:t.onExited},i("transition"));return l.createElement(mr,Ft({nodeRef:e},M),l.createElement("div",Ft({ref:e},S),t.firstHiddenFocusableElementOnOverlay,t.header,l.createElement("div",N,t.children),t.footer,t.lastHiddenFocusableElementOnOverlay))},d=u();return l.createElement(ss,{element:d,appendTo:t.appendTo})});wa.displayName="TreeSelectPanel";function As(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?As(Object(n),!0).forEach(function(s){or(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function sn(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=dl(t))||e){n&&(t=n);var s=0,r=function(){};return{s:r,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,i=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return i=d.done,d},e:function(d){o=!0,a=d},f:function(){try{i||n.return==null||n.return()}finally{if(o)throw a}}}}function dl(t,e){if(t){if(typeof t=="string")return Ns(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ns(t,e):void 0}}function Ns(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}var Ea=l.memo(l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=rn.getProps(t,s),a=l.useState(!1),i=nn(a,2),o=i[0],u=i[1],d=l.useState(!1),p=nn(d,2),h=p[0],S=p[1],N=l.useState(r.expandedKeys),M=nn(N,2),F=M[0],T=M[1],f=eo("",r.filterDelay||0),E=nn(f,3),v=E[0],w=E[1],b=E[2],x=l.useRef(null),c=l.useRef(null),m=l.useRef(null),g=l.useRef(r.inputRef),y=l.useRef(null),C=l.useRef(null),k=l.useRef(null),A=l.useRef(null),z=l.useRef(null),_=l.useRef(!1),V=l.useRef(""),I=r.onToggle?r.expandedKeys:F,$=r.onFilterValueChange?r.filterValue:w,K=ce.isEmpty(r.value),X=r.selectionMode==="single",ee=r.selectionMode==="checkbox",ae=ce.isNotEmpty(r.tooltip),Oe={props:r,state:{focused:o,overlayVisible:h,expandedKeys:I,filterValue:$}},Se=rn.setMetaData(Oe),Z=Se.ptm,oe=Se.cx,Ie=Se.isUnstyled;Et(rn.css.styles,Ie,{name:"treeselect"});var ke={filter:function(R){return Q(R)},reset:function(){return ie()}},Le=na({target:x,overlay:c,listener:function(R,G){var he=G.valid,ge=G.type;he&&(ge==="outside"||s.hideOverlaysOnDocumentScrolling?be():W.isDocument(R.target)||ft())},when:h}),le=nn(Le,2),Re=le[0],Ne=le[1],_e=function(){return It.length?It.map(function(R){return R.label}).join(", "):r.placeholder},Be=function(){S(!0)},be=function(){S(!1),g.current&&W.focus(g.current)},He=function(){u(!0),r.onFocus&&r.onFocus()},$e=function(){u(!1),r.onBlur&&r.onBlur()},Ue=function(R){!r.disabled&&(!c.current||!c.current.contains(R.target))&&!W.isAttributeEquals(R.target,"data-pc-section","closebutton")&&(W.focus(g.current),h?be():Be())},et=function(R){r.onChange&&(C.current=!0,r.onChange({originalEvent:R.originalEvent,value:R.value,stopPropagation:function(){R.originalEvent.stopPropagation()},preventDefault:function(){R.originalEvent.preventDefault()},target:{name:r.name,id:r.id,value:R.value}}))},tt=function(R){r.onChange&&(C.current=!0,r.onChange({originalEvent:R,value:void 0,stopPropagation:function(){R?.stopPropagation()},preventDefault:function(){R?.preventDefault()},target:{name:r.name,id:r.id,value:void 0}}))},Ge=function(R){(R.key==="Enter"||R.code==="Space")&&(tt(R),R.preventDefault())},Ae=function(R){r.onNodeSelect&&r.onNodeSelect(R),X&&be()},at=function(R){r.onNodeUnselect&&r.onNodeUnselect(R),ee&&R.originalEvent.stopPropagation()},pe=function(R){r.onToggle?r.onToggle(R):T(R.value)},D=function(R){b(R.value)},L=function(R){aa.emit("overlay-click",{originalEvent:R,target:x.current})},B=function(R){var G=R.relatedTarget===g.current?W.getFirstFocusableElement(c.current,':not([data-p-hidden-focusable="true"])'):g.current;W.focus(G)},re=function(R){var G=R.relatedTarget===g.current?W.getLastFocusableElement(c.current,':not([data-p-hidden-focusable="true"])'):g.current;W.focus(G)},me=function(R,G){switch(R.code){case"ArrowDown":R.preventDefault(),ne();break;case"ArrowUp":R.preventDefault(),g.current&&W.focus(g.current);break;case"Enter":case"NumpadEnter":R.preventDefault(),G&&be();break;case"Escape":De(R);break}},xe=function(R){switch(R.code){case"ArrowDown":we(R);break;case"Space":case"Enter":case"NumpadEnter":Ye(R);break;case"Escape":De(R);break;case"Tab":h&&(R.preventDefault(),R.shiftKey?ne():se(R));break}},we=function(R){h||(_.current=!0,Be(),R.preventDefault())},Ye=function(R){h?be():we(R),R.preventDefault()},De=function(R){h&&(be(),R.preventDefault())},se=function(R){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;G||h&&P()&&(W.focus(A.current),R.preventDefault())},P=function(){return W.getFocusableElements(c.current,':not([data-p-hidden-focusable="true"])').length>0},Q=function(R){var G=R.target.value;r.onFilterValueChange?r.onFilterValueChange({originalEvent:R,value:G}):b(G)},ie=function(){b("")},Me=function(){it.set("overlay",c.current,s&&s.autoZIndex||Je.autoZIndex,s&&s.zIndex.overlay||Je.zIndex.overlay),W.addStyles(c.current,{position:"absolute",top:"0",left:"0"}),ne(),ft(),Xt()},yt=function(){Re(),r.filter&&r.filterInputAutoFocus&&W.focus(m.current,r.filterInputAutoFocus),r.onShow&&r.onShow()},ut=function(){Ne()},St=function(){r.filter&&r.resetFilterOnHide&&ie(),it.clear(c.current),r.onHide&&r.onHide()},ft=function(){W.alignOverlay(c.current,y.current.parentElement,r.appendTo||s&&s.appendTo||Je.appendTo)},Xt=function(){var R=W.findSingle(c.current,'[data-pc-section="content"][data-p-highlight="true"]');R&&R.scrollIntoView&&R.scrollIntoView({block:"nearest",inline:"start"})},Tt=function(R,G,he){if(R){if(Ke(R,G)&&(he.push(R),delete G[R.key]),Object.keys(G).length&&R.children){var ge=sn(R.children),Te;try{for(ge.s();!(Te=ge.n()).done;){var ve=Te.value;Tt(ve,G,he)}}catch(Ze){ge.e(Ze)}finally{ge.f()}}}else{var je=sn(r.options),nt;try{for(je.s();!(nt=je.n()).done;){var Rt=nt.value;Tt(Rt,G,he)}}catch(Ze){je.e(Ze)}finally{je.f()}}},Ke=function(R,G){return ee?G[R.key]&&G[R.key].checked:G[R.key]},Ct=function(){var R=X?or({},"".concat(r.value),!0):vt({},r.value);T({}),R&&r.options&&O(null,null,R)},ne=function(){var R,G=W.find((R=k.current)===null||R===void 0?void 0:R.getElement(),'[data-pc-section="node"]'),he=rl(G).find(function(ge){return ge.getAttribute("tabindex")==="0"});W.focus(he)},O=function(R,G,he){if(R){if(Ke(R,he)&&(U(G),delete he[R.key]),Object.keys(he).length&&R.children){var ge=sn(R.children),Te;try{for(ge.s();!(Te=ge.n()).done;){var ve=Te.value;G.push(R.key),O(ve,G,he)}}catch(Ze){ge.e(Ze)}finally{ge.f()}}}else{var je=sn(r.options),nt;try{for(je.s();!(nt=je.n()).done;){var Rt=nt.value;O(Rt,[],he)}}catch(Ze){je.e(Ze)}finally{je.f()}}},U=function(R){if(R.length>0){var G=vt({},F||{}),he=sn(R),ge;try{for(he.s();!(ge=he.n()).done;){var Te=ge.value;G[Te]=!0}}catch(ve){he.e(ve)}finally{he.f()}T(G)}},H=function(){var R=[];if(ce.isNotEmpty(r.value)&&r.options){var G=X?or({},"".concat(r.value),!0):vt({},r.value);Tt(null,G,R)}return R};l.useImperativeHandle(e,function(){return{props:r,clear:tt,show:Be,hide:be,focus:function(){return W.focus(g.current)},getElement:function(){return x.current}}}),l.useEffect(function(){ce.combinedRefs(g,r.inputRef)},[g,r.inputRef]),Cn(function(){Ct(),V.current=hr()+"_list",r.autoFocus&&W.focus(g.current,r.autoFocus),ft()}),pt(function(){h&&r.filter&&ft()}),pt(function(){Ct()},[r.options]),pt(function(){_.current&&h&&(_.current=!1,ne())},[h]),pt(function(){h&&F&&ft()},[F]),pt(function(){h&&(C.current||Ct(),C.current=!1)},[r.value]),ns(function(){it.clear(c.current)});var q=function(){var R=n({className:"p-hidden-accessible"},Z("hiddenInputWrapper")),G=n(vt({ref:g,role:"listbox",id:r.inputId,type:"text","aria-expanded":h,"aria-label":r.ariaLabel,"aria-labelledby":r.ariaLabelledBy,"aria-haspopup":"tree","aria-controls":V.current,onFocus:He,onBlur:$e,onKeyDown:xe,disabled:r.disabled,tabIndex:r.tabIndex},br),Z("hiddenInput"));return l.createElement("div",R,l.createElement("input",Ft({},G,{readOnly:!0})))},ye=function(){var R=n({className:oe("token")},Z("token")),G=n({className:oe("tokenLabel")},Z("tokenLabel")),he=n({className:oe("labelContainer")},Z("labelContainer")),ge=n({className:oe("label",{isValueEmpty:K,getLabel:_e})},Z("label")),Te=null;return r.valueTemplate?Te=ce.getJSXElement(r.valueTemplate,It,r):r.display==="comma"?Te=_e()||"empty":r.display==="chip"&&(Te=l.createElement(l.Fragment,null,It&&It.map(function(ve,je){return l.createElement("div",Ft({},R,{key:"".concat(ve.key,"_").concat(je)}),l.createElement("span",G,ve.label))}),K&&(r.placeholder||"empty"))),l.createElement("div",he,l.createElement("div",ge,Te))},dt=function(){var R=n({ref:y,className:oe("trigger"),role:"button","aria-haspopup":"tree","aria-expanded":h},Z("trigger")),G=n({className:oe("triggerIcon")},Z("triggerIcon")),he=r.dropdownIcon||l.createElement(wo,G),ge=We.getJSXIcon(he,vt({},G),{props:r});return l.createElement("div",R,ge)},Zt=function(){if(r.value!=null&&r.showClear&&!r.disabled){var R=n({className:oe("clearIcon"),onPointerUp:tt,tabIndex:r.tabIndex||"0",onKeyDown:Ge,"aria-label":to("clear")},Z("clearIcon")),G=r.clearIcon||l.createElement(sr,R);return We.getJSXIcon(G,vt({},R),{props:r})}return null},Qt=function(){return l.createElement(po,{ref:k,id:V.current,emptyMessage:r.emptyMessage,expandedKeys:I,filter:r.filter,filterBy:r.filterBy,filterDelay:r.filterDelay,filterLocale:r.filterLocale,filterMode:r.filterMode,filterPlaceholder:r.filterPlaceholder,filterValue:$,metaKeySelection:r.metaKeySelection,nodeTemplate:r.nodeTemplate,onCollapse:r.onNodeCollapse,onExpand:r.onNodeExpand,onFilterValueChange:D,onNodeClick:r.onNodeClick,onNodeDoubleClick:r.onNodeDoubleClick,onSelect:Ae,onSelectionChange:et,onToggle:pe,onUnselect:at,selectionKeys:r.value,selectionMode:r.selectionMode,showHeader:!1,togglerTemplate:r.togglerTemplate,value:r.options,pt:Z("tree"),__parentMetadata:{parent:Oe}})},en=function(){if(r.filter){var R=r.onFilterValueChange?r.filterValue:v;R=ce.isNotEmpty(R)?R:"";var G=n({className:oe("filterContainer")},Z("filterContainer")),he=n({ref:m,type:"text",value:R,autoComplete:"off",className:oe("filter"),placeholder:r.filterPlaceholder,onKeyDown:function(Ze){return me(Ze,!1)},onChange:Q,disabled:r.disabled},Z("filter")),ge=n({className:oe("filterIcon")},Z("filterIcon")),Te=r.filterIcon||l.createElement(Eo,ge),ve=We.getJSXIcon(Te,vt({},ge),{props:r}),je=l.createElement("div",G,l.createElement("input",he),ve);if(r.filterTemplate){var nt={className:"p-treeselect-filter-container",element:je,filterOptions:ke,filterInputKeyDown:function(Ze){return me(Ze,function(){})},filterInputChange:Q,filterIconClassName:"p-dropdown-filter-icon",props:r};je=ce.getJSXElement(r.filterTemplate,nt)}return l.createElement(l.Fragment,null,je)}},Mn=function(){var R=en(),G=n({className:oe("closeIcon"),"aria-hidden":!0},Z("closeIcon")),he=r.closeIcon||l.createElement(sr,G),ge=We.getJSXIcon(he,vt({},G),{props:r}),Te=n({type:"button",className:oe("closeButton"),onKeyDown:function(Qa){return me(Qa,!0)},onClick:be,"aria-label":un("close")},Z("closeButton")),ve=n({className:oe("header")},Z("header")),je=l.createElement("button",Te,ge,l.createElement(jt,null)),nt=l.createElement("div",ve,R,je);if(r.panelHeaderTemplate){var Rt={className:"p-treeselect-header",filterElement:R,closeElement:je,closeElementClassName:"p-treeselect-close p-link",closeIconClassName:"p-treeselect-close-icon",onCloseClick:be,element:nt,props:r};return l.createElement("div",null,nt,ce.getJSXElement(r.panelHeaderTemplate,Rt))}return nt},Pn=function(){return ce.getJSXElement(r.panelFooterTemplate,r)},It=H(),An=rn.getOtherProps(r),br=ce.reduceKeys(An,W.ARIA_PROPS),xr=n({ref:A,role:"presentation",className:"p-hidden-accessible p-hidden-focusable",tabIndex:0,onFocus:B,"aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0},Z("firstHiddenFocusableElementOnOverlay")),wr=n({ref:z,role:"presentation",className:"p-hidden-accessible p-hidden-focusable",tabIndex:0,onFocus:re,"aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0},Z("lastHiddenFocusableElementOnOverlay")),Nn=n({ref:x,className:ue(r.className,oe("root",{context:s,focusedState:o,overlayVisibleState:h,isValueEmpty:K})),style:r.style,onClick:Ue},rn.getOtherProps(r),Z("root")),Er=q(),_n=ye(),Sr=dt(),jn=Zt(),Fn=Qt(),kn=Mn(),Tr=Pn();return l.createElement("div",Nn,Er,_n,jn,Sr,l.createElement(wa,{hostName:"TreeSelect",ref:c,appendTo:r.appendTo,panelStyle:r.panelStyle,panelClassName:r.panelClassName,scrollHeight:r.scrollHeight,onClick:L,header:kn,hide:be,footer:Tr,firstHiddenFocusableElementOnOverlay:l.createElement("span",xr),lastHiddenFocusableElementOnOverlay:l.createElement("span",wr),transitionOptions:r.transitionOptions,in:h,onEnter:Me,onEntered:yt,onExit:ut,onExited:St,ptm:Z,cx:oe},Fn),ae&&l.createElement(rs,Ft({target:x,content:r.tooltip,pt:Z("tooltip")},r.tooltipOptions)))}));Ea.displayName="TreeSelect";function vn(t){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(t)}function pl(t,e){if(vn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(vn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hl(t){var e=pl(t,"string");return vn(e)=="symbol"?e:e+""}function ml(t,e,n){return(e=hl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(){return Pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Pt.apply(null,arguments)}function Br(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function gl(t){if(Array.isArray(t))return Br(t)}function yl(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Sa(t,e){if(t){if(typeof t=="string")return Br(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Br(t,e):void 0}}function vl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(t){return gl(t)||yl(t)||Sa(t)||vl()}function bl(t){if(Array.isArray(t))return t}function xl(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function wl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ut(t,e){return bl(t)||xl(t,e)||Sa(t,e)||wl()}var El=`
@layer primereact {
    .p-menu-overlay {
        position: absolute;
        /* Github #3122: Prevent animation flickering  */
        top: -9999px;
        left: -9999px;
    }

    .p-menu ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .p-menu .p-menuitem-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
    }

    .p-menu .p-menuitem-text {
        line-height: 1;
    }
}
`,Sl={root:function(e){var n=e.props,s=e.context;return ue("p-menu p-component",{"p-menu-overlay":n.popup,"p-input-filled":s&&s.inputStyle==="filled"||Je.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||Je.ripple===!1})},menu:"p-menu-list p-reset",content:function(e){var n=e.item;return ue("p-menuitem-content",{"p-disabled":n.disabled})},action:function(e){var n=e.item;return ue("p-menuitem-link",{"p-disabled":n.disabled})},menuitem:function(e){var n=e.focused;return ue("p-menuitem",{"p-focus":n})},submenuHeader:function(e){var n=e.submenu;return ue("p-submenu-header",{"p-disabled":n.disabled})},separator:"p-menu-separator",label:"p-menuitem-text",icon:"p-menuitem-icon",transition:"p-connected-overlay"},Tl={submenuHeader:function(e){var n=e.submenu;return n.style},menuitem:function(e){var n=e.item;return n.style}},Hn=gt.extend({defaultProps:{__TYPE:"Menu",id:null,ariaLabel:null,ariaLabelledBy:null,tabIndex:0,model:null,popup:!1,popupAlignment:"left",style:null,className:null,autoZIndex:!0,baseZIndex:0,appendTo:null,onFocus:null,onBlur:null,transitionOptions:null,onShow:null,onHide:null,children:void 0,closeOnEscape:!0},css:{classes:Sl,styles:El,inlineStyles:Tl}});function js(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Cl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?js(Object(n),!0).forEach(function(s){ml(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Ta=l.memo(l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=Hn.getProps(t,s),a=l.useState(r.id),i=Ut(a,2),o=i[0],u=i[1],d=l.useState(!r.popup),p=Ut(d,2),h=p[0],S=p[1],N=l.useState(-1),M=Ut(N,2),F=M[0],T=M[1],f=l.useState(-1),E=Ut(f,2),v=E[0],w=E[1],b=l.useState(!1),x=Ut(b,2),c=x[0],m=x[1],g=Hn.setMetaData({props:r,state:{id:o,visible:h,focused:c}}),y=g.ptm,C=g.cx,k=g.sx,A=g.isUnstyled,z=function(P,Q){return y(P,{context:Q})};Et(Hn.css.styles,A,{name:"menu"});var _=l.useRef(null),V=l.useRef(null),I=l.useRef(null),$=!!(h&&r.popup&&r.closeOnEscape),K=no("menu",$);ro({callback:function(P){Ae(P)},when:$&&K,priority:[so.MENU,K]});var X=na({target:I,overlay:_,listener:function(P,Q){var ie=Q.valid,Me=Q.type;ie&&(s.hideOverlaysOnDocumentScrolling||Me==="outside"?(Ae(P),T(-1)):W.isDocument(P.target)||W.absolutePosition(_.current,I.current,r.popupAlignment))},when:h}),ee=Ut(X,2),ae=ee[0],Oe=ee[1],Se=function(P){r.popup&&aa.emit("overlay-click",{originalEvent:P,target:I.current})},Z=function(P,Q,ie){if(Q.disabled){P.preventDefault();return}Q.command&&Q.command({originalEvent:P,item:Q}),r.popup&&Ae(P),!r.popup&&F!==ie&&T(ie),Q.url||(P.preventDefault(),P.stopPropagation())},oe=function(P,Q){P&&r.popup&&F!==Q&&T(Q)},Ie=function(P){m(!0),r.popup||(v!==-1?(Ue(v),w(-1)):Ue(0)),r.onFocus&&r.onFocus(P)},ke=function(P){var Q=P.currentTarget,ie=P.relatedTarget;ie&&Q.contains(ie)||(m(!1),T(-1),r.onBlur&&r.onBlur(P))},Le=function(P){switch(P.code){case"ArrowDown":le(P);break;case"ArrowUp":Re(P);break;case"Home":Ne(P);break;case"End":_e(P);break;case"Enter":case"NumpadEnter":Be(P);break;case"Space":be(P);break;case"Escape":r.popup&&(W.focus(I.current),Ae(P));case"Tab":r.popup&&h&&Ae(P);break}},le=function(P){var Q=He(F);Ue(Q),P.preventDefault()},Re=function(P){if(P.altKey&&r.popup)W.focus(I.current),Ae(P),P.preventDefault();else{var Q=$e(F);Ue(Q),P.preventDefault()}},Ne=function(P){Ue(0),P.preventDefault()},_e=function(P){Ue(W.find(_.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]').length-1),P.preventDefault()},Be=function(P){var Q=W.findSingle(_.current,'li[id="'.concat("".concat(F),'"]')),ie=Q&&W.findSingle(Q,'a[data-pc-section="action"]');r.popup&&W.focus(I.current),ie?ie.click():Q&&Q.click(),P.preventDefault()},be=function(P){Be(P)},He=function(P){var Q=W.find(_.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),ie=_s(Q).findIndex(function(Me){return Me.id===P});return ie>-1?ie+1:0},$e=function(P){var Q=W.find(_.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),ie=_s(Q).findIndex(function(Me){return Me.id===P});return ie>-1?ie-1:0},Ue=function(P){var Q=W.find(_.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),ie=P>=Q.length?Q.length-1:P<0?0:P;ie>-1&&T(Q[ie].getAttribute("id"))},et=function(){return F!==-1?F:null},tt=function(P){r.popup&&(h?Ae(P):Ge(P))},Ge=function(P){I.current=P.currentTarget,S(!0),r.onShow&&r.onShow(P)},Ae=function(P){I.current=P.currentTarget,S(!1),r.onHide&&r.onHide(P)},at=function(){W.addStyles(_.current,{position:"absolute",top:"0",left:"0"}),it.set("menu",_.current,s&&s.autoZIndex||Je.autoZIndex,r.baseZIndex||s&&s.zIndex.menu||Je.zIndex.menu),W.absolutePosition(_.current,I.current,r.popupAlignment),r.popup&&(W.focus(V.current),Ue(0))},pe=function(){ae()},D=function(){I.current=null,Oe()},L=function(){it.clear(_.current)};Cn(function(){o||u(hr())}),ns(function(){it.clear(_.current)}),l.useImperativeHandle(e,function(){return{props:r,toggle:tt,show:Ge,hide:Ae,getElement:function(){return _.current},getTarget:function(){return I.current}}});var B=function(P,Q){var ie=o+"_sub_"+Q,Me=P.items.map(function(ut,St){return me(ut,St,ie)}),yt=n({id:ie,role:"none",className:ue(P.className,C("submenuHeader",{submenu:P})),style:k("submenuHeader",{submenu:P}),"data-p-disabled":P.disabled},y("submenuHeader"));return l.createElement(l.Fragment,{key:ie},l.createElement("li",Pt({},yt,{key:ie}),P.label),Me)},re=function(P,Q){if(P.visible===!1)return null;var ie=o+"_separator_"+Q,Me=n({id:ie,className:ue(P.className,C("separator")),role:"separator"},y("separator"));return l.createElement("li",Pt({},Me,{key:ie}))},me=function(P,Q){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(P.visible===!1)return null;var Me={item:P,index:Q,parentId:ie},yt=ue("p-menuitem-link",{"p-disabled":P.disabled}),ut=ue("p-menuitem-icon",P.icon),St=n({className:C("icon")},z("icon",Me)),ft=We.getJSXIcon(P.icon,Cl({},St),{props:r}),Xt=n({className:C("label")},z("label",Me)),Tt=P.label&&l.createElement("span",Xt,P.label),Ke=P.id||(ie||o)+"_"+Q,Ct=n({onClick:function(ye){return Z(ye,P,Ke)},onMouseMove:function(ye){return oe(ye,Ke)},className:C("content",{item:P})},z("content",Me)),ne=n({href:P.url||"#",className:C("action",{item:P}),onFocus:function(ye){return ye.stopPropagation()},target:P.target,tabIndex:"-1","aria-label":P.label,"aria-disabled":P.disabled,"data-p-disabled":P.disabled},z("action",Me)),O=l.createElement("div",Ct,l.createElement("a",ne,ft,Tt,l.createElement(jt,null)));if(P.template){var U={onClick:function(ye){return Z(ye,P,Ke)},onMouseMove:function(ye){return oe(ye,Ke)},className:yt,tabIndex:"-1",labelClassName:"p-menuitem-text",iconClassName:ut,element:O,props:r};O=ce.getJSXElement(P.template,P,U)}var H=n({id:Ke,className:ue(P.className,C("menuitem",{focused:F===Ke})),onClick:function(ye){return Z(ye,P,Ke)},style:k("menuitem",{item:P}),role:"menuitem","aria-label":P.label,"aria-disabled":P.disabled,"data-p-focused":et()===Ke,"data-p-disabled":P.disabled||!1},z("menuitem",Me));return l.createElement("li",Pt({},H,{key:Ke}),O)},xe=function(P,Q){return P.visible===!1?null:P.separator?re(P,Q):P.items?B(P,Q):me(P,Q)},we=function(){return r.model.map(xe)},Ye=function(){if(r.model){var P=we(),Q=n({className:ue(r.className,C("root",{context:s})),style:r.style,onClick:function(ut){return Se(ut)}},Hn.getOtherProps(r),y("root")),ie=n({ref:V,className:C("menu"),id:o+"_list",tabIndex:r.tabIndex||"0",role:"menu","aria-label":r.ariaLabel,"aria-labelledby":r.ariaLabelledBy,"aria-activedescendant":c?et():void 0,onFocus:Ie,onKeyDown:Le,onBlur:ke},y("menu")),Me=n({classNames:C("transition"),in:h,timeout:{enter:120,exit:100},options:r.transitionOptions,unmountOnExit:!0,onEnter:at,onEntered:pe,onExit:D,onExited:L},y("transition"));return l.createElement(mr,Pt({nodeRef:_},Me),l.createElement("div",Pt({id:r.id,ref:_},Q),l.createElement("ul",ie,P)))}return null},De=Ye();return r.popup?l.createElement(ss,{element:De,appendTo:r.appendTo}):De}));Ta.displayName="Menu";function Il(t,e=500){const n=l.useRef(null);return l.useCallback(s=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(s)},e)},[t,e])}const Rl=function(e){const[n,s]=l.useState(null),[r,a]=l.useState(null),[i,o]=l.useState([]),[u,d]=l.useState(e.path),[p,h]=l.useState(!0),[S,N]=l.useState(""),[M,F]=l.useState({}),[T,f]=l.useState(e.homeFileProp??""),E=l.useRef(null),v=l.useRef(null),[w,b]=l.useState(!1),x=(I,$)=>alert(`${I}: ${$}`);function c(I="/"){const $=[];try{const K=ho(I);K.sort();for(const X of K){const ee=I==="/"?`/${X}`:`${I}/${X}`;Mt(ee)&&ys(ee).isDirectory()?$.push({key:ee,label:X+"/",data:ee,selectable:!1,children:c(ee),icon:"pi pi-folder"}):$.push({key:ee,label:X,data:ee,selectable:!0,icon:"pi pi-file"})}}catch(K){x("Failed to build tree",K)}return $}const m=()=>{if(!e.hideTopBar)try{const I=c("/");o(I),!u&&I.length&&d(T)}catch(I){x("Failed to list files",I)}},g=()=>{const I=prompt("Enter new file name (with extension):","/newfile.scad");if(I&&I.startsWith("/"))try{Mt(I)?alert("File already exists!"):(vs(I.substring(0,I.lastIndexOf("/")),{recursive:!0}),Rr(I,""),d(I),m())}catch($){x("Failed to create file",$)}},y=()=>{const I=prompt("Enter new name for current file:",u);if(I&&I.startsWith("/"))try{Mt(I)?alert("File already exists!"):(vs(I.substring(0,I.lastIndexOf("/")),{recursive:!0}),Rr(I,Ir(u,"utf-8")),bs(u),d(I),m())}catch($){x("Failed to rename file",$)}},C=()=>{if(window.confirm(`Delete ${u}?`))try{bs(u),m(),d("")}catch(I){x("Failed to delete file",I)}},k=Il(I=>{if(!(p||!u))try{if(console.debug("ZenMonacoPrime",`Saving ${u}`),Rr(u,I??""),I==S)return;e.onSave?.(I)}catch($){x("Failed to save file",$)}},1e3),A=l.useCallback(I=>{I&&k(I)},[k]),z=(I,$)=>{I.addAction({id:"openscad-save-do-nothing",label:"Save (disabled)",keybindings:[$.KeyMod.CtrlCmd|$.KeyCode.KeyS],run:()=>{}}),$.editor.addKeybindingRules([{keybinding:$.KeyMod.CtrlCmd|$.KeyCode.KeyD,command:"editor.action.deleteLines"},{keybinding:$.KeyMod.CtrlCmd|$.KeyMod.Shift|$.KeyCode.KeyD,command:"editor.action.copyLinesDownAction"},{keybinding:$.KeyMod.CtrlCmd|$.KeyCode.KeyK,command:"editor.action.quickCommand"},{keybinding:$.KeyCode.F8,command:void 0}]),s(I),a($)};l.useEffect(()=>{if(!n||!r)return;const I=n.getModel();I&&r.editor.setModelMarkers(I,"openscad",e.markers??[])},[e.markers]),l.useEffect(()=>{e.isInitializing||!u||S!=""||(async()=>{try{if(console.debug("ZenMonacoPrime",`Loading ${u}`),Mt(u)){const I=Ir(u,"utf-8");I!=S&&N(I)}else N("");m(),h(!1)}catch(I){x("Failed to read file",I),N("")}})()},[e.isInitializing,u,m]),l.useEffect(()=>{if(e.reloadKey!==void 0&&e.reloadKey>0&&(console.debug("ZenMonacoPrime",`Reloading ${u}`),Mt(u))){const I=Ir(u,"utf-8");n?.setValue(I),h(!1)}},[e.reloadKey]),l.useEffect(()=>{const I=()=>{v.current&&b(v.current.offsetWidth<600)};return window.addEventListener("resize",I),I(),()=>window.removeEventListener("resize",I)},[]);const _=u||null,V=[{label:"New File",icon:"pi pi-plus",command:g},{label:"Rename",icon:"pi pi-pencil",command:y},{label:"Delete",icon:"pi pi-trash",command:C},{separator:!0},{label:"Set as Home",icon:"pi pi-home",command:()=>f(u)}];return j.jsxs("div",{style:{display:"flex",flexDirection:"column",...e.style},children:[!e.hideTopBar&&j.jsxs("div",{style:{flex:0,display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:"#222"},children:[j.jsxs("div",{style:{position:"relative",flex:0},children:[j.jsx(Ta,{model:V,popup:!0,ref:E}),j.jsx(qt,{"aria-label":"Editor menu",style:{minWidth:48,minHeight:48},title:"Menu",onClick:I=>E.current&&E.current.toggle(I),disabled:p,icon:"pi pi-bars",text:!0})]}),j.jsx("div",{style:{position:"relative",flex:1,display:"flex",alignItems:"center"},children:j.jsx(Ea,{value:_,options:i,expandedKeys:M,onToggle:I=>F(I.value),onChange:I=>{const $=I.value;typeof $=="string"&&Mt($)&&!ys($).isDirectory()&&d($)},selectionMode:"single",filter:!0,placeholder:"Select a file",className:"w-full",style:{minWidth:300},disabled:p,panelStyle:{maxHeight:600,overflowY:"auto"}})}),j.jsx("div",{style:{position:"relative",flex:0},children:j.jsx(qt,{"aria-label":"Go to HomePage",title:"Go to HomePage",style:{minWidth:48,minHeight:48,color:T?"#fff":"#888"},disabled:!T,onClick:()=>T&&d(T),icon:"pi pi-home",text:!0})})]}),j.jsx("div",{ref:v,style:{flex:1},children:p?j.jsx(Yt,{text:"Loading filesystem"}):j.jsx(Qi,{width:"100%",defaultLanguage:"openscad",value:S,path:u,onChange:A,theme:"vs-dark",onMount:z,options:{automaticLayout:!0,fontSize:16,lineNumbers:w?"off":"on",minimap:{enabled:!w}},loading:j.jsx(Yt,{text:"Loading monaco editor"})})})]})};function Ur(){return Ur=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ur.apply(null,arguments)}var Ca=l.memo(l.forwardRef(function(t,e){var n=pr.getPTI(t);return l.createElement("svg",Ur({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{d:"M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z",fill:"currentColor"}),l.createElement("path",{d:"M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z",fill:"currentColor"}),l.createElement("path",{d:"M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z",fill:"currentColor"}))}));Ca.displayName="ExclamationTriangleIcon";function Vr(){return Vr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Vr.apply(null,arguments)}var Ia=l.memo(l.forwardRef(function(t,e){var n=pr.getPTI(t);return l.createElement("svg",Vr({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z",fill:"currentColor"}))}));Ia.displayName="InfoCircleIcon";function zr(){return zr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zr.apply(null,arguments)}var Ra=l.memo(l.forwardRef(function(t,e){var n=pr.getPTI(t);return l.createElement("svg",zr({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z",fill:"currentColor"}))}));Ra.displayName="TimesCircleIcon";function Hr(){return Hr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Hr.apply(null,arguments)}function Kr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Ol(t){if(Array.isArray(t))return Kr(t)}function Ml(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oa(t,e){if(t){if(typeof t=="string")return Kr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(t,e):void 0}}function Pl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(t){return Ol(t)||Ml(t)||Oa(t)||Pl()}function Al(t){if(Array.isArray(t))return t}function Nl(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function _l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(t,e){return Al(t)||Nl(t,e)||Oa(t,e)||_l()}function bn(t){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(t)}function jl(t,e){if(bn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(bn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fl(t){var e=jl(t,"string");return bn(e)=="symbol"?e:e+""}function Ma(t,e,n){return(e=Fl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kl=`
@layer primereact {
    .p-toast {
        width: calc(100% - var(--toast-indent, 0px));
        max-width: 25rem;
    }
    
    .p-toast-message-icon {
        flex-shrink: 0;
    }
    
    .p-toast-message-content {
        display: flex;
        align-items: flex-start;
    }
    
    .p-toast-message-text {
        flex: 1 1 auto;
    }
    
    .p-toast-summary {
        overflow-wrap: anywhere;
    }
    
    .p-toast-detail {
        overflow-wrap: anywhere;
    }
    
    .p-toast-top-center {
        transform: translateX(-50%);
    }
    
    .p-toast-bottom-center {
        transform: translateX(-50%);
    }
    
    .p-toast-center {
        min-width: 20vw;
        transform: translate(-50%, -50%);
    }
    
    .p-toast-icon-close {
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
    }
    
    .p-toast-icon-close.p-link {
        cursor: pointer;
    }
    
    /* Animations */
    .p-toast-message-enter {
        opacity: 0;
        transform: translateY(50%);
    }
    
    .p-toast-message-enter-active {
        opacity: 1;
        transform: translateY(0);
        transition: transform 0.3s, opacity 0.3s;
    }
    
    .p-toast-message-enter-done {
        transform: none;
    }
    
    .p-toast-message-exit {
        opacity: 1;
        max-height: 1000px;
    }
    
    .p-toast .p-toast-message.p-toast-message-exit-active {
        opacity: 0;
        max-height: 0;
        margin-bottom: 0;
        overflow: hidden;
        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;
    }
}
`,Ll={root:function(e){var n=e.props,s=e.context;return ue("p-toast p-component p-toast-"+n.position,n.className,{"p-input-filled":s&&s.inputStyle==="filled"||Je.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||Je.ripple===!1})},message:{message:function(e){var n=e.severity;return ue("p-toast-message",Ma({},"p-toast-message-".concat(n),n))},content:"p-toast-message-content",buttonicon:"p-toast-icon-close-icon",closeButton:"p-toast-icon-close p-link",icon:"p-toast-message-icon",text:"p-toast-message-text",summary:"p-toast-summary",detail:"p-toast-detail"},transition:"p-toast-message"},$l={root:function(e){var n=e.props;return{position:"fixed",top:n.position==="top-right"||n.position==="top-left"||n.position==="top-center"?"20px":n.position==="center"?"50%":null,right:(n.position==="top-right"||n.position==="bottom-right")&&"20px",bottom:(n.position==="bottom-left"||n.position==="bottom-right"||n.position==="bottom-center")&&"20px",left:n.position==="top-left"||n.position==="bottom-left"?"20px":n.position==="center"||n.position==="top-center"||n.position==="bottom-center"?"50%":null}}},Kn=gt.extend({defaultProps:{__TYPE:"Toast",id:null,className:null,content:null,style:null,baseZIndex:0,position:"top-right",transitionOptions:null,appendTo:"self",onClick:null,onRemove:null,onShow:null,onHide:null,onMouseEnter:null,onMouseLeave:null,children:void 0},css:{classes:Ll,styles:kl,inlineStyles:$l}});function Fs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fs(Object(n),!0).forEach(function(s){Ma(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Pa=l.memo(l.forwardRef(function(t,e){var n=ct(),s=t.messageInfo,r=t.metaData,a=t.ptCallbacks,i=a.ptm,o=a.ptmo,u=a.cx,d=t.index,p=s.message,h=p.severity,S=p.content,N=p.summary,M=p.detail,F=p.closable,T=p.life,f=p.sticky,E=p.className,v=p.style,w=p.contentClassName,b=p.contentStyle,x=p.icon,c=p.closeIcon,m=p.pt,g={index:d},y=Pe(Pe({},r),g),C=l.useState(!1),k=Wr(C,2),A=k[0],z=k[1],_=ao(function(){K()},T||3e3,!f&&!A),V=Wr(_,1),I=V[0],$=function(le,Re){return i(le,Pe({hostName:t.hostName},Re))},K=function(){I(),t.onClose&&t.onClose(s)},X=function(le){t.onClick&&!(W.hasClass(le.target,"p-toast-icon-close")||W.hasClass(le.target,"p-toast-icon-close-icon"))&&t.onClick(s.message)},ee=function(le){t.onMouseEnter&&t.onMouseEnter(le),!le.defaultPrevented&&(f||(I(),z(!0)))},ae=function(le){t.onMouseLeave&&t.onMouseLeave(le),!le.defaultPrevented&&(f||z(!1))},Oe=function(){var le=n({className:u("message.buttonicon")},$("buttonicon",y),o(m,"buttonicon",Pe(Pe({},g),{},{hostName:t.hostName}))),Re=c||l.createElement(sr,le),Ne=We.getJSXIcon(Re,Pe({},le),{props:t}),_e=n({type:"button",className:u("message.closeButton"),onClick:K,"aria-label":t.ariaCloseLabel||un("close")},$("closeButton",y),o(m,"closeButton",Pe(Pe({},g),{},{hostName:t.hostName})));return F!==!1?l.createElement("div",null,l.createElement("button",_e,Ne,l.createElement(jt,null))):null},Se=function(){if(s){var le=ce.getJSXElement(S,{message:s.message,onClick:X,onClose:K}),Re=n({className:u("message.icon")},$("icon",y),o(m,"icon",Pe(Pe({},g),{},{hostName:t.hostName}))),Ne=x;if(!x)switch(h){case"info":Ne=l.createElement(Ia,Re);break;case"warn":Ne=l.createElement(Ca,Re);break;case"error":Ne=l.createElement(Ra,Re);break;case"success":Ne=l.createElement(oa,Re);break}var _e=We.getJSXIcon(Ne,Pe({},Re),{props:t}),Be=n({className:u("message.text")},$("text",y),o(m,"text",Pe(Pe({},g),{},{hostName:t.hostName}))),be=n({className:u("message.summary")},$("summary",y),o(m,"summary",Pe(Pe({},g),{},{hostName:t.hostName}))),He=n({className:u("message.detail")},$("detail",y),o(m,"detail",Pe(Pe({},g),{},{hostName:t.hostName})));return le||l.createElement(l.Fragment,null,_e,l.createElement("div",Be,l.createElement("span",be,N),M&&l.createElement("div",He,M)))}return null},Z=Se(),oe=Oe(),Ie=n({ref:e,className:ue(E,u("message.message",{severity:h})),style:v,role:"alert","aria-live":"assertive","aria-atomic":"true",onClick:X,onMouseEnter:ee,onMouseLeave:ae},$("message",y),o(m,"root",Pe(Pe({},g),{},{hostName:t.hostName}))),ke=n({className:ue(w,u("message.content")),style:b},$("content",y),o(m,"content",Pe(Pe({},g),{},{hostName:t.hostName})));return l.createElement("div",Ie,l.createElement("div",ke,Z,oe))}));Pa.displayName="ToastMessage";var ks=0,cs=l.memo(l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=Kn.getProps(t,s),a=l.useState([]),i=Wr(a,2),o=i[0],u=i[1],d=l.useRef(null),p={props:r,state:{messages:o}},h=Kn.setMetaData(p);Et(Kn.css.styles,h.isUnstyled,{name:"toast"});var S=function(c){c&&u(function(m){return N(m,c,!0)})},N=function(c,m,g){var y;if(Array.isArray(m)){var C=m.reduce(function(A,z){return A.push({_pId:ks++,message:z}),A},[]);g?y=c?[].concat(_r(c),_r(C)):C:y=C}else{var k={_pId:ks++,message:m};g?y=c?[].concat(_r(c),[k]):[k]:y=[k]}return y},M=function(){it.clear(d.current),u([])},F=function(c){u(function(m){return N(m,c,!1)})},T=function(c){var m=ce.isNotEmpty(c._pId)?c._pId:c.message||c;u(function(g){return g.filter(function(y){return y._pId!==c._pId&&!ce.deepEquals(y.message,m)})}),r.onRemove&&r.onRemove(c.message||m)},f=function(c){T(c)},E=function(){r.onShow&&r.onShow()},v=function(){o.length===1&&it.clear(d.current),r.onHide&&r.onHide()};pt(function(){it.set("toast",d.current,s&&s.autoZIndex||Je.autoZIndex,r.baseZIndex||s&&s.zIndex.toast||Je.zIndex.toast)},[o,r.baseZIndex]),ns(function(){it.clear(d.current)}),l.useImperativeHandle(e,function(){return{props:r,show:S,replace:F,remove:T,clear:M,getElement:function(){return d.current}}});var w=function(){var c=n({ref:d,id:r.id,className:h.cx("root",{context:s}),style:h.sx("root")},Kn.getOtherProps(r),h.ptm("root")),m=n({classNames:h.cx("transition"),timeout:{enter:300,exit:300},options:r.transitionOptions,unmountOnExit:!0,onEntered:E,onExited:v},h.ptm("transition"));return l.createElement("div",c,l.createElement(is,null,o&&o.map(function(g,y){var C=l.createRef();return l.createElement(mr,Hr({nodeRef:C,key:g._pId},m),t.content?ce.getJSXElement(t.content,{message:g.message}):l.createElement(Pa,{hostName:"Toast",ref:C,messageInfo:g,index:y,onClick:r.onClick,onClose:f,onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,closeIcon:r.closeIcon,ptCallbacks:h,metaData:p}))})))},b=w();return l.createElement(ss,{element:b,appendTo:r.appendTo})}));cs.displayName="Toast";var Aa=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],cn=t=>{let e=0;for(let n=0;n<t.length;n++){let s=t[n],r=Aa.indexOf(s);e=e*83+r}return e},an=(t,e)=>{var n="";for(let s=1;s<=e;s++){let r=Math.floor(t)/Math.pow(83,e-s)%83;n+=Aa[Math.floor(r)]}return n},Kt=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Wt=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},Dl=t=>t<0?-1:1,Gt=(t,e)=>Dl(t)*Math.pow(Math.abs(t),e),ir=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},Bl=t=>{if(!t||t.length<6)throw new ir("The blurhash string must be at least 6 characters");let e=cn(t[0]),n=Math.floor(e/9)+1,s=e%9+1;if(t.length!==4+2*s*n)throw new ir(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*s*n}`)},Ul=t=>{let e=t>>16,n=t>>8&255,s=t&255;return[Kt(e),Kt(n),Kt(s)]},Vl=(t,e)=>{let n=Math.floor(t/361),s=Math.floor(t/19)%19,r=t%19;return[Gt((n-9)/9,2)*e,Gt((s-9)/9,2)*e,Gt((r-9)/9,2)*e]},zl=(t,e,n,s)=>{Bl(t),s=s|1;let r=cn(t[0]),a=Math.floor(r/9)+1,i=r%9+1,o=(cn(t[1])+1)/166,u=new Array(i*a);for(let h=0;h<u.length;h++)if(h===0){let S=cn(t.substring(2,6));u[h]=Ul(S)}else{let S=cn(t.substring(4+h*2,6+h*2));u[h]=Vl(S,o*s)}let d=e*4,p=new Uint8ClampedArray(d*n);for(let h=0;h<n;h++)for(let S=0;S<e;S++){let N=0,M=0,F=0;for(let v=0;v<a;v++)for(let w=0;w<i;w++){let b=Math.cos(Math.PI*S*w/e)*Math.cos(Math.PI*h*v/n),x=u[w+v*i];N+=x[0]*b,M+=x[1]*b,F+=x[2]*b}let T=Wt(N),f=Wt(M),E=Wt(F);p[4*S+0+h*d]=T,p[4*S+1+h*d]=f,p[4*S+2+h*d]=E,p[4*S+3+h*d]=255}return p},Hl=zl,Ls=4,Kl=(t,e,n,s)=>{let r=0,a=0,i=0,o=e*Ls;for(let d=0;d<e;d++){let p=Ls*d;for(let h=0;h<n;h++){let S=p+h*o,N=s(d,h);r+=N*Kt(t[S]),a+=N*Kt(t[S+1]),i+=N*Kt(t[S+2])}}let u=1/(e*n);return[r*u,a*u,i*u]},Wl=t=>{let e=Wt(t[0]),n=Wt(t[1]),s=Wt(t[2]);return(e<<16)+(n<<8)+s},Gl=(t,e)=>{let n=Math.floor(Math.max(0,Math.min(18,Math.floor(Gt(t[0]/e,.5)*9+9.5)))),s=Math.floor(Math.max(0,Math.min(18,Math.floor(Gt(t[1]/e,.5)*9+9.5)))),r=Math.floor(Math.max(0,Math.min(18,Math.floor(Gt(t[2]/e,.5)*9+9.5))));return n*19*19+s*19+r},Yl=(t,e,n,s,r)=>{if(s<1||s>9||r<1||r>9)throw new ir("BlurHash must have between 1 and 9 components");if(e*n*4!==t.length)throw new ir("Width and height must match the pixels array");let a=[];for(let h=0;h<r;h++)for(let S=0;S<s;S++){let N=S==0&&h==0?1:2,M=Kl(t,e,n,(F,T)=>N*Math.cos(Math.PI*S*F/e)*Math.cos(Math.PI*h*T/n));a.push(M)}let i=a[0],o=a.slice(1),u="",d=s-1+(r-1)*9;u+=an(d,1);let p;if(o.length>0){let h=Math.max(...o.map(N=>Math.max(...N))),S=Math.floor(Math.max(0,Math.min(82,Math.floor(h*166-.5))));p=(S+1)/166,u+=an(S,1)}else p=1,u+=an(0,1);return u+=an(Wl(i),4),o.forEach(h=>{u+=an(Gl(h,p),2)}),u},ql=Yl;async function Jl(t){return new Promise((e,n)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>e(s),s.onerror=(...r)=>n(r),s.src=t})}async function Xl(t){const{rgba:e,w:n,h:s}=await Ql(t,{maxSize:100,opaque:!0}),r=9;return ql(new Uint8ClampedArray(e),n,s,r,r)}function Zl(t,e,n){const s=Hl(t,e,n),r=document.createElement("canvas");r.width=e,r.height=n;const a=r.getContext("2d"),i=a.createImageData(e,n);return i.data.set(s),a.putImageData(i,0,0),r.toDataURL("image/png")}async function Ql(t,{maxSize:e,opaque:n}){const s=await Jl(t),r=s.width,a=s.height,i=Math.min(e/r,e/a),o=Math.floor(r*i),u=Math.floor(a*i),d=document.createElement("canvas");d.width=o,d.height=u;const p=d.getContext("2d");if(!p)throw new Error("Could not get canvas context");p.fillStyle="white",p.fillRect(0,0,o,u),p.drawImage(s,0,0,o,u);const h=p.getImageData(0,0,o,u);return{rgba:new Uint8Array(h.data.buffer),w:o,h:u}}const xn=[["Diagonal",Math.PI/4,Math.PI/4],["Front",0,Math.PI/2],["Right",Math.PI/2,Math.PI/2],["Back",Math.PI,Math.PI/2],["Left",-Math.PI/2,Math.PI/2],["Top",0,0],["Bottom",0,Math.PI]];function Gr(t,e){return[Math.cos(t)*Math.sin(e),Math.sin(t)*Math.sin(e),Math.cos(e)]}function Na(t,e){const n=t[0]-e[0],s=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+s*s+r*r)}const $s=(t,e)=>Math.min(Math.abs(t-e),Math.abs(t-e+2*Math.PI),Math.abs(t-e-2*Math.PI));function ec(t,e){const n=Gr(t,e),r=xn.map(([u,d,p])=>Gr(d,p)).map(u=>Na(n,u)),a=xn.map(([u,d,p])=>Math.max($s(t,d),$s(e,p))),[i,o]=r.reduce((u,d,p)=>d<u[1]?[p,d]:u,[0,1/0]);return[i,o,a[i]]}const Wn=(([t,e,n])=>`${e}rad ${n}rad auto`)(xn[0]),tc=l.forwardRef(function(e,n){const[s,r]=l.useState("none"),a=l.useRef(null),i=l.useRef(null),o=l.useRef(null),[u,d]=l.useState(),[p,h]=l.useState(void 0),S=u===e.modelUri;if(e?.preview){let{hash:T,uri:f}=p??{hash:""};e.preview.blurhash&&T!==e.preview.blurhash&&(T=e.preview.blurhash,f=Zl(T,100,100),h({hash:T,uri:f}))}else p&&h(void 0);const N=l.useCallback(async T=>{if(d(e.modelUri),!a.current)return;const f=await a.current.toDataURL("image/png",.5);await Xl(f)},[e.modelUri,d,a.current]);l.useEffect(()=>{if(!a.current)return;const T=a.current;return T.addEventListener("load",N),()=>T.removeEventListener("load",N)},[a.current,N]);for(const T of[a,i]){const f=T===a?i:a;l.useEffect(()=>{if(!T.current)return;function E(w){if(f.current&&w.detail.source==="user-interaction"){const b=T.current.getCameraOrbit();b.radius=f.current.getCameraOrbit().radius,f.current.cameraOrbit=b.toString()}}const v=T.current;return v.addEventListener("camera-change",E),()=>v.removeEventListener("camera-change",E)},[T.current,f.current])}l.useEffect(()=>{let T;function f(){const w=i.current.getCameraOrbit();return Gr(w.theta,w.phi)}function E(w){w.target===i.current&&(T=f())}function v(w){if(w.target===i.current){const c=f();if((T?Na(c,T):1/0)>.01)return;const g=i.current.getCameraOrbit(),y=a.current.getCameraOrbit(),[C,k,A]=ec(g.theta,g.phi),z=k<.01&&A<.1?(C+1)%xn.length:C,[_,V,I]=xn[z];Object.assign(y,{theta:V,phi:I}),a.current.cameraOrbit=i.current.cameraOrbit=y.toString(),o.current?.show({severity:"info",detail:`${_} view`,life:1e3}),r("none")}}return window.addEventListener("mousedown",E),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousedown",E),window.removeEventListener("mouseup",v)}});async function M(){if(!a.current)return null;const T=await a.current.toDataURL("image/png",1),f=new window.Image;f.src=T,await new Promise(w=>{f.onload=w});const E=document.createElement("canvas");E.width=500,E.height=500;const v=E.getContext("2d");return v?(v.drawImage(f,0,0,500,500),E.toDataURL("image/webp",.9)):null}function F(){!a.current||!i.current||(a.current.cameraOrbit=Wn,i.current.cameraOrbit=Wn)}return l.useImperativeHandle(n,()=>({getWebpScreenshot:M,resetView:F}),[M,F]),j.jsxs("div",{className:e.className,style:{display:"flex",flexDirection:"column",position:"relative",flex:1,width:"100%",background:e.lightMode?"#eee":"#111",...e.style??{}},children:[j.jsx(cs,{ref:o,position:"top-right"}),j.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 0.4; }
            50% { opacity: 0.7; }
            100% { opacity: 0.4; }
          }
        `}),S?j.jsx(j.Fragment,{}):p?j.jsx("img",{src:p.uri,style:{animation:"pulse 1.5s ease-in-out infinite",position:"absolute",pointerEvents:"none",width:"100%",height:"100%"}}):j.jsx(Yt,{text:"Loading model"}),j.jsx("model-viewer",{orientation:"0deg -90deg 0deg",class:"main-viewer",src:e.modelUri,style:{transition:"opacity 0.5s",position:"absolute",width:"100%",height:"100%"},"camera-orbit":Wn,"interaction-prompt":s,"environment-image":"./skybox-lights.jpg",exposure:2,"max-camera-orbit":"auto 180deg auto","min-camera-orbit":"auto 0deg auto","camera-controls":!0,ar:!0,ref:a,children:j.jsx("span",{slot:"progress-bar"})}),j.jsx("model-viewer",{orientation:"0deg -90deg 0deg",src:"./axes.glb",style:{position:"absolute",bottom:0,left:0,zIndex:10,height:"100px",width:"100px"},loading:"eager","camera-orbit":Wn,"max-camera-orbit":"auto 180deg auto","min-camera-orbit":"auto 0deg auto","orbit-sensitivity":"5","interaction-prompt":"none","camera-controls":"false","disable-zoom":!0,"disable-tap":!0,"disable-pan":!0,ref:i,children:j.jsx("span",{slot:"progress-bar"})})]})});function _a(t,e){let n;t.id="WORKER."+t.taskName+"."+Math.random().toString(36).substring(2)+" |";function s(){n&&(n.terminate(),n=null)}return as((r,a)=>(n=new Worker(new URL("/assets/openscad-worker-CLMFiw7W.js",import.meta.url),{type:"module"}),n.onmessage=i=>{"result"in i.data?(r(i.data.result),s()):e(i.data)},n.postMessage(t),()=>{s()}))}const nc=new Set(["Could not initialize localization."]),ja=(t,e)=>({logText:rc(t),markers:sc(t,e)});function rc(t,e){const n=[];for(const{stderr:s,stdout:r,error:a}of t){const i=s??r??`EXCEPTION: ${a}`;nc.has(i)||n.push(i)}return n.join(`
`)}function sc(t,e){let n=[];const s=[];let r=0,a=0;const i=(d,p,h)=>{s.push({startLineNumber:Number(h),startColumn:1,endLineNumber:Number(h),endColumn:1e3,message:d,severity:Fe.MarkerSeverity.Error})},o=e.shiftSourceLines&&e.shiftSourceLines.sourcePath,u=(d,p)=>{const h=Number(p);return o&&d.endsWith(o)?h-e.shiftSourceLines.skipLines:h};for(const{stderr:d,stdout:p,error:h}of t){if(d){d.startsWith("ERROR:")&&a++,d.startsWith("WARNING:")&&r++;let S=/^ERROR: Parser error in file "([^"]+)", line (\d+): (.*)$/.exec(d);if(S){const[N,M,F,T]=S;i(T,M,u(M,F));continue}if(S=/^ERROR: Parser error: (.*?) in file ([^",]+), line (\d+)$/.exec(d),S){const[N,M,F,T]=S;i(M,F,u(F,T));continue}if(S=/^WARNING: (.*?),? in file ([^,]+), line (\d+)\.?/.exec(d),S){const[N,M,F,T]=S;s.push({startLineNumber:u(F,T),startColumn:1,endLineNumber:u(F,T),endColumn:1e3,message:M,severity:Fe.MarkerSeverity.Warning});continue}}n.push(d??p??`EXCEPTION: ${h}`)}return(a||r)&&(n=[`${a} errors, ${r} warnings!`,"",...n]),s}const ac=300,oc=ia(ac,t=>{const{activePath:e,sources:n}=t;""+n[0].content;const s="out.json",r=_a({taskName:"checkSyntax",mountArchives:!0,files:n,args:[e,"-o",s,"--export-format=param"],outputPaths:[s]},a=>{});return as((a,i)=>((async()=>{try{const o=await r;let u;if(o.outputs&&o.outputs.length==1){const[[,d]]=o.outputs;try{u=JSON.parse(d)}catch(p){console.error(`Error while parsing parameter set: ${p}
${d}`)}}else console.error("No output from runner!");a({...ja(o.mergedOutputs,{}),parameterSet:u})}catch(o){console.error(o),i(o)}})(),()=>r.kill()))}),ic=1e3;function Fa(t){return typeof t=="string"?`"${t}"`:t instanceof Array?`[${t.map(Fa).join(", ")}]`:`${t}`}const lc=ia(ic,t=>{const{scadPath:e,sources:n,isPreview:s,mountArchives:r,vars:a,features:i,extraArgs:o,renderFormat:u,streamsCallback:d}=t,p=[];if(s&&p.push("$preview=true;"),!e.endsWith(".scad"))throw new Error("First source must be a .scad file, got "+n[0].path+" instead");const h=n.filter(E=>E.path===e)[0];if(!h)throw new Error("Active path not found in sources!");if(h.content==null)throw new Error("Source content is null!");const S=[...p,h.content].join(`
`),N=u=="glb"||u=="3mf"?"off":u,F=`${e.replace(/\.scad$/,"").split("/").pop()}.${N}`,T=[e,"-o",F,"--backend=manifold","--export-format="+(N=="stl"?"binstl":N),...Object.entries(a??{}).flatMap(([E,v])=>[`-D${E}=${Fa(v)}`]),...(i??[]).map(E=>`--enable=${E}`),...o??[]],f=_a({taskName:s?"preview":"render",mountArchives:r,files:n.map(E=>E.path===e?{path:E.path,content:S}:E),args:T,outputPaths:[F]},d);return as((E,v)=>((async()=>{try{const w=await f,{logText:b,markers:x}=ja(w.mergedOutputs,{shiftSourceLines:{sourcePath:h.path,skipLines:p.length}});w.error&&v(w.error);const[c]=w.outputs??[];if(!c){v(new Error("No output from runner!"));return}const[m,g]=c,y=m.split("/"),C=y[y.length-1],k=m.endsWith(".svg")?"image/svg+xml":"application/octet-stream",A=new Blob([g]),z=new File([A],C,{type:k});E({outFile:z,logText:b,markers:x,elapsedMillis:w.elapsedMillis})}catch(w){console.error(w),v(w)}})(),()=>f.kill()))});class ka{constructor(){this._listeners={}}addEventListener(e,n){const s=this._listeners;return s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n),this}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}return this}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){const r=s.slice(0);for(let a=0,i=r.length;a<i;a++)r[a].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class zt{constructor(e,n,s,r={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=n,this._child=s,this._attributes=r,!n.isOnGraph(s))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class cc extends ka{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const n=new Set;for(const s of this.listParentEdges(e))n.add(s.getParent());return Array.from(n)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const n=new Set;for(const s of this.listChildEdges(e))n.add(s.getChild());return Array.from(n)}disconnectParents(e,n){for(const s of this.listParentEdges(e))(!n||n(s.getParent()))&&s.dispose();return this}_createEdge(e,n,s,r){const a=new zt(e,n,s,r);this._edges.add(a);const i=a.getParent();this._parentEdges.has(i)||this._parentEdges.set(i,new Set),this._parentEdges.get(i).add(a);const o=a.getChild();return this._childEdges.has(o)||this._childEdges.set(o,new Set),this._childEdges.get(o).add(a),a}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function pn(){return pn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},pn.apply(this,arguments)}class bt{constructor(e){if(this.list=[],e)for(const n of e)this.list.push(n)}add(e){this.list.push(e)}remove(e){const n=this.list.indexOf(e);n>=0&&this.list.splice(n,1)}removeChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);for(const s of n)this.remove(s);return n}listRefsByChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);return n}values(){return this.list}}class Ee{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const n of e)this.add(n)}add(e){const n=e.getChild();this.removeChild(n),this.set.add(e),this.map.set(n,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const n=this.map.get(e)||null;return n&&this.remove(n),n}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class lt{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,n){this.map[e]=n}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const de=Symbol("attributes"),At=Symbol("immutableKeys");class us extends ka{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[de]=void 0,this[At]=void 0,this.graph=e,this[At]=new Set,this[de]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const s in e){const r=e[s];if(r instanceof us){const a=this.graph._createEdge(s,this,r);this[At].add(s),n[s]=a}else n[s]=r}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const s in this[de]){const r=this[de][s];if(r instanceof zt){const a=r;a.getChild()===e&&this.setRef(s,n,a.getAttributes())}else if(r instanceof bt)for(const a of r.listRefsByChild(e)){const i=a.getAttributes();this.removeRef(s,e),this.addRef(s,n,i)}else if(r instanceof Ee){const a=r.getRefByChild(e);if(a){const i=a.getAttributes();this.removeRef(s,e),this.addRef(s,n,i)}}else if(r instanceof lt)for(const a of r.keys()){const i=r.get(a);i.getChild()===e&&this.setRefMap(s,a,n,i.getAttributes())}}return this}get(e){return this[de][e]}set(e,n){return this[de][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[de][e];return n?n.getChild():null}setRef(e,n,s){if(this[At].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[de][e];if(r&&r.dispose(),!n)return this;const a=this.graph._createEdge(e,this,n,s);return this[de][e]=a,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(s=>s.getChild())}addRef(e,n,s){const r=this.graph._createEdge(e,this,n,s);return this.assertRefList(e).add(r),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const s=this.assertRefList(e);if(s instanceof bt)for(const r of s.listRefsByChild(n))r.dispose();else{const r=s.getRefByChild(n);r&&r.dispose()}return this}assertRefList(e){const n=this[de][e];if(n instanceof bt||n instanceof Ee)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const r=this.assertRefMap(e).get(n);return r?r.getChild():null}setRefMap(e,n,s,r){const a=this.assertRefMap(e),i=a.get(n);if(i&&i.dispose(),!s)return this;r=Object.assign(r||{},{key:n});const o=this.graph._createEdge(e,this,s,pn({},r,{key:n}));return a.set(n,o),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[de][e];if(n instanceof lt)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent(pn({},e,{target:this})),this.graph.dispatchEvent(pn({},e,{target:this,type:`node:${e.type}`})),this}_destroyRef(e){const n=e.getName();if(this[de][n]===e)this[de][n]=null,this[At].has(n)&&e.getChild().dispose();else if(this[de][n]instanceof bt)this[de][n].remove(e);else if(this[de][n]instanceof Ee)this[de][n].remove(e);else if(this[de][n]instanceof lt){const s=this[de][n];for(const r of s.keys())s.get(r)===e&&s.delete(r)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}}const La="v4.2.1",lr="@glb.bin";var Y;(function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"})(Y||(Y={}));var cr;(function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"})(cr||(cr={}));var Xe;(function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"})(Xe||(Xe={}));var Yr;(function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"})(Yr||(Yr={}));var ht;(function(t){t.GLTF="GLTF",t.GLB="GLB"})(ht||(ht={}));const yr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class fe{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}else{const n=e.split(",")[1],s=e.indexOf("base64")>=0;return Buffer.from(n,s?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const a of e)n+=a.byteLength;const s=new Uint8Array(n);let r=0;for(const a of e)s.set(a,r),r+=a.byteLength;return s}static pad(e,n=0){const s=this.padNumber(e.byteLength);if(s===e.byteLength)return e;const r=new Uint8Array(s);if(r.set(e),n!==0)for(let a=e.byteLength;a<s;a++)r[a]=n;return r}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let s=e.byteLength;for(;s--;)if(e[s]!==n[s])return!1;return!0}static toView(e,n=0,s=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,s))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class uc{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),s,r;for(;n.byteLength;){if(s=n.getUint16(0,!1),fc(n,s),r=n.getUint8(s+1),r===192||r===193||r===194)return[n.getUint16(s+7,!1),n.getUint16(s+5,!1)];n=new DataView(e.buffer,n.byteOffset+s+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class vr{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return fe.decodeText(e.slice(12,16))===vr.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}vr.PNG_FRIED_CHUNK_NAME="CgBI";class kt{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let s=0;const r=4,a=this.getSize(e,n);if(!a)return null;for(;a[0]>1||a[1]>1;)s+=a[0]*a[1]*r,a[0]=Math.max(Math.floor(a[0]/2),1),a[1]=Math.max(Math.floor(a[1]/2),1);return s+=1*r,s}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}kt.impls={"image/jpeg":new uc,"image/png":new vr};function fc(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(t.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return t}class $t{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return kt.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var qr=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function dc(){var t=new qr(3);return qr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function jr(t){var e=t[0],n=t[1],s=t[2];return Math.hypot(e,n,s)}(function(){var t=dc();return function(e,n,s,r,a,i){var o,u;for(n||(n=3),s||(s=0),r?u=Math.min(r*n+s,e.length):u=e.length,o=s;o<u;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],a(t,t,i),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}})();const Ds="https://null.example";class rt{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return $t.basename(new URL(e,Ds).pathname)}static extension(e){return $t.extension(new URL(e,Ds).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const s=e.split("/"),r=n.split("/");s.pop();for(let a=0;a<r.length;a++)r[a]!=="."&&(r[a]===".."?s.pop():s.push(r[a]));return s.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}rt.DEFAULT_INIT={};rt.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function Bs(t){return Object.prototype.toString.call(t)==="[object Object]"}function _t(t){if(Bs(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Bs(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var Jr,Xr;(function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"})(Xr||(Xr={}));class Qe{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=Qe.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=Qe.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=Qe.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=Qe.Verbosity.ERROR&&console.error(e)}}Jr=Qe;Qe.Verbosity=Xr;Qe.DEFAULT_INSTANCE=new Jr(Jr.Verbosity.INFO);function pc(t){var e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],i=t[5],o=t[6],u=t[7],d=t[8],p=t[9],h=t[10],S=t[11],N=t[12],M=t[13],F=t[14],T=t[15],f=e*i-n*a,E=e*o-s*a,v=e*u-r*a,w=n*o-s*i,b=n*u-r*i,x=s*u-r*o,c=d*M-p*N,m=d*F-h*N,g=d*T-S*N,y=p*F-h*M,C=p*T-S*M,k=h*T-S*F;return f*k-E*C+v*y+w*g-b*m+x*c}function hc(t,e,n){var s=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],d=e[6],p=e[7],h=e[8],S=e[9],N=e[10],M=e[11],F=e[12],T=e[13],f=e[14],E=e[15],v=n[0],w=n[1],b=n[2],x=n[3];return t[0]=v*s+w*o+b*h+x*F,t[1]=v*r+w*u+b*S+x*T,t[2]=v*a+w*d+b*N+x*f,t[3]=v*i+w*p+b*M+x*E,v=n[4],w=n[5],b=n[6],x=n[7],t[4]=v*s+w*o+b*h+x*F,t[5]=v*r+w*u+b*S+x*T,t[6]=v*a+w*d+b*N+x*f,t[7]=v*i+w*p+b*M+x*E,v=n[8],w=n[9],b=n[10],x=n[11],t[8]=v*s+w*o+b*h+x*F,t[9]=v*r+w*u+b*S+x*T,t[10]=v*a+w*d+b*N+x*f,t[11]=v*i+w*p+b*M+x*E,v=n[12],w=n[13],b=n[14],x=n[15],t[12]=v*s+w*o+b*h+x*F,t[13]=v*r+w*u+b*S+x*T,t[14]=v*a+w*d+b*N+x*f,t[15]=v*i+w*p+b*M+x*E,t}function mc(t,e){var n=e[0],s=e[1],r=e[2],a=e[4],i=e[5],o=e[6],u=e[8],d=e[9],p=e[10];return t[0]=Math.hypot(n,s,r),t[1]=Math.hypot(a,i,o),t[2]=Math.hypot(u,d,p),t}function gc(t,e){var n=new qr(3);mc(n,e);var s=1/n[0],r=1/n[1],a=1/n[2],i=e[0]*s,o=e[1]*r,u=e[2]*a,d=e[4]*s,p=e[5]*r,h=e[6]*a,S=e[8]*s,N=e[9]*r,M=e[10]*a,F=i+p+M,T=0;return F>0?(T=Math.sqrt(F+1)*2,t[3]=.25*T,t[0]=(h-N)/T,t[1]=(S-u)/T,t[2]=(o-d)/T):i>p&&i>M?(T=Math.sqrt(1+i-p-M)*2,t[3]=(h-N)/T,t[0]=.25*T,t[1]=(o+d)/T,t[2]=(S+u)/T):p>M?(T=Math.sqrt(1+p-i-M)*2,t[3]=(S-u)/T,t[0]=(o+d)/T,t[1]=.25*T,t[2]=(h+N)/T):(T=Math.sqrt(1+M-i-p)*2,t[3]=(o-d)/T,t[0]=(S+u)/T,t[1]=(h+N)/T,t[2]=.25*T),t}class Ce{static identity(e){return e}static eq(e,n,s=1e-5){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-n[r])>s)return!1;return!0}static clamp(e,n,s){return e<n?n:e>s?s:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(Ce.clamp(e,0,1)*65535);case 5121:return Math.round(Ce.clamp(e,0,1)*255);case 5122:return Math.round(Ce.clamp(e,-1,1)*32767);case 5120:return Math.round(Ce.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,s,r){let a=jr([e[0],e[1],e[2]]);const i=jr([e[4],e[5],e[6]]),o=jr([e[8],e[9],e[10]]);pc(e)<0&&(a=-a),n[0]=e[12],n[1]=e[13],n[2]=e[14];const d=e.slice(),p=1/a,h=1/i,S=1/o;d[0]*=p,d[1]*=p,d[2]*=p,d[4]*=h,d[5]*=h,d[6]*=h,d[8]*=S,d[9]*=S,d[10]*=S,gc(s,d),r[0]=a,r[1]=i,r[2]=o}static compose(e,n,s,r){const a=r,i=n[0],o=n[1],u=n[2],d=n[3],p=i+i,h=o+o,S=u+u,N=i*p,M=i*h,F=i*S,T=o*h,f=o*S,E=u*S,v=d*p,w=d*h,b=d*S,x=s[0],c=s[1],m=s[2];return a[0]=(1-(T+E))*x,a[1]=(M+b)*x,a[2]=(F-w)*x,a[3]=0,a[4]=(M-b)*c,a[5]=(1-(N+E))*c,a[6]=(f+v)*c,a[7]=0,a[8]=(F+w)*m,a[9]=(f-v)*m,a[10]=(1-(N+T))*m,a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}}function yc(t,e){if(!!t!=!!e)return!1;const n=t.getChild(),s=e.getChild();return n===s||n.equals(s)}function vc(t,e){if(!!t!=!!e)return!1;const n=t.values(),s=e.values();if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const a=n[r],i=s[r];if(a.getChild()!==i.getChild()&&!a.getChild().equals(i.getChild()))return!1}return!0}function bc(t,e){if(!!t!=!!e)return!1;const n=t.keys(),s=e.keys();if(n.length!==s.length)return!1;for(const r of n){const a=t.get(r),i=e.get(r);if(!!a!=!!i)return!1;const o=a.getChild(),u=i.getChild();if(o!==u&&!o.equals(u))return!1}return!0}function $a(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Da(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!_t(t)||!_t(e))return t===e;const n=t,s=e;let r=0,a=0,i;for(i in n)r++;for(i in s)a++;if(r!==a)return!1;for(i in n){const o=n[i],u=s[i];if(ur(o)&&ur(u)){if(!$a(o,u))return!1}else if(_t(o)&&_t(u)){if(!Da(o,u))return!1}else if(o!==u)return!1}return!0}function ur(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Us="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",xc=999,wc=6,Vs=new Set,Ec=function(){let e="";for(let n=0;n<wc;n++)e+=Us.charAt(Math.floor(Math.random()*Us.length));return e},Sc=function(){for(let e=0;e<xc;e++){const n=Ec();if(!Vs.has(n))return Vs.add(n),n}return""},wt=t=>t,Tc=new Set;class fs extends us{constructor(e,n=""){super(e),this[de].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,wt)}copy(e,n=wt){for(const s in this[de]){const r=this[de][s];if(r instanceof zt)this[At].has(s)||r.dispose();else if(r instanceof bt||r instanceof Ee)for(const a of r.values())a.dispose();else if(r instanceof lt)for(const a of r.values())a.dispose()}for(const s in e[de]){const r=this[de][s],a=e[de][s];if(a instanceof zt)this[At].has(s)?r.getChild().copy(n(a.getChild()),n):this.setRef(s,n(a.getChild()),a.getAttributes());else if(a instanceof Ee||a instanceof bt)for(const i of a.values())this.addRef(s,n(i.getChild()),i.getAttributes());else if(a instanceof lt)for(const i of a.keys()){const o=a.get(i);this.setRefMap(s,i,n(o.getChild()),o.getAttributes())}else _t(a)?this[de][s]=JSON.parse(JSON.stringify(a)):Array.isArray(a)||a instanceof ArrayBuffer||ArrayBuffer.isView(a)?this[de][s]=a.slice():this[de][s]=a}return this}equals(e,n=Tc){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const s in this[de]){if(n.has(s))continue;const r=this[de][s],a=e[de][s];if(r instanceof zt||a instanceof zt){if(!yc(r,a))return!1}else if(r instanceof Ee||a instanceof Ee||r instanceof bt||a instanceof bt){if(!vc(r,a))return!1}else if(r instanceof lt||a instanceof lt){if(!bc(r,a))return!1}else if(_t(r)||_t(a)){if(!Da(r,a))return!1}else if(ur(r)||ur(a)){if(!$a(r,a))return!1}else if(r!==a)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class ze extends fs{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new lt})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class te extends ze{init(){this.propertyType=Y.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:te.Type.SCALAR,componentType:te.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case te.Type.SCALAR:return 1;case te.Type.VEC2:return 2;case te.Type.VEC3:return 3;case te.Type.VEC4:return 4;case te.Type.MAT2:return 4;case te.Type.MAT3:return 9;case te.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case te.ComponentType.BYTE:return 1;case te.ComponentType.UNSIGNED_BYTE:return 1;case te.ComponentType.SHORT:return 2;case te.ComponentType.UNSIGNED_SHORT:return 2;case te.ComponentType.UNSIGNED_INT:return 4;case te.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMin(e),n)for(let a=0;a<s;a++)e[a]=Ce.decodeNormalizedInt(e[a],r);return e}getMin(e){const n=this.getArray(),s=this.getCount(),r=this.getElementSize();for(let a=0;a<r;a++)e[a]=1/0;for(let a=0;a<s*r;a+=r)for(let i=0;i<r;i++){const o=n[a+i];Number.isFinite(o)&&(e[i]=Math.min(e[i],o))}return e}getMaxNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMax(e),n)for(let a=0;a<s;a++)e[a]=Ce.decodeNormalizedInt(e[a],r);return e}getMax(e){const n=this.get("array"),s=this.getCount(),r=this.getElementSize();for(let a=0;a<r;a++)e[a]=-1/0;for(let a=0;a<s*r;a+=r)for(let i=0;i<r;i++){const o=n[a+i];Number.isFinite(o)&&(e[i]=Math.max(e[i],o))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return te.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),s=this.getComponentType(),r=this.getArray();return this.getNormalized()?Ce.decodeNormalizedInt(r[e*n],s):r[e*n]}setScalar(e,n){const s=this.getElementSize(),r=this.getComponentType(),a=this.getArray();return this.getNormalized()?a[e*s]=Ce.encodeNormalizedInt(n,r):a[e*s]=n,this}getElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),a=this.getComponentType(),i=this.getArray();for(let o=0;o<r;o++)s?n[o]=Ce.decodeNormalizedInt(i[e*r+o],a):n[o]=i[e*r+o];return n}setElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),a=this.getComponentType(),i=this.getArray();for(let o=0;o<r;o++)s?i[e*r+o]=Ce.encodeNormalizedInt(n[o],a):i[e*r+o]=n[o];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?Cc(e):te.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}te.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};te.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function Cc(t){switch(t.constructor){case Float32Array:return te.ComponentType.FLOAT;case Uint32Array:return te.ComponentType.UNSIGNED_INT;case Uint16Array:return te.ComponentType.UNSIGNED_SHORT;case Uint8Array:return te.ComponentType.UNSIGNED_BYTE;case Int16Array:return te.ComponentType.SHORT;case Int8Array:return te.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class Ba extends ze{init(){this.propertyType=Y.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new Ee,samplers:new Ee})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class Ua extends ze{init(){this.propertyType=Y.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}Ua.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class Rn extends ze{init(){this.propertyType=Y.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:Rn.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:Xe.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:Xe.OTHER})}}Rn.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class Va extends ze{init(){this.propertyType=Y.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class Bt extends ze{init(){this.propertyType=Y.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:Bt.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}Bt.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class Ic extends fs{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}Ic.EXTENSION_NAME=void 0;class st extends ze{init(){this.propertyType=Y.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:st.WrapMode.REPEAT,wrapT:st.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}st.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};st.MagFilter={NEAREST:9728,LINEAR:9729};st.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Gn,G:Yn,B:qn,A:Rc}=Yr;class Dt extends ze{init(){this.propertyType=Y.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:Dt.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new st(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new st(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new st(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new st(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new st(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Gn|Yn|qn|Rc,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Gn|Yn|qn,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Gn|Yn|qn})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Gn})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Yn|qn})}}Dt.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class za extends ze{init(){this.propertyType=Y.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new Ee})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}class Ha extends ze{init(){this.propertyType=Y.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new Ee})}copy(e,n=wt){if(n===wt)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return Ce.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),s=this.get("rotation").slice(),r=this.get("scale").slice();return Ce.decompose(e,n,s,r),this.set("translation",n).set("rotation",s).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return Ce.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return Ce.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return Ce.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r!=null;r=r.getParentNode())e.push(r);let n;const s=e.pop().getMatrix();for(;n=e.pop();)hc(s,s,n.getMatrix());return s}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const s of e.listParents())s.propertyType===Y.SCENE&&s.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===Y.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}}class On extends ze{init(){this.propertyType=Y.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:On.Mode.TRIANGLES,material:null,indices:null,attributes:new lt,targets:new Ee})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:Xe.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Xe.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}On.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Oc extends fs{init(){this.propertyType=Y.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new lt})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Xe.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Ve(){return Ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ve.apply(null,arguments)}class Ka extends ze{init(){this.propertyType=Y.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new Ee})}copy(e,n=wt){if(n===wt)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class Wa extends ze{init(){this.propertyType=Y.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new Ee})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:Xe.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class Ga extends ze{init(){this.propertyType=Y.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||kt.extensionToMimeType($t.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=kt.extensionToMimeType($t.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",fe.assertView(e))}getSize(){const e=this.get("image");return e?kt.getSize(e,this.getMimeType()):null}}class Mc extends ze{init(){this.propertyType=Y.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${La}`,version:"2.0"},defaultScene:null,accessors:new Ee,animations:new Ee,buffers:new Ee,cameras:new Ee,materials:new Ee,meshes:new Ee,nodes:new Ee,scenes:new Ee,skins:new Ee,textures:new Ee})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=wt){if(n===wt)throw new Error("Root cannot be copied.");this.set("asset",Ve({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ve({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const s of e.listRefMapKeys("extensions")){const r=e.getExtension(s);this.setExtension(s,n(r))}return this}_addChildOfRoot(e){return e instanceof Ka?this.addRef("scenes",e):e instanceof Ha?this.addRef("nodes",e):e instanceof Bt?this.addRef("cameras",e):e instanceof Wa?this.addRef("skins",e):e instanceof za?this.addRef("meshes",e):e instanceof Dt?this.addRef("materials",e):e instanceof Ga?this.addRef("textures",e):e instanceof Ba?this.addRef("animations",e):e instanceof te?this.addRef("accessors",e):e instanceof Va&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class Jt{static fromGraph(e){return Jt._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new cc,this._root=new Mc(this._graph),this._logger=Qe.DEFAULT_INSTANCE,Jt._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(s=>s.name);for(const s of e)await s(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===n)||new e(this)}createScene(e=""){return new Ka(this._graph,e)}createNode(e=""){return new Ha(this._graph,e)}createCamera(e=""){return new Bt(this._graph,e)}createSkin(e=""){return new Wa(this._graph,e)}createMesh(e=""){return new za(this._graph,e)}createPrimitive(){return new On(this._graph)}createPrimitiveTarget(e=""){return new Oc(this._graph,e)}createMaterial(e=""){return new Dt(this._graph,e)}createTexture(e=""){return new Ga(this._graph,e)}createAnimation(e=""){return new Ba(this._graph,e)}createAnimationChannel(e=""){return new Ua(this._graph,e)}createAnimationSampler(e=""){return new Rn(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new te(this._graph,e).setBuffer(n)}createBuffer(e=""){return new Va(this._graph,e)}}Jt._GRAPH_DOCUMENTS=new WeakMap;class Pc{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const s=this.jsonDoc.json.textures[n.index];if(s.sampler===void 0)return;const r=this.jsonDoc.json.samplers[s.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}}const zs={logger:Qe.DEFAULT_INSTANCE,extensions:[],dependencies:{}},Ac=new Set([Y.BUFFER,Y.TEXTURE,Y.MATERIAL,Y.MESH,Y.PRIMITIVE,Y.NODE,Y.SCENE]);class Nc{static read(e,n=zs){const s=Ve({},zs,n),{json:r}=e,a=new Jt().setLogger(s.logger);this.validate(e,s);const i=new Pc(e),o=r.asset,u=a.getRoot().getAsset();o.copyright&&(u.copyright=o.copyright),o.extras&&(u.extras=o.extras),r.extras!==void 0&&a.getRoot().setExtras(Ve({},r.extras));const d=r.extensionsUsed||[],p=r.extensionsRequired||[];s.extensions.sort((c,m)=>c.EXTENSION_NAME>m.EXTENSION_NAME?1:-1);for(const c of s.extensions)if(d.includes(c.EXTENSION_NAME)){const m=a.createExtension(c).setRequired(p.includes(c.EXTENSION_NAME)),g=m.prereadTypes.filter(y=>!Ac.has(y));g.length&&s.logger.warn(`Preread hooks for some types (${g.join()}), requested by extension ${m.extensionName}, are unsupported. Please file an issue or a PR.`);for(const y of m.readDependencies)m.install(y,s.dependencies[y])}const h=r.buffers||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.BUFFER)).forEach(c=>c.preread(i,Y.BUFFER)),i.buffers=h.map(c=>{const m=a.createBuffer(c.name);return c.extras&&m.setExtras(c.extras),c.uri&&c.uri.indexOf("__")!==0&&m.setURI(c.uri),m});const S=r.bufferViews||[];i.bufferViewBuffers=S.map((c,m)=>{if(!i.bufferViews[m]){const g=e.json.buffers[c.buffer],y=g.uri?e.resources[g.uri]:e.resources[lr],C=c.byteOffset||0;i.bufferViews[m]=fe.toView(y,C,c.byteLength)}return i.buffers[c.buffer]});const N=r.accessors||[];i.accessors=N.map(c=>{const m=i.bufferViewBuffers[c.bufferView],g=a.createAccessor(c.name,m).setType(c.type);return c.extras&&g.setExtras(c.extras),c.normalized!==void 0&&g.setNormalized(c.normalized),c.bufferView===void 0||g.setArray(rr(c,i)),g});const M=r.images||[],F=r.textures||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.TEXTURE)).forEach(c=>c.preread(i,Y.TEXTURE)),i.textures=M.map(c=>{const m=a.createTexture(c.name);if(c.extras&&m.setExtras(c.extras),c.bufferView!==void 0){const g=r.bufferViews[c.bufferView],y=e.json.buffers[g.buffer],C=y.uri?e.resources[y.uri]:e.resources[lr],k=g.byteOffset||0,A=g.byteLength,z=C.slice(k,k+A);m.setImage(z)}else c.uri!==void 0&&(m.setImage(e.resources[c.uri]),c.uri.indexOf("__")!==0&&m.setURI(c.uri));if(c.mimeType!==void 0)m.setMimeType(c.mimeType);else if(c.uri){const g=$t.extension(c.uri);m.setMimeType(kt.extensionToMimeType(g))}return m}),a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.MATERIAL)).forEach(c=>c.preread(i,Y.MATERIAL));const T=r.materials||[];i.materials=T.map(c=>{const m=a.createMaterial(c.name);c.extras&&m.setExtras(c.extras),c.alphaMode!==void 0&&m.setAlphaMode(c.alphaMode),c.alphaCutoff!==void 0&&m.setAlphaCutoff(c.alphaCutoff),c.doubleSided!==void 0&&m.setDoubleSided(c.doubleSided);const g=c.pbrMetallicRoughness||{};if(g.baseColorFactor!==void 0&&m.setBaseColorFactor(g.baseColorFactor),c.emissiveFactor!==void 0&&m.setEmissiveFactor(c.emissiveFactor),g.metallicFactor!==void 0&&m.setMetallicFactor(g.metallicFactor),g.roughnessFactor!==void 0&&m.setRoughnessFactor(g.roughnessFactor),g.baseColorTexture!==void 0){const y=g.baseColorTexture,C=i.textures[F[y.index].source];m.setBaseColorTexture(C),i.setTextureInfo(m.getBaseColorTextureInfo(),y)}if(c.emissiveTexture!==void 0){const y=c.emissiveTexture,C=i.textures[F[y.index].source];m.setEmissiveTexture(C),i.setTextureInfo(m.getEmissiveTextureInfo(),y)}if(c.normalTexture!==void 0){const y=c.normalTexture,C=i.textures[F[y.index].source];m.setNormalTexture(C),i.setTextureInfo(m.getNormalTextureInfo(),y),c.normalTexture.scale!==void 0&&m.setNormalScale(c.normalTexture.scale)}if(c.occlusionTexture!==void 0){const y=c.occlusionTexture,C=i.textures[F[y.index].source];m.setOcclusionTexture(C),i.setTextureInfo(m.getOcclusionTextureInfo(),y),c.occlusionTexture.strength!==void 0&&m.setOcclusionStrength(c.occlusionTexture.strength)}if(g.metallicRoughnessTexture!==void 0){const y=g.metallicRoughnessTexture,C=i.textures[F[y.index].source];m.setMetallicRoughnessTexture(C),i.setTextureInfo(m.getMetallicRoughnessTextureInfo(),y)}return m}),a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.MESH)).forEach(c=>c.preread(i,Y.MESH));const f=r.meshes||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.PRIMITIVE)).forEach(c=>c.preread(i,Y.PRIMITIVE)),i.meshes=f.map(c=>{const m=a.createMesh(c.name);return c.extras&&m.setExtras(c.extras),c.weights!==void 0&&m.setWeights(c.weights),(c.primitives||[]).forEach(y=>{const C=a.createPrimitive();y.extras&&C.setExtras(y.extras),y.material!==void 0&&C.setMaterial(i.materials[y.material]),y.mode!==void 0&&C.setMode(y.mode);for(const[z,_]of Object.entries(y.attributes||{}))C.setAttribute(z,i.accessors[_]);y.indices!==void 0&&C.setIndices(i.accessors[y.indices]);const k=c.extras&&c.extras.targetNames||[];(y.targets||[]).forEach((z,_)=>{const V=k[_]||_.toString(),I=a.createPrimitiveTarget(V);for(const[$,K]of Object.entries(z))I.setAttribute($,i.accessors[K]);C.addTarget(I)}),m.addPrimitive(C)}),m});const E=r.cameras||[];i.cameras=E.map(c=>{const m=a.createCamera(c.name).setType(c.type);if(c.extras&&m.setExtras(c.extras),c.type===Bt.Type.PERSPECTIVE){const g=c.perspective;m.setYFov(g.yfov),m.setZNear(g.znear),g.zfar!==void 0&&m.setZFar(g.zfar),g.aspectRatio!==void 0&&m.setAspectRatio(g.aspectRatio)}else{const g=c.orthographic;m.setZNear(g.znear).setZFar(g.zfar).setXMag(g.xmag).setYMag(g.ymag)}return m});const v=r.nodes||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.NODE)).forEach(c=>c.preread(i,Y.NODE)),i.nodes=v.map(c=>{const m=a.createNode(c.name);if(c.extras&&m.setExtras(c.extras),c.translation!==void 0&&m.setTranslation(c.translation),c.rotation!==void 0&&m.setRotation(c.rotation),c.scale!==void 0&&m.setScale(c.scale),c.matrix!==void 0){const g=[0,0,0],y=[0,0,0,1],C=[1,1,1];Ce.decompose(c.matrix,g,y,C),m.setTranslation(g),m.setRotation(y),m.setScale(C)}return c.weights!==void 0&&m.setWeights(c.weights),m});const w=r.skins||[];i.skins=w.map(c=>{const m=a.createSkin(c.name);c.extras&&m.setExtras(c.extras),c.inverseBindMatrices!==void 0&&m.setInverseBindMatrices(i.accessors[c.inverseBindMatrices]),c.skeleton!==void 0&&m.setSkeleton(i.nodes[c.skeleton]);for(const g of c.joints)m.addJoint(i.nodes[g]);return m}),v.map((c,m)=>{const g=i.nodes[m];(c.children||[]).forEach(C=>g.addChild(i.nodes[C])),c.mesh!==void 0&&g.setMesh(i.meshes[c.mesh]),c.camera!==void 0&&g.setCamera(i.cameras[c.camera]),c.skin!==void 0&&g.setSkin(i.skins[c.skin])});const b=r.animations||[];i.animations=b.map(c=>{const m=a.createAnimation(c.name);c.extras&&m.setExtras(c.extras);const y=(c.samplers||[]).map(k=>{const A=a.createAnimationSampler().setInput(i.accessors[k.input]).setOutput(i.accessors[k.output]).setInterpolation(k.interpolation||Rn.Interpolation.LINEAR);return k.extras&&A.setExtras(k.extras),m.addSampler(A),A});return(c.channels||[]).forEach(k=>{const A=a.createAnimationChannel().setSampler(y[k.sampler]).setTargetPath(k.target.path);k.target.node!==void 0&&A.setTargetNode(i.nodes[k.target.node]),k.extras&&A.setExtras(k.extras),m.addChannel(A)}),m});const x=r.scenes||[];return a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.SCENE)).forEach(c=>c.preread(i,Y.SCENE)),i.scenes=x.map(c=>{const m=a.createScene(c.name);return c.extras&&m.setExtras(c.extras),(c.nodes||[]).map(y=>i.nodes[y]).forEach(y=>m.addChild(y)),m}),r.scene!==void 0&&a.getRoot().setDefaultScene(i.scenes[r.scene]),a.getRoot().listExtensionsUsed().forEach(c=>c.read(i)),N.forEach((c,m)=>{const g=i.accessors[m],y=!!c.sparse,C=!c.bufferView&&!g.getArray();(y||C)&&g.setSparse(!0).setArray(jc(c,i))}),a}static validate(e,n){const s=e.json;if(s.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${s.asset.version}".`);if(s.extensionsRequired){for(const r of s.extensionsRequired)if(!n.extensions.find(a=>a.EXTENSION_NAME===r))throw new Error(`Missing required extension, "${r}".`)}if(s.extensionsUsed)for(const r of s.extensionsUsed)n.extensions.find(a=>a.EXTENSION_NAME===r)||n.logger.warn(`Missing optional extension, "${r}".`)}}function _c(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],a=yr[t.componentType],i=te.getElementSize(t.type),o=a.BYTES_PER_ELEMENT,u=t.byteOffset||0,d=new a(t.count*i),p=new DataView(s.buffer,s.byteOffset,s.byteLength),h=r.byteStride;for(let S=0;S<t.count;S++)for(let N=0;N<i;N++){const M=u+S*h+N*o;let F;switch(t.componentType){case te.ComponentType.FLOAT:F=p.getFloat32(M,!0);break;case te.ComponentType.UNSIGNED_INT:F=p.getUint32(M,!0);break;case te.ComponentType.UNSIGNED_SHORT:F=p.getUint16(M,!0);break;case te.ComponentType.UNSIGNED_BYTE:F=p.getUint8(M);break;case te.ComponentType.SHORT:F=p.getInt16(M,!0);break;case te.ComponentType.BYTE:F=p.getInt8(M);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}d[S*i+N]=F}return d}function rr(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],a=yr[t.componentType],i=te.getElementSize(t.type),o=a.BYTES_PER_ELEMENT,u=i*o;if(r.byteStride!==void 0&&r.byteStride!==u)return _c(t,e);const d=s.byteOffset+(t.byteOffset||0),p=t.count*i*o;return new a(s.buffer.slice(d,d+p))}function jc(t,e){const n=yr[t.componentType],s=te.getElementSize(t.type);let r;t.bufferView!==void 0?r=rr(t,e):r=new n(t.count*s);const a=t.sparse;if(!a)return r;const i=a.count,o=Ve({},t,a.indices,{count:i,type:"SCALAR"}),u=Ve({},t,a.values,{count:i}),d=rr(o,e),p=rr(u,e);for(let h=0;h<o.count;h++)for(let S=0;S<s;S++)r[d[h]*s+S]=p[h*s+S];return r}var wn;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(wn||(wn={}));class Lt{constructor(e,n,s){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=s;const r=e.getRoot(),a=r.listBuffers().length,i=r.listTextures().length;this.bufferURIGenerator=new Hs(a>1,()=>s.basename||"buffer"),this.imageURIGenerator=new Hs(i>1,o=>Fc(e,o)||s.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const s={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},r=JSON.stringify(s);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(s));const a={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},i=JSON.stringify(a);this.textureDefIndexMap.has(i)||(this.textureDefIndexMap.set(i,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(a));const o={index:this.textureDefIndexMap.get(i)};return n.getTexCoord()!==0&&(o.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(o.extras=n.getExtras()),this.textureInfoDefMap.set(n,o),o}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(r=>r.getName()==="attributes"&&r.getAttributes().key==="POSITION"||r.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,s){if(this.options.format===ht.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const r=kt.mimeTypeToExtension(s.getMimeType());e.uri=this.imageURIGenerator.createURI(s,r),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,s){const r=this.jsonDoc.resources;if(!(e in r)){r[e]=n;return}if(n===r[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const a=`Resource URI "${e}" already assigned to different data.`;if(!s){this.logger.warn(a);return}throw new Error(a)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return Xe.SPARSE;for(const s of this._doc.getGraph().listParentEdges(e)){const{usage:r}=s.getAttributes();if(r)return r;s.getParent().propertyType!==Y.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${s.getName()}".`)}return Xe.OTHER}addAccessorToUsageGroup(e,n){const s=this._accessorUsageMap.get(e);if(s&&s!==n)throw new Error(`Accessor with usage "${s}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}Lt.BufferViewTarget=wn;Lt.BufferViewUsage=Xe;Lt.USAGE_TO_TARGET={[Xe.ARRAY_BUFFER]:wn.ARRAY_BUFFER,[Xe.ELEMENT_ARRAY_BUFFER]:wn.ELEMENT_ARRAY_BUFFER};class Hs{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const s=this.basename(e);return this.counter[s]=this.counter[s]||1,`${s}_${this.counter[s]++}.${n}`}else return`${this.basename(e)}.${n}`}}function Fc(t,e){const n=t.getGraph().listParentEdges(e).find(s=>s.getParent()!==t.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:Jn}=Lt,{UNSIGNED_INT:kc,UNSIGNED_SHORT:Lc,UNSIGNED_BYTE:$c}=te.ComponentType,Dc=new Set([Y.ACCESSOR,Y.BUFFER,Y.MATERIAL,Y.MESH]);class Bc{static write(e,n){const s=e.getGraph(),r=e.getRoot(),a={asset:Ve({generator:`glTF-Transform ${La}`},r.getAsset()),extras:Ve({},r.getExtras())},i={json:a,resources:{}},o=new Lt(e,i,n),u=n.logger||Qe.DEFAULT_INSTANCE,d=new Set(n.extensions.map(f=>f.EXTENSION_NAME)),p=e.getRoot().listExtensionsUsed().filter(f=>d.has(f.extensionName)).sort((f,E)=>f.extensionName>E.extensionName?1:-1),h=e.getRoot().listExtensionsRequired().filter(f=>d.has(f.extensionName)).sort((f,E)=>f.extensionName>E.extensionName?1:-1);p.length<e.getRoot().listExtensionsUsed().length&&u.warn("Some extensions were not registered for I/O, and will not be written.");for(const f of p){const E=f.prewriteTypes.filter(v=>!Dc.has(v));E.length&&u.warn(`Prewrite hooks for some types (${E.join()}), requested by extension ${f.extensionName}, are unsupported. Please file an issue or a PR.`);for(const v of f.writeDependencies)f.install(v,n.dependencies[v])}function S(f,E,v,w){const b=[];let x=0;for(const g of f){const y=o.createAccessorDef(g);y.bufferView=a.bufferViews.length;const C=g.getArray(),k=fe.pad(fe.toView(C));y.byteOffset=x,x+=k.byteLength,b.push(k),o.accessorIndexMap.set(g,a.accessors.length),a.accessors.push(y)}const c=fe.concat(b),m={buffer:E,byteOffset:v,byteLength:c.byteLength};return w&&(m.target=w),a.bufferViews.push(m),{buffers:b,byteLength:x}}function N(f,E,v){const w=f[0].getCount();let b=0;for(const y of f){const C=o.createAccessorDef(y);C.bufferView=a.bufferViews.length,C.byteOffset=b;const k=y.getElementSize(),A=y.getComponentSize();b+=fe.padNumber(k*A),o.accessorIndexMap.set(y,a.accessors.length),a.accessors.push(C)}const x=w*b,c=new ArrayBuffer(x),m=new DataView(c);for(let y=0;y<w;y++){let C=0;for(const k of f){const A=k.getElementSize(),z=k.getComponentSize(),_=k.getComponentType(),V=k.getArray();for(let I=0;I<A;I++){const $=y*b+C+I*z,K=V[y*A+I];switch(_){case te.ComponentType.FLOAT:m.setFloat32($,K,!0);break;case te.ComponentType.BYTE:m.setInt8($,K);break;case te.ComponentType.SHORT:m.setInt16($,K,!0);break;case te.ComponentType.UNSIGNED_BYTE:m.setUint8($,K);break;case te.ComponentType.UNSIGNED_SHORT:m.setUint16($,K,!0);break;case te.ComponentType.UNSIGNED_INT:m.setUint32($,K,!0);break;default:throw new Error("Unexpected component type: "+_)}}C+=fe.padNumber(A*z)}}const g={buffer:E,byteOffset:v,byteLength:x,byteStride:b,target:Lt.BufferViewTarget.ARRAY_BUFFER};return a.bufferViews.push(g),{byteLength:x,buffers:[new Uint8Array(c)]}}function M(f,E,v){const w=[];let b=0;const x=new Map;let c=-1/0,m=!1;for(const _ of f){const V=o.createAccessorDef(_);a.accessors.push(V),o.accessorIndexMap.set(_,a.accessors.length-1);const I=[],$=[],K=[],X=new Array(_.getElementSize()).fill(0);for(let Se=0,Z=_.getCount();Se<Z;Se++)if(_.getElement(Se,K),!Ce.eq(K,X,0)){c=Math.max(Se,c),I.push(Se);for(let oe=0;oe<K.length;oe++)$.push(K[oe])}const ee=I.length,ae={accessorDef:V,count:ee};if(x.set(_,ae),ee===0)continue;ee>_.getCount()/2&&(m=!0);const Oe=yr[_.getComponentType()];ae.indices=I,ae.values=new Oe($)}if(!Number.isFinite(c))return{buffers:w,byteLength:b};m&&u.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const g=c<255?Uint8Array:c<65535?Uint16Array:Uint32Array,y=c<255?$c:c<65535?Lc:kc,C={buffer:E,byteOffset:v+b,byteLength:0};for(const _ of f){const V=x.get(_);if(V.count===0)continue;V.indicesByteOffset=C.byteLength;const I=fe.pad(fe.toView(new g(V.indices)));w.push(I),b+=I.byteLength,C.byteLength+=I.byteLength}a.bufferViews.push(C);const k=a.bufferViews.length-1,A={buffer:E,byteOffset:v+b,byteLength:0};for(const _ of f){const V=x.get(_);if(V.count===0)continue;V.valuesByteOffset=A.byteLength;const I=fe.pad(fe.toView(V.values));w.push(I),b+=I.byteLength,A.byteLength+=I.byteLength}a.bufferViews.push(A);const z=a.bufferViews.length-1;for(const _ of f){const V=x.get(_);V.count!==0&&(V.accessorDef.sparse={count:V.count,indices:{bufferView:k,byteOffset:V.indicesByteOffset,componentType:y},values:{bufferView:z,byteOffset:V.valuesByteOffset}})}return{buffers:w,byteLength:b}}if(a.accessors=[],a.bufferViews=[],a.samplers=[],a.textures=[],a.images=r.listTextures().map((f,E)=>{const v=o.createPropertyDef(f);f.getMimeType()&&(v.mimeType=f.getMimeType());const w=f.getImage();return w&&o.createImageData(v,w,f),o.imageIndexMap.set(f,E),v}),p.filter(f=>f.prewriteTypes.includes(Y.ACCESSOR)).forEach(f=>f.prewrite(o,Y.ACCESSOR)),r.listAccessors().forEach(f=>{const E=o.accessorUsageGroupedByParent,v=o.accessorParents;if(o.accessorIndexMap.has(f))return;const w=o.getAccessorUsage(f);if(o.addAccessorToUsageGroup(f,w),E.has(w)){const b=s.listParents(f).find(x=>x.propertyType!==Y.ROOT);v.set(f,b)}}),p.filter(f=>f.prewriteTypes.includes(Y.BUFFER)).forEach(f=>f.prewrite(o,Y.BUFFER)),(r.listAccessors().length>0||o.otherBufferViews.size>0||r.listTextures().length>0&&n.format===ht.GLB)&&r.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");a.buffers=[],r.listBuffers().forEach((f,E)=>{const v=o.createPropertyDef(f),w=o.accessorUsageGroupedByParent,b=f.listParents().filter(A=>A instanceof te),x=new Set(b.map(A=>o.accessorParents.get(A))),c=new Map(Array.from(x).map((A,z)=>[A,z])),m={};for(const A of b){var g;if(o.accessorIndexMap.has(A))continue;const z=o.getAccessorUsage(A);let _=z;if(w.has(z)){const V=o.accessorParents.get(A);_+=`:${c.get(V)}`}m[g=_]||(m[g]={usage:z,accessors:[]}),m[_].accessors.push(A)}const y=[],C=a.buffers.length;let k=0;for(const{usage:A,accessors:z}of Object.values(m))if(A===Jn.ARRAY_BUFFER&&n.vertexLayout===cr.INTERLEAVED){const _=N(z,C,k);k+=_.byteLength;for(const V of _.buffers)y.push(V)}else if(A===Jn.ARRAY_BUFFER)for(const _ of z){const V=N([_],C,k);k+=V.byteLength;for(const I of V.buffers)y.push(I)}else if(A===Jn.SPARSE){const _=M(z,C,k);k+=_.byteLength;for(const V of _.buffers)y.push(V)}else if(A===Jn.ELEMENT_ARRAY_BUFFER){const _=Lt.BufferViewTarget.ELEMENT_ARRAY_BUFFER,V=S(z,C,k,_);k+=V.byteLength;for(const I of V.buffers)y.push(I)}else{const _=S(z,C,k);k+=_.byteLength;for(const V of _.buffers)y.push(V)}if(o.imageBufferViews.length&&E===0){for(let A=0;A<o.imageBufferViews.length;A++)if(a.bufferViews[a.images[A].bufferView].byteOffset=k,k+=o.imageBufferViews[A].byteLength,y.push(o.imageBufferViews[A]),k%8){const z=8-k%8;k+=z,y.push(new Uint8Array(z))}}if(o.otherBufferViews.has(f))for(const A of o.otherBufferViews.get(f))a.bufferViews.push({buffer:C,byteOffset:k,byteLength:A.byteLength}),o.otherBufferViewsIndexMap.set(A,a.bufferViews.length-1),k+=A.byteLength,y.push(A);if(k){let A;n.format===ht.GLB?A=lr:(A=o.bufferURIGenerator.createURI(f,"bin"),v.uri=A),v.byteLength=k,o.assignResourceURI(A,fe.concat(y),!0)}a.buffers.push(v),o.bufferIndexMap.set(f,E)}),r.listAccessors().find(f=>!f.getBuffer())&&u.warn("Skipped writing one or more Accessors: no Buffer assigned."),p.filter(f=>f.prewriteTypes.includes(Y.MATERIAL)).forEach(f=>f.prewrite(o,Y.MATERIAL)),a.materials=r.listMaterials().map((f,E)=>{const v=o.createPropertyDef(f);if(f.getAlphaMode()!==Dt.AlphaMode.OPAQUE&&(v.alphaMode=f.getAlphaMode()),f.getAlphaMode()===Dt.AlphaMode.MASK&&(v.alphaCutoff=f.getAlphaCutoff()),f.getDoubleSided()&&(v.doubleSided=!0),v.pbrMetallicRoughness={},Ce.eq(f.getBaseColorFactor(),[1,1,1,1])||(v.pbrMetallicRoughness.baseColorFactor=f.getBaseColorFactor()),Ce.eq(f.getEmissiveFactor(),[0,0,0])||(v.emissiveFactor=f.getEmissiveFactor()),f.getRoughnessFactor()!==1&&(v.pbrMetallicRoughness.roughnessFactor=f.getRoughnessFactor()),f.getMetallicFactor()!==1&&(v.pbrMetallicRoughness.metallicFactor=f.getMetallicFactor()),f.getBaseColorTexture()){const w=f.getBaseColorTexture(),b=f.getBaseColorTextureInfo();v.pbrMetallicRoughness.baseColorTexture=o.createTextureInfoDef(w,b)}if(f.getEmissiveTexture()){const w=f.getEmissiveTexture(),b=f.getEmissiveTextureInfo();v.emissiveTexture=o.createTextureInfoDef(w,b)}if(f.getNormalTexture()){const w=f.getNormalTexture(),b=f.getNormalTextureInfo(),x=o.createTextureInfoDef(w,b);f.getNormalScale()!==1&&(x.scale=f.getNormalScale()),v.normalTexture=x}if(f.getOcclusionTexture()){const w=f.getOcclusionTexture(),b=f.getOcclusionTextureInfo(),x=o.createTextureInfoDef(w,b);f.getOcclusionStrength()!==1&&(x.strength=f.getOcclusionStrength()),v.occlusionTexture=x}if(f.getMetallicRoughnessTexture()){const w=f.getMetallicRoughnessTexture(),b=f.getMetallicRoughnessTextureInfo();v.pbrMetallicRoughness.metallicRoughnessTexture=o.createTextureInfoDef(w,b)}return o.materialIndexMap.set(f,E),v}),p.filter(f=>f.prewriteTypes.includes(Y.MESH)).forEach(f=>f.prewrite(o,Y.MESH)),a.meshes=r.listMeshes().map((f,E)=>{const v=o.createPropertyDef(f);let w=null;return v.primitives=f.listPrimitives().map(b=>{const x={attributes:{}};x.mode=b.getMode();const c=b.getMaterial();c&&(x.material=o.materialIndexMap.get(c)),Object.keys(b.getExtras()).length&&(x.extras=b.getExtras());const m=b.getIndices();m&&(x.indices=o.accessorIndexMap.get(m));for(const g of b.listSemantics())x.attributes[g]=o.accessorIndexMap.get(b.getAttribute(g));for(const g of b.listTargets()){const y={};for(const C of g.listSemantics())y[C]=o.accessorIndexMap.get(g.getAttribute(C));x.targets=x.targets||[],x.targets.push(y)}return b.listTargets().length&&!w&&(w=b.listTargets().map(g=>g.getName())),x}),f.getWeights().length&&(v.weights=f.getWeights()),w&&(v.extras=v.extras||{},v.extras.targetNames=w),o.meshIndexMap.set(f,E),v}),a.cameras=r.listCameras().map((f,E)=>{const v=o.createPropertyDef(f);if(v.type=f.getType(),v.type===Bt.Type.PERSPECTIVE){v.perspective={znear:f.getZNear(),zfar:f.getZFar(),yfov:f.getYFov()};const w=f.getAspectRatio();w!==null&&(v.perspective.aspectRatio=w)}else v.orthographic={znear:f.getZNear(),zfar:f.getZFar(),xmag:f.getXMag(),ymag:f.getYMag()};return o.cameraIndexMap.set(f,E),v}),a.nodes=r.listNodes().map((f,E)=>{const v=o.createPropertyDef(f);return Ce.eq(f.getTranslation(),[0,0,0])||(v.translation=f.getTranslation()),Ce.eq(f.getRotation(),[0,0,0,1])||(v.rotation=f.getRotation()),Ce.eq(f.getScale(),[1,1,1])||(v.scale=f.getScale()),f.getWeights().length&&(v.weights=f.getWeights()),o.nodeIndexMap.set(f,E),v}),a.skins=r.listSkins().map((f,E)=>{const v=o.createPropertyDef(f),w=f.getInverseBindMatrices();w&&(v.inverseBindMatrices=o.accessorIndexMap.get(w));const b=f.getSkeleton();return b&&(v.skeleton=o.nodeIndexMap.get(b)),v.joints=f.listJoints().map(x=>o.nodeIndexMap.get(x)),o.skinIndexMap.set(f,E),v}),r.listNodes().forEach((f,E)=>{const v=a.nodes[E],w=f.getMesh();w&&(v.mesh=o.meshIndexMap.get(w));const b=f.getCamera();b&&(v.camera=o.cameraIndexMap.get(b));const x=f.getSkin();x&&(v.skin=o.skinIndexMap.get(x)),f.listChildren().length>0&&(v.children=f.listChildren().map(c=>o.nodeIndexMap.get(c)))}),a.animations=r.listAnimations().map((f,E)=>{const v=o.createPropertyDef(f),w=new Map;return v.samplers=f.listSamplers().map((b,x)=>{const c=o.createPropertyDef(b);return c.input=o.accessorIndexMap.get(b.getInput()),c.output=o.accessorIndexMap.get(b.getOutput()),c.interpolation=b.getInterpolation(),w.set(b,x),c}),v.channels=f.listChannels().map(b=>{const x=o.createPropertyDef(b);return x.sampler=w.get(b.getSampler()),x.target={node:o.nodeIndexMap.get(b.getTargetNode()),path:b.getTargetPath()},x}),o.animationIndexMap.set(f,E),v}),a.scenes=r.listScenes().map((f,E)=>{const v=o.createPropertyDef(f);return v.nodes=f.listChildren().map(w=>o.nodeIndexMap.get(w)),o.sceneIndexMap.set(f,E),v});const T=r.getDefaultScene();return T&&(a.scene=r.listScenes().indexOf(T)),a.extensionsUsed=p.map(f=>f.extensionName),a.extensionsRequired=h.map(f=>f.extensionName),p.forEach(f=>f.write(o)),Uc(a),i}}function Uc(t){const e=[];for(const n in t){const s=t[n];(Array.isArray(s)&&s.length===0||s===null||s===""||s&&typeof s=="object"&&Object.keys(s).length===0)&&e.push(n)}for(const n of e)delete t[n]}var fr;(function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"})(fr||(fr={}));class Vc{constructor(){this._logger=Qe.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=cr.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const s=Ks(n)?this._binaryToJSON(n):{json:JSON.parse(fe.decodeText(n)),resources:{}};return await this._readResourcesExternal(s,this.dirname(e)),this._readResourcesInternal(s),s}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),Nc.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(fe.assertView(e));this._readResourcesInternal(n);const s=n.json;if(s.buffers&&s.buffers.some(r=>zc(n,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(s.images&&s.images.some(r=>Hc(n,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(fe.assertView(e)))}async writeJSON(e,n={}){if(n.format===ht.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return Bc.write(e,{format:n.format||ht.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Ve({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:s}=await this.writeJSON(e,{format:ht.GLB}),r=new Uint32Array([1179937895,2,12]),a=JSON.stringify(n),i=fe.pad(fe.encodeText(a),32),o=fe.toView(new Uint32Array([i.byteLength,1313821514])),u=fe.concat([o,i]);r[r.length-1]+=u.byteLength;const d=Object.values(s)[0];if(!d||!d.byteLength)return fe.concat([fe.toView(r),u]);const p=fe.pad(d,0),h=fe.toView(new Uint32Array([p.byteLength,5130562])),S=fe.concat([h,p]);return r[r.length-1]+=S.byteLength,fe.concat([fe.toView(r),u,S])}async _readResourcesExternal(e,n){var s=this;const r=e.json.images||[],a=e.json.buffers||[],i=[...r,...a].map(async function(o){const u=o.uri;if(!u||u.match(/data:/))return Promise.resolve();e.resources[u]=await s.readURI(s.resolve(n,u),"view"),s.lastReadBytes+=e.resources[u].byteLength});await Promise.all(i)}_readResourcesInternal(e){function n(a){if(a.uri){if(a.uri in e.resources){fe.assertView(e.resources[a.uri]);return}if(a.uri.match(/data:/)){const i=`__${Sc()}.${$t.extension(a.uri)}`;e.resources[i]=fe.createBufferFromDataURI(a.uri),a.uri=i}}}(e.json.images||[]).forEach(a=>{if(a.bufferView===void 0&&a.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(a)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:s}=e.json;return e={json:Ve({},e.json),resources:Ve({},e.resources)},n&&(e.json.images=n.map(r=>Ve({},r))),s&&(e.json.buffers=s.map(r=>Ve({},r))),e}_binaryToJSON(e){if(!Ks(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==fr.JSON)throw new Error("Missing required GLB JSON chunk.");const s=20,r=n[0],a=fe.decodeText(fe.toView(e,s,r)),i=JSON.parse(a),o=s+r;if(e.byteLength<=o)return{json:i,resources:{}};const u=new Uint32Array(e.buffer,e.byteOffset+o,2);if(u[1]!==fr.BIN)return{json:i,resources:{}};const d=u[0],p=fe.toView(e,o+8,d);return{json:i,resources:{[lr]:p}}}}function zc(t,e){return e.uri!==void 0&&!(e.uri in t.resources)}function Hc(t,e){return e.uri!==void 0&&!(e.uri in t.resources)&&e.bufferView===void 0}function Ks(t){if(t.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(t.buffer,t.byteOffset,3);return e[0]===1179937895&&e[1]===2}class Kc extends Vc{constructor(e=null,n=rt.DEFAULT_INIT){super(),this._fetch=void 0,this._fetchConfig=void 0,this._init=void 0,this._fetchEnabled=!1,this._fetch=e,this._fetchConfig=n,this._init=this.init()}async init(){return this._init?this._init:Promise.all([ps(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),ps(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])]).then(([e,n])=>{this._fs=e.promises,this._path=n})}setAllowNetwork(e){if(e&&!this._fetch)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this._fetchEnabled=e,this}async readURI(e,n){if(await this.init(),rt.isAbsoluteURL(e)){if(!this._fetchEnabled||!this._fetch)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");const s=await this._fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await s.arrayBuffer());case"text":return s.text()}}else switch(n){case"view":return this._fs.readFile(e);case"text":return this._fs.readFile(e,"utf8")}}resolve(e,n){return rt.isAbsoluteURL(e)||rt.isAbsoluteURL(n)?rt.resolve(e,n):this._path.resolve(e,decodeURIComponent(n))}dirname(e){return rt.isAbsoluteURL(e)?rt.dirname(e):this._path.dirname(e)}async write(e,n){await this.init(),await(!!e.match(/\.glb$/)?this._writeGLB(e,n):this._writeGLTF(e,n))}async _writeGLTF(e,n){var s=this;this.lastWriteBytes=0;const{json:r,resources:a}=await this.writeJSON(n,{format:ht.GLTF,basename:$t.basename(e)}),{_fs:i,_path:o}=this,u=o.dirname(e),d=JSON.stringify(r,null,2);await i.writeFile(e,d),this.lastWriteBytes+=d.length;for(const p of Wc(Object.keys(a),10))await Promise.all(p.map(async function(h){if(rt.isAbsoluteURL(h)){if(rt.extension(h)==="bin")throw new Error(`Cannot write buffer to path "${h}".`);return}const S=o.join(u,decodeURIComponent(h));await i.mkdir(o.dirname(S),{recursive:!0}),await i.writeFile(S,a[h]),s.lastWriteBytes+=a[h].byteLength}))}async _writeGLB(e,n){const s=await this.writeBinary(n);await this._fs.writeFile(e,s),this.lastWriteBytes=s.byteLength}}function Wc(t,e){const n=[];for(let s=0,r=t.length;s<r;s+=e){const a=[];for(let i=0;i<e&&s+i<r;i++)a.push(t[s+i]);n.push(a)}return n}const Gc=[79/255,209/255,197/255,1];function Xn(t,e=1){let n=t.replace(/^#/,"");n.length===3?n=n.split("").map(o=>o+o).join(""):n.length===4&&(n=n.split("").map(o=>o+o).join(""));let s=0,r=0,a=0,i=e;if(n.length===6)s=parseInt(n.slice(0,2),16)/255,r=parseInt(n.slice(2,4),16)/255,a=parseInt(n.slice(4,6),16)/255;else if(n.length===8)s=parseInt(n.slice(0,2),16)/255,r=parseInt(n.slice(2,4),16)/255,a=parseInt(n.slice(4,6),16)/255,i=parseInt(n.slice(6,8),16)/255;else throw new Error("Invalid hex color format");return[s,r,a,i]}function Yc(t,e,{positions:n,indices:s,colors:r}){const a=t.createPrimitive().setMode(On.Mode.TRIANGLES).setMaterial(t.createMaterial().setDoubleSided(!0).setAlphaMode(e[3]<1?"BLEND":"OPAQUE").setMetallicFactor(0).setRoughnessFactor(.8).setBaseColorFactor(e)).setAttribute("POSITION",t.createAccessor().setType(te.Type.VEC3).setArray(n)).setIndices(t.createAccessor().setType(te.Type.SCALAR).setArray(s));return r&&a.setAttribute("COLOR_0",t.createAccessor().setType(te.Type.VEC3).setArray(r)),a}function qc(t){const e=new Float32Array(t.vertices.length*3),n=new Uint32Array(t.faces.length*3),s=new Map;let r=0;const a=i=>{let o=s.get(i);if(o===void 0){const u=r*3,d=t.vertices[i];e[u]=d.x,e[u+1]=d.y,e[u+2]=d.z,o=r++,s.set(i,o)}return o};return t.faces.forEach((i,o)=>{const{vertices:u}=i;if(u.length<3)throw new Error("Face must have at least 3 vertices");const d=o*3;n[d]=a(u[0]),n[d+1]=a(u[1]),n[d+2]=a(u[2])}),{positions:e.slice(0,r*3),indices:n}}async function Jc(t,e=!1){const n=[[.615686274509804,.796078431372549,.3176470588235294,1],[.9764705882352941,.8431372549019608,.17254901960784313,1]],s=e?[Xn("#322"),Xn("#222")]:[Xn("#efdfdf"),Xn("#fff")],r=t.colors.map(p=>{for(let h=0;h<n.length;++h)if(p.length===4&&Math.abs(p[0]-n[h][0])<1e-6&&Math.abs(p[1]-n[h][1])<1e-6&&Math.abs(p[2]-n[h][2])<1e-6&&Math.abs(p[3]-n[h][3])<1e-6)return s[h];return p}),a=new Jt;a.createBuffer();const i=a.createScene(),o=a.createMesh(),u=new Map;t.faces.forEach(p=>{let h=u.get(p.colorIndex);h||u.set(p.colorIndex,h=[]),h.push(p)});for(const[p,h]of u.entries()){const S=r[p];o.addPrimitive(Yc(a,S,qc({vertices:t.vertices,faces:h})))}i.addChild(a.createNode().setMesh(o));const d=await new Kc().writeBinary(a);return new Blob([d],{type:"model/gltf-binary"})}function Ws(t){const e=t.split(`
`).map(p=>p.trim()).filter(p=>p.length>0&&!p.startsWith("#"));if(e.length===0)throw new Error("Empty OFF file");let n,s=0;if(e[0].match(/^OFF(\s|$)/))n=e[0].substring(3).trim(),s=1;else if(e[s]==="OFF"&&e.length>1)n=e[1],s=2;else throw new Error("Invalid OFF file: missing OFF header");const[r,a]=n.split(/\s+/).map(Number);if(isNaN(r)||isNaN(a))throw new Error("Invalid OFF file: invalid vertex or face counts");if(s+r+a>e.length)throw new Error("Invalid OFF file: not enough lines");const i=[];for(let p=0;p<r;p++){const h=e[s+p].split(/\s+/).map(Number);if(h.length<3||h.some(isNaN))throw new Error(`Invalid OFF file: invalid vertex at line ${s+p+1}`);i.push({x:h[0],y:h[1],z:h[2]})}s+=r;const o=[],u=new Map,d=[];for(let p=0;p<a;p++){const h=e[s+p].split(/\s+/).map(Number),S=h[0],N=h.slice(1,S+1),M=h.length>=S+4?h.slice(S+1,S+5).map(f=>f/255):Gc;if(N.length<3)throw new Error(`Invalid OFF file: face at line ${s+p+1} must have at least 3 vertices`);const F=M?M.join(","):"";let T=u.get(F);if(T==null){T=o.length;const[f,E,v,w]=M;o.push([f,E,v,w??1]),u.set(F,T)}if(N.length==3)d.push({vertices:N,colorIndex:T});else for(let f=1;f<N.length-1;f++)d.push({vertices:[N[0],N[f],N[f+1]],colorIndex:T})}return{vertices:i,faces:d,colors:o}}function Zr(){return Zr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Zr.apply(null,arguments)}function En(t){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(t)}function Xc(t,e){if(En(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(En(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zc(t){var e=Xc(t,"string");return En(e)=="symbol"?e:e+""}function Qc(t,e,n){return(e=Zc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function eu(t){if(Array.isArray(t))return Qr(t)}function tu(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ya(t,e){if(t){if(typeof t=="string")return Qr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qr(t,e):void 0}}function nu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ru(t){return eu(t)||tu(t)||Ya(t)||nu()}function su(t){if(Array.isArray(t))return t}function au(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function ou(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zn(t,e){return su(t)||au(t,e)||Ya(t,e)||ou()}var iu={handle:function(e){var n=e.index,s=e.handleIndex;return ue("p-slider-handle",{"p-slider-handle-start":n===0,"p-slider-handle-end":n===1,"p-slider-handle-active":s.current===n})},range:"p-slider-range",root:function(e){var n=e.props,s=e.vertical,r=e.horizontal;return ue("p-slider p-component",{"p-disabled":n.disabled,"p-slider-horizontal":r,"p-slider-vertical":s})}},lu=`
@layer primereact {
    .p-slider {
        position: relative;
    }
    
    .p-slider .p-slider-handle {
        position: absolute;
        cursor: grab;
        touch-action: none;
        display: block;
        z-index: 1;
    }
    
    .p-slider .p-slider-handle.p-slider-handle-active {
        z-index: 2;
    }
    
    .p-slider-range {
        position: absolute;
        display: block;
    }
    
    .p-slider-horizontal .p-slider-range {
        top: 0;
        left: 0;
        height: 100%;
    }
    
    .p-slider-horizontal .p-slider-handle {
        top: 50%;
    }
    
    .p-slider-vertical {
        height: 100px;
    }
    
    .p-slider-vertical .p-slider-handle {
        left: 50%;
    }
    
    .p-slider-vertical .p-slider-range {
        bottom: 0;
        left: 0;
        width: 100%;
    }
}
`,cu={handle:{position:"absolute"},range:{position:"absolute"}},on=gt.extend({defaultProps:{__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,children:void 0},css:{classes:iu,styles:lu,inlineStyles:cu}});function Gs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gs(Object(n),!0).forEach(function(s){Qc(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var qa=l.memo(l.forwardRef(function(t,e){var n,s,r,a=ct(),i=l.useContext(mt),o=on.getProps(t,i),u=l.useRef(null),d=l.useRef(0),p=l.useRef(!1),h=l.useRef(!1),S=l.useRef(0),N=l.useRef(0),M=l.useRef(0),F=l.useRef(0),T=l.useRef(),f=o.range?(n=o.value)!==null&&n!==void 0?n:[o.min,o.max]:(s=(r=o.value)!==null&&r!==void 0?r:o.min)!==null&&s!==void 0?s:0,E=o.orientation==="horizontal",v=o.orientation==="vertical",w=Ln({type:"mousemove",listener:function(D){return Ie(D)}}),b=Zn(w,2),x=b[0],c=b[1],m=Ln({type:"mouseup",listener:function(D){return ke(D)}}),g=Zn(m,2),y=g[0],C=g[1],k=Ln({type:"touchmove",listener:function(D){return Ie(D)}}),A=Zn(k,2),z=A[0],_=A[1],V=Ln({type:"touchend",listener:function(D){return ke(D)}}),I=Zn(V,2),$=I[0],K=I[1],X=on.setMetaData({props:o}),ee=X.ptm,ae=X.cx,Oe=X.sx,Se=X.isUnstyled;Et(on.css.styles,Se,{name:"slider"});var Z=function(D,L){var B=o.range?f[d.current]:f,re=(o.step||1)*L;He(D,B+re),D.preventDefault()},oe=function(D,L){o.disabled||(h.current=!0,_e(),p.current=!0,o.range&&f[0]===o.max?d.current=0:d.current=L,D.preventDefault())},Ie=function(D){h.current&&(be(D),D.preventDefault())},ke=function(D){if(h.current){h.current=!1;var L=be(D);o.onSlideEnd&&o.onSlideEnd({originalEvent:D,value:L}),T.current=void 0,c(),C(),_(),K()}},Le=function(D,L){x(),y(),oe(D,L)},le=function(D,L){D.changedTouches&&D.changedTouches[0]&&(T.current=D.changedTouches[0].identifier),z(),$(),oe(D,L)},Re=function(D,L){if(!o.disabled){d.current=L;var B=D.key;switch(B){case"ArrowRight":case"ArrowUp":Z(D,1);break;case"ArrowLeft":case"ArrowDown":Z(D,-1);break;case"PageUp":Z(D,10),D.preventDefault();break;case"PageDown":Z(D,-10),D.preventDefault();break;case"Home":Z(D,-f),D.preventDefault();break;case"End":Z(D,o.max),D.preventDefault();break}}},Ne=function(D){if(!o.disabled){if(!p.current){_e();var L=be(D);o.onSlideEnd&&o.onSlideEnd({originalEvent:D,value:L})}p.current=!1}},_e=function(){var D=u.current.getBoundingClientRect();S.current=D.left+W.getWindowScrollLeft(),N.current=D.top+W.getWindowScrollTop(),M.current=u.current.offsetWidth,F.current=u.current.offsetHeight},Be=function(D){var L,B=Array.from((L=D.changedTouches)!==null&&L!==void 0?L:[]).find(function(re){return re.identifier===T.current})||D;return{pageX:B.pageX,pageY:B.pageY}},be=function(D){var L,B=Be(D),re=B.pageX,me=B.pageY;if(!(!re||!me)){E?L=(re-S.current)*100/M.current:L=(N.current+F.current-me)*100/F.current;var xe=(o.max-o.min)*(L/100)+o.min;if(o.step){var we=o.range?f[d.current]:f,Ye=xe-we;Ye<0?xe=we+Math.ceil(xe/o.step-we/o.step)*o.step:Ye>0&&(xe=we+Math.floor(xe/o.step-we/o.step)*o.step)}else xe=Math.floor(xe);return He(D,xe)}},He=function(D,L){var B=parseFloat(L.toFixed(10)),re=B;return o.range?(d.current===0?B<o.min?B=o.min:B>o.max&&(B=o.max):B>o.max?B=o.max:B<o.min&&(B=o.min),re=ru(f),re[d.current]=B,o.onChange&&o.onChange({originalEvent:D,value:re})):(B<o.min?B=o.min:B>o.max&&(B=o.max),re=B,o.onChange&&o.onChange({originalEvent:D,value:re})),re},$e=function(D,L,B){D=ce.isEmpty(D)?null:D,L=ce.isEmpty(L)?null:L;var re={transition:h.current?"none":null,left:D!=null?D+"%":null,bottom:L!=null?L+"%":null},me=a(Ot({className:ae("handle",{index:B,handleIndex:d}),style:Ot(Ot({},Oe("handle",{dragging:h,leftValue:D,bottomValue:L})),re),tabIndex:o.tabIndex,role:"slider",onMouseDown:function(we){return Le(we,B)},onTouchStart:function(we){return le(we,B)},onKeyDown:function(we){return Re(we,B)},"aria-valuemin":o.min,"aria-valuemax":o.max,"aria-valuenow":D||L||0,"aria-orientation":o.orientation},Ge),ee("handle"));return l.createElement("span",me)},Ue=function(){var D=(f[0]<o.min?o.min:f[0]-o.min)*100/(o.max-o.min),L=(f[1]>o.max?o.max:f[1]-o.min)*100/(o.max-o.min),B=E?$e(D,null,0):$e(null,D,0),re=E?$e(L,null,1):$e(null,L,1),me=L>D?L-D:D-L,xe=L>D?D:L,we=E?{left:xe+"%",width:me+"%"}:{bottom:xe+"%",height:me+"%"},Ye=a({className:ae("range"),style:Ot(Ot({},Oe("range")),we)},ee("range"));return l.createElement(l.Fragment,null,l.createElement("span",Ye),B,re)},et=function(){var D;f<o.min?D=o.min:f>o.max?D=o.max:D=(f-o.min)*100/(o.max-o.min);var L=E?{width:D+"%"}:{height:D+"%"},B=E?$e(D,null,null):$e(null,D,null),re=a({className:ae("range"),style:Ot(Ot({},Oe("range")),L)},ee("range"));return l.createElement(l.Fragment,null,l.createElement("span",re),B)};l.useImperativeHandle(e,function(){return{props:o,getElement:function(){return u.current}}});var tt=on.getOtherProps(o),Ge=ce.reduceKeys(tt,W.ARIA_PROPS),Ae=o.range?Ue():et(),at=a({style:o.style,className:ue(o.className,ae("root",{vertical:v,horizontal:E})),onClick:Ne},on.getOtherProps(o),ee("root"));return l.createElement("div",Zr({id:o.id,ref:u},at),Ae)}));qa.displayName="Slider";function hn(){return hn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},hn.apply(null,arguments)}function Sn(t){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(t)}function uu(t,e){if(Sn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Sn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fu(t){var e=uu(t,"string");return Sn(e)=="symbol"?e:e+""}function du(t,e,n){return(e=fu(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pu(t){if(Array.isArray(t))return t}function hu(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function Ys(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function mu(t,e){if(t){if(typeof t=="string")return Ys(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ys(t,e):void 0}}function gu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yu(t,e){return pu(t)||hu(t,e)||mu(t,e)||gu()}var vu={box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon",root:function(e){var n=e.props,s=e.checked,r=e.context;return ue("p-checkbox p-component",{"p-highlight":s,"p-disabled":n.disabled,"p-invalid":n.invalid,"p-variant-filled":n.variant?n.variant==="filled":r&&r.inputStyle==="filled"})}},Qn=gt.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,invalid:!1,variant:null,name:null,onChange:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0},css:{classes:vu}});function qs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qs(Object(n),!0).forEach(function(s){du(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Ja=l.memo(l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=Qn.getProps(t,s),a=l.useState(!1),i=yu(a,2),o=i[0],u=i[1],d=Qn.setMetaData({props:r,state:{focused:o},context:{checked:r.checked===r.trueValue,disabled:r.disabled}}),p=d.ptm,h=d.cx,S=d.isUnstyled;Et(Qn.css.styles,S,{name:"checkbox"});var N=l.useRef(null),M=l.useRef(r.inputRef),F=function(){return r.checked===r.trueValue},T=function(y){if(!(r.disabled||r.readOnly)&&r.onChange){var C,k=F(),A=k?r.falseValue:r.trueValue,z={originalEvent:y,value:r.value,checked:A,stopPropagation:function(){y?.stopPropagation()},preventDefault:function(){y?.preventDefault()},target:{type:"checkbox",name:r.name,id:r.id,value:r.value,checked:A}};if(r==null||(C=r.onChange)===null||C===void 0||C.call(r,z),y.defaultPrevented)return;W.focus(M.current)}},f=function(y){var C;u(!0),r==null||(C=r.onFocus)===null||C===void 0||C.call(r,y)},E=function(y){var C;u(!1),r==null||(C=r.onBlur)===null||C===void 0||C.call(r,y)};l.useImperativeHandle(e,function(){return{props:r,focus:function(){return W.focus(M.current)},getElement:function(){return N.current},getInput:function(){return M.current}}}),l.useEffect(function(){ce.combinedRefs(M,r.inputRef)},[M,r.inputRef]),pt(function(){M.current.checked=F()},[r.checked,r.trueValue]),Cn(function(){r.autoFocus&&W.focus(M.current,r.autoFocus)});var v=F(),w=ce.isNotEmpty(r.tooltip),b=Qn.getOtherProps(r),x=n({id:r.id,className:ue(r.className,h("root",{checked:v,context:s})),style:r.style,"data-p-highlight":v,"data-p-disabled":r.disabled,onContextMenu:r.onContextMenu,onMouseDown:r.onMouseDown},b,p("root")),c=function(){var y=ce.reduceKeys(b,W.ARIA_PROPS),C=n(Js({id:r.inputId,type:"checkbox",className:h("input"),name:r.name,tabIndex:r.tabIndex,onFocus:function(A){return f(A)},onBlur:function(A){return E(A)},onChange:function(A){return T(A)},disabled:r.disabled,readOnly:r.readOnly,required:r.required,"aria-invalid":r.invalid,checked:v},y),p("input"));return l.createElement("input",hn({ref:M},C))},m=function(){var y=n({className:h("icon")},p("icon")),C=n({className:h("box",{checked:v}),"data-p-highlight":v,"data-p-disabled":r.disabled},p("box")),k=v?r.icon||l.createElement(oa,y):null,A=We.getJSXIcon(k,Js({},y),{props:r,checked:v});return l.createElement("div",C,A)};return l.createElement(l.Fragment,null,l.createElement("div",hn({ref:N},x),c(),m()),w&&l.createElement(rs,hn({target:N,content:r.tooltip,pt:p("tooltip")},r.tooltipOptions)))}));Ja.displayName="Checkbox";function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},dr.apply(null,arguments)}function bu(t){if(Array.isArray(t))return t}function xu(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,i,o=[],u=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(o.push(s.value),o.length!==e);u=!0);}catch(p){d=!0,r=p}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return o}}function Xs(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function wu(t,e){if(t){if(typeof t=="string")return Xs(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xs(t,e):void 0}}function Eu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zs(t,e){return bu(t)||xu(t,e)||wu(t,e)||Eu()}var er=gt.extend({defaultProps:{__TYPE:"Fieldset",id:null,legend:null,className:null,style:null,toggleable:null,collapsed:null,collapseIcon:null,transitionOptions:null,expandIcon:null,onExpand:null,onCollapse:null,onToggle:null,onClick:null,children:void 0},css:{classes:{root:function(e){var n=e.props;return ue("p-fieldset p-component",{"p-fieldset-toggleable":n.toggleable})},toggleableContent:"p-toggleable-content",togglericon:"p-fieldset-toggler",legendTitle:"p-fieldset-legend-text",legend:"p-fieldset-legend p-unselectable-text",content:"p-fieldset-content",transition:"p-toggleable-content"},styles:`
        @layer primereact {
            .p-fieldset-legend > a,
            .p-fieldset-legend > span {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .p-fieldset-toggleable .p-fieldset-legend a {
                cursor: pointer;
                user-select: none;
                overflow: hidden;
                position: relative;
                text-decoration: none;
            }
            
            .p-fieldset-legend-text {
                line-height: 1;
            }
        }
        `}}),Xa=l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=er.getProps(t,s),a=l.useState(r.id),i=Zs(a,2),o=i[0],u=i[1],d=l.useState(r.collapsed),p=Zs(d,2),h=p[0],S=p[1],N=r.toggleable?r.onToggle?r.collapsed:h:!1,M=l.useRef(null),F=l.useRef(null),T=o+"_header",f=o+"_content",E=er.setMetaData({props:r,state:{id:o,collapsed:N}}),v=E.ptm,w=E.cx,b=E.isUnstyled;Et(er.css.styles,b,{name:"fieldset"});var x=function($){r.toggleable&&(N?c($):m($),r.onToggle&&r.onToggle({originalEvent:$,value:!N})),$.preventDefault()},c=function($){r.onToggle||S(!1),r.onExpand&&r.onExpand($)},m=function($){r.onToggle||S(!0),r.onCollapse&&r.onCollapse($)};Cn(function(){r.id||u(hr())});var g=function($){($.code==="Enter"||$.code==="NumpadEnter"||$.code==="Space")&&(x($),$.preventDefault())},y=function(){var $=n({className:w("content")},v("content")),K=n({ref:F,id:f,role:"region","aria-labelledby":T,className:w("toggleableContent")},v("toggleableContent")),X=n({classNames:w("transition"),timeout:{enter:1e3,exit:450},in:!N,unmountOnExit:!0,options:r.transitionOptions},v("transition"));return l.createElement(mr,dr({nodeRef:F},X),l.createElement("div",K,l.createElement("div",$,r.children)))},C=function(){if(r.toggleable){var $=n({className:w("togglericon")},v("togglericon")),K=N?r.expandIcon||l.createElement(Io,$):r.collapseIcon||l.createElement(mo,$),X=We.getJSXIcon(K,$,{props:r});return X}return null},k=function(){var $=n({className:w("legendTitle")},v("legendTitle")),K=n({id:T,role:"button","aria-expanded":!N,"aria-controls":f,onKeyDown:g,onClick:x,"aria-label":r.legend,tabIndex:0},v("toggler"));if(r.toggleable){var X=C();return l.createElement("a",K,X,l.createElement("span",$,r.legend),l.createElement(jt,null))}return l.createElement("span",dr({},$,{id:T}),r.legend)},A=function(){var $=n({className:w("legend")},v("legend"));if(r.legend!=null||r.toggleable){var K=k();return l.createElement("legend",$,K)}};l.useImperativeHandle(e,function(){return{props:r,getElement:function(){return M.current},getContent:function(){return F.current}}});var z=n({id:o,ref:M,style:r.style,className:ue(r.className,w("root")),onClick:r.onClick},er.getOtherProps(r),v("root")),_=A(),V=y();return l.createElement("fieldset",z,_,V)});Xa.displayName="Fieldset";function Su(t){const e=(t.parameterSet?.parameters??[]).reduce((s,r)=>(s[r.group]||(s[r.group]=[]),s[r.group].push(r),s),{}),n=Object.entries(e);return t.parameterSet?j.jsx("div",{className:t.className,style:{display:"flex",flexDirection:"column",alignItems:"center",overflowY:"scroll",padding:16,...t.style,bottom:"unset"},children:n.map(([s,r])=>j.jsx(Xa,{style:{width:"99%",backgroundColor:"transparent"},legend:s,toggleable:!0,children:r.map(a=>j.jsx(Tu,{value:t.parameterValues[a.name],param:a,handleChange:t.onChange},a.name))},s))}):j.jsx(Yt,{style:t.style,text:"Waiting for customizer to run"})}function Tu({param:t,value:e,className:n,style:s,handleChange:r}){return j.jsxs("div",{style:{flex:1,...s,display:"flex",marginTop:8,marginBottom:8,flexDirection:"column"},children:[j.jsxs("div",{style:{flex:1,display:"flex",gap:8,flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[j.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minWidth:100},children:[j.jsx("label",{children:j.jsx("b",{children:t.name})}),j.jsx("div",{style:{wordBreak:"break-all"},children:t.caption})]}),j.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.type==="number"&&"options"in t&&j.jsx(ms,{style:{flex:1},value:e||t.initial,options:t.options,onChange:a=>r(t.name,a.value),optionLabel:"name",optionValue:"value"}),t.type==="string"&&t.options&&j.jsx(ms,{value:e||t.initial,options:t.options,onChange:a=>r(t.name,a.value),optionLabel:"name",optionValue:"value"}),t.type==="boolean"&&j.jsx(Ja,{checked:e??t.initial,onChange:a=>r(t.name,a.checked)}),!Array.isArray(t.initial)&&t.type==="number"&&!("options"in t)&&j.jsx(gs,{style:{flex:1},value:e||t.initial,showButtons:!0,size:5,onValueChange:a=>r(t.name,a.value)}),t.type==="string"&&!t.options&&j.jsx(ra,{style:{flex:1},value:e||t.initial,onChange:a=>r(t.name,a.target.value)}),Array.isArray(t.initial)&&"min"in t&&j.jsx("div",{style:{flex:1,display:"flex",flexDirection:"row"},children:t.initial.map((a,i)=>j.jsx(gs,{style:{flex:1},value:e?.[i]??t.initial[i],min:t.min,max:t.max,showButtons:!0,size:5,step:t.step,onValueChange:o=>{const u=[...e??t.initial];u[i]=o.value,r(t.name,u)}},i))}),j.jsx(qt,{onClick:()=>r(t.name,t.initial),style:{marginRight:"0",visibility:e===void 0||JSON.stringify(e)===JSON.stringify(t.initial)?"hidden":"visible"},tooltipOptions:{position:"left"},icon:"pi pi-refresh",className:"p-button-text"})]})]}),!Array.isArray(t.initial)&&t.type==="number"&&t.min!==void 0&&j.jsx(qa,{style:{flex:1,minHeight:"5px",margin:"5px 40px 5px 5px"},value:e||t.initial,min:t.min,max:t.max,step:t.step,onChange:a=>r(t.name,a.value)})]})}const Cu=`/*
  Hello there!

  If you're new to OpenSCAD, please learn the basics here:
  https://openscad.org/documentation.html

  There are lots of amazing libraries in the OpenSCAD ecosystem
  (see this list: https://openscad.org/libraries.html).

  Some of these libraries are bundled with this playground
  (search for "demo" or "example" in the file explorer above)
  and can be included directly from your models.

  Any bugs (this is an Alpha!) or ideas of features?
  https://github.com/openscad/openscad-playground/issues/new
*/

title = "OpenSCAD";

color("gray")
    rotate([90, 0, 0])
        translate([0, debug ? -60 : -20, 0])
            linear_extrude(1)
                text(title,
                    halign="center",
                    valign="center");

// You can find the original for the following example in the file explorer above,
// under openscad / examples / Basic / CSG-modules.scad

// CSG-modules.scad - Basic usage of modules, if, color, $fs/$fa

// Change this to false to remove the helper geometry
debug = true;

// Global resolution
$fs=$preview ? 1 : 0.1;  // Don't generate smaller facets than 0.1 mm
$fa=$preview ? 15 : 5;    // Don't generate larger angles than 5 degrees

// Main geometry
difference() {
    intersection() {
        body();
        intersector();
    }
    holes();
}

// Helpers
if (debug) helpers();

// Core geometric primitives.
// These can be modified to create variations of the final object

module body() {
    color("Blue") sphere(10);
}

module intersector() {
    color("Red") cube(15, center=true);
}

module holeObject() {
    color("Lime") cylinder(h=20, r=5, center=true);
}

// Various modules for visualizing intermediate components

module intersected() {
    intersection() {
        body();
        intersector();
    }
}

module holeA() rotate([0,90,0]) holeObject();
module holeB() rotate([90,0,0]) holeObject();
module holeC() holeObject();

module holes() {
    union() {
        holeA();
        holeB();
        holeC();
    }
}

module helpers() {
    // Inner module since it's only needed inside helpers
    module line() color("Black") cylinder(r=1, h=10, center=true);

    scale(0.5) {
        translate([-30,0,-40]) {
            intersected();
            translate([-15,0,-35]) body();
            translate([15,0,-35]) intersector();
            translate([-7.5,0,-17.5]) rotate([0,30,0]) line();
            translate([7.5,0,-17.5]) rotate([0,-30,0]) line();
        }
        translate([30,0,-40]) {
            holes();
            translate([-10,0,-35]) holeA();
            translate([10,0,-35]) holeB();
            translate([30,0,-35]) holeC();
            translate([5,0,-17.5]) rotate([0,-20,0]) line();
            translate([-5,0,-17.5]) rotate([0,30,0]) line();
            translate([15,0,-17.5]) rotate([0,-45,0]) line();
        }
        translate([-20,0,-22.5]) rotate([0,45,0]) line();
        translate([20,0,-22.5]) rotate([0,-45,0]) line();
    }
}

echo(version=version());
// Written by Marius Kintel <marius@kintel.net>
//
// To the extent possible under law, the author(s) have dedicated all
// copyright and related and neighboring rights to this software to the
// public domain worldwide. This software is distributed without any
// warranty.
//
// You should have received a copy of the CC0 Public Domain
// Dedication along with this software.
// If not, see <http://creativecommons.org/publicdomain/zero/1.0/>.
`,es=t=>t.replaceAll(/\/\*(.|[\s\S])*?\*\/|\/\/.*?$/gm,"");function Iu(t,e,n){const s=es(e),r=[],a={},i={},o=[],u=[];for(const d of s.matchAll(/(use|include)\s*<([^>]+)>/g))(d[1]=="use"?u:o).push(d[2]);for(const d of s.matchAll(/(?:^|[{};])\s*([$\w]+)\s*=/g))r.push(d[1]);for(const d of s.matchAll(/(function|module)\s+([$\w]+)\s*\(([^)]*)\)(?:\s*(?:=\s*)?(\{\}|[^{}]+?;))?/gm)){const p=d[1],h=d[2];if(n&&h.startsWith("_"))continue;const S=d[3],N=d[4],M=[];if(/^(\s*([$\w]+(\s*=[^,()[]+)?(\s*,\s*[$\w]+(\s*=[^,()[]+)?)*)?\s*)$/m.test(S))for(const F of S.split(",")){const T=/^\s*([$\w]+)(?:\s*=([^,()[]+))?\s*$/.exec(F);if(T){const f=T[1],E=T[2];M.push({name:f,defaultValue:E})}}(p=="function"?a:i)[h]={path:t,name:h,signature:`${h}(${S.replaceAll(/[\s]+/gm," ").replaceAll(/\b | \b/g,"")})`,params:M,referencesChildren:N!=null?N.indexOf("children()")>=0:null}}return{vars:r,functions:a,modules:i,includes:o,uses:u}}const Ru=`
  $fa=undef;
  $fs=undef;
  $fn=undef;
  $t=undef;

  $preview=undef;

  // shows rotation
  $vpr=undef;
  // shows translation (i.e. won't be affected by rotate and zoom)
  $vpt=undef;
  // shows the FOV of the view [Note: Requires version 2021.01]
  $vpf=undef;
  // shows the camera distance [Note: Requires version 2015.03]
  $vpd=undef;

  PI=undef;

  function abs(x) = x;
  function acos(x) = x;
  function asin(x) = x;
  function atan(x) = x;
  function atan2(y, x) = x;
  function ceil(x) = x;
  function chr(x) = 0;
  function len(assignments) = $children;
  function let(x) = x;
  function ln(x) = x;
  function log(x) = x;
  function lookup(key, array) = x;
  function max(values) = x;
  function min(values) = x;
  function sqrt(x) = x;
  function tan(degrees) = x;
  function rands(min_value, max_value, value_count, seed_value=undef) = x;
  function search(match_value, string_or_vector, num_returns_per_match=1, index_col_num=0) = x;
  function ord(x) = x;
  function round(x) = x;
  function sign(x) = x;
  function sin(degrees) = x;
  function str(values) = x;
  function norm(x) = x;
  function pow(base, exponent) = x;
  function concat(values) = x;
  function cos(degrees) = x;
  function cross(a, b) = x;
  function floor(x) = x;
  function exp(x) = x;
  function chr(x) = x;
  function is_undef(x) = x;
  function is_list(x) = x;
  function is_num(x) = x;
  function is_bool(x) = x;
  function is_string(x) = x;
  function is_function(x) = x;

  function version() = '';
  function version_num() = 0;

  $parent_modules=0;
  module parent_module(n) {}

  module children() {}

  module render(convexity=undef) {}
  module surface(file, center=false, invert=false, convexity=undef) {}

  function assert(condition, message=undef) = children();
  module assert(condition, message=undef) children();

  module cube(size, center=false) {}
  module sphere(r, d=undef, $fa, $fs, $fn) {}
  module cylinder(h, r, r1=undef, r2, d, d1, d2, center=false, $fa, $fs, $fn) {}
  module polyhedron(points, faces, convexity=undef) {}

  module square(size, center=false) {}
  module circle(r, d=undef, $fa, $fs, $fn) {}
  module polygon(points, paths, convexity=undef) {}
  module linear_extrude(height, center=false, twist=undef, slices=undef, scale=undef, convexity=undef) children();
  module rotate_extrude(degrees, convexity=undef, $fa, $fs, $fn) children();

  module scale(v) children();
  module resize(newsize, auto=false) children();
  module rotate(a, v=undef) children();
  module translate(v) children();
  module mirror(v) children();
  module multmatrix(m) children();

  module color(c, alpha) children();

  module offset(r, delta=undef, chamfer) children();

  module minkowski() children();
  module union() children();
  module difference() children();
  module intersection() children();
  module hull() children();

  module children() {}

  // module for(i=undef) children();

  module import(file, convexity=undef, $fn, $fa, $fs) {}
`,Ou=["abs","acos","asin","atan","atan2","ceil","len","let","ln","log","lookup","max","min","sqrt","tan","rands","search","sign","sin","str","norm","pow","concat","cos","cross","floor","exp","chr"],Mu=["children","circle","color","cube","cylinder","diameter","difference","echo","extrude","for","function","hull","if","include","intersection_for","intersection","linear","minkowski","mirror","module","multmatrix","offset","polyhedron","projection","radius","render","resize","rotate","round","scale","sphere","square","surface","translate","union","use","value","version"],Pu=["false","true","PI","undef","$children","$fa","$fn","$fs","$t","$vpd","$vpr","$vpt"],Au={colorizedBracketPairs:[["{","}"],["(",")"],["[","]"]],wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:Fe.languages.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:Fe.languages.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:Fe.languages.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:Fe.languages.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}},Nu={defaultToken:"invalid",tokenPostfix:".js",keywords:[...Ou,...Mu,...Pu,"each"],typeKeywords:[],operators:["<=",">=","==","!=","=>","+","-","*","/","%","<<",">>",">>>","&","|","^","!","&&","||","?",":","="],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\[abfnrtv\\"']/,digits:/\d+/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}},Za={conf:Au,language:Nu};function Qs(t,e){const n=[],s=[];let r=!0,a=0;for(const o of e.params??[]){if(r)if(o.defaultValue!=null)r=!1;else{n.push(`${o.name.replaceAll("$","\\$")}=${"${"+ ++a+":"+o.name+"}"}`);continue}s.push(o.name)}s.length&&n.push(`${"${"+ ++a+":"+s.join("|")+"=}"}`);let i=`${t.replaceAll("$","\\$")}(${n.join(", ")})`;return e.referencesChildren!==null&&(i+=e.referencesChildren?" ${"+ ++a+":children}":";"),{label:e.signature,kind:Fe.languages.CompletionItemKind.Function,insertText:i,insertTextRules:Fe.languages.CompletionItemInsertTextRule.InsertAsSnippet}}const _u=[...[!0,!1].map(t=>({label:`${t}`,kind:Fe.languages.CompletionItemKind.Value,insertText:`${t}`,insertTextRules:Fe.languages.CompletionItemInsertTextRule.InsertAsSnippet})),...Za.language.keywords.map(t=>({label:t,kind:Fe.languages.CompletionItemKind.Function,insertText:t,insertTextRules:Fe.languages.CompletionItemInsertTextRule.InsertAsSnippet}))],ju=["for(${1:variable}=[${2:start}:${3:end}) ${4:body}","for(${1:variable}=[${2:start}:${3:increment}:${4:end}) ${5:body}",`if (\${1:condition}) {
	$0
} else {
	
}`];function Fu(t){return t.replaceAll(/\$\{\d+:([$\w]+)\}/g,"$1").replaceAll(/\$\d+/g,"").replaceAll(/\s+/g," ").trim()}async function ku(t,e,n){const s={},r=p=>p.startsWith("/")?p:`${e}/${p}`,a={};for(const[p,{deployed:h,symlinks:S}]of Object.entries(n))if(p!="fonts"&&h!==!1)for(const N in S)a[N]=`${p}/${S[N]}`;async function i(p){p in a&&(p=a[p]),p=r(p);try{const h=t.readFileSync(p);return new TextDecoder("utf-8").decode(h)}catch(h){throw h}}const o="<builtins>";let u;function d(p,h,{skipPrivates:S,addBuiltins:N}){return s[p]??=new Promise(async(M,F)=>{h==null&&(h=await i(p));const T={functions:{},modules:{},vars:[],includes:[],uses:[]},f=(b,x)=>{T.functions={...T.functions,...x.functions},T.modules={...T.modules,...x.modules},b||(T.vars=[...T.vars,...x.vars])},E=(p.split("/").slice(0,-1).join("/")||".")+"/",v=async(b,x)=>{let c=!1;for(const m of[`/libraries/${x}`,`${E}/${x}`,x])try{const g=await i(m),y=await d(x,g,{skipPrivates:!0,addBuiltins:!1});f(b,y),c=!0;break}catch(g){console.warn(`Failed to read file option ${m} for ${x} ${b?"used":"included"} by ${p}`,g)}c||console.error("Failed to find ",x,"(context imported in ",p,")")};N&&p!=o&&f(!1,u);const w=Iu(p,h,S);await Promise.all([...(w.uses??[]).map(b=>[b,!0]),...(w.includes??[]).map(b=>[b,!1])].map(([b,x])=>v(x,b))),f(!1,w),M(T)})}return u=await d(o,Ru,{skipPrivates:!1,addBuiltins:!1}),{triggerCharacters:["<","/"],provideCompletionItems:(async(p,h,S,N)=>{try{const{word:M}=p.getWordUntilPosition(h),F=p.getOffsetAt(h),T=p.getValue();let f=T.substring(0,F);const E=f.lastIndexOf(`
`);f=f.substring(E+1);const v=/\b(include|use)\s*<([^<>\n"]*)$/.exec(f);if(v){const C=v[2];let k,A,z;const _=C.lastIndexOf("/");_<0?(z="",A=C):(z=C.substring(0,_),A=C.substring(_+1));const V=z==""?"":"/"+z;let I=null;for(const K of[Or("/libraries",V),Or(e,V)]){I=z==""?[...Object.keys(a)]:[];try{I=[...t.readdirSync(K)??[],...I];break}catch{}}const $=[];if(!I)console.warn("Failed to find folder named "+V);else for(const K of I){if(A!=""&&!K.startsWith(A)||/^(LICENSE.*|fonts)$/.test(K)||z==""&&K in n&&n[K].symlinks)continue;const X=!K.endsWith(".scad"),ee=K+(X?"":`>
`);$.push({label:K,kind:X?Fe.languages.CompletionItemKind.Folder:Fe.languages.CompletionItemKind.File,insertText:ee})}return $.sort(),{suggestions:$}}const w=Or(e,"foo.scad");delete s[w];const b=await d(w,T,{skipPrivates:!1,addBuiltins:!0}),x=es(f),c=/(^|.*?[{});]|>\s*\n)\s*([$\w]*)$/m.exec(x);if(c){const C=c[1],k=[..._u,...ws(b.modules??{},(A,z)=>Qs(A,z),A=>A.indexOf(M)>=0),...(b.vars??[]).filter(A=>A.indexOf(M)>=0).map(A=>({label:A,kind:Fe.languages.CompletionItemKind.Variable,insertText:A.replaceAll("$","\\$"),insertTextRules:Fe.languages.CompletionItemInsertTextRule.InsertAsSnippet})),...ju.map(A=>({label:Fu(A).replaceAll(/ body/g,""),kind:Fe.languages.CompletionItemKind.Keyword,insertText:A,insertTextRules:Fe.languages.CompletionItemInsertTextRule.InsertAsSnippet}))];return k.sort((A,z)=>A.insertText.indexOf(C)-z.insertText.indexOf(C)),{suggestions:k}}const m=es(T),g=[...ws(b.functions??{},(C,k)=>[C,Qs(C,k)],C=>C.indexOf(M)>=0)];return g.sort(([C],[k])=>C.indexOf(M)-k.indexOf(M)),{suggestions:g.map(([C,k])=>k)}}catch(M){return console.error(M),{suggestions:[]}}})}}async function Lu(t,e,n){const s=await ls.init();s.languages.register({id:"openscad",extensions:[".scad"],mimetypes:["text/openscad"]});const{conf:r,language:a}=Za;s.languages.setLanguageConfiguration("openscad",r),s.languages.setMonarchTokensProvider("openscad",a),s.languages.registerCompletionItemProvider("openscad",await ku(t,e,n))}function ts(){return ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ts.apply(null,arguments)}function Tn(t){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(t)}function $u(t,e){if(Tn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Tn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Du(t){var e=$u(t,"string");return Tn(e)=="symbol"?e:e+""}function Bu(t,e,n){return(e=Du(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Uu={root:function(e){var n=e.props,s=e.context,r=e.isFilled;return ue("p-inputtextarea p-inputtext p-component",{"p-disabled":n.disabled,"p-filled":r,"p-inputtextarea-resizable":n.autoResize,"p-invalid":n.invalid,"p-variant-filled":n.variant?n.variant==="filled":s&&s.inputStyle==="filled"})}},Vu=`
@layer primereact {
    .p-inputtextarea-resizable {
        overflow: hidden;
        resize: none;
    }
    
    .p-fluid .p-inputtextarea {
        width: 100%;
    }
}
`,tr=gt.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,invalid:!1,variant:null,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0,className:null},css:{classes:Uu,styles:Vu}});function ea(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ea(Object(n),!0).forEach(function(s){Bu(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var ds=l.memo(l.forwardRef(function(t,e){var n=ct(),s=l.useContext(mt),r=tr.getProps(t,s),a=l.useRef(e),i=l.useRef(0),o=tr.setMetaData(ta(ta({props:r},r.__parentMetadata),{},{context:{disabled:r.disabled}})),u=o.ptm,d=o.cx,p=o.isUnstyled;Et(tr.css.styles,p,{name:"inputtextarea"});var h=function(m){r.autoResize&&E(),r.onFocus&&r.onFocus(m)},S=function(m){r.autoResize&&E(),r.onBlur&&r.onBlur(m)},N=function(m){r.autoResize&&E(),r.onKeyUp&&r.onKeyUp(m)},M=function(m){r.onKeyDown&&r.onKeyDown(m),r.keyfilter&&Cr.onKeyPress(m,r.keyfilter,r.validateOnly)},F=function(m){r.onBeforeInput&&r.onBeforeInput(m),r.keyfilter&&Cr.onBeforeInput(m,r.keyfilter,r.validateOnly)},T=function(m){r.onPaste&&r.onPaste(m),r.keyfilter&&Cr.onPaste(m,r.keyfilter,r.validateOnly)},f=function(m){var g=m.target;r.autoResize&&E(ce.isEmpty(g.value)),r.onInput&&r.onInput(m),ce.isNotEmpty(g.value)?W.addClass(g,"p-filled"):W.removeClass(g,"p-filled")},E=function(m){var g=a.current;g&&v()&&(i.current||(i.current=g.scrollHeight,g.style.overflow="hidden"),(i.current!==g.scrollHeight||m)&&(g.style.height="",g.style.height=g.scrollHeight+"px",parseFloat(g.style.height)>=parseFloat(g.style.maxHeight)?(g.style.overflowY="scroll",g.style.height=g.style.maxHeight):g.style.overflow="hidden",i.current=g.scrollHeight))},v=function(){if(W.isVisible(a.current)){var m=a.current.getBoundingClientRect();return m.width>0&&m.height>0}return!1};l.useEffect(function(){ce.combinedRefs(a,e)},[a,e]),l.useEffect(function(){r.autoResize&&E(!0)},[r.autoResize,r.value]);var w=l.useMemo(function(){return ce.isNotEmpty(r.value)||ce.isNotEmpty(r.defaultValue)},[r.value,r.defaultValue]),b=ce.isNotEmpty(r.tooltip),x=n({ref:a,className:ue(r.className,d("root",{context:s,isFilled:w})),onFocus:h,onBlur:S,onKeyUp:N,onKeyDown:M,onBeforeInput:F,onInput:f,onPaste:T},tr.getOtherProps(r),u("root"));return l.createElement(l.Fragment,null,l.createElement("textarea",x),b&&l.createElement(rs,ts({target:a,content:r.tooltip,pt:u("tooltip")},r.tooltipOptions)))}));ds.displayName="InputTextarea";function zu(t,e,n){const s=e.x-t.x,r=e.y-t.y,a=e.z-t.z,i=n.x-t.x,o=n.y-t.y,u=n.z-t.z;return{x:r*u-a*o,y:a*i-s*u,z:s*o-r*i}}async function Hu(t){let e=`solid polyhedron
`;for(const n of t.faces){const[s,r,a]=n.vertices,i=t.vertices[s],o=t.vertices[r],u=t.vertices[a],d=zu(i,o,u);e+=`  facet normal ${d.x} ${d.y} ${d.z}
`,e+=`    outer loop
`,e+=`      vertex ${i.x} ${i.y} ${i.z}
`,e+=`      vertex ${o.x} ${o.y} ${o.z}
`,e+=`      vertex ${u.x} ${u.y} ${u.z}
`,e+=`    endloop
`,e+=`  endfacet
`}return e+=`endsolid polyhedron
`,new Blob([e],{type:"model/stl"})}const Ku=({modelId:t})=>{const e=sa(),[n,s]=l.useState([]),[r,a]=l.useState(""),[i,o]=l.useState(!0),[u,d]=l.useState(!1),[p,h]=l.useState(null),S=async()=>{o(!0),h(null);try{const M=await fn.fetchModelComments(t);s(M)}catch{h("Failed to load comments.")}finally{o(!1)}};l.useEffect(()=>{S()},[t]);const N=async()=>{if(r.trim())try{await fn.addModelComment(t,r),s(M=>[{id:"temp-"+So(),model_id:t,user_id:e.user.id,username:e.username,body:r,created_at:kr(new Date)},...M]),a("")}catch{h("Failed to post comment.")}finally{d(!1)}};return j.jsx(Fr,{title:"Comments",style:{flex:1,background:"#111"},className:"card-body-p16 comments",children:i?j.jsx(Yt,{text:"Loading comments"}):j.jsxs(j.Fragment,{children:[e.user?j.jsxs("div",{style:{marginBottom:12,display:"flex",gap:8},children:[j.jsx(ds,{style:{flex:1,resize:"vertical"},maxLength:2e3,placeholder:"Add a comment...",value:r,onChange:M=>a(M.target.value),disabled:u}),j.jsx(qt,{label:"Post",icon:"pi pi-send",outlined:!0,onClick:N,loading:u})]}):j.jsx("div",{children:"You need to be logged in to post comments."}),p&&j.jsx("div",{style:{color:"red",marginBottom:8},children:p}),n.length===0?j.jsx("div",{children:"No comments yet."}):n.map(M=>j.jsxs("div",{children:[j.jsxs("b",{children:[j.jsx("a",{href:`#/user/${M.username}`,children:M.username})," - ",M.created_at]}),j.jsx("p",{dangerouslySetInnerHTML:{__html:la(M.body)}})]},M.id))]})})};function rf({viewModelId:t}){const{modelId:e}=oo();e&&(t=e);const{user:n}=sa(),s=To("readonly")!==null,[r,a]=l.useState(void 0),[i,o]=l.useState(void 0),u=t??"new",[d,p]=l.useState(void 0),[h,S]=l.useState(void 0),[N,M]=l.useState(void 0),[F,T]=l.useState(void 0),[f,E]=l.useState(void 0),[v,w]=l.useState(void 0),[b,x]=l.useState(!1),[c,m]=l.useState(!1),[g,y]=l.useState(!0),[C,k]=l.useState(!1),[A,z]=l.useState(void 0),[_,V]=l.useState(void 0),[I,$]=l.useState({}),[K,X]=l.useState(!1),[ee,ae]=l.useState(null),[Oe,Se]=l.useState(t!==void 0?0:1),Z=l.useRef(null),oe=l.useRef(null),Ie=l.useRef(!1),[ke,Le]=l.useState(0),le=l.useCallback(()=>`/src/${u}/index.scad`,[u]),Re=l.useCallback(async L=>{try{const B=le();if(u=="new")Mr(B,Cu,!1);else if(!Mt(B)&&L!==void 0)Mr(B,L.source_code,!0);else if(L!==void 0){const re=$n(B);await Co(re)!=L.source_code_hash&&k(!0)}}catch(B){console.error(B)}},[u,le]),Ne=l.useCallback(async()=>{Lu(yo,"/",fo)},[]),_e=l.useCallback(async()=>{T("Checking Syntax...");try{const L=le(),B=$n(L),me=await oc({activePath:L,sources:[{path:L,content:B}]})({now:!0});me.parameterSet&&z(me.parameterSet),me.markers&&V(me.markers)}catch(L){E(L?.message||String(L))}finally{T(void 0)}},[]),Be=L=>async()=>{T(L?"Previewing...":"Rendering..."),E(void 0),w(void 0);try{const B=le();let re=$n(B);const we=await lc({scadPath:B,sources:[{path:B,content:re}],vars:I,isPreview:L,mountArchives:!0,renderFormat:"off",streamsCallback:De=>{"stderr"in De&&w(se=>(se?se+`
`:"")+De.stderr),"stdout"in De&&w(se=>(se?se+`
`:"")+De.stdout)}})({now:!0});h&&URL.revokeObjectURL(h),S(URL.createObjectURL(we.outFile));let Ye;try{const De=Ws(await we.outFile.text());Ye=new File([await Jc(De)],we.outFile.name.replace(".off",".glb"))}catch(De){E("Failed to convert OFF to GLB: "+De),T(void 0);return}d&&URL.revokeObjectURL(d),p(URL.createObjectURL(Ye))}catch(B){E(B?.message||String(B))}finally{T(void 0)}},be=l.useCallback(Be(!0),[I]),He=l.useCallback(Be(!1),[I]),$e=async()=>{if(!oe.current)return;const L=await oe.current.getWebpScreenshot();if(!L){E("Failed to capture screenshot for publish.");return}ae(L),X(!0)},Ue=async()=>{if(!(!n||!ee||!i)){X(!1),Z.current?.show({severity:"info",summary:"Uploading...",life:5e3});try{const B=await(await fetch(ee)).blob(),re=new File([B],`${Date.now()}.webp`,{type:"image/webp"}),me=$n(le());await fn.uploadModel(re,me,i),Z.current?.clear(),Z.current?.show({severity:"success",summary:"Published",detail:"Model published successfully!",life:3e3})}catch(L){Z.current?.clear(),Z.current?.show({severity:"error",summary:"Publish Failed",detail:L.message||String(L),life:4e3})}finally{X(!1),ae(null)}}},et=()=>{X(!1),ae(null)},tt=async()=>{const L=le(),B=await fn.fetchModelSource(u);if(B===void 0)throw new Error("Failed to fetch model source");Mr(L,B,!0),Le(re=>re+1)},Ge=l.useCallback(async()=>{if(console.debug("Fetching model details...",t),t){const L=await fn.fetchModelById(t);return a(L),console.debug("Fetched model details:",L),o({id:L?.id,title:L?.title??"Untitled Model",description:L?.description??""}),L}else{o({id:void 0,title:"Untitled Model",description:""});return}},[]);l.useEffect(()=>(Ie.current||(Ie.current=!0,(async()=>{const L=await Ge();await go(!0),await Re(L),await Promise.all([Ne(),_e(),be()]),y(!1)})()),()=>{d&&URL.revokeObjectURL(d),h&&URL.revokeObjectURL(h),N&&URL.revokeObjectURL(N)}),[_e,Ge,Re,Ne,be]);function Ae(L,B){const re=document.createElement("a");re.href=L,re.download=B,document.body.appendChild(re),re.click(),document.body.removeChild(re)}const at=l.useCallback(async()=>{try{if(N&&URL.revokeObjectURL(N),!h)throw new Error("No OFF file to convert");const L=await(await fetch(h)).text(),B=Ws(L),re=await Hu(B),me=pe()+".stl",xe=URL.createObjectURL(re);Ae(xe,me),setTimeout(()=>URL.revokeObjectURL(xe),1e3),M(void 0)}catch(L){console.error(L)}},[h]);l.useEffect(()=>{const L=B=>{B.key==="F4"?(B.preventDefault(),_e()):B.key==="F5"?(B.preventDefault(),be()):B.key==="F6"?(B.preventDefault(),He()):B.key==="F7"?(B.preventDefault(),at()):B.key==="F8"&&(B.preventDefault(),$e())};return window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}},[h]);function pe(){return r?.title??i?.title??"Untitled Model"}function D(){return k(!0),_e()}return j.jsxs("div",{className:"editor-page-container",style:{flexDirection:b?"column":void 0},children:[j.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:16},children:[j.jsxs("div",{style:{background:"#111",display:"flex",flexDirection:"column"},children:[j.jsx("div",{style:{width:"100%",maxHeight:"85vh",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:d?j.jsx(tc,{ref:oe,lightMode:c,style:{width:"100%",height:"100%"},modelUri:d}):j.jsx(Yt,{text:"Waiting for model to render"})}),j.jsx(hs,{model:[b?{label:"Smaller Preview",className:"editor-page-hide-on-small",icon:"pi pi-window-minimize",command:()=>x(!1)}:{label:"Larger Preview",className:"editor-page-hide-on-small",icon:"pi pi-window-maximize",command:()=>x(!0)},c?{label:"Dark Mode",icon:"pi pi-moon",command:()=>m(!1)}:{label:"Light Mode",icon:"pi pi-sun",command:()=>m(!0)},{label:"Reset View",icon:"pi pi-refresh",command:()=>{oe.current?.resetView()}},{label:"Download",icon:"pi pi-download",items:[{label:"GLB",icon:"pi pi-download",disabled:!d,command:()=>{d&&Ae(d,pe()+".glb")}},{label:"OFF",icon:"pi pi-download",disabled:!h,command:()=>{h&&Ae(h,pe()+".off")}},{label:"STL (F7)",icon:"pi pi-download",disabled:!h,command:at}]}],style:{padding:8,background:"none",border:"none"}})]}),!s&&n?.id!==void 0&&(r===void 0||r?.owner_id===n?.id)&&i!==void 0?j.jsx(Fr,{className:"card-body-p16",style:{background:"#111"},children:j.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content 1fr",gap:12,alignItems:"center",marginBottom:8},children:[j.jsx("label",{htmlFor:"edit-title",style:{whiteSpace:"nowrap"},children:j.jsx("b",{children:"Title"})}),j.jsx(ra,{id:"edit-title",maxLength:100,value:i.title,onChange:L=>o(B=>({...B,title:L.target.value})),placeholder:"Enter model title"}),j.jsx("label",{htmlFor:"edit-description",style:{whiteSpace:"nowrap"},children:j.jsx("b",{children:"Description"})}),j.jsx(ds,{id:"edit-description",maxLength:2e3,value:i.description,onChange:L=>o(B=>({...B,description:L.target.value})),placeholder:"Enter model description",style:{resize:"vertical"}})]})}):r!==void 0?j.jsx(Fr,{title:r.title,className:"card-body-p16",style:{background:"#111"},children:j.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[j.jsx("div",{dangerouslySetInnerHTML:{__html:la(r.description)}}),j.jsxs("span",{children:["by ",j.jsx("a",{href:"#/user/"+r.username,children:r.username})," on"," ",r.created_at]}),j.jsx("span",{children:j.jsx(lo,{model:r})})]})}):j.jsx(j.Fragment,{}),r?j.jsx(Ku,{modelId:r?.id}):""]}),j.jsxs("div",{style:{flex:2,display:"flex",flexDirection:"column",minWidth:0,gap:16,maxHeight:"90vh"},children:[j.jsxs(da,{className:"tab-view-flex",activeIndex:Oe,onTabChange:L=>Se(L.index),panelContainerStyle:{padding:0,background:"#111"},children:[j.jsx(nr,{header:"Customizer",children:j.jsx(Su,{parameterSet:A,parameterValues:I,onChange:(L,B)=>$(re=>({...re,[L]:B}))})}),j.jsx(nr,{header:"EditorPage",style:{background:"#111"},children:j.jsx(Rl,{isInitializing:g,style:{width:"100%",height:"100%"},path:le(),homeFileProp:le(),hideTopBar:!0,markers:_,onSave:L=>D(),reloadKey:ke})}),j.jsx(nr,{header:"Logs & Error",children:j.jsxs("div",{style:{overflow:"auto"},children:[f&&j.jsx("pre",{style:{margin:0,padding:16,background:"transparent",color:"var(--color-danger)"},children:f}),v&&j.jsx("pre",{style:{margin:0,padding:16,background:"transparent"},children:v}),!f&&!v&&j.jsx("span",{children:"No logs or errors yet."})]})})]}),j.jsx(hs,{model:[{label:"Preview (F5)",icon:"pi pi-play",command:be,disabled:F!==void 0},{label:"Render (F6)",icon:"pi pi-play",command:He,disabled:F!==void 0},...n?[{label:"Publish (F8)",icon:"pi pi-upload",command:$e,disabled:F!==void 0,visible:r===void 0||r?.owner_id===n?.id}]:[],{label:"Overwrite with remote source",icon:"pi pi-download color-danger",command:tt,disabled:F!==void 0,visible:C}],style:{flex:0,background:"#111",padding:8,border:"none"},end:j.jsx("div",{style:{display:"flex",gap:8},children:F!==void 0&&j.jsxs(j.Fragment,{children:[j.jsx("div",{style:{flex:1,alignContent:"center"},children:F}),j.jsx(io,{style:{width:40,height:40},strokeWidth:"8"})]})})})]}),j.jsx(Ro,{header:"Publish Model",visible:K,onHide:et,footer:j.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[j.jsx(qt,{label:"Cancel",icon:"pi pi-times",onClick:et,className:"p-button-text"}),j.jsx(qt,{label:"Publish",icon:"pi pi-upload",onClick:Ue,autoFocus:!0})]}),closable:!1,modal:!0,children:i!==void 0&&j.jsx(co,{model:{id:"",title:i.title,preview_url:ee??"",owner_id:n?.id||"",username:n?.user_metadata?.user_name||n?.user_metadata?.name||n?.email||"Unknown User",description:i.description,created_at:kr(new Date),updated_at:kr(new Date),likes:0,comments:0}})}),j.jsx(cs,{ref:Z,position:"top-right"})]})}export{rf as default};
