import{r as a,u as S,P as I,C as R,a as B,O as m,d as L,w as _,j as s}from"../index.js";import{SupabaseService as $}from"./SupabaseService-BE7KA2gQ.js";var J={root:"p-card p-component",header:"p-card-header",title:"p-card-title",subTitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer",body:"p-card-body"},U=`
@layer primereact {
    .p-card-header img {
        width: 100%;
    }
}
`,u=R.extend({defaultProps:{__TYPE:"Card",id:null,header:null,footer:null,title:null,subTitle:null,style:null,className:null,children:void 0},css:{classes:J,styles:U}}),p=a.forwardRef(function(e,i){var r=S(),o=a.useContext(I),t=u.getProps(e,o),n=a.useRef(i),c=u.setMetaData({props:t}),d=c.ptm,l=c.cx,v=c.isUnstyled;B(u.css.styles,v,{name:"card"});var y=function(){var h=r({className:l("header")},d("header"));return t.header?a.createElement("div",h,m.getJSXElement(t.header,t)):null},f=function(){var h=r({className:l("title")},d("title")),C=t.title&&a.createElement("div",h,m.getJSXElement(t.title,t)),E=r({className:l("subTitle")},d("subTitle")),P=t.subTitle&&a.createElement("div",E,m.getJSXElement(t.subTitle,t)),N=r({className:l("content")},d("content")),j=t.children&&a.createElement("div",N,t.children),w=r({className:l("footer")},d("footer")),M=t.footer&&a.createElement("div",w,m.getJSXElement(t.footer,t)),T=r({className:l("body")},d("body"));return a.createElement("div",T,C,P,j,M)};a.useEffect(function(){m.combinedRefs(n,i)},[n,i]);var x=r({id:t.id,ref:n,style:t.style,className:L(t.className,l("root"))},u.getOtherProps(t),d("root")),b=y(),g=f();return a.createElement("div",x,b,g)});p.displayName="Card";function X({model:e}){const[i,r]=a.useState(e.likes??0),o=_(),t=d=>{d.stopPropagation();const l=o.likedModelIds.has(e.id);$.updateModelLike(e.id,!l).then(()=>r(v=>v+(l?-1:1))),l?o.likedModelIds.delete(e.id):o.likedModelIds.add(e.id)},n=o.likedModelIds.has(e.id),c=o.commentedModelIds.has(e.id);return s.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center"},children:[s.jsxs("span",{className:"clickable",style:{display:"flex",alignItems:"center",gap:4,cursor:"pointer"},onClick:t,children:[s.jsx("i",{className:"pi pi-heart",style:{color:n?"var(--theme-color)":void 0}}),i]}),s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s.jsx("i",{className:"pi pi-comment",style:{color:c?"var(--theme-color)":void 0}}),e.comments??0]})]})}function O(e){const i=s.jsx("img",{onClick:()=>window.location.hash=`/model/${e.model.id}`,src:e.model.preview_url,alt:e.model.title,style:{background:"#111",aspectRatio:"1/1",cursor:"pointer"},loading:"lazy"}),r=s.jsxs(s.Fragment,{children:["by ",s.jsx("a",{href:`#/user/${e.model.username}`,children:e.model.username})," on"," ",e.model.created_at]});return s.jsx("div",{children:s.jsx(p,{className:"model-card",title:e.model.title,subTitle:r,style:{...e.style},header:i,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(window.location.hash=`/model/${e.model.id}`)},footer:s.jsx(X,{model:e.model}),"aria-label":`View model ${e.model.title}`},e.model.id)})}export{p as C,X as M,O as a};
