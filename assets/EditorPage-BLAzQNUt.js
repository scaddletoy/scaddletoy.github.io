import{r as l,R as at,I as dr,u as lt,P as ht,C as mt,a as wt,b as Tn,c as dt,d as ue,D as K,e as We,f as cn,g as _t,O as ce,U as pr,h as Qa,i as ea,k as ts,Z as it,T as ns,l as qe,m as ei,n as rs,o as ti,p as ni,E as ri,j as k,q as Gt,s as si,_ as fs,t as kn,v as ta,K as Tr,w as na,x as ai,M as ds,y as ii}from"../index.js";import{C as jr,M as oi,a as li}from"./ModelCard-Drve7K6_.js";import{C as ci,z as ui}from"./zip-archives-CwnkgIOs.js";import{T as rr,O as ra,D as ps,I as hs}from"./dropdown.esm-Dhy0QZCf.js";import{B as Yt}from"./button.esm-S6-zueF2.js";import{T as fi,j as Cr,e as Ot,r as Ir,s as ms,w as Rr,m as gs,u as ys,a as di,f as pi,M as hi,b as Or,c as Ln,d as mi}from"./filesystem-DrAWZsLT.js";import{_ as gi,a as yi,b as vi,T as vs,C as bi,S as xi,c as hr,d as sa}from"./index.esm-CE4dR0UA.js";import{m as bs,A as ss,t as aa,s as ia,f as Fr,a as wi,g as Ei,h as Si}from"./utils-DRB1n_X_.js";import{P as Ti}from"./index.esm-0dnXiuBX.js";import{D as Ci}from"./dialog.esm-BZoZToNL.js";import{SupabaseService as un}from"./SupabaseService-BE7KA2gQ.js";function Ii(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function as(t,e){var n=function(a){return e&&l.isValidElement(a)?e(a):a},s=Object.create(null);return t&&l.Children.map(t,function(r){return r}).forEach(function(r){s[r.key]=n(r)}),s}function Ri(t,e){t=t||{},e=e||{};function n(h){return h in e?e[h]:t[h]}var s=Object.create(null),r=[];for(var a in t)a in e?r.length&&(s[a]=r,r=[]):r.push(a);var o,i={};for(var u in e){if(s[u])for(o=0;o<s[u].length;o++){var p=s[u][o];i[s[u][o]]=n(p)}i[u]=n(u)}for(o=0;o<r.length;o++)i[r[o]]=n(r[o]);return i}function At(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Oi(t,e){return as(t.children,function(n){return l.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:At(n,"appear",t),enter:At(n,"enter",t),exit:At(n,"exit",t)})})}function Mi(t,e,n){var s=as(t.children),r=Ri(e,s);return Object.keys(r).forEach(function(a){var o=r[a];if(l.isValidElement(o)){var i=a in e,u=a in s,p=e[a],h=l.isValidElement(p)&&!p.props.in;u&&(!i||h)?r[a]=l.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:At(o,"exit",t),enter:At(o,"enter",t)}):!u&&i&&!h?r[a]=l.cloneElement(o,{in:!1}):u&&i&&l.isValidElement(p)&&(r[a]=l.cloneElement(o,{onExited:n.bind(null,o),in:p.props.in,exit:At(o,"exit",t),enter:At(o,"enter",t)}))}}),r}var Pi=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Ai={component:"div",childFactory:function(e){return e}},is=(function(t){gi(e,t);function e(s,r){var a;a=t.call(this,s,r)||this;var o=a.handleExited.bind(Ii(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,a){var o=a.children,i=a.handleExited,u=a.firstRender;return{children:u?Oi(r,i):Mi(r,o,i),firstRender:!1}},n.handleExited=function(r,a){var o=as(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(a),this.mounted&&this.setState(function(i){var u=yi({},i.children);return delete u[r.key],{children:u}}))},n.render=function(){var r=this.props,a=r.component,o=r.childFactory,i=vi(r,["component","childFactory"]),u=this.state.contextValue,p=Pi(this.state.children).map(o);return delete i.appear,delete i.enter,delete i.exit,a===null?at.createElement(vs.Provider,{value:u},p):at.createElement(vs.Provider,{value:u},at.createElement(a,i,p))},e})(at.Component);is.propTypes={};is.defaultProps=Ai;function kr(){return kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kr.apply(null,arguments)}var oa=l.memo(l.forwardRef(function(t,e){var n=dr.getPTI(t);return l.createElement("svg",kr({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{d:"M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z",fill:"currentColor"}))}));oa.displayName="ChevronLeftIcon";function Lr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Ni(t){if(Array.isArray(t))return Lr(t)}function _i(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function la(t,e){if(t){if(typeof t=="string")return Lr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(t,e):void 0}}function ji(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(t){return Ni(t)||_i(t)||la(t)||ji()}function hn(t){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(t)}function ki(t,e){if(hn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(hn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Li(t){var e=ki(t,"string");return hn(e)=="symbol"?e:e+""}function ca(t,e,n){return(e=Li(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $i(t){if(Array.isArray(t))return t}function Di(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function Bi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function en(t,e){return $i(t)||Di(t,e)||la(t,e)||Bi()}function xs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xs(Object(n),!0).forEach(function(s){ca(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Ui={navcontent:"p-tabview-nav-content",nav:"p-tabview-nav",inkbar:"p-tabview-ink-bar",panelcontainer:function(e){var n=e.props;return ue("p-tabview-panels",n.panelContainerClassName)},prevbutton:"p-tabview-nav-prev p-tabview-nav-btn p-link",nextbutton:"p-tabview-nav-next p-tabview-nav-btn p-link",root:function(e){var n=e.props;return ue("p-tabview p-component",{"p-tabview-scrollable":n.scrollable})},navcontainer:"p-tabview-nav-container",tab:{header:function(e){var n=e.selected,s=e.disabled,r=e.headerClassName,a=e._className;return ue("p-unselectable-text",{"p-tabview-selected p-highlight":n,"p-disabled":s},r,a)},headertitle:"p-tabview-title",headeraction:"p-tabview-nav-link",closeIcon:"p-tabview-close",content:function(e){var n=e.props,s=e.selected,r=e.getTabProp,a=e.tab,o=e.isSelected,i=e.shouldUseTab,u=e.index;return i(a,u)&&(!n.renderActiveOnly||o(u))?ue(r(a,"contentClassName"),r(a,"className"),"p-tabview-panel",{"p-hidden":!s}):void 0}}},Vi={tab:{header:function(e){var n=e.headerStyle,s=e._style;return $n($n({},n||{}),s||{})},content:function(e){var n=e.props,s=e.getTabProp,r=e.tab,a=e.isSelected,o=e.shouldUseTab,i=e.index;return o(r,i)&&(!n.renderActiveOnly||a(i))?$n($n({},s(r,"contentStyle")||{}),s(r,"style")||{}):void 0}}},Dn=mt.extend({defaultProps:{__TYPE:"TabView",id:null,activeIndex:0,className:null,onBeforeTabChange:null,onBeforeTabClose:null,onTabChange:null,onTabClose:null,panelContainerClassName:null,panelContainerStyle:null,renderActiveOnly:!0,scrollable:!1,style:null,children:void 0},css:{classes:Ui,inlineStyles:Vi}}),zt=mt.extend({defaultProps:{__TYPE:"TabPanel",children:void 0,className:null,closable:!1,closeIcon:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,leftIcon:null,nextButton:null,prevButton:null,rightIcon:null,style:null,visible:!0},getCProp:function(e,n){return ce.getComponentProp(e,n,zt.defaultProps)},getCProps:function(e){return ce.getComponentProps(e,zt.defaultProps)},getCOtherProps:function(e){return ce.getComponentDiffProps(e,zt.defaultProps)}});function ws(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ws(Object(n),!0).forEach(function(s){ca(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var tr=function(){},ua=l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=Dn.getProps(t,s),a=l.useState(r.id),o=en(a,2),i=o[0],u=o[1],p=l.useState(!0),h=en(p,2),d=h[0],E=h[1],_=l.useState(!1),A=en(_,2),j=A[0],C=A[1],f=l.useState([]),w=en(f,2),v=w[0],S=w[1],x=l.useState(r.activeIndex),b=en(x,2),c=b[0],m=b[1],y=l.useRef(null),g=l.useRef(null),R=l.useRef(null),F=l.useRef(null),L=l.useRef(null),U=l.useRef(null),N=l.useRef({}),V=r.onTabChange?r.activeIndex:c,I=l.Children.count(r.children),$={props:r,state:{id:i,isPrevButtonDisabled:d,isNextButtonDisabled:j,hiddenTabsState:v,activeIndex:c}},q=Dn.setMetaData(Bn({},$)),W=q.ptm,ee=q.ptmo,re=q.cx,Re=q.sx,xe=q.isUnstyled;wt(Dn.css.styles,xe,{name:"tabview"});var Z=function(M,B,z){var J={props:M.props,parent:$,context:{index:z,count:I,first:z===0,last:z===I-1,active:z==c,disabled:Ce(M,"disabled")}};return n(W("tab.".concat(B),{tab:J}),W("tabpanel.".concat(B),{tabpanel:J}),W("tabpanel.".concat(B),J),ee(Ce(M,"pt"),B,J))},se=function(M){return M===V},Ce=function(M,B){return zt.getCProp(M,B)},Le=function(M){return M&&Ce(M,"visible")&&ce.isValidChild(M,"TabPanel")&&v.every(function(B){return B!==M.key})},$e=function(M){var B=l.Children.map(r.children,function(z,J){if(Le(z))return{tab:z,index:J}});return B.find(function(z){var J=z.tab,ge=z.index;return!Ce(J,"disabled")&&ge>=M})||B.reverse().find(function(z){var J=z.tab,ge=z.index;return!Ce(J,"disabled")&&M>ge})},le=function(M,B){M.preventDefault();var z=r.onBeforeTabClose,J=r.onTabClose,ge=r.children,ft=ge[B].key;z&&z({originalEvent:M,index:B})===!1||(S([].concat(Fi(v),[ft])),J&&J({originalEvent:M,index:B}))},Ie=function(M,B,z){Oe(M,B,z)},Oe=function(M,B,z){if(M&&M.preventDefault(),!Ce(B,"disabled")){if(r.onBeforeTabChange&&r.onBeforeTabChange({originalEvent:M,index:z})===!1)return;r.onTabChange?r.onTabChange({originalEvent:M,index:z}):m(z)}H({index:z})},Fe=function(M,B,z){switch(M.code){case"ArrowLeft":we(M);break;case"ArrowRight":ke(M);break;case"Home":ze(M);break;case"End":Be(M);break;case"PageDown":De(M);break;case"PageUp":st(M);break;case"Enter":case"NumpadEnter":case"Space":Xe(M,B,z);break}},ke=function(M){var B=He(M.target.parentElement);B?T(B):ze(M),M.preventDefault()},we=function(M){var B=Ne(M.target.parentElement);B?T(B):Be(M),M.preventDefault()},ze=function(M){var B=et();T(B),M.preventDefault()},Be=function(M){var B=he();T(B),M.preventDefault()},De=function(M){H({index:l.Children.count(r.children)-1}),M.preventDefault()},st=function(M){H({index:0}),M.preventDefault()},Xe=function(M,B,z){Oe(M,B,z),M.preventDefault()},He=function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,z=B?M:M.nextElementSibling;return z?K.getAttribute(z,"data-p-disabled")||K.getAttribute(z,"data-pc-section")==="inkbar"?He(z):K.findSingle(z,'[data-pc-section="headeraction"]'):null},Ne=function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,z=B?M:M.previousElementSibling;return z?K.getAttribute(z,"data-p-disabled")||K.getAttribute(z,"data-pc-section")==="inkbar"?Ne(z):K.findSingle(z,'[data-pc-section="headeraction"]'):null},et=function(){return He(R.current.firstElementChild,!0)},he=function(){return Ne(R.current.lastElementChild,!0)},T=function(M){M&&(K.focus(M),H({element:M}))},D=function(){var M=N.current["tab_".concat(V)];F.current.style.width=K.getWidth(M)+"px",F.current.style.left=K.getOffset(M).left-K.getOffset(R.current).left+"px"},H=function(M){var B=M.index,z=M.element,J=z||N.current["tab_".concat(B)];J&&J.scrollIntoView&&J.scrollIntoView({block:"nearest"})},ae=function(){var M=g.current,B=M.scrollLeft,z=M.scrollWidth,J=K.getWidth(g.current);E(B===0),C(parseInt(B)===z-J)},Ae=function(M){r.scrollable&&ae(),M.preventDefault()},ve=function(){return[L.current,U.current].reduce(function(M,B){return B?M+K.getWidth(B):M},0)},Ee=function(){var M=K.getWidth(g.current)-ve(),B=g.current.scrollLeft-M;g.current.scrollLeft=B<=0?0:B},_e=function(){var M=K.getWidth(g.current)-ve(),B=g.current.scrollLeft+M,z=g.current.scrollWidth-M;g.current.scrollLeft=B>=z?z:B},Ge=function(){E(!0),C(!1),S([]),r.onTabChange?r.onTabChange({index:V}):m(r.activeIndex)};l.useEffect(function(){D(),ae()}),Tn(function(){i||u(pr())}),dt(function(){if(ce.isNotEmpty(v)){var ne=$e(v[v.length-1]);ne&&Ie(null,ne.tab,ne.index)}},[v]),dt(function(){r.activeIndex!==c&&H({index:r.activeIndex})},[r.activeIndex]),l.useImperativeHandle(e,function(){return{props:r,reset:Ge,getElement:function(){return y.current}}});var ie=function(M,B){switch(M.preventDefault(),M.stopPropagation(),M.code){case"Space":case"NumpadEnter":case"Enter":le(M,B);break}},P=function(M,B){var z=se(B),J=zt.getCProps(M),ge=J.headerStyle,ft=J.headerClassName,Xt=J.style,Zt=J.className,Qt=J.disabled,On=J.leftIcon,Mn=J.rightIcon,Ct=J.header,Pn=J.headerTemplate,vr=J.closable,br=J.closeIcon,xr=i+"_header_"+B,An=i+B+"_content",wr=Qt||!z?-1:0,Nn=On&&We.getJSXIcon(On,void 0,{props:r}),Er=n({className:re("tab.headertitle")},Z(M,"headertitle",B)),_n=l.createElement("span",Er,Ct),jn=Mn&&We.getJSXIcon(Mn,void 0,{props:r}),Fn=n({className:re("tab.closeIcon"),onClick:function(ye){return le(ye,B)},onKeyDown:function(ye){return ie(ye,B)},tabIndex:0,"aria-label":cn("close")||"Close"},Z(M,"closeIcon",B)),Sr=br||l.createElement(rr,Fn),X=vr?We.getJSXIcon(Sr,Bn({},Fn),{props:r}):null,O=n({id:xr,role:"tab",className:re("tab.headeraction"),tabIndex:wr,"aria-controls":An,"aria-selected":z,"aria-disabled":Qt,onClick:function(ye){return Ie(ye,M,B)},onKeyDown:function(ye){return Fe(ye,M,B)}},Z(M,"headeraction",B)),G=l.createElement("a",O,Nn,_n,jn,X,l.createElement(_t,null));if(Pn){var pe={className:"p-tabview-nav-link",titleClassName:"p-tabview-title",onClick:function(ye){return Ie(ye,M,B)},onKeyDown:function(ye){return Fe(ye,M,B)},leftIconElement:Nn,titleElement:_n,rightIconElement:jn,element:G,props:r,index:B,selected:z,ariaControls:An};G=ce.getJSXElement(Pn,pe)}var me=n({ref:function(ye){return N.current["tab_".concat(B)]=ye},className:re("tab.header",{selected:z,disabled:Qt,headerClassName:ft,_className:Zt}),style:Re("tab.header",{headerStyle:ge,_style:Xt}),role:"presentation"},Z(M,"root",B),Z(M,"header",B));return l.createElement("li",me,G)},Q=function(){return l.Children.map(r.children,function(M,B){if(Le(M))return P(M,B)})},oe=function(){var M=Q(),B=n({id:i+"_navcontent",ref:g,className:re("navcontent"),style:r.style,onScroll:Ae},W("navcontent")),z=n({ref:R,className:re("nav"),role:"tablist"},W("nav")),J=n({ref:F,"aria-hidden":"true",role:"presentation",className:re("inkbar")},W("inkbar"));return l.createElement("div",B,l.createElement("ul",z,M,l.createElement("li",J)))},Me=function(){var M=n({className:re("panelcontainer"),style:r.panelContainerStyle},W("panelcontainer")),B=l.Children.map(r.children,function(z,J){if(Le(z)&&(!r.renderActiveOnly||se(J))){var ge=se(J),ft=i+J+"_content",Xt=i+"_header_"+J,Zt=n({id:ft,className:re("tab.content",{props:r,selected:ge,getTabProp:Ce,tab:z,isSelected:se,shouldUseTab:Le,index:J}),style:Re("tab.content",{props:r,getTabProp:Ce,tab:z,isSelected:se,shouldUseTab:Le,index:J}),role:"tabpanel","aria-labelledby":Xt},zt.getCOtherProps(z),Z(z,"root",J),Z(z,"content",J));return l.createElement("div",Zt,r.renderActiveOnly?ge&&Ce(z,"children"):Ce(z,"children"))}});return l.createElement("div",M,B)},gt=function(){var M=n({"aria-hidden":"true"},W("previcon")),B=r.prevButton||l.createElement(oa,M),z=We.getJSXIcon(B,Bn({},M),{props:r}),J=n({ref:L,type:"button",className:re("prevbutton"),"aria-label":cn("prevPageLabel"),onClick:function(ft){return Ee()}},W("prevbutton"));return r.scrollable&&!d?l.createElement("button",J,z,l.createElement(_t,null)):null},ct=function(){var M=n({"aria-hidden":"true"},W("nexticon")),B=r.nextButton||l.createElement(ci,M),z=We.getJSXIcon(B,Bn({},M),{props:r}),J=n({ref:U,type:"button",className:re("nextbutton"),"aria-label":cn("nextPageLabel"),onClick:function(ft){return _e()}},W("nextbutton"));if(r.scrollable&&!j)return l.createElement("button",J,z,l.createElement(_t,null))},Et=n({id:i,ref:y,style:r.style,className:ue(r.className,re("root"))},Dn.getOtherProps(r),W("root")),ut=n({className:re("navcontainer")},W("navcontainer")),Jt=oe(),St=Me(),Ke=gt(),Tt=ct();return l.createElement("div",Et,l.createElement("div",ut,Ke,Jt,Tt),St)});tr.displayName="TabPanel";ua.displayName="TabView";function Es(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function zi(t){if(Array.isArray(t))return t}function Hi(t,e,n){return(e=Xi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ki(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function Wi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ss(Object(n),!0).forEach(function(s){Hi(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Gi(t,e){if(t==null)return{};var n,s,r=Yi(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yi(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function qi(t,e){return zi(t)||Ki(t,e)||Zi(t,e)||Wi()}function Ji(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xi(t){var e=Ji(t,"string");return typeof e=="symbol"?e:e+""}function Zi(t,e){if(t){if(typeof t=="string")return Es(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Es(t,e):void 0}}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cs(Object(n),!0).forEach(function(s){Qi(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function eo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,a){return a(r)},s)}}function on(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return e.apply(n,[].concat(r,i))}}}function sr(t){return{}.toString.call(t).includes("Object")}function to(t){return!Object.keys(t).length}function mn(t){return typeof t=="function"}function no(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ro(t,e){return sr(e)||bt("changeType"),Object.keys(e).some(function(n){return!no(t,n)})&&bt("changeField"),e}function so(t){mn(t)||bt("selectorType")}function ao(t){mn(t)||sr(t)||bt("handlerType"),sr(t)&&Object.values(t).some(function(e){return!mn(e)})&&bt("handlersType")}function io(t){t||bt("initialIsRequired"),sr(t)||bt("initialType"),to(t)&&bt("initialContent")}function oo(t,e){throw new Error(t[e]||t.default)}var lo={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},bt=on(oo)(lo),Un={changes:ro,selector:so,handler:ao,initial:io};function co(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Un.initial(t),Un.handler(e);var n={current:t},s=on(po)(n,e),r=on(fo)(n),a=on(Un.changes)(t),o=on(uo)(n);function i(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return Un.selector(p),p(n.current)}function u(p){eo(s,r,a,o)(p)}return[i,u]}function uo(t,e){return mn(e)?e(t.current):e}function fo(t,e){return t.current=Is(Is({},t.current),e),e}function po(t,e,n){return mn(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var ho={create:co},mo={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function go(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return e.apply(n,[].concat(r,i))}}}function yo(t){return{}.toString.call(t).includes("Object")}function vo(t){return t||Rs("configIsRequired"),yo(t)||Rs("configType"),t.urls?(bo(),{paths:{vs:t.urls.monacoBase}}):t}function bo(){console.warn(fa.deprecation)}function xo(t,e){throw new Error(t[e]||t.default)}var fa={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Rs=go(xo)(fa),wo={config:vo},Eo=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(a,o){return o(a)},r)}};function da(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],da(t[n],e[n]))}),Ts(Ts({},t),e)}var So={type:"cancelation",msg:"operation is manually canceled"};function Mr(t){var e=!1,n=new Promise(function(s,r){t.then(function(a){return e?r(So):s(a)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var To=["monaco"],Co=ho.create({config:mo,isInitialized:!1,resolve:null,reject:null,monaco:null}),pa=qi(Co,2),Cn=pa[0],mr=pa[1];function Io(t){var e=wo.config(t),n=e.monaco,s=Gi(e,To);mr(function(r){return{config:da(r.config,s),monaco:n}})}function Ro(){var t=Cn(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(mr({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Mr(Pr);if(window.monaco&&window.monaco.editor)return ha(window.monaco),t.resolve(window.monaco),Mr(Pr);Eo(Oo,Po)(Ao)}return Mr(Pr)}function Oo(t){return document.body.appendChild(t)}function Mo(t){var e=document.createElement("script");return t&&(e.src=t),e}function Po(t){var e=Cn(function(s){var r=s.config,a=s.reject;return{config:r,reject:a}}),n=Mo("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Ao(){var t=Cn(function(n){var s=n.config,r=n.resolve,a=n.reject;return{config:s,resolve:r,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;ha(s),t.resolve(s)},function(n){t.reject(n)})}function ha(t){Cn().monaco||mr({monaco:t})}function No(){return Cn(function(t){var e=t.monaco;return e})}var Pr=new Promise(function(t,e){return mr({resolve:t,reject:e})}),ma={config:Io,init:Ro,__getMonacoInstance:No},_o={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ar=_o,jo={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Fo=jo;function ko({children:t}){return at.createElement("div",{style:Fo.container},t)}var Lo=ko,$o=Lo;function Do({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:a,wrapperProps:o}){return at.createElement("section",{style:{...Ar.wrapper,width:t,height:e},...o},!n&&at.createElement($o,null,s),at.createElement("div",{ref:r,style:{...Ar.fullWidth,...!n&&Ar.hide},className:a}))}var Bo=Do,ga=l.memo(Bo);function Uo(t){l.useEffect(t,[])}var ya=Uo;function Vo(t,e,n=!0){let s=l.useRef(!0);l.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var Ye=Vo;function fn(){}function Ut(t,e,n,s){return zo(t,s)||Ho(t,e,n,s)}function zo(t,e){return t.editor.getModel(va(t,e))}function Ho(t,e,n,s){return t.editor.createModel(e,n,s?va(t,s):void 0)}function va(t,e){return t.Uri.parse(e)}function Ko({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:a,modifiedModelPath:o,keepCurrentOriginalModel:i=!1,keepCurrentModifiedModel:u=!1,theme:p="light",loading:h="Loading...",options:d={},height:E="100%",width:_="100%",className:A,wrapperProps:j={},beforeMount:C=fn,onMount:f=fn}){let[w,v]=l.useState(!1),[S,x]=l.useState(!0),b=l.useRef(null),c=l.useRef(null),m=l.useRef(null),y=l.useRef(f),g=l.useRef(C),R=l.useRef(!1);ya(()=>{let N=ma.init();return N.then(V=>(c.current=V)&&x(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>b.current?U():N.cancel()}),Ye(()=>{if(b.current&&c.current){let N=b.current.getOriginalEditor(),V=Ut(c.current,t||"",s||n||"text",a||"");V!==N.getModel()&&N.setModel(V)}},[a],w),Ye(()=>{if(b.current&&c.current){let N=b.current.getModifiedEditor(),V=Ut(c.current,e||"",r||n||"text",o||"");V!==N.getModel()&&N.setModel(V)}},[o],w),Ye(()=>{let N=b.current.getModifiedEditor();N.getOption(c.current.editor.EditorOption.readOnly)?N.setValue(e||""):e!==N.getValue()&&(N.executeEdits("",[{range:N.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),N.pushUndoStop())},[e],w),Ye(()=>{b.current?.getModel()?.original.setValue(t||"")},[t],w),Ye(()=>{let{original:N,modified:V}=b.current.getModel();c.current.editor.setModelLanguage(N,s||n||"text"),c.current.editor.setModelLanguage(V,r||n||"text")},[n,s,r],w),Ye(()=>{c.current?.editor.setTheme(p)},[p],w),Ye(()=>{b.current?.updateOptions(d)},[d],w);let F=l.useCallback(()=>{if(!c.current)return;g.current(c.current);let N=Ut(c.current,t||"",s||n||"text",a||""),V=Ut(c.current,e||"",r||n||"text",o||"");b.current?.setModel({original:N,modified:V})},[n,e,r,t,s,a,o]),L=l.useCallback(()=>{!R.current&&m.current&&(b.current=c.current.editor.createDiffEditor(m.current,{automaticLayout:!0,...d}),F(),c.current?.editor.setTheme(p),v(!0),R.current=!0)},[d,p,F]);l.useEffect(()=>{w&&y.current(b.current,c.current)},[w]),l.useEffect(()=>{!S&&!w&&L()},[S,w,L]);function U(){let N=b.current?.getModel();i||N?.original?.dispose(),u||N?.modified?.dispose(),b.current?.dispose()}return at.createElement(ga,{width:_,height:E,isEditorReady:w,loading:h,_ref:m,className:A,wrapperProps:j})}var Wo=Ko;l.memo(Wo);function Go(t){let e=l.useRef();return l.useEffect(()=>{e.current=t},[t]),e.current}var Yo=Go,Vn=new Map;function qo({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:a,theme:o="light",line:i,loading:u="Loading...",options:p={},overrideServices:h={},saveViewState:d=!0,keepCurrentModel:E=!1,width:_="100%",height:A="100%",className:j,wrapperProps:C={},beforeMount:f=fn,onMount:w=fn,onChange:v,onValidate:S=fn}){let[x,b]=l.useState(!1),[c,m]=l.useState(!0),y=l.useRef(null),g=l.useRef(null),R=l.useRef(null),F=l.useRef(w),L=l.useRef(f),U=l.useRef(void 0),N=l.useRef(s),V=Yo(a),I=l.useRef(!1),$=l.useRef(!1);ya(()=>{let ee=ma.init();return ee.then(re=>(y.current=re)&&m(!1)).catch(re=>re?.type!=="cancelation"&&console.error("Monaco initialization: error:",re)),()=>g.current?W():ee.cancel()}),Ye(()=>{let ee=Ut(y.current,t||s||"",e||r||"",a||n||"");ee!==g.current?.getModel()&&(d&&Vn.set(V,g.current?.saveViewState()),g.current?.setModel(ee),d&&g.current?.restoreViewState(Vn.get(a)))},[a],x),Ye(()=>{g.current?.updateOptions(p)},[p],x),Ye(()=>{!g.current||s===void 0||(g.current.getOption(y.current.editor.EditorOption.readOnly)?g.current.setValue(s):s!==g.current.getValue()&&($.current=!0,g.current.executeEdits("",[{range:g.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),g.current.pushUndoStop(),$.current=!1))},[s],x),Ye(()=>{let ee=g.current?.getModel();x&&ee&&r&&y.current?.editor.setModelLanguage(ee,r)},[r,x],x),Ye(()=>{i!==void 0&&g.current?.revealLine(i)},[i],x),Ye(()=>{y.current?.editor.setTheme(o)},[o],x);let q=l.useCallback(()=>{if(!(!R.current||!y.current)&&!I.current){L.current(y.current);let ee=a||n,re=Ut(y.current,s||t||"",e||r||"",ee||"");g.current=y.current?.editor.create(R.current,{model:re,automaticLayout:!0,...p},h),d&&g.current.restoreViewState(Vn.get(ee)),y.current.editor.setTheme(o),i!==void 0&&g.current.revealLine(i),b(!0),I.current=!0}},[t,e,n,s,r,a,p,h,d,o,i]);l.useEffect(()=>{x&&F.current(g.current,y.current)},[x]),l.useEffect(()=>{!c&&!x&&q()},[c,x,q]),N.current=s,l.useEffect(()=>{x&&v&&(U.current?.dispose(),U.current=g.current?.onDidChangeModelContent(ee=>{$.current||v(g.current.getValue(),ee)}))},[x,v]),l.useEffect(()=>{if(x){let ee=y.current.editor.onDidChangeMarkers(re=>{let Re=g.current.getModel()?.uri;if(Re&&re.find(xe=>xe.path===Re.path)){let xe=y.current.editor.getModelMarkers({resource:Re});S?.(xe)}});return()=>{ee?.dispose()}}return()=>{}},[x,S]);function W(){U.current?.dispose(),E?d&&Vn.set(a,g.current.saveViewState()):g.current.getModel()?.dispose(),g.current.dispose(),g.current=null,I.current=!1,b(!1)}return at.createElement(ga,{width:_,height:A,isEditorReady:x,loading:u,_ref:R,className:j,wrapperProps:C})}var Jo=qo,Xo=l.memo(Jo),Zo=Xo;function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},jt.apply(null,arguments)}function $r(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Qo(t){if(Array.isArray(t))return $r(t)}function el(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ba(t,e){if(t){if(typeof t=="string")return $r(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(t,e):void 0}}function tl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nl(t){return Qo(t)||el(t)||ba(t)||tl()}function gn(t){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(t)}function rl(t,e){if(gn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(gn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sl(t){var e=rl(t,"string");return gn(e)=="symbol"?e:e+""}function ar(t,e,n){return(e=sl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function al(t){if(Array.isArray(t))return t}function il(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function ol(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tn(t,e){return al(t)||il(t,e)||ba(t,e)||ol()}var ll={root:function(e){var n=e.props,s=e.focusedState,r=e.context,a=e.overlayVisibleState,o=e.isValueEmpty;return ue("p-treeselect p-component p-inputwrapper",{"p-treeselect-chip":n.display==="chip","p-treeselect-clearable":n.showClear&&!n.disabled,"p-disabled":n.disabled,"p-invalid":n.invalid,"p-focus":s,"p-variant-filled":n.variant?n.variant==="filled":r&&r.inputStyle==="filled","p-inputwrapper-filled":!o,"p-inputwrapper-focus":s||a})},label:function(e){var n=e.props,s=e.isValueEmpty,r=e.getLabel;return ue("p-treeselect-label",{"p-placeholder":r()===n.placeholder,"p-treeselect-label-empty":!n.placeholder&&s})},panel:function(e){var n=e.panelProps,s=e.context;return ue("p-treeselect-panel p-component",n.panelClassName,{"p-input-filled":s&&s.inputStyle==="filled"||qe.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||qe.ripple===!1})},labelContainer:"p-treeselect-label-container",tokenLabel:"p-treeselect-token-label",token:"p-treeselect-token",trigger:"p-treeselect-trigger",triggerIcon:"p-treeselect-trigger-icon p-clickable",emptyMessage:"p-treeselect-empty-message",filterContainer:"p-treeselect-filter-container",filter:"p-treeselect-filter p-inputtext p-component",filterIcon:"p-treeselect-filter-icon",closeIcon:"p-treeselect-close-icon",clearIcon:"p-treeselect-clear-icon p-clickable",closeButton:"p-treeselect-close p-link",header:"p-treeselect-header",wrapper:"p-treeselect-items-wrapper",transition:"p-connected-overlay"},cl=`
@layer primereact {
    .p-treeselect {
        display: inline-flex;
        cursor: pointer;
        position: relative;
        user-select: none;
    }

    .p-treeselect-trigger {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .p-treeselect-label-container {
        overflow: hidden;
        flex: 1 1 auto;
        cursor: pointer;
    }

    .p-treeselect-label  {
        display: block;
        white-space: nowrap;
        cursor: pointer;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .p-treeselect-label-empty {
        overflow: hidden;
        visibility: hidden;
    }

    .p-treeselect-token {
        cursor: default;
        display: inline-flex;
        align-items: center;
        flex: 0 0 auto;
    }

    .p-treeselect .p-treeselect-panel {
        min-width: 100%;
    }

    .p-treeselect-items-wrapper {
        overflow: auto;
    }

    .p-treeselect-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .p-treeselect-filter-container {
        position: relative;
        flex: 1 1 auto;
    }

    .p-treeselect-filter-icon {
        position: absolute;
        top: 50%;
        margin-top: -.5rem;
    }

    .p-treeselect-filter-container .p-inputtext {
        width: 100%;
    }

    .p-treeselect-close {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        overflow: hidden;
        position: relative;
        margin-left: auto;
    }

    .p-treeselect-clear-icon {
        position: absolute;
        top: 50%;
        margin-top: -.5rem;
    }

    .p-fluid .p-treeselect {
        display: flex;
}
}
`,nn=mt.extend({defaultProps:{__TYPE:"TreeSelect",appendTo:null,ariaLabel:null,ariaLabelledBy:null,className:null,closeIcon:null,clearIcon:null,disabled:!1,display:"comma",dropdownIcon:null,emptyMessage:null,expandedKeys:null,filter:!1,filterBy:"label",filterDelay:300,filterIcon:null,filterInputAutoFocus:!0,filterLocale:void 0,filterMode:"lenient",filterPlaceholder:null,filterTemplate:null,filterValue:null,inputId:null,inputRef:null,invalid:!1,variant:null,metaKeySelection:!1,name:null,nodeTemplate:null,onChange:null,onFocus:null,onBlur:null,onFilterValueChange:null,onHide:null,onNodeClick:null,onNodeCollapse:null,onNodeDoubleClick:null,onNodeExpand:null,onNodeSelect:null,onNodeUnselect:null,onShow:null,options:null,panelClassName:null,panelFooterTemplate:null,panelHeaderTemplate:null,panelStyle:null,placeholder:null,resetFilterOnHide:!1,scrollHeight:"400px",selectionMode:"single",showClear:!1,style:null,tabIndex:null,togglerTemplate:null,transitionOptions:null,value:null,valueTemplate:null,children:void 0},css:{classes:ll,styles:cl}});function Os(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function ul(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Os(Object(n),!0).forEach(function(s){ar(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var xa=l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=t.ptm,a=t.cx,o=function(d,E){return r(d,ul({hostName:t.hostName},E))},i=function(d){d.key==="Escape"&&(d.preventDefault(),t.hide())},u=function(){var d={maxHeight:t.scrollHeight||"auto"},E=n({className:a("panel",{panelProps:t,context:s}),style:t.panelStyle,onKeyDown:i,onClick:t.onClick},o("panel")),_=n({className:a("wrapper"),style:d},o("wrapper")),A=n({classNames:a("transition"),in:t.in,timeout:{enter:120,exit:100},options:t.transitionOptions,unmountOnExit:!0,onEnter:t.onEnter,onEntered:t.onEntered,onExit:t.onExit,onExited:t.onExited},o("transition"));return l.createElement(hr,jt({nodeRef:e},A),l.createElement("div",jt({ref:e},E),t.firstHiddenFocusableElementOnOverlay,t.header,l.createElement("div",_,t.children),t.footer,t.lastHiddenFocusableElementOnOverlay))},p=u();return l.createElement(rs,{element:p,appendTo:t.appendTo})});xa.displayName="TreeSelectPanel";function Ms(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ms(Object(n),!0).forEach(function(s){ar(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function rn(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=fl(t))||e){n&&(t=n);var s=0,r=function(){};return{s:r,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(p){throw p},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var p=n.next();return o=p.done,p},e:function(p){i=!0,a=p},f:function(){try{o||n.return==null||n.return()}finally{if(i)throw a}}}}function fl(t,e){if(t){if(typeof t=="string")return Ps(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(t,e):void 0}}function Ps(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}var wa=l.memo(l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=nn.getProps(t,s),a=l.useState(!1),o=tn(a,2),i=o[0],u=o[1],p=l.useState(!1),h=tn(p,2),d=h[0],E=h[1],_=l.useState(r.expandedKeys),A=tn(_,2),j=A[0],C=A[1],f=Qa("",r.filterDelay||0),w=tn(f,3),v=w[0],S=w[1],x=w[2],b=l.useRef(null),c=l.useRef(null),m=l.useRef(null),y=l.useRef(r.inputRef),g=l.useRef(null),R=l.useRef(null),F=l.useRef(null),L=l.useRef(null),U=l.useRef(null),N=l.useRef(!1),V=l.useRef(""),I=r.onToggle?r.expandedKeys:j,$=r.onFilterValueChange?r.filterValue:S,q=ce.isEmpty(r.value),W=r.selectionMode==="single",ee=r.selectionMode==="checkbox",re=ce.isNotEmpty(r.tooltip),Re={props:r,state:{focused:i,overlayVisible:d,expandedKeys:I,filterValue:$}},xe=nn.setMetaData(Re),Z=xe.ptm,se=xe.cx,Ce=xe.isUnstyled;wt(nn.css.styles,Ce,{name:"treeselect"});var Le={filter:function(O){return Q(O)},reset:function(){return oe()}},$e=ea({target:b,overlay:c,listener:function(O,G){var pe=G.valid,me=G.type;pe&&(me==="outside"||s.hideOverlaysOnDocumentScrolling?we():K.isDocument(O.target)||ut())},when:d}),le=tn($e,2),Ie=le[0],Oe=le[1],Fe=function(){return Ct.length?Ct.map(function(O){return O.label}).join(", "):r.placeholder},ke=function(){E(!0)},we=function(){E(!1),y.current&&K.focus(y.current)},ze=function(){u(!0),r.onFocus&&r.onFocus()},Be=function(){u(!1),r.onBlur&&r.onBlur()},De=function(O){!r.disabled&&(!c.current||!c.current.contains(O.target))&&!K.isAttributeEquals(O.target,"data-pc-section","closebutton")&&(K.focus(y.current),d?we():ke())},st=function(O){r.onChange&&(R.current=!0,r.onChange({originalEvent:O.originalEvent,value:O.value,stopPropagation:function(){O.originalEvent.stopPropagation()},preventDefault:function(){O.originalEvent.preventDefault()},target:{name:r.name,id:r.id,value:O.value}}))},Xe=function(O){r.onChange&&(R.current=!0,r.onChange({originalEvent:O,value:void 0,stopPropagation:function(){O?.stopPropagation()},preventDefault:function(){O?.preventDefault()},target:{name:r.name,id:r.id,value:void 0}}))},He=function(O){(O.key==="Enter"||O.code==="Space")&&(Xe(O),O.preventDefault())},Ne=function(O){r.onNodeSelect&&r.onNodeSelect(O),W&&we()},et=function(O){r.onNodeUnselect&&r.onNodeUnselect(O),ee&&O.originalEvent.stopPropagation()},he=function(O){r.onToggle?r.onToggle(O):C(O.value)},T=function(O){x(O.value)},D=function(O){ra.emit("overlay-click",{originalEvent:O,target:b.current})},H=function(O){var G=O.relatedTarget===y.current?K.getFirstFocusableElement(c.current,':not([data-p-hidden-focusable="true"])'):y.current;K.focus(G)},ae=function(O){var G=O.relatedTarget===y.current?K.getLastFocusableElement(c.current,':not([data-p-hidden-focusable="true"])'):y.current;K.focus(G)},Ae=function(O,G){switch(O.code){case"ArrowDown":O.preventDefault(),ne();break;case"ArrowUp":O.preventDefault(),y.current&&K.focus(y.current);break;case"Enter":case"NumpadEnter":O.preventDefault(),G&&we();break;case"Escape":Ge(O);break}},ve=function(O){switch(O.code){case"ArrowDown":Ee(O);break;case"Space":case"Enter":case"NumpadEnter":_e(O);break;case"Escape":Ge(O);break;case"Tab":d&&(O.preventDefault(),O.shiftKey?ne():ie(O));break}},Ee=function(O){d||(N.current=!0,ke(),O.preventDefault())},_e=function(O){d?we():Ee(O),O.preventDefault()},Ge=function(O){d&&(we(),O.preventDefault())},ie=function(O){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;G||d&&P()&&(K.focus(L.current),O.preventDefault())},P=function(){return K.getFocusableElements(c.current,':not([data-p-hidden-focusable="true"])').length>0},Q=function(O){var G=O.target.value;r.onFilterValueChange?r.onFilterValueChange({originalEvent:O,value:G}):x(G)},oe=function(){x("")},Me=function(){it.set("overlay",c.current,s&&s.autoZIndex||qe.autoZIndex,s&&s.zIndex.overlay||qe.zIndex.overlay),K.addStyles(c.current,{position:"absolute",top:"0",left:"0"}),ne(),ut(),Jt()},gt=function(){Ie(),r.filter&&r.filterInputAutoFocus&&K.focus(m.current,r.filterInputAutoFocus),r.onShow&&r.onShow()},ct=function(){Oe()},Et=function(){r.filter&&r.resetFilterOnHide&&oe(),it.clear(c.current),r.onHide&&r.onHide()},ut=function(){K.alignOverlay(c.current,g.current.parentElement,r.appendTo||s&&s.appendTo||qe.appendTo)},Jt=function(){var O=K.findSingle(c.current,'[data-pc-section="content"][data-p-highlight="true"]');O&&O.scrollIntoView&&O.scrollIntoView({block:"nearest",inline:"start"})},St=function(O,G,pe){if(O){if(Ke(O,G)&&(pe.push(O),delete G[O.key]),Object.keys(G).length&&O.children){var me=rn(O.children),Se;try{for(me.s();!(Se=me.n()).done;){var ye=Se.value;St(ye,G,pe)}}catch(Ze){me.e(Ze)}finally{me.f()}}}else{var je=rn(r.options),tt;try{for(je.s();!(tt=je.n()).done;){var It=tt.value;St(It,G,pe)}}catch(Ze){je.e(Ze)}finally{je.f()}}},Ke=function(O,G){return ee?G[O.key]&&G[O.key].checked:G[O.key]},Tt=function(){var O=W?ar({},"".concat(r.value),!0):yt({},r.value);C({}),O&&r.options&&M(null,null,O)},ne=function(){var O,G=K.find((O=F.current)===null||O===void 0?void 0:O.getElement(),'[data-pc-section="node"]'),pe=nl(G).find(function(me){return me.getAttribute("tabindex")==="0"});K.focus(pe)},M=function(O,G,pe){if(O){if(Ke(O,pe)&&(B(G),delete pe[O.key]),Object.keys(pe).length&&O.children){var me=rn(O.children),Se;try{for(me.s();!(Se=me.n()).done;){var ye=Se.value;G.push(O.key),M(ye,G,pe)}}catch(Ze){me.e(Ze)}finally{me.f()}}}else{var je=rn(r.options),tt;try{for(je.s();!(tt=je.n()).done;){var It=tt.value;M(It,[],pe)}}catch(Ze){je.e(Ze)}finally{je.f()}}},B=function(O){if(O.length>0){var G=yt({},j||{}),pe=rn(O),me;try{for(pe.s();!(me=pe.n()).done;){var Se=me.value;G[Se]=!0}}catch(ye){pe.e(ye)}finally{pe.f()}C(G)}},z=function(){var O=[];if(ce.isNotEmpty(r.value)&&r.options){var G=W?ar({},"".concat(r.value),!0):yt({},r.value);St(null,G,O)}return O};l.useImperativeHandle(e,function(){return{props:r,clear:Xe,show:ke,hide:we,focus:function(){return K.focus(y.current)},getElement:function(){return b.current}}}),l.useEffect(function(){ce.combinedRefs(y,r.inputRef)},[y,r.inputRef]),Tn(function(){Tt(),V.current=pr()+"_list",r.autoFocus&&K.focus(y.current,r.autoFocus),ut()}),dt(function(){d&&r.filter&&ut()}),dt(function(){Tt()},[r.options]),dt(function(){N.current&&d&&(N.current=!1,ne())},[d]),dt(function(){d&&j&&ut()},[j]),dt(function(){d&&(R.current||Tt(),R.current=!1)},[r.value]),ts(function(){it.clear(c.current)});var J=function(){var O=n({className:"p-hidden-accessible"},Z("hiddenInputWrapper")),G=n(yt({ref:y,role:"listbox",id:r.inputId,type:"text","aria-expanded":d,"aria-label":r.ariaLabel,"aria-labelledby":r.ariaLabelledBy,"aria-haspopup":"tree","aria-controls":V.current,onFocus:ze,onBlur:Be,onKeyDown:ve,disabled:r.disabled,tabIndex:r.tabIndex},vr),Z("hiddenInput"));return l.createElement("div",O,l.createElement("input",jt({},G,{readOnly:!0})))},ge=function(){var O=n({className:se("token")},Z("token")),G=n({className:se("tokenLabel")},Z("tokenLabel")),pe=n({className:se("labelContainer")},Z("labelContainer")),me=n({className:se("label",{isValueEmpty:q,getLabel:Fe})},Z("label")),Se=null;return r.valueTemplate?Se=ce.getJSXElement(r.valueTemplate,Ct,r):r.display==="comma"?Se=Fe()||"empty":r.display==="chip"&&(Se=l.createElement(l.Fragment,null,Ct&&Ct.map(function(ye,je){return l.createElement("div",jt({},O,{key:"".concat(ye.key,"_").concat(je)}),l.createElement("span",G,ye.label))}),q&&(r.placeholder||"empty"))),l.createElement("div",pe,l.createElement("div",me,Se))},ft=function(){var O=n({ref:g,className:se("trigger"),role:"button","aria-haspopup":"tree","aria-expanded":d},Z("trigger")),G=n({className:se("triggerIcon")},Z("triggerIcon")),pe=r.dropdownIcon||l.createElement(bi,G),me=We.getJSXIcon(pe,yt({},G),{props:r});return l.createElement("div",O,me)},Xt=function(){if(r.value!=null&&r.showClear&&!r.disabled){var O=n({className:se("clearIcon"),onPointerUp:Xe,tabIndex:r.tabIndex||"0",onKeyDown:He,"aria-label":ei("clear")},Z("clearIcon")),G=r.clearIcon||l.createElement(rr,O);return We.getJSXIcon(G,yt({},O),{props:r})}return null},Zt=function(){return l.createElement(fi,{ref:F,id:V.current,emptyMessage:r.emptyMessage,expandedKeys:I,filter:r.filter,filterBy:r.filterBy,filterDelay:r.filterDelay,filterLocale:r.filterLocale,filterMode:r.filterMode,filterPlaceholder:r.filterPlaceholder,filterValue:$,metaKeySelection:r.metaKeySelection,nodeTemplate:r.nodeTemplate,onCollapse:r.onNodeCollapse,onExpand:r.onNodeExpand,onFilterValueChange:T,onNodeClick:r.onNodeClick,onNodeDoubleClick:r.onNodeDoubleClick,onSelect:Ne,onSelectionChange:st,onToggle:he,onUnselect:et,selectionKeys:r.value,selectionMode:r.selectionMode,showHeader:!1,togglerTemplate:r.togglerTemplate,value:r.options,pt:Z("tree"),__parentMetadata:{parent:Re}})},Qt=function(){if(r.filter){var O=r.onFilterValueChange?r.filterValue:v;O=ce.isNotEmpty(O)?O:"";var G=n({className:se("filterContainer")},Z("filterContainer")),pe=n({ref:m,type:"text",value:O,autoComplete:"off",className:se("filter"),placeholder:r.filterPlaceholder,onKeyDown:function(Ze){return Ae(Ze,!1)},onChange:Q,disabled:r.disabled},Z("filter")),me=n({className:se("filterIcon")},Z("filterIcon")),Se=r.filterIcon||l.createElement(xi,me),ye=We.getJSXIcon(Se,yt({},me),{props:r}),je=l.createElement("div",G,l.createElement("input",pe),ye);if(r.filterTemplate){var tt={className:"p-treeselect-filter-container",element:je,filterOptions:Le,filterInputKeyDown:function(Ze){return Ae(Ze,function(){})},filterInputChange:Q,filterIconClassName:"p-dropdown-filter-icon",props:r};je=ce.getJSXElement(r.filterTemplate,tt)}return l.createElement(l.Fragment,null,je)}},On=function(){var O=Qt(),G=n({className:se("closeIcon"),"aria-hidden":!0},Z("closeIcon")),pe=r.closeIcon||l.createElement(rr,G),me=We.getJSXIcon(pe,yt({},G),{props:r}),Se=n({type:"button",className:se("closeButton"),onKeyDown:function(Za){return Ae(Za,!0)},onClick:we,"aria-label":cn("close")},Z("closeButton")),ye=n({className:se("header")},Z("header")),je=l.createElement("button",Se,me,l.createElement(_t,null)),tt=l.createElement("div",ye,O,je);if(r.panelHeaderTemplate){var It={className:"p-treeselect-header",filterElement:O,closeElement:je,closeElementClassName:"p-treeselect-close p-link",closeIconClassName:"p-treeselect-close-icon",onCloseClick:we,element:tt,props:r};return l.createElement("div",null,tt,ce.getJSXElement(r.panelHeaderTemplate,It))}return tt},Mn=function(){return ce.getJSXElement(r.panelFooterTemplate,r)},Ct=z(),Pn=nn.getOtherProps(r),vr=ce.reduceKeys(Pn,K.ARIA_PROPS),br=n({ref:L,role:"presentation",className:"p-hidden-accessible p-hidden-focusable",tabIndex:0,onFocus:H,"aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0},Z("firstHiddenFocusableElementOnOverlay")),xr=n({ref:U,role:"presentation",className:"p-hidden-accessible p-hidden-focusable",tabIndex:0,onFocus:ae,"aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0},Z("lastHiddenFocusableElementOnOverlay")),An=n({ref:b,className:ue(r.className,se("root",{context:s,focusedState:i,overlayVisibleState:d,isValueEmpty:q})),style:r.style,onClick:De},nn.getOtherProps(r),Z("root")),wr=J(),Nn=ge(),Er=ft(),_n=Xt(),jn=Zt(),Fn=On(),Sr=Mn();return l.createElement("div",An,wr,Nn,_n,Er,l.createElement(xa,{hostName:"TreeSelect",ref:c,appendTo:r.appendTo,panelStyle:r.panelStyle,panelClassName:r.panelClassName,scrollHeight:r.scrollHeight,onClick:D,header:Fn,hide:we,footer:Sr,firstHiddenFocusableElementOnOverlay:l.createElement("span",br),lastHiddenFocusableElementOnOverlay:l.createElement("span",xr),transitionOptions:r.transitionOptions,in:d,onEnter:Me,onEntered:gt,onExit:ct,onExited:Et,ptm:Z,cx:se},jn),re&&l.createElement(ns,jt({target:b,content:r.tooltip,pt:Z("tooltip")},r.tooltipOptions)))}));wa.displayName="TreeSelect";function yn(t){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(t)}function dl(t,e){if(yn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(yn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pl(t){var e=dl(t,"string");return yn(e)=="symbol"?e:e+""}function hl(t,e,n){return(e=pl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(){return Mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Mt.apply(null,arguments)}function Dr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function ml(t){if(Array.isArray(t))return Dr(t)}function gl(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ea(t,e){if(t){if(typeof t=="string")return Dr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(t,e):void 0}}function yl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(t){return ml(t)||gl(t)||Ea(t)||yl()}function vl(t){if(Array.isArray(t))return t}function bl(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function xl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bt(t,e){return vl(t)||bl(t,e)||Ea(t,e)||xl()}var wl=`
@layer primereact {
    .p-menu-overlay {
        position: absolute;
        /* Github #3122: Prevent animation flickering  */
        top: -9999px;
        left: -9999px;
    }

    .p-menu ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .p-menu .p-menuitem-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
    }

    .p-menu .p-menuitem-text {
        line-height: 1;
    }
}
`,El={root:function(e){var n=e.props,s=e.context;return ue("p-menu p-component",{"p-menu-overlay":n.popup,"p-input-filled":s&&s.inputStyle==="filled"||qe.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||qe.ripple===!1})},menu:"p-menu-list p-reset",content:function(e){var n=e.item;return ue("p-menuitem-content",{"p-disabled":n.disabled})},action:function(e){var n=e.item;return ue("p-menuitem-link",{"p-disabled":n.disabled})},menuitem:function(e){var n=e.focused;return ue("p-menuitem",{"p-focus":n})},submenuHeader:function(e){var n=e.submenu;return ue("p-submenu-header",{"p-disabled":n.disabled})},separator:"p-menu-separator",label:"p-menuitem-text",icon:"p-menuitem-icon",transition:"p-connected-overlay"},Sl={submenuHeader:function(e){var n=e.submenu;return n.style},menuitem:function(e){var n=e.item;return n.style}},zn=mt.extend({defaultProps:{__TYPE:"Menu",id:null,ariaLabel:null,ariaLabelledBy:null,tabIndex:0,model:null,popup:!1,popupAlignment:"left",style:null,className:null,autoZIndex:!0,baseZIndex:0,appendTo:null,onFocus:null,onBlur:null,transitionOptions:null,onShow:null,onHide:null,children:void 0,closeOnEscape:!0},css:{classes:El,styles:wl,inlineStyles:Sl}});function Ns(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Tl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ns(Object(n),!0).forEach(function(s){hl(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Sa=l.memo(l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=zn.getProps(t,s),a=l.useState(r.id),o=Bt(a,2),i=o[0],u=o[1],p=l.useState(!r.popup),h=Bt(p,2),d=h[0],E=h[1],_=l.useState(-1),A=Bt(_,2),j=A[0],C=A[1],f=l.useState(-1),w=Bt(f,2),v=w[0],S=w[1],x=l.useState(!1),b=Bt(x,2),c=b[0],m=b[1],y=zn.setMetaData({props:r,state:{id:i,visible:d,focused:c}}),g=y.ptm,R=y.cx,F=y.sx,L=y.isUnstyled,U=function(P,Q){return g(P,{context:Q})};wt(zn.css.styles,L,{name:"menu"});var N=l.useRef(null),V=l.useRef(null),I=l.useRef(null),$=!!(d&&r.popup&&r.closeOnEscape),q=ti("menu",$);ni({callback:function(P){Ne(P)},when:$&&q,priority:[ri.MENU,q]});var W=ea({target:I,overlay:N,listener:function(P,Q){var oe=Q.valid,Me=Q.type;oe&&(s.hideOverlaysOnDocumentScrolling||Me==="outside"?(Ne(P),C(-1)):K.isDocument(P.target)||K.absolutePosition(N.current,I.current,r.popupAlignment))},when:d}),ee=Bt(W,2),re=ee[0],Re=ee[1],xe=function(P){r.popup&&ra.emit("overlay-click",{originalEvent:P,target:I.current})},Z=function(P,Q,oe){if(Q.disabled){P.preventDefault();return}Q.command&&Q.command({originalEvent:P,item:Q}),r.popup&&Ne(P),!r.popup&&j!==oe&&C(oe),Q.url||(P.preventDefault(),P.stopPropagation())},se=function(P,Q){P&&r.popup&&j!==Q&&C(Q)},Ce=function(P){m(!0),r.popup||(v!==-1?(De(v),S(-1)):De(0)),r.onFocus&&r.onFocus(P)},Le=function(P){var Q=P.currentTarget,oe=P.relatedTarget;oe&&Q.contains(oe)||(m(!1),C(-1),r.onBlur&&r.onBlur(P))},$e=function(P){switch(P.code){case"ArrowDown":le(P);break;case"ArrowUp":Ie(P);break;case"Home":Oe(P);break;case"End":Fe(P);break;case"Enter":case"NumpadEnter":ke(P);break;case"Space":we(P);break;case"Escape":r.popup&&(K.focus(I.current),Ne(P));case"Tab":r.popup&&d&&Ne(P);break}},le=function(P){var Q=ze(j);De(Q),P.preventDefault()},Ie=function(P){if(P.altKey&&r.popup)K.focus(I.current),Ne(P),P.preventDefault();else{var Q=Be(j);De(Q),P.preventDefault()}},Oe=function(P){De(0),P.preventDefault()},Fe=function(P){De(K.find(N.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]').length-1),P.preventDefault()},ke=function(P){var Q=K.findSingle(N.current,'li[id="'.concat("".concat(j),'"]')),oe=Q&&K.findSingle(Q,'a[data-pc-section="action"]');r.popup&&K.focus(I.current),oe?oe.click():Q&&Q.click(),P.preventDefault()},we=function(P){ke(P)},ze=function(P){var Q=K.find(N.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),oe=As(Q).findIndex(function(Me){return Me.id===P});return oe>-1?oe+1:0},Be=function(P){var Q=K.find(N.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),oe=As(Q).findIndex(function(Me){return Me.id===P});return oe>-1?oe-1:0},De=function(P){var Q=K.find(N.current,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),oe=P>=Q.length?Q.length-1:P<0?0:P;oe>-1&&C(Q[oe].getAttribute("id"))},st=function(){return j!==-1?j:null},Xe=function(P){r.popup&&(d?Ne(P):He(P))},He=function(P){I.current=P.currentTarget,E(!0),r.onShow&&r.onShow(P)},Ne=function(P){I.current=P.currentTarget,E(!1),r.onHide&&r.onHide(P)},et=function(){K.addStyles(N.current,{position:"absolute",top:"0",left:"0"}),it.set("menu",N.current,s&&s.autoZIndex||qe.autoZIndex,r.baseZIndex||s&&s.zIndex.menu||qe.zIndex.menu),K.absolutePosition(N.current,I.current,r.popupAlignment),r.popup&&(K.focus(V.current),De(0))},he=function(){re()},T=function(){I.current=null,Re()},D=function(){it.clear(N.current)};Tn(function(){i||u(pr())}),ts(function(){it.clear(N.current)}),l.useImperativeHandle(e,function(){return{props:r,toggle:Xe,show:He,hide:Ne,getElement:function(){return N.current},getTarget:function(){return I.current}}});var H=function(P,Q){var oe=i+"_sub_"+Q,Me=P.items.map(function(ct,Et){return Ae(ct,Et,oe)}),gt=n({id:oe,role:"none",className:ue(P.className,R("submenuHeader",{submenu:P})),style:F("submenuHeader",{submenu:P}),"data-p-disabled":P.disabled},g("submenuHeader"));return l.createElement(l.Fragment,{key:oe},l.createElement("li",Mt({},gt,{key:oe}),P.label),Me)},ae=function(P,Q){if(P.visible===!1)return null;var oe=i+"_separator_"+Q,Me=n({id:oe,className:ue(P.className,R("separator")),role:"separator"},g("separator"));return l.createElement("li",Mt({},Me,{key:oe}))},Ae=function(P,Q){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(P.visible===!1)return null;var Me={item:P,index:Q,parentId:oe},gt=ue("p-menuitem-link",{"p-disabled":P.disabled}),ct=ue("p-menuitem-icon",P.icon),Et=n({className:R("icon")},U("icon",Me)),ut=We.getJSXIcon(P.icon,Tl({},Et),{props:r}),Jt=n({className:R("label")},U("label",Me)),St=P.label&&l.createElement("span",Jt,P.label),Ke=P.id||(oe||i)+"_"+Q,Tt=n({onClick:function(ge){return Z(ge,P,Ke)},onMouseMove:function(ge){return se(ge,Ke)},className:R("content",{item:P})},U("content",Me)),ne=n({href:P.url||"#",className:R("action",{item:P}),onFocus:function(ge){return ge.stopPropagation()},target:P.target,tabIndex:"-1","aria-label":P.label,"aria-disabled":P.disabled,"data-p-disabled":P.disabled},U("action",Me)),M=l.createElement("div",Tt,l.createElement("a",ne,ut,St,l.createElement(_t,null)));if(P.template){var B={onClick:function(ge){return Z(ge,P,Ke)},onMouseMove:function(ge){return se(ge,Ke)},className:gt,tabIndex:"-1",labelClassName:"p-menuitem-text",iconClassName:ct,element:M,props:r};M=ce.getJSXElement(P.template,P,B)}var z=n({id:Ke,className:ue(P.className,R("menuitem",{focused:j===Ke})),onClick:function(ge){return Z(ge,P,Ke)},style:F("menuitem",{item:P}),role:"menuitem","aria-label":P.label,"aria-disabled":P.disabled,"data-p-focused":st()===Ke,"data-p-disabled":P.disabled||!1},U("menuitem",Me));return l.createElement("li",Mt({},z,{key:Ke}),M)},ve=function(P,Q){return P.visible===!1?null:P.separator?ae(P,Q):P.items?H(P,Q):Ae(P,Q)},Ee=function(){return r.model.map(ve)},_e=function(){if(r.model){var P=Ee(),Q=n({className:ue(r.className,R("root",{context:s})),style:r.style,onClick:function(ct){return xe(ct)}},zn.getOtherProps(r),g("root")),oe=n({ref:V,className:R("menu"),id:i+"_list",tabIndex:r.tabIndex||"0",role:"menu","aria-label":r.ariaLabel,"aria-labelledby":r.ariaLabelledBy,"aria-activedescendant":c?st():void 0,onFocus:Ce,onKeyDown:$e,onBlur:Le},g("menu")),Me=n({classNames:R("transition"),in:d,timeout:{enter:120,exit:100},options:r.transitionOptions,unmountOnExit:!0,onEnter:et,onEntered:he,onExit:T,onExited:D},g("transition"));return l.createElement(hr,Mt({nodeRef:N},Me),l.createElement("div",Mt({id:r.id,ref:N},Q),l.createElement("ul",oe,P)))}return null},Ge=_e();return r.popup?l.createElement(rs,{element:Ge,appendTo:r.appendTo}):Ge}));Sa.displayName="Menu";function Cl(t,e=500){const n=l.useRef(null);return l.useCallback(s=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(s)},e)},[t,e])}const Br=t=>t.replaceAll(/\/\*(.|[\s\S])*?\*\/|\/\/.*?$/gm,"");function Il(t,e,n){const s=Br(e),r=[],a={},o={},i=[],u=[];for(const p of s.matchAll(/(use|include)\s*<([^>]+)>/g))(p[1]=="use"?u:i).push(p[2]);for(const p of s.matchAll(/(?:^|[{};])\s*([$\w]+)\s*=/g))r.push(p[1]);for(const p of s.matchAll(/(function|module)\s+([$\w]+)\s*\(([^)]*)\)(?:\s*(?:=\s*)?(\{\}|[^{}]+?;))?/gm)){const h=p[1],d=p[2];if(n&&d.startsWith("_"))continue;const E=p[3],_=p[4],A=[];if(/^(\s*([$\w]+(\s*=[^,()[]+)?(\s*,\s*[$\w]+(\s*=[^,()[]+)?)*)?\s*)$/m.test(E))for(const j of E.split(",")){const C=/^\s*([$\w]+)(?:\s*=([^,()[]+))?\s*$/.exec(j);if(C){const f=C[1],w=C[2];A.push({name:f,defaultValue:w})}}(h=="function"?a:o)[d]={path:t,name:d,signature:`${d}(${E.replaceAll(/[\s]+/gm," ").replaceAll(/\b | \b/g,"")})`,params:A,referencesChildren:_!=null?_.indexOf("children()")>=0:null}}return{vars:r,functions:a,modules:o,includes:i,uses:u}}const Rl=`
  $fa=undef;
  $fs=undef;
  $fn=undef;
  $t=undef;

  $preview=undef;

  // shows rotation
  $vpr=undef;
  // shows translation (i.e. won't be affected by rotate and zoom)
  $vpt=undef;
  // shows the FOV of the view [Note: Requires version 2021.01]
  $vpf=undef;
  // shows the camera distance [Note: Requires version 2015.03]
  $vpd=undef;

  PI=undef;

  function abs(x) = x;
  function acos(x) = x;
  function asin(x) = x;
  function atan(x) = x;
  function atan2(y, x) = x;
  function ceil(x) = x;
  function chr(x) = 0;
  function len(assignments) = $children;
  function let(x) = x;
  function ln(x) = x;
  function log(x) = x;
  function lookup(key, array) = x;
  function max(values) = x;
  function min(values) = x;
  function sqrt(x) = x;
  function tan(degrees) = x;
  function rands(min_value, max_value, value_count, seed_value=undef) = x;
  function search(match_value, string_or_vector, num_returns_per_match=1, index_col_num=0) = x;
  function ord(x) = x;
  function round(x) = x;
  function sign(x) = x;
  function sin(degrees) = x;
  function str(values) = x;
  function norm(x) = x;
  function pow(base, exponent) = x;
  function concat(values) = x;
  function cos(degrees) = x;
  function cross(a, b) = x;
  function floor(x) = x;
  function exp(x) = x;
  function chr(x) = x;
  function is_undef(x) = x;
  function is_list(x) = x;
  function is_num(x) = x;
  function is_bool(x) = x;
  function is_string(x) = x;
  function is_function(x) = x;

  function version() = '';
  function version_num() = 0;

  $parent_modules=0;
  module parent_module(n) {}

  module children() {}

  module render(convexity=undef) {}
  module surface(file, center=false, invert=false, convexity=undef) {}

  function assert(condition, message=undef) = children();
  module assert(condition, message=undef) children();

  module cube(size, center=false) {}
  module sphere(r, d=undef, $fa, $fs, $fn) {}
  module cylinder(h, r, r1=undef, r2, d, d1, d2, center=false, $fa, $fs, $fn) {}
  module polyhedron(points, faces, convexity=undef) {}

  module square(size, center=false) {}
  module circle(r, d=undef, $fa, $fs, $fn) {}
  module polygon(points, paths, convexity=undef) {}
  module linear_extrude(height, center=false, twist=undef, slices=undef, scale=undef, convexity=undef) children();
  module rotate_extrude(degrees, convexity=undef, $fa, $fs, $fn) children();

  module scale(v) children();
  module resize(newsize, auto=false) children();
  module rotate(a, v=undef) children();
  module translate(v) children();
  module mirror(v) children();
  module multmatrix(m) children();

  module color(c, alpha) children();

  module offset(r, delta=undef, chamfer) children();

  module minkowski() children();
  module union() children();
  module difference() children();
  module intersection() children();
  module hull() children();

  module children() {}

  // module for(i=undef) children();

  module import(file, convexity=undef, $fn, $fa, $fs) {}
`,Ol=["abs","acos","asin","atan","atan2","ceil","len","let","ln","log","lookup","max","min","sqrt","tan","rands","search","sign","sin","str","norm","pow","concat","cos","cross","floor","exp","chr"],Ml=["children","circle","color","cube","cylinder","diameter","difference","echo","extrude","for","function","hull","if","include","intersection_for","intersection","linear","minkowski","mirror","module","multmatrix","offset","polyhedron","projection","radius","render","resize","rotate","round","scale","sphere","square","surface","translate","union","use","value","version"],Pl=["false","true","PI","undef","$children","$fa","$fn","$fs","$t","$vpd","$vpr","$vpt"],Al=t=>({colorizedBracketPairs:[["{","}"],["(",")"],["[","]"]],wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:t.languages.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:t.languages.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:t.languages.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:t.languages.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}}),Nl={defaultToken:"invalid",tokenPostfix:".js",keywords:[...Ol,...Ml,...Pl,"each"],typeKeywords:[],operators:["<=",">=","==","!=","=>","+","-","*","/","%","<<",">>",">>>","&","|","^","!","&&","||","?",":","="],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\[abfnrtv\\"']/,digits:/\d+/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}},Ta={getConf:Al,language:Nl};function _s(t,e,n){const s=[],r=[];let a=!0,o=0;for(const u of n.params??[]){if(a)if(u.defaultValue!=null)a=!1;else{s.push(`${u.name.replaceAll("$","\\$")}=${"${"+ ++o+":"+u.name+"}"}`);continue}r.push(u.name)}r.length&&s.push(`${"${"+ ++o+":"+r.join("|")+"=}"}`);let i=`${e.replaceAll("$","\\$")}(${s.join(", ")})`;return n.referencesChildren!==null&&(i+=n.referencesChildren?" ${"+ ++o+":children}":";"),{label:n.signature,kind:t.languages.CompletionItemKind.Function,insertText:i,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet}}const _l=t=>[...[!0,!1].map(e=>({label:`${e}`,kind:t.languages.CompletionItemKind.Value,insertText:`${e}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet})),...Ta.language.keywords.map(e=>({label:e,kind:t.languages.CompletionItemKind.Function,insertText:e,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet}))],jl=["for(${1:variable}=[${2:start}:${3:end}) ${4:body}","for(${1:variable}=[${2:start}:${3:increment}:${4:end}) ${5:body}",`if (\${1:condition}) {
	$0
} else {
	
}`];function Fl(t){return t.replaceAll(/\$\{\d+:([$\w]+)\}/g,"$1").replaceAll(/\$\d+/g,"").replaceAll(/\s+/g," ").trim()}async function kl(t,e,n,s){const r={},a=d=>d.startsWith("/")?d:`${n}/${d}`,o={};for(const[d,{deployed:E,symlinks:_}]of Object.entries(s))if(d!="fonts"&&E!==!1)for(const A in _)o[A]=`${d}/${_[A]}`;async function i(d){d in o&&(d=o[d]),d=a(d);try{const E=e.readFileSync(d);return new TextDecoder("utf-8").decode(E)}catch(E){throw E}}const u="<builtins>";let p;function h(d,E,{skipPrivates:_,addBuiltins:A}){return r[d]??=new Promise(async(j,C)=>{E==null&&(E=await i(d));const f={functions:{},modules:{},vars:[],includes:[],uses:[]},w=(b,c)=>{f.functions={...f.functions,...c.functions},f.modules={...f.modules,...c.modules},b||(f.vars=[...f.vars,...c.vars])},v=(d.split("/").slice(0,-1).join("/")||".")+"/",S=async(b,c)=>{let m=!1;for(const y of[`/libraries/${c}`,`${v}/${c}`,c])try{const g=await i(y),R=await h(c,g,{skipPrivates:!0,addBuiltins:!1});w(b,R),m=!0;break}catch(g){console.warn(`Failed to read file option ${y} for ${c} ${b?"used":"included"} by ${d}`,g)}m||console.error("Failed to find ",c,"(context imported in ",d,")")};A&&d!=u&&w(!1,p);const x=Il(d,E,_);await Promise.all([...(x.uses??[]).map(b=>[b,!0]),...(x.includes??[]).map(b=>[b,!1])].map(([b,c])=>S(c,b))),w(!1,x),j(f)})}return p=await h(u,Rl,{skipPrivates:!1,addBuiltins:!1}),{triggerCharacters:["<","/"],provideCompletionItems:(async(d,E,_,A)=>{try{const{word:j}=d.getWordUntilPosition(E),C=d.getOffsetAt(E),f=d.getValue();let w=f.substring(0,C);const v=w.lastIndexOf(`
`);w=w.substring(v+1);const S=/\b(include|use)\s*<([^<>\n"]*)$/.exec(w);if(S){const F=S[2];let L,U,N;const V=F.lastIndexOf("/");V<0?(N="",U=F):(N=F.substring(0,V),U=F.substring(V+1));const I=N==""?"":"/"+N;let $=null;for(const W of[Cr("/libraries",I),Cr(n,I)]){$=N==""?[...Object.keys(o)]:[];try{$=[...e.readdirSync(W)??[],...$];break}catch{}}const q=[];if(!$)console.warn("Failed to find folder named "+I);else for(const W of $){if(U!=""&&!W.startsWith(U)||/^(LICENSE.*|fonts)$/.test(W)||N==""&&W in s&&s[W].symlinks)continue;const ee=!W.endsWith(".scad"),re=W+(ee?"":`>
`);q.push({label:W,kind:ee?t.languages.CompletionItemKind.Folder:t.languages.CompletionItemKind.File,insertText:re})}return q.sort(),{suggestions:q}}const x=Cr(n,"foo.scad");delete r[x];const b=await h(x,f,{skipPrivates:!1,addBuiltins:!0}),c=Br(w),m=/(^|.*?[{});]|>\s*\n)\s*([$\w]*)$/m.exec(c);if(m){const F=m[1],L=[..._l(t),...bs(b.modules??{},(U,N)=>_s(t,U,N),U=>U.indexOf(j)>=0),...(b.vars??[]).filter(U=>U.indexOf(j)>=0).map(U=>({label:U,kind:t.languages.CompletionItemKind.Variable,insertText:U.replaceAll("$","\\$"),insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet})),...jl.map(U=>({label:Fl(U).replaceAll(/ body/g,""),kind:t.languages.CompletionItemKind.Keyword,insertText:U,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet}))];return L.sort((U,N)=>U.insertText.indexOf(F)-N.insertText.indexOf(F)),{suggestions:L}}const y=Br(f),g=[...bs(b.functions??{},(F,L)=>[F,_s(t,F,L)],F=>F.indexOf(j)>=0)];return g.sort(([F],[L])=>F.indexOf(j)-L.indexOf(j)),{suggestions:g.map(([F,L])=>L)}}catch(j){return console.error(j),{suggestions:[]}}})}}async function Ll(t,e,n,s){t.languages.register({id:"openscad",extensions:[".scad"],mimetypes:["text/openscad"]});const{getConf:r,language:a}=Ta;t.languages.setLanguageConfiguration("openscad",r(t)),t.languages.setMonarchTokensProvider("openscad",a),t.languages.registerCompletionItemProvider("openscad",await kl(t,e,n,s))}const $l=function(e){const[n,s]=l.useState(null),[r,a]=l.useState(null),[o,i]=l.useState([]),[u,p]=l.useState(e.path),[h,d]=l.useState(!0),[E,_]=l.useState(""),[A,j]=l.useState({}),[C,f]=l.useState(e.homeFileProp??""),w=l.useRef(null),v=l.useRef(null),[S,x]=l.useState(!1),b=(I,$)=>alert(`${I}: ${$}`);function c(I="/"){const $=[];try{const q=di(I);q.sort();for(const W of q){const ee=I==="/"?`/${W}`:`${I}/${W}`;Ot(ee)&&ms(ee).isDirectory()?$.push({key:ee,label:W+"/",data:ee,selectable:!1,children:c(ee),icon:"pi pi-folder"}):$.push({key:ee,label:W,data:ee,selectable:!0,icon:"pi pi-file"})}}catch(q){b("Failed to build tree",q)}return $}const m=()=>{if(!e.hideTopBar)try{const I=c("/");i(I),!u&&I.length&&p(C)}catch(I){b("Failed to list files",I)}},y=()=>{const I=prompt("Enter new file name (with extension):","/newfile.scad");if(I&&I.startsWith("/"))try{Ot(I)?alert("File already exists!"):(gs(I.substring(0,I.lastIndexOf("/")),{recursive:!0}),Rr(I,""),p(I),m())}catch($){b("Failed to create file",$)}},g=()=>{const I=prompt("Enter new name for current file:",u);if(I&&I.startsWith("/"))try{Ot(I)?alert("File already exists!"):(gs(I.substring(0,I.lastIndexOf("/")),{recursive:!0}),Rr(I,Ir(u,"utf-8")),ys(u),p(I),m())}catch($){b("Failed to rename file",$)}},R=()=>{if(window.confirm(`Delete ${u}?`))try{ys(u),m(),p("")}catch(I){b("Failed to delete file",I)}},F=Cl(I=>{if(!(h||!u))try{if(console.debug("ZenMonacoPrime",`Saving ${u}`),Rr(u,I??""),I==E)return;e.onSave?.(I)}catch($){b("Failed to save file",$)}},1e3),L=l.useCallback(I=>{I&&F(I)},[F]),U=(I,$)=>{$.editor.addEditorAction({id:"openscad-save-do-nothing",label:"Save (disabled)",keybindings:[$.KeyMod.CtrlCmd|$.KeyCode.KeyS],run:()=>{}}),$.editor.addKeybindingRules([{keybinding:$.KeyMod.CtrlCmd|$.KeyCode.KeyD,command:"monaco.editor.action.deleteLines"},{keybinding:$.KeyMod.CtrlCmd|$.KeyMod.Shift|$.KeyCode.KeyD,command:"monaco.editor.action.copyLinesDownAction"},{keybinding:$.KeyMod.CtrlCmd|$.KeyCode.KeyK,command:"monaco.editor.action.quickCommand"},{keybinding:$.KeyCode.F8,command:void 0}]),Ll($,pi,"/",ui),s(I),a($)};l.useEffect(()=>{if(!n||!r)return;const I=n.getModel();I&&r.editor.setModelMarkers(I,"openscad",e.markers??[])},[e.markers]),l.useEffect(()=>{e.isInitializing||!u||E!=""||(async()=>{try{if(console.debug("ZenMonacoPrime",`Loading ${u}`),Ot(u)){const I=Ir(u,"utf-8");I!=E&&_(I)}else _("");m(),d(!1)}catch(I){b("Failed to read file",I),_("")}})()},[e.isInitializing,u,m]),l.useEffect(()=>{if(e.reloadKey!==void 0&&e.reloadKey>0&&(console.debug("ZenMonacoPrime",`Reloading ${u}`),Ot(u))){const I=Ir(u,"utf-8");n?.setValue(I),d(!1)}},[e.reloadKey]),l.useEffect(()=>{const I=()=>{v.current&&x(v.current.offsetWidth<600)};return window.addEventListener("resize",I),I(),()=>window.removeEventListener("resize",I)},[]);const N=u||null,V=[{label:"New File",icon:"pi pi-plus",command:y},{label:"Rename",icon:"pi pi-pencil",command:g},{label:"Delete",icon:"pi pi-trash",command:R},{separator:!0},{label:"Set as Home",icon:"pi pi-home",command:()=>f(u)}];return k.jsxs("div",{style:{display:"flex",flexDirection:"column",...e.style},children:[!e.hideTopBar&&k.jsxs("div",{style:{flex:0,display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:"#222"},children:[k.jsxs("div",{style:{position:"relative",flex:0},children:[k.jsx(Sa,{model:V,popup:!0,ref:w}),k.jsx(Yt,{"aria-label":"Editor menu",style:{minWidth:48,minHeight:48},title:"Menu",onClick:I=>w.current&&w.current.toggle(I),disabled:h,icon:"pi pi-bars",text:!0})]}),k.jsx("div",{style:{position:"relative",flex:1,display:"flex",alignItems:"center"},children:k.jsx(wa,{value:N,options:o,expandedKeys:A,onToggle:I=>j(I.value),onChange:I=>{const $=I.value;typeof $=="string"&&Ot($)&&!ms($).isDirectory()&&p($)},selectionMode:"single",filter:!0,placeholder:"Select a file",className:"w-full",style:{minWidth:300},disabled:h,panelStyle:{maxHeight:600,overflowY:"auto"}})}),k.jsx("div",{style:{position:"relative",flex:0},children:k.jsx(Yt,{"aria-label":"Go to HomePage",title:"Go to HomePage",style:{minWidth:48,minHeight:48,color:C?"#fff":"#888"},disabled:!C,onClick:()=>C&&p(C),icon:"pi pi-home",text:!0})})]}),k.jsx("div",{ref:v,style:{flex:1},children:h?k.jsx(Gt,{text:"Loading filesystem"}):k.jsx(Zo,{width:"100%",defaultLanguage:"openscad",value:E,path:u,onChange:L,theme:"vs-dark",onMount:U,options:{automaticLayout:!0,fontSize:16,lineNumbers:S?"off":"on",minimap:{enabled:!S}},loading:k.jsx(Gt,{text:"Loading monaco editor"})})})]})};function Ur(){return Ur=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ur.apply(null,arguments)}var Ca=l.memo(l.forwardRef(function(t,e){var n=dr.getPTI(t);return l.createElement("svg",Ur({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{d:"M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z",fill:"currentColor"}),l.createElement("path",{d:"M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z",fill:"currentColor"}),l.createElement("path",{d:"M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z",fill:"currentColor"}))}));Ca.displayName="ExclamationTriangleIcon";function Vr(){return Vr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Vr.apply(null,arguments)}var Ia=l.memo(l.forwardRef(function(t,e){var n=dr.getPTI(t);return l.createElement("svg",Vr({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z",fill:"currentColor"}))}));Ia.displayName="InfoCircleIcon";function zr(){return zr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zr.apply(null,arguments)}var Ra=l.memo(l.forwardRef(function(t,e){var n=dr.getPTI(t);return l.createElement("svg",zr({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z",fill:"currentColor"}))}));Ra.displayName="TimesCircleIcon";function Hr(){return Hr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Hr.apply(null,arguments)}function Kr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Dl(t){if(Array.isArray(t))return Kr(t)}function Bl(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oa(t,e){if(t){if(typeof t=="string")return Kr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(t,e):void 0}}function Ul(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(t){return Dl(t)||Bl(t)||Oa(t)||Ul()}function Vl(t){if(Array.isArray(t))return t}function zl(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function Hl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(t,e){return Vl(t)||zl(t,e)||Oa(t,e)||Hl()}function vn(t){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(t)}function Kl(t,e){if(vn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(vn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wl(t){var e=Kl(t,"string");return vn(e)=="symbol"?e:e+""}function Ma(t,e,n){return(e=Wl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gl=`
@layer primereact {
    .p-toast {
        width: calc(100% - var(--toast-indent, 0px));
        max-width: 25rem;
    }
    
    .p-toast-message-icon {
        flex-shrink: 0;
    }
    
    .p-toast-message-content {
        display: flex;
        align-items: flex-start;
    }
    
    .p-toast-message-text {
        flex: 1 1 auto;
    }
    
    .p-toast-summary {
        overflow-wrap: anywhere;
    }
    
    .p-toast-detail {
        overflow-wrap: anywhere;
    }
    
    .p-toast-top-center {
        transform: translateX(-50%);
    }
    
    .p-toast-bottom-center {
        transform: translateX(-50%);
    }
    
    .p-toast-center {
        min-width: 20vw;
        transform: translate(-50%, -50%);
    }
    
    .p-toast-icon-close {
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
    }
    
    .p-toast-icon-close.p-link {
        cursor: pointer;
    }
    
    /* Animations */
    .p-toast-message-enter {
        opacity: 0;
        transform: translateY(50%);
    }
    
    .p-toast-message-enter-active {
        opacity: 1;
        transform: translateY(0);
        transition: transform 0.3s, opacity 0.3s;
    }
    
    .p-toast-message-enter-done {
        transform: none;
    }
    
    .p-toast-message-exit {
        opacity: 1;
        max-height: 1000px;
    }
    
    .p-toast .p-toast-message.p-toast-message-exit-active {
        opacity: 0;
        max-height: 0;
        margin-bottom: 0;
        overflow: hidden;
        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;
    }
}
`,Yl={root:function(e){var n=e.props,s=e.context;return ue("p-toast p-component p-toast-"+n.position,n.className,{"p-input-filled":s&&s.inputStyle==="filled"||qe.inputStyle==="filled","p-ripple-disabled":s&&s.ripple===!1||qe.ripple===!1})},message:{message:function(e){var n=e.severity;return ue("p-toast-message",Ma({},"p-toast-message-".concat(n),n))},content:"p-toast-message-content",buttonicon:"p-toast-icon-close-icon",closeButton:"p-toast-icon-close p-link",icon:"p-toast-message-icon",text:"p-toast-message-text",summary:"p-toast-summary",detail:"p-toast-detail"},transition:"p-toast-message"},ql={root:function(e){var n=e.props;return{position:"fixed",top:n.position==="top-right"||n.position==="top-left"||n.position==="top-center"?"20px":n.position==="center"?"50%":null,right:(n.position==="top-right"||n.position==="bottom-right")&&"20px",bottom:(n.position==="bottom-left"||n.position==="bottom-right"||n.position==="bottom-center")&&"20px",left:n.position==="top-left"||n.position==="bottom-left"?"20px":n.position==="center"||n.position==="top-center"||n.position==="bottom-center"?"50%":null}}},Hn=mt.extend({defaultProps:{__TYPE:"Toast",id:null,className:null,content:null,style:null,baseZIndex:0,position:"top-right",transitionOptions:null,appendTo:"self",onClick:null,onRemove:null,onShow:null,onHide:null,onMouseEnter:null,onMouseLeave:null,children:void 0},css:{classes:Yl,styles:Gl,inlineStyles:ql}});function js(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?js(Object(n),!0).forEach(function(s){Ma(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Pa=l.memo(l.forwardRef(function(t,e){var n=lt(),s=t.messageInfo,r=t.metaData,a=t.ptCallbacks,o=a.ptm,i=a.ptmo,u=a.cx,p=t.index,h=s.message,d=h.severity,E=h.content,_=h.summary,A=h.detail,j=h.closable,C=h.life,f=h.sticky,w=h.className,v=h.style,S=h.contentClassName,x=h.contentStyle,b=h.icon,c=h.closeIcon,m=h.pt,y={index:p},g=Pe(Pe({},r),y),R=l.useState(!1),F=Wr(R,2),L=F[0],U=F[1],N=si(function(){q()},C||3e3,!f&&!L),V=Wr(N,1),I=V[0],$=function(le,Ie){return o(le,Pe({hostName:t.hostName},Ie))},q=function(){I(),t.onClose&&t.onClose(s)},W=function(le){t.onClick&&!(K.hasClass(le.target,"p-toast-icon-close")||K.hasClass(le.target,"p-toast-icon-close-icon"))&&t.onClick(s.message)},ee=function(le){t.onMouseEnter&&t.onMouseEnter(le),!le.defaultPrevented&&(f||(I(),U(!0)))},re=function(le){t.onMouseLeave&&t.onMouseLeave(le),!le.defaultPrevented&&(f||U(!1))},Re=function(){var le=n({className:u("message.buttonicon")},$("buttonicon",g),i(m,"buttonicon",Pe(Pe({},y),{},{hostName:t.hostName}))),Ie=c||l.createElement(rr,le),Oe=We.getJSXIcon(Ie,Pe({},le),{props:t}),Fe=n({type:"button",className:u("message.closeButton"),onClick:q,"aria-label":t.ariaCloseLabel||cn("close")},$("closeButton",g),i(m,"closeButton",Pe(Pe({},y),{},{hostName:t.hostName})));return j!==!1?l.createElement("div",null,l.createElement("button",Fe,Oe,l.createElement(_t,null))):null},xe=function(){if(s){var le=ce.getJSXElement(E,{message:s.message,onClick:W,onClose:q}),Ie=n({className:u("message.icon")},$("icon",g),i(m,"icon",Pe(Pe({},y),{},{hostName:t.hostName}))),Oe=b;if(!b)switch(d){case"info":Oe=l.createElement(Ia,Ie);break;case"warn":Oe=l.createElement(Ca,Ie);break;case"error":Oe=l.createElement(Ra,Ie);break;case"success":Oe=l.createElement(sa,Ie);break}var Fe=We.getJSXIcon(Oe,Pe({},Ie),{props:t}),ke=n({className:u("message.text")},$("text",g),i(m,"text",Pe(Pe({},y),{},{hostName:t.hostName}))),we=n({className:u("message.summary")},$("summary",g),i(m,"summary",Pe(Pe({},y),{},{hostName:t.hostName}))),ze=n({className:u("message.detail")},$("detail",g),i(m,"detail",Pe(Pe({},y),{},{hostName:t.hostName})));return le||l.createElement(l.Fragment,null,Fe,l.createElement("div",ke,l.createElement("span",we,_),A&&l.createElement("div",ze,A)))}return null},Z=xe(),se=Re(),Ce=n({ref:e,className:ue(w,u("message.message",{severity:d})),style:v,role:"alert","aria-live":"assertive","aria-atomic":"true",onClick:W,onMouseEnter:ee,onMouseLeave:re},$("message",g),i(m,"root",Pe(Pe({},y),{},{hostName:t.hostName}))),Le=n({className:ue(S,u("message.content")),style:x},$("content",g),i(m,"content",Pe(Pe({},y),{},{hostName:t.hostName})));return l.createElement("div",Ce,l.createElement("div",Le,Z,se))}));Pa.displayName="ToastMessage";var Fs=0,os=l.memo(l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=Hn.getProps(t,s),a=l.useState([]),o=Wr(a,2),i=o[0],u=o[1],p=l.useRef(null),h={props:r,state:{messages:i}},d=Hn.setMetaData(h);wt(Hn.css.styles,d.isUnstyled,{name:"toast"});var E=function(c){c&&u(function(m){return _(m,c,!0)})},_=function(c,m,y){var g;if(Array.isArray(m)){var R=m.reduce(function(L,U){return L.push({_pId:Fs++,message:U}),L},[]);y?g=c?[].concat(Nr(c),Nr(R)):R:g=R}else{var F={_pId:Fs++,message:m};y?g=c?[].concat(Nr(c),[F]):[F]:g=[F]}return g},A=function(){it.clear(p.current),u([])},j=function(c){u(function(m){return _(m,c,!1)})},C=function(c){var m=ce.isNotEmpty(c._pId)?c._pId:c.message||c;u(function(y){return y.filter(function(g){return g._pId!==c._pId&&!ce.deepEquals(g.message,m)})}),r.onRemove&&r.onRemove(c.message||m)},f=function(c){C(c)},w=function(){r.onShow&&r.onShow()},v=function(){i.length===1&&it.clear(p.current),r.onHide&&r.onHide()};dt(function(){it.set("toast",p.current,s&&s.autoZIndex||qe.autoZIndex,r.baseZIndex||s&&s.zIndex.toast||qe.zIndex.toast)},[i,r.baseZIndex]),ts(function(){it.clear(p.current)}),l.useImperativeHandle(e,function(){return{props:r,show:E,replace:j,remove:C,clear:A,getElement:function(){return p.current}}});var S=function(){var c=n({ref:p,id:r.id,className:d.cx("root",{context:s}),style:d.sx("root")},Hn.getOtherProps(r),d.ptm("root")),m=n({classNames:d.cx("transition"),timeout:{enter:300,exit:300},options:r.transitionOptions,unmountOnExit:!0,onEntered:w,onExited:v},d.ptm("transition"));return l.createElement("div",c,l.createElement(is,null,i&&i.map(function(y,g){var R=l.createRef();return l.createElement(hr,Hr({nodeRef:R,key:y._pId},m),t.content?ce.getJSXElement(t.content,{message:y.message}):l.createElement(Pa,{hostName:"Toast",ref:R,messageInfo:y,index:g,onClick:r.onClick,onClose:f,onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,closeIcon:r.closeIcon,ptCallbacks:d,metaData:h}))})))},x=S();return l.createElement(rs,{element:x,appendTo:r.appendTo})}));os.displayName="Toast";var Aa=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],ln=t=>{let e=0;for(let n=0;n<t.length;n++){let s=t[n],r=Aa.indexOf(s);e=e*83+r}return e},sn=(t,e)=>{var n="";for(let s=1;s<=e;s++){let r=Math.floor(t)/Math.pow(83,e-s)%83;n+=Aa[Math.floor(r)]}return n},Ht=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Kt=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},Jl=t=>t<0?-1:1,Wt=(t,e)=>Jl(t)*Math.pow(Math.abs(t),e),ir=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},Xl=t=>{if(!t||t.length<6)throw new ir("The blurhash string must be at least 6 characters");let e=ln(t[0]),n=Math.floor(e/9)+1,s=e%9+1;if(t.length!==4+2*s*n)throw new ir(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*s*n}`)},Zl=t=>{let e=t>>16,n=t>>8&255,s=t&255;return[Ht(e),Ht(n),Ht(s)]},Ql=(t,e)=>{let n=Math.floor(t/361),s=Math.floor(t/19)%19,r=t%19;return[Wt((n-9)/9,2)*e,Wt((s-9)/9,2)*e,Wt((r-9)/9,2)*e]},ec=(t,e,n,s)=>{Xl(t),s=s|1;let r=ln(t[0]),a=Math.floor(r/9)+1,o=r%9+1,i=(ln(t[1])+1)/166,u=new Array(o*a);for(let d=0;d<u.length;d++)if(d===0){let E=ln(t.substring(2,6));u[d]=Zl(E)}else{let E=ln(t.substring(4+d*2,6+d*2));u[d]=Ql(E,i*s)}let p=e*4,h=new Uint8ClampedArray(p*n);for(let d=0;d<n;d++)for(let E=0;E<e;E++){let _=0,A=0,j=0;for(let v=0;v<a;v++)for(let S=0;S<o;S++){let x=Math.cos(Math.PI*E*S/e)*Math.cos(Math.PI*d*v/n),b=u[S+v*o];_+=b[0]*x,A+=b[1]*x,j+=b[2]*x}let C=Kt(_),f=Kt(A),w=Kt(j);h[4*E+0+d*p]=C,h[4*E+1+d*p]=f,h[4*E+2+d*p]=w,h[4*E+3+d*p]=255}return h},tc=ec,ks=4,nc=(t,e,n,s)=>{let r=0,a=0,o=0,i=e*ks;for(let p=0;p<e;p++){let h=ks*p;for(let d=0;d<n;d++){let E=h+d*i,_=s(p,d);r+=_*Ht(t[E]),a+=_*Ht(t[E+1]),o+=_*Ht(t[E+2])}}let u=1/(e*n);return[r*u,a*u,o*u]},rc=t=>{let e=Kt(t[0]),n=Kt(t[1]),s=Kt(t[2]);return(e<<16)+(n<<8)+s},sc=(t,e)=>{let n=Math.floor(Math.max(0,Math.min(18,Math.floor(Wt(t[0]/e,.5)*9+9.5)))),s=Math.floor(Math.max(0,Math.min(18,Math.floor(Wt(t[1]/e,.5)*9+9.5)))),r=Math.floor(Math.max(0,Math.min(18,Math.floor(Wt(t[2]/e,.5)*9+9.5))));return n*19*19+s*19+r},ac=(t,e,n,s,r)=>{if(s<1||s>9||r<1||r>9)throw new ir("BlurHash must have between 1 and 9 components");if(e*n*4!==t.length)throw new ir("Width and height must match the pixels array");let a=[];for(let d=0;d<r;d++)for(let E=0;E<s;E++){let _=E==0&&d==0?1:2,A=nc(t,e,n,(j,C)=>_*Math.cos(Math.PI*E*j/e)*Math.cos(Math.PI*d*C/n));a.push(A)}let o=a[0],i=a.slice(1),u="",p=s-1+(r-1)*9;u+=sn(p,1);let h;if(i.length>0){let d=Math.max(...i.map(_=>Math.max(..._))),E=Math.floor(Math.max(0,Math.min(82,Math.floor(d*166-.5))));h=(E+1)/166,u+=sn(E,1)}else h=1,u+=sn(0,1);return u+=sn(rc(o),4),i.forEach(d=>{u+=sn(sc(d,h),2)}),u},ic=ac;async function oc(t){return new Promise((e,n)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>e(s),s.onerror=(...r)=>n(r),s.src=t})}async function lc(t){const{rgba:e,w:n,h:s}=await uc(t,{maxSize:100,opaque:!0}),r=9;return ic(new Uint8ClampedArray(e),n,s,r,r)}function cc(t,e,n){const s=tc(t,e,n),r=document.createElement("canvas");r.width=e,r.height=n;const a=r.getContext("2d"),o=a.createImageData(e,n);return o.data.set(s),a.putImageData(o,0,0),r.toDataURL("image/png")}async function uc(t,{maxSize:e,opaque:n}){const s=await oc(t),r=s.width,a=s.height,o=Math.min(e/r,e/a),i=Math.floor(r*o),u=Math.floor(a*o),p=document.createElement("canvas");p.width=i,p.height=u;const h=p.getContext("2d");if(!h)throw new Error("Could not get canvas context");h.fillStyle="white",h.fillRect(0,0,i,u),h.drawImage(s,0,0,i,u);const d=h.getImageData(0,0,i,u);return{rgba:new Uint8Array(d.data.buffer),w:i,h:u}}const bn=[["Diagonal",Math.PI/4,Math.PI/4],["Front",0,Math.PI/2],["Right",Math.PI/2,Math.PI/2],["Back",Math.PI,Math.PI/2],["Left",-Math.PI/2,Math.PI/2],["Top",0,0],["Bottom",0,Math.PI]];function Gr(t,e){return[Math.cos(t)*Math.sin(e),Math.sin(t)*Math.sin(e),Math.cos(e)]}function Na(t,e){const n=t[0]-e[0],s=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+s*s+r*r)}const Ls=(t,e)=>Math.min(Math.abs(t-e),Math.abs(t-e+2*Math.PI),Math.abs(t-e-2*Math.PI));function fc(t,e){const n=Gr(t,e),r=bn.map(([u,p,h])=>Gr(p,h)).map(u=>Na(n,u)),a=bn.map(([u,p,h])=>Math.max(Ls(t,p),Ls(e,h))),[o,i]=r.reduce((u,p,h)=>p<u[1]?[h,p]:u,[0,1/0]);return[o,i,a[o]]}const Kn=(([t,e,n])=>`${e}rad ${n}rad auto`)(bn[0]),dc=l.forwardRef(function(e,n){const[s,r]=l.useState("none"),a=l.useRef(null),o=l.useRef(null),i=l.useRef(null),[u,p]=l.useState(),[h,d]=l.useState(void 0),E=u===e.modelUri;if(e?.preview){let{hash:C,uri:f}=h??{hash:""};e.preview.blurhash&&C!==e.preview.blurhash&&(C=e.preview.blurhash,f=cc(C,100,100),d({hash:C,uri:f}))}else h&&d(void 0);const _=l.useCallback(async C=>{if(p(e.modelUri),!a.current)return;const f=await a.current.toDataURL("image/png",.5);await lc(f)},[e.modelUri,p,a.current]);l.useEffect(()=>{if(!a.current)return;const C=a.current;return C.addEventListener("load",_),()=>C.removeEventListener("load",_)},[a.current,_]);for(const C of[a,o]){const f=C===a?o:a;l.useEffect(()=>{if(!C.current)return;function w(S){if(f.current&&S.detail.source==="user-interaction"){const x=C.current.getCameraOrbit();x.radius=f.current.getCameraOrbit().radius,f.current.cameraOrbit=x.toString()}}const v=C.current;return v.addEventListener("camera-change",w),()=>v.removeEventListener("camera-change",w)},[C.current,f.current])}l.useEffect(()=>{let C;function f(){const S=o.current.getCameraOrbit();return Gr(S.theta,S.phi)}function w(S){S.target===o.current&&(C=f())}function v(S){if(S.target===o.current){const c=f();if((C?Na(c,C):1/0)>.01)return;const y=o.current.getCameraOrbit(),g=a.current.getCameraOrbit(),[R,F,L]=fc(y.theta,y.phi),U=F<.01&&L<.1?(R+1)%bn.length:R,[N,V,I]=bn[U];Object.assign(g,{theta:V,phi:I}),a.current.cameraOrbit=o.current.cameraOrbit=g.toString(),i.current?.show({severity:"info",detail:`${N} view`,life:1e3}),r("none")}}return window.addEventListener("mousedown",w),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousedown",w),window.removeEventListener("mouseup",v)}});async function A(){if(!a.current)return null;const C=await a.current.toDataURL("image/png",1),f=new window.Image;f.src=C,await new Promise(S=>{f.onload=S});const w=document.createElement("canvas");w.width=500,w.height=500;const v=w.getContext("2d");return v?(v.drawImage(f,0,0,500,500),w.toDataURL("image/webp",.9)):null}function j(){!a.current||!o.current||(a.current.cameraOrbit=Kn,o.current.cameraOrbit=Kn)}return l.useImperativeHandle(n,()=>({getWebpScreenshot:A,resetView:j}),[A,j]),k.jsxs("div",{className:e.className,style:{display:"flex",flexDirection:"column",position:"relative",flex:1,width:"100%",background:e.lightMode?"#eee":"#111",...e.style??{}},children:[k.jsx(os,{ref:i,position:"top-right"}),k.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 0.4; }
            50% { opacity: 0.7; }
            100% { opacity: 0.4; }
          }
        `}),E?k.jsx(k.Fragment,{}):h?k.jsx("img",{src:h.uri,style:{animation:"pulse 1.5s ease-in-out infinite",position:"absolute",pointerEvents:"none",width:"100%",height:"100%"}}):k.jsx(Gt,{text:"Loading model"}),k.jsx("model-viewer",{orientation:"0deg -90deg 0deg",class:"main-viewer",src:e.modelUri,style:{transition:"opacity 0.5s",position:"absolute",width:"100%",height:"100%"},"camera-orbit":Kn,"interaction-prompt":s,"environment-image":"./skybox-lights.jpg",exposure:2,"max-camera-orbit":"auto 180deg auto","min-camera-orbit":"auto 0deg auto","camera-controls":!0,ar:!0,ref:a,children:k.jsx("span",{slot:"progress-bar"})}),k.jsx("model-viewer",{orientation:"0deg -90deg 0deg",src:"./axes.glb",style:{position:"absolute",bottom:0,left:0,zIndex:10,height:"100px",width:"100px"},loading:"eager","camera-orbit":Kn,"max-camera-orbit":"auto 180deg auto","min-camera-orbit":"auto 0deg auto","orbit-sensitivity":"5","interaction-prompt":"none","camera-controls":"false","disable-zoom":!0,"disable-tap":!0,"disable-pan":!0,ref:o,children:k.jsx("span",{slot:"progress-bar"})})]})});function _a(t,e){let n;t.id="WORKER."+t.taskName+"."+Math.random().toString(36).substring(2)+" |";function s(){n&&(n.terminate(),n=null)}return ss((r,a)=>(n=new Worker(new URL("/assets/openscad-worker-CLMFiw7W.js",import.meta.url),{type:"module"}),n.onmessage=o=>{"result"in o.data?(r(o.data.result),s()):e(o.data)},n.postMessage(t),()=>{s()}))}const pc=new Set(["Could not initialize localization."]),ja=(t,e)=>({logText:hc(t),markers:mc(t,e)});function hc(t,e){const n=[];for(const{stderr:s,stdout:r,error:a}of t){const o=s??r??`EXCEPTION: ${a}`;pc.has(o)||n.push(o)}return n.join(`
`)}function mc(t,e){let n=[];const s=[];let r=0,a=0;const o=(p,h,d)=>{s.push({startLineNumber:Number(d),startColumn:1,endLineNumber:Number(d),endColumn:1e3,message:p,severity:8})},i=e.shiftSourceLines&&e.shiftSourceLines.sourcePath,u=(p,h)=>{const d=Number(h);return i&&p.endsWith(i)?d-e.shiftSourceLines.skipLines:d};for(const{stderr:p,stdout:h,error:d}of t){if(p){p.startsWith("ERROR:")&&a++,p.startsWith("WARNING:")&&r++;let E=/^ERROR: Parser error in file "([^"]+)", line (\d+): (.*)$/.exec(p);if(E){const[_,A,j,C]=E;o(C,A,u(A,j));continue}if(E=/^ERROR: Parser error: (.*?) in file ([^",]+), line (\d+)$/.exec(p),E){const[_,A,j,C]=E;o(A,j,u(j,C));continue}if(E=/^WARNING: (.*?),? in file ([^,]+), line (\d+)\.?/.exec(p),E){const[_,A,j,C]=E;s.push({startLineNumber:u(j,C),startColumn:1,endLineNumber:u(j,C),endColumn:1e3,message:A,severity:4});continue}}n.push(p??h??`EXCEPTION: ${d}`)}return(a||r)&&(n=[`${a} errors, ${r} warnings!`,"",...n]),s}const gc=300,yc=aa(gc,t=>{const{activePath:e,sources:n}=t;""+n[0].content;const s="out.json",r=_a({taskName:"checkSyntax",mountArchives:!0,files:n,args:[e,"-o",s,"--export-format=param"],outputPaths:[s]},a=>{});return ss((a,o)=>((async()=>{try{const i=await r;let u;if(i.outputs&&i.outputs.length==1){const[[,p]]=i.outputs;try{u=JSON.parse(p)}catch(h){console.error(`Error while parsing parameter set: ${h}
${p}`)}}else console.error("No output from runner!");a({...ja(i.mergedOutputs,{}),parameterSet:u})}catch(i){console.error(i),o(i)}})(),()=>r.kill()))}),vc=1e3;function Fa(t){return typeof t=="string"?`"${t}"`:t instanceof Array?`[${t.map(Fa).join(", ")}]`:`${t}`}const bc=aa(vc,t=>{const{scadPath:e,sources:n,isPreview:s,mountArchives:r,vars:a,features:o,extraArgs:i,renderFormat:u,streamsCallback:p}=t,h=[];if(s&&h.push("$preview=true;"),!e.endsWith(".scad"))throw new Error("First source must be a .scad file, got "+n[0].path+" instead");const d=n.filter(w=>w.path===e)[0];if(!d)throw new Error("Active path not found in sources!");if(d.content==null)throw new Error("Source content is null!");const E=[...h,d.content].join(`
`),_=u=="glb"||u=="3mf"?"off":u,j=`${e.replace(/\.scad$/,"").split("/").pop()}.${_}`,C=[e,"-o",j,"--backend=manifold","--export-format="+(_=="stl"?"binstl":_),...Object.entries(a??{}).flatMap(([w,v])=>[`-D${w}=${Fa(v)}`]),...(o??[]).map(w=>`--enable=${w}`),...i??[]],f=_a({taskName:s?"preview":"render",mountArchives:r,files:n.map(w=>w.path===e?{path:w.path,content:E}:w),args:C,outputPaths:[j]},p);return ss((w,v)=>((async()=>{try{const S=await f,{logText:x,markers:b}=ja(S.mergedOutputs,{shiftSourceLines:{sourcePath:d.path,skipLines:h.length}});S.error&&v(S.error);const[c]=S.outputs??[];if(!c){v(new Error("No output from runner!"));return}const[m,y]=c,g=m.split("/"),R=g[g.length-1],F=m.endsWith(".svg")?"image/svg+xml":"application/octet-stream",L=new Blob([y]),U=new File([L],R,{type:F});w({outFile:U,logText:x,markers:b,elapsedMillis:S.elapsedMillis})}catch(S){console.error(S),v(S)}})(),()=>f.kill()))});class ka{constructor(){this._listeners={}}addEventListener(e,n){const s=this._listeners;return s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n),this}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}return this}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){const r=s.slice(0);for(let a=0,o=r.length;a<o;a++)r[a].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class Vt{constructor(e,n,s,r={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=n,this._child=s,this._attributes=r,!n.isOnGraph(s))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class xc extends ka{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const n=new Set;for(const s of this.listParentEdges(e))n.add(s.getParent());return Array.from(n)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const n=new Set;for(const s of this.listChildEdges(e))n.add(s.getChild());return Array.from(n)}disconnectParents(e,n){for(const s of this.listParentEdges(e))(!n||n(s.getParent()))&&s.dispose();return this}_createEdge(e,n,s,r){const a=new Vt(e,n,s,r);this._edges.add(a);const o=a.getParent();this._parentEdges.has(o)||this._parentEdges.set(o,new Set),this._parentEdges.get(o).add(a);const i=a.getChild();return this._childEdges.has(i)||this._childEdges.set(i,new Set),this._childEdges.get(i).add(a),a}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function dn(){return dn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},dn.apply(this,arguments)}class vt{constructor(e){if(this.list=[],e)for(const n of e)this.list.push(n)}add(e){this.list.push(e)}remove(e){const n=this.list.indexOf(e);n>=0&&this.list.splice(n,1)}removeChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);for(const s of n)this.remove(s);return n}listRefsByChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);return n}values(){return this.list}}class be{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const n of e)this.add(n)}add(e){const n=e.getChild();this.removeChild(n),this.set.add(e),this.map.set(n,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const n=this.map.get(e)||null;return n&&this.remove(n),n}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class ot{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,n){this.map[e]=n}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const de=Symbol("attributes"),Pt=Symbol("immutableKeys");class ls extends ka{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[de]=void 0,this[Pt]=void 0,this.graph=e,this[Pt]=new Set,this[de]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const s in e){const r=e[s];if(r instanceof ls){const a=this.graph._createEdge(s,this,r);this[Pt].add(s),n[s]=a}else n[s]=r}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const s in this[de]){const r=this[de][s];if(r instanceof Vt){const a=r;a.getChild()===e&&this.setRef(s,n,a.getAttributes())}else if(r instanceof vt)for(const a of r.listRefsByChild(e)){const o=a.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}else if(r instanceof be){const a=r.getRefByChild(e);if(a){const o=a.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}}else if(r instanceof ot)for(const a of r.keys()){const o=r.get(a);o.getChild()===e&&this.setRefMap(s,a,n,o.getAttributes())}}return this}get(e){return this[de][e]}set(e,n){return this[de][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[de][e];return n?n.getChild():null}setRef(e,n,s){if(this[Pt].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[de][e];if(r&&r.dispose(),!n)return this;const a=this.graph._createEdge(e,this,n,s);return this[de][e]=a,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(s=>s.getChild())}addRef(e,n,s){const r=this.graph._createEdge(e,this,n,s);return this.assertRefList(e).add(r),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const s=this.assertRefList(e);if(s instanceof vt)for(const r of s.listRefsByChild(n))r.dispose();else{const r=s.getRefByChild(n);r&&r.dispose()}return this}assertRefList(e){const n=this[de][e];if(n instanceof vt||n instanceof be)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const r=this.assertRefMap(e).get(n);return r?r.getChild():null}setRefMap(e,n,s,r){const a=this.assertRefMap(e),o=a.get(n);if(o&&o.dispose(),!s)return this;r=Object.assign(r||{},{key:n});const i=this.graph._createEdge(e,this,s,dn({},r,{key:n}));return a.set(n,i),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[de][e];if(n instanceof ot)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent(dn({},e,{target:this})),this.graph.dispatchEvent(dn({},e,{target:this,type:`node:${e.type}`})),this}_destroyRef(e){const n=e.getName();if(this[de][n]===e)this[de][n]=null,this[Pt].has(n)&&e.getChild().dispose();else if(this[de][n]instanceof vt)this[de][n].remove(e);else if(this[de][n]instanceof be)this[de][n].remove(e);else if(this[de][n]instanceof ot){const s=this[de][n];for(const r of s.keys())s.get(r)===e&&s.delete(r)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}}const La="v4.2.1",or="@glb.bin";var Y;(function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"})(Y||(Y={}));var lr;(function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"})(lr||(lr={}));var Je;(function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"})(Je||(Je={}));var Yr;(function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"})(Yr||(Yr={}));var pt;(function(t){t.GLTF="GLTF",t.GLB="GLB"})(pt||(pt={}));const gr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class fe{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}else{const n=e.split(",")[1],s=e.indexOf("base64")>=0;return Buffer.from(n,s?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const a of e)n+=a.byteLength;const s=new Uint8Array(n);let r=0;for(const a of e)s.set(a,r),r+=a.byteLength;return s}static pad(e,n=0){const s=this.padNumber(e.byteLength);if(s===e.byteLength)return e;const r=new Uint8Array(s);if(r.set(e),n!==0)for(let a=e.byteLength;a<s;a++)r[a]=n;return r}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let s=e.byteLength;for(;s--;)if(e[s]!==n[s])return!1;return!0}static toView(e,n=0,s=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,s))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class wc{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),s,r;for(;n.byteLength;){if(s=n.getUint16(0,!1),Ec(n,s),r=n.getUint8(s+1),r===192||r===193||r===194)return[n.getUint16(s+7,!1),n.getUint16(s+5,!1)];n=new DataView(e.buffer,n.byteOffset+s+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class yr{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return fe.decodeText(e.slice(12,16))===yr.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}yr.PNG_FRIED_CHUNK_NAME="CgBI";class Ft{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let s=0;const r=4,a=this.getSize(e,n);if(!a)return null;for(;a[0]>1||a[1]>1;)s+=a[0]*a[1]*r,a[0]=Math.max(Math.floor(a[0]/2),1),a[1]=Math.max(Math.floor(a[1]/2),1);return s+=1*r,s}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}Ft.impls={"image/jpeg":new wc,"image/png":new yr};function Ec(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(t.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return t}class Lt{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return Ft.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var qr=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Sc(){var t=new qr(3);return qr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function _r(t){var e=t[0],n=t[1],s=t[2];return Math.hypot(e,n,s)}(function(){var t=Sc();return function(e,n,s,r,a,o){var i,u;for(n||(n=3),s||(s=0),r?u=Math.min(r*n+s,e.length):u=e.length,i=s;i<u;i+=n)t[0]=e[i],t[1]=e[i+1],t[2]=e[i+2],a(t,t,o),e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2];return e}})();const $s="https://null.example";class nt{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return Lt.basename(new URL(e,$s).pathname)}static extension(e){return Lt.extension(new URL(e,$s).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const s=e.split("/"),r=n.split("/");s.pop();for(let a=0;a<r.length;a++)r[a]!=="."&&(r[a]===".."?s.pop():s.push(r[a]));return s.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}nt.DEFAULT_INIT={};nt.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function Ds(t){return Object.prototype.toString.call(t)==="[object Object]"}function Nt(t){if(Ds(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Ds(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var Jr,Xr;(function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"})(Xr||(Xr={}));class Qe{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=Qe.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=Qe.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=Qe.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=Qe.Verbosity.ERROR&&console.error(e)}}Jr=Qe;Qe.Verbosity=Xr;Qe.DEFAULT_INSTANCE=new Jr(Jr.Verbosity.INFO);function Tc(t){var e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],i=t[6],u=t[7],p=t[8],h=t[9],d=t[10],E=t[11],_=t[12],A=t[13],j=t[14],C=t[15],f=e*o-n*a,w=e*i-s*a,v=e*u-r*a,S=n*i-s*o,x=n*u-r*o,b=s*u-r*i,c=p*A-h*_,m=p*j-d*_,y=p*C-E*_,g=h*j-d*A,R=h*C-E*A,F=d*C-E*j;return f*F-w*R+v*g+S*y-x*m+b*c}function Cc(t,e,n){var s=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],p=e[6],h=e[7],d=e[8],E=e[9],_=e[10],A=e[11],j=e[12],C=e[13],f=e[14],w=e[15],v=n[0],S=n[1],x=n[2],b=n[3];return t[0]=v*s+S*i+x*d+b*j,t[1]=v*r+S*u+x*E+b*C,t[2]=v*a+S*p+x*_+b*f,t[3]=v*o+S*h+x*A+b*w,v=n[4],S=n[5],x=n[6],b=n[7],t[4]=v*s+S*i+x*d+b*j,t[5]=v*r+S*u+x*E+b*C,t[6]=v*a+S*p+x*_+b*f,t[7]=v*o+S*h+x*A+b*w,v=n[8],S=n[9],x=n[10],b=n[11],t[8]=v*s+S*i+x*d+b*j,t[9]=v*r+S*u+x*E+b*C,t[10]=v*a+S*p+x*_+b*f,t[11]=v*o+S*h+x*A+b*w,v=n[12],S=n[13],x=n[14],b=n[15],t[12]=v*s+S*i+x*d+b*j,t[13]=v*r+S*u+x*E+b*C,t[14]=v*a+S*p+x*_+b*f,t[15]=v*o+S*h+x*A+b*w,t}function Ic(t,e){var n=e[0],s=e[1],r=e[2],a=e[4],o=e[5],i=e[6],u=e[8],p=e[9],h=e[10];return t[0]=Math.hypot(n,s,r),t[1]=Math.hypot(a,o,i),t[2]=Math.hypot(u,p,h),t}function Rc(t,e){var n=new qr(3);Ic(n,e);var s=1/n[0],r=1/n[1],a=1/n[2],o=e[0]*s,i=e[1]*r,u=e[2]*a,p=e[4]*s,h=e[5]*r,d=e[6]*a,E=e[8]*s,_=e[9]*r,A=e[10]*a,j=o+h+A,C=0;return j>0?(C=Math.sqrt(j+1)*2,t[3]=.25*C,t[0]=(d-_)/C,t[1]=(E-u)/C,t[2]=(i-p)/C):o>h&&o>A?(C=Math.sqrt(1+o-h-A)*2,t[3]=(d-_)/C,t[0]=.25*C,t[1]=(i+p)/C,t[2]=(E+u)/C):h>A?(C=Math.sqrt(1+h-o-A)*2,t[3]=(E-u)/C,t[0]=(i+p)/C,t[1]=.25*C,t[2]=(d+_)/C):(C=Math.sqrt(1+A-o-h)*2,t[3]=(i-p)/C,t[0]=(E+u)/C,t[1]=(d+_)/C,t[2]=.25*C),t}class Te{static identity(e){return e}static eq(e,n,s=1e-5){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-n[r])>s)return!1;return!0}static clamp(e,n,s){return e<n?n:e>s?s:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(Te.clamp(e,0,1)*65535);case 5121:return Math.round(Te.clamp(e,0,1)*255);case 5122:return Math.round(Te.clamp(e,-1,1)*32767);case 5120:return Math.round(Te.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,s,r){let a=_r([e[0],e[1],e[2]]);const o=_r([e[4],e[5],e[6]]),i=_r([e[8],e[9],e[10]]);Tc(e)<0&&(a=-a),n[0]=e[12],n[1]=e[13],n[2]=e[14];const p=e.slice(),h=1/a,d=1/o,E=1/i;p[0]*=h,p[1]*=h,p[2]*=h,p[4]*=d,p[5]*=d,p[6]*=d,p[8]*=E,p[9]*=E,p[10]*=E,Rc(s,p),r[0]=a,r[1]=o,r[2]=i}static compose(e,n,s,r){const a=r,o=n[0],i=n[1],u=n[2],p=n[3],h=o+o,d=i+i,E=u+u,_=o*h,A=o*d,j=o*E,C=i*d,f=i*E,w=u*E,v=p*h,S=p*d,x=p*E,b=s[0],c=s[1],m=s[2];return a[0]=(1-(C+w))*b,a[1]=(A+x)*b,a[2]=(j-S)*b,a[3]=0,a[4]=(A-x)*c,a[5]=(1-(_+w))*c,a[6]=(f+v)*c,a[7]=0,a[8]=(j+S)*m,a[9]=(f-v)*m,a[10]=(1-(_+C))*m,a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}}function Oc(t,e){if(!!t!=!!e)return!1;const n=t.getChild(),s=e.getChild();return n===s||n.equals(s)}function Mc(t,e){if(!!t!=!!e)return!1;const n=t.values(),s=e.values();if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const a=n[r],o=s[r];if(a.getChild()!==o.getChild()&&!a.getChild().equals(o.getChild()))return!1}return!0}function Pc(t,e){if(!!t!=!!e)return!1;const n=t.keys(),s=e.keys();if(n.length!==s.length)return!1;for(const r of n){const a=t.get(r),o=e.get(r);if(!!a!=!!o)return!1;const i=a.getChild(),u=o.getChild();if(i!==u&&!i.equals(u))return!1}return!0}function $a(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Da(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!Nt(t)||!Nt(e))return t===e;const n=t,s=e;let r=0,a=0,o;for(o in n)r++;for(o in s)a++;if(r!==a)return!1;for(o in n){const i=n[o],u=s[o];if(cr(i)&&cr(u)){if(!$a(i,u))return!1}else if(Nt(i)&&Nt(u)){if(!Da(i,u))return!1}else if(i!==u)return!1}return!0}function cr(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Bs="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",Ac=999,Nc=6,Us=new Set,_c=function(){let e="";for(let n=0;n<Nc;n++)e+=Bs.charAt(Math.floor(Math.random()*Bs.length));return e},jc=function(){for(let e=0;e<Ac;e++){const n=_c();if(!Us.has(n))return Us.add(n),n}return""},xt=t=>t,Fc=new Set;class cs extends ls{constructor(e,n=""){super(e),this[de].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,xt)}copy(e,n=xt){for(const s in this[de]){const r=this[de][s];if(r instanceof Vt)this[Pt].has(s)||r.dispose();else if(r instanceof vt||r instanceof be)for(const a of r.values())a.dispose();else if(r instanceof ot)for(const a of r.values())a.dispose()}for(const s in e[de]){const r=this[de][s],a=e[de][s];if(a instanceof Vt)this[Pt].has(s)?r.getChild().copy(n(a.getChild()),n):this.setRef(s,n(a.getChild()),a.getAttributes());else if(a instanceof be||a instanceof vt)for(const o of a.values())this.addRef(s,n(o.getChild()),o.getAttributes());else if(a instanceof ot)for(const o of a.keys()){const i=a.get(o);this.setRefMap(s,o,n(i.getChild()),i.getAttributes())}else Nt(a)?this[de][s]=JSON.parse(JSON.stringify(a)):Array.isArray(a)||a instanceof ArrayBuffer||ArrayBuffer.isView(a)?this[de][s]=a.slice():this[de][s]=a}return this}equals(e,n=Fc){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const s in this[de]){if(n.has(s))continue;const r=this[de][s],a=e[de][s];if(r instanceof Vt||a instanceof Vt){if(!Oc(r,a))return!1}else if(r instanceof be||a instanceof be||r instanceof vt||a instanceof vt){if(!Mc(r,a))return!1}else if(r instanceof ot||a instanceof ot){if(!Pc(r,a))return!1}else if(Nt(r)||Nt(a)){if(!Da(r,a))return!1}else if(cr(r)||cr(a)){if(!$a(r,a))return!1}else if(r!==a)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class Ve extends cs{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new ot})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class te extends Ve{init(){this.propertyType=Y.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:te.Type.SCALAR,componentType:te.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case te.Type.SCALAR:return 1;case te.Type.VEC2:return 2;case te.Type.VEC3:return 3;case te.Type.VEC4:return 4;case te.Type.MAT2:return 4;case te.Type.MAT3:return 9;case te.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case te.ComponentType.BYTE:return 1;case te.ComponentType.UNSIGNED_BYTE:return 1;case te.ComponentType.SHORT:return 2;case te.ComponentType.UNSIGNED_SHORT:return 2;case te.ComponentType.UNSIGNED_INT:return 4;case te.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMin(e),n)for(let a=0;a<s;a++)e[a]=Te.decodeNormalizedInt(e[a],r);return e}getMin(e){const n=this.getArray(),s=this.getCount(),r=this.getElementSize();for(let a=0;a<r;a++)e[a]=1/0;for(let a=0;a<s*r;a+=r)for(let o=0;o<r;o++){const i=n[a+o];Number.isFinite(i)&&(e[o]=Math.min(e[o],i))}return e}getMaxNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMax(e),n)for(let a=0;a<s;a++)e[a]=Te.decodeNormalizedInt(e[a],r);return e}getMax(e){const n=this.get("array"),s=this.getCount(),r=this.getElementSize();for(let a=0;a<r;a++)e[a]=-1/0;for(let a=0;a<s*r;a+=r)for(let o=0;o<r;o++){const i=n[a+o];Number.isFinite(i)&&(e[o]=Math.max(e[o],i))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return te.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),s=this.getComponentType(),r=this.getArray();return this.getNormalized()?Te.decodeNormalizedInt(r[e*n],s):r[e*n]}setScalar(e,n){const s=this.getElementSize(),r=this.getComponentType(),a=this.getArray();return this.getNormalized()?a[e*s]=Te.encodeNormalizedInt(n,r):a[e*s]=n,this}getElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),a=this.getComponentType(),o=this.getArray();for(let i=0;i<r;i++)s?n[i]=Te.decodeNormalizedInt(o[e*r+i],a):n[i]=o[e*r+i];return n}setElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),a=this.getComponentType(),o=this.getArray();for(let i=0;i<r;i++)s?o[e*r+i]=Te.encodeNormalizedInt(n[i],a):o[e*r+i]=n[i];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?kc(e):te.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}te.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};te.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function kc(t){switch(t.constructor){case Float32Array:return te.ComponentType.FLOAT;case Uint32Array:return te.ComponentType.UNSIGNED_INT;case Uint16Array:return te.ComponentType.UNSIGNED_SHORT;case Uint8Array:return te.ComponentType.UNSIGNED_BYTE;case Int16Array:return te.ComponentType.SHORT;case Int8Array:return te.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class Ba extends Ve{init(){this.propertyType=Y.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new be,samplers:new be})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class Ua extends Ve{init(){this.propertyType=Y.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}Ua.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class In extends Ve{init(){this.propertyType=Y.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:In.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:Je.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:Je.OTHER})}}In.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class Va extends Ve{init(){this.propertyType=Y.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class Dt extends Ve{init(){this.propertyType=Y.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:Dt.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}Dt.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class Lc extends cs{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}Lc.EXTENSION_NAME=void 0;class rt extends Ve{init(){this.propertyType=Y.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:rt.WrapMode.REPEAT,wrapT:rt.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}rt.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};rt.MagFilter={NEAREST:9728,LINEAR:9729};rt.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Wn,G:Gn,B:Yn,A:$c}=Yr;class $t extends Ve{init(){this.propertyType=Y.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:$t.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new rt(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new rt(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new rt(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new rt(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new rt(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Wn|Gn|Yn|$c,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Wn|Gn|Yn,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Wn|Gn|Yn})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Wn})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Gn|Yn})}}$t.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class za extends Ve{init(){this.propertyType=Y.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new be})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}class Ha extends Ve{init(){this.propertyType=Y.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new be})}copy(e,n=xt){if(n===xt)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return Te.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),s=this.get("rotation").slice(),r=this.get("scale").slice();return Te.decompose(e,n,s,r),this.set("translation",n).set("rotation",s).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return Te.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return Te.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return Te.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r!=null;r=r.getParentNode())e.push(r);let n;const s=e.pop().getMatrix();for(;n=e.pop();)Cc(s,s,n.getMatrix());return s}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const s of e.listParents())s.propertyType===Y.SCENE&&s.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===Y.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}}class Rn extends Ve{init(){this.propertyType=Y.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:Rn.Mode.TRIANGLES,material:null,indices:null,attributes:new ot,targets:new be})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:Je.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Je.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}Rn.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Dc extends cs{init(){this.propertyType=Y.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new ot})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Je.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ue.apply(null,arguments)}class Ka extends Ve{init(){this.propertyType=Y.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new be})}copy(e,n=xt){if(n===xt)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class Wa extends Ve{init(){this.propertyType=Y.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new be})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:Je.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class Ga extends Ve{init(){this.propertyType=Y.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||Ft.extensionToMimeType(Lt.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=Ft.extensionToMimeType(Lt.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",fe.assertView(e))}getSize(){const e=this.get("image");return e?Ft.getSize(e,this.getMimeType()):null}}class Bc extends Ve{init(){this.propertyType=Y.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${La}`,version:"2.0"},defaultScene:null,accessors:new be,animations:new be,buffers:new be,cameras:new be,materials:new be,meshes:new be,nodes:new be,scenes:new be,skins:new be,textures:new be})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=xt){if(n===xt)throw new Error("Root cannot be copied.");this.set("asset",Ue({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ue({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const s of e.listRefMapKeys("extensions")){const r=e.getExtension(s);this.setExtension(s,n(r))}return this}_addChildOfRoot(e){return e instanceof Ka?this.addRef("scenes",e):e instanceof Ha?this.addRef("nodes",e):e instanceof Dt?this.addRef("cameras",e):e instanceof Wa?this.addRef("skins",e):e instanceof za?this.addRef("meshes",e):e instanceof $t?this.addRef("materials",e):e instanceof Ga?this.addRef("textures",e):e instanceof Ba?this.addRef("animations",e):e instanceof te?this.addRef("accessors",e):e instanceof Va&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class qt{static fromGraph(e){return qt._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new xc,this._root=new Bc(this._graph),this._logger=Qe.DEFAULT_INSTANCE,qt._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(s=>s.name);for(const s of e)await s(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===n)||new e(this)}createScene(e=""){return new Ka(this._graph,e)}createNode(e=""){return new Ha(this._graph,e)}createCamera(e=""){return new Dt(this._graph,e)}createSkin(e=""){return new Wa(this._graph,e)}createMesh(e=""){return new za(this._graph,e)}createPrimitive(){return new Rn(this._graph)}createPrimitiveTarget(e=""){return new Dc(this._graph,e)}createMaterial(e=""){return new $t(this._graph,e)}createTexture(e=""){return new Ga(this._graph,e)}createAnimation(e=""){return new Ba(this._graph,e)}createAnimationChannel(e=""){return new Ua(this._graph,e)}createAnimationSampler(e=""){return new In(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new te(this._graph,e).setBuffer(n)}createBuffer(e=""){return new Va(this._graph,e)}}qt._GRAPH_DOCUMENTS=new WeakMap;class Uc{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const s=this.jsonDoc.json.textures[n.index];if(s.sampler===void 0)return;const r=this.jsonDoc.json.samplers[s.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}}const Vs={logger:Qe.DEFAULT_INSTANCE,extensions:[],dependencies:{}},Vc=new Set([Y.BUFFER,Y.TEXTURE,Y.MATERIAL,Y.MESH,Y.PRIMITIVE,Y.NODE,Y.SCENE]);class zc{static read(e,n=Vs){const s=Ue({},Vs,n),{json:r}=e,a=new qt().setLogger(s.logger);this.validate(e,s);const o=new Uc(e),i=r.asset,u=a.getRoot().getAsset();i.copyright&&(u.copyright=i.copyright),i.extras&&(u.extras=i.extras),r.extras!==void 0&&a.getRoot().setExtras(Ue({},r.extras));const p=r.extensionsUsed||[],h=r.extensionsRequired||[];s.extensions.sort((c,m)=>c.EXTENSION_NAME>m.EXTENSION_NAME?1:-1);for(const c of s.extensions)if(p.includes(c.EXTENSION_NAME)){const m=a.createExtension(c).setRequired(h.includes(c.EXTENSION_NAME)),y=m.prereadTypes.filter(g=>!Vc.has(g));y.length&&s.logger.warn(`Preread hooks for some types (${y.join()}), requested by extension ${m.extensionName}, are unsupported. Please file an issue or a PR.`);for(const g of m.readDependencies)m.install(g,s.dependencies[g])}const d=r.buffers||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.BUFFER)).forEach(c=>c.preread(o,Y.BUFFER)),o.buffers=d.map(c=>{const m=a.createBuffer(c.name);return c.extras&&m.setExtras(c.extras),c.uri&&c.uri.indexOf("__")!==0&&m.setURI(c.uri),m});const E=r.bufferViews||[];o.bufferViewBuffers=E.map((c,m)=>{if(!o.bufferViews[m]){const y=e.json.buffers[c.buffer],g=y.uri?e.resources[y.uri]:e.resources[or],R=c.byteOffset||0;o.bufferViews[m]=fe.toView(g,R,c.byteLength)}return o.buffers[c.buffer]});const _=r.accessors||[];o.accessors=_.map(c=>{const m=o.bufferViewBuffers[c.bufferView],y=a.createAccessor(c.name,m).setType(c.type);return c.extras&&y.setExtras(c.extras),c.normalized!==void 0&&y.setNormalized(c.normalized),c.bufferView===void 0||y.setArray(nr(c,o)),y});const A=r.images||[],j=r.textures||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.TEXTURE)).forEach(c=>c.preread(o,Y.TEXTURE)),o.textures=A.map(c=>{const m=a.createTexture(c.name);if(c.extras&&m.setExtras(c.extras),c.bufferView!==void 0){const y=r.bufferViews[c.bufferView],g=e.json.buffers[y.buffer],R=g.uri?e.resources[g.uri]:e.resources[or],F=y.byteOffset||0,L=y.byteLength,U=R.slice(F,F+L);m.setImage(U)}else c.uri!==void 0&&(m.setImage(e.resources[c.uri]),c.uri.indexOf("__")!==0&&m.setURI(c.uri));if(c.mimeType!==void 0)m.setMimeType(c.mimeType);else if(c.uri){const y=Lt.extension(c.uri);m.setMimeType(Ft.extensionToMimeType(y))}return m}),a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.MATERIAL)).forEach(c=>c.preread(o,Y.MATERIAL));const C=r.materials||[];o.materials=C.map(c=>{const m=a.createMaterial(c.name);c.extras&&m.setExtras(c.extras),c.alphaMode!==void 0&&m.setAlphaMode(c.alphaMode),c.alphaCutoff!==void 0&&m.setAlphaCutoff(c.alphaCutoff),c.doubleSided!==void 0&&m.setDoubleSided(c.doubleSided);const y=c.pbrMetallicRoughness||{};if(y.baseColorFactor!==void 0&&m.setBaseColorFactor(y.baseColorFactor),c.emissiveFactor!==void 0&&m.setEmissiveFactor(c.emissiveFactor),y.metallicFactor!==void 0&&m.setMetallicFactor(y.metallicFactor),y.roughnessFactor!==void 0&&m.setRoughnessFactor(y.roughnessFactor),y.baseColorTexture!==void 0){const g=y.baseColorTexture,R=o.textures[j[g.index].source];m.setBaseColorTexture(R),o.setTextureInfo(m.getBaseColorTextureInfo(),g)}if(c.emissiveTexture!==void 0){const g=c.emissiveTexture,R=o.textures[j[g.index].source];m.setEmissiveTexture(R),o.setTextureInfo(m.getEmissiveTextureInfo(),g)}if(c.normalTexture!==void 0){const g=c.normalTexture,R=o.textures[j[g.index].source];m.setNormalTexture(R),o.setTextureInfo(m.getNormalTextureInfo(),g),c.normalTexture.scale!==void 0&&m.setNormalScale(c.normalTexture.scale)}if(c.occlusionTexture!==void 0){const g=c.occlusionTexture,R=o.textures[j[g.index].source];m.setOcclusionTexture(R),o.setTextureInfo(m.getOcclusionTextureInfo(),g),c.occlusionTexture.strength!==void 0&&m.setOcclusionStrength(c.occlusionTexture.strength)}if(y.metallicRoughnessTexture!==void 0){const g=y.metallicRoughnessTexture,R=o.textures[j[g.index].source];m.setMetallicRoughnessTexture(R),o.setTextureInfo(m.getMetallicRoughnessTextureInfo(),g)}return m}),a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.MESH)).forEach(c=>c.preread(o,Y.MESH));const f=r.meshes||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.PRIMITIVE)).forEach(c=>c.preread(o,Y.PRIMITIVE)),o.meshes=f.map(c=>{const m=a.createMesh(c.name);return c.extras&&m.setExtras(c.extras),c.weights!==void 0&&m.setWeights(c.weights),(c.primitives||[]).forEach(g=>{const R=a.createPrimitive();g.extras&&R.setExtras(g.extras),g.material!==void 0&&R.setMaterial(o.materials[g.material]),g.mode!==void 0&&R.setMode(g.mode);for(const[U,N]of Object.entries(g.attributes||{}))R.setAttribute(U,o.accessors[N]);g.indices!==void 0&&R.setIndices(o.accessors[g.indices]);const F=c.extras&&c.extras.targetNames||[];(g.targets||[]).forEach((U,N)=>{const V=F[N]||N.toString(),I=a.createPrimitiveTarget(V);for(const[$,q]of Object.entries(U))I.setAttribute($,o.accessors[q]);R.addTarget(I)}),m.addPrimitive(R)}),m});const w=r.cameras||[];o.cameras=w.map(c=>{const m=a.createCamera(c.name).setType(c.type);if(c.extras&&m.setExtras(c.extras),c.type===Dt.Type.PERSPECTIVE){const y=c.perspective;m.setYFov(y.yfov),m.setZNear(y.znear),y.zfar!==void 0&&m.setZFar(y.zfar),y.aspectRatio!==void 0&&m.setAspectRatio(y.aspectRatio)}else{const y=c.orthographic;m.setZNear(y.znear).setZFar(y.zfar).setXMag(y.xmag).setYMag(y.ymag)}return m});const v=r.nodes||[];a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.NODE)).forEach(c=>c.preread(o,Y.NODE)),o.nodes=v.map(c=>{const m=a.createNode(c.name);if(c.extras&&m.setExtras(c.extras),c.translation!==void 0&&m.setTranslation(c.translation),c.rotation!==void 0&&m.setRotation(c.rotation),c.scale!==void 0&&m.setScale(c.scale),c.matrix!==void 0){const y=[0,0,0],g=[0,0,0,1],R=[1,1,1];Te.decompose(c.matrix,y,g,R),m.setTranslation(y),m.setRotation(g),m.setScale(R)}return c.weights!==void 0&&m.setWeights(c.weights),m});const S=r.skins||[];o.skins=S.map(c=>{const m=a.createSkin(c.name);c.extras&&m.setExtras(c.extras),c.inverseBindMatrices!==void 0&&m.setInverseBindMatrices(o.accessors[c.inverseBindMatrices]),c.skeleton!==void 0&&m.setSkeleton(o.nodes[c.skeleton]);for(const y of c.joints)m.addJoint(o.nodes[y]);return m}),v.map((c,m)=>{const y=o.nodes[m];(c.children||[]).forEach(R=>y.addChild(o.nodes[R])),c.mesh!==void 0&&y.setMesh(o.meshes[c.mesh]),c.camera!==void 0&&y.setCamera(o.cameras[c.camera]),c.skin!==void 0&&y.setSkin(o.skins[c.skin])});const x=r.animations||[];o.animations=x.map(c=>{const m=a.createAnimation(c.name);c.extras&&m.setExtras(c.extras);const g=(c.samplers||[]).map(F=>{const L=a.createAnimationSampler().setInput(o.accessors[F.input]).setOutput(o.accessors[F.output]).setInterpolation(F.interpolation||In.Interpolation.LINEAR);return F.extras&&L.setExtras(F.extras),m.addSampler(L),L});return(c.channels||[]).forEach(F=>{const L=a.createAnimationChannel().setSampler(g[F.sampler]).setTargetPath(F.target.path);F.target.node!==void 0&&L.setTargetNode(o.nodes[F.target.node]),F.extras&&L.setExtras(F.extras),m.addChannel(L)}),m});const b=r.scenes||[];return a.getRoot().listExtensionsUsed().filter(c=>c.prereadTypes.includes(Y.SCENE)).forEach(c=>c.preread(o,Y.SCENE)),o.scenes=b.map(c=>{const m=a.createScene(c.name);return c.extras&&m.setExtras(c.extras),(c.nodes||[]).map(g=>o.nodes[g]).forEach(g=>m.addChild(g)),m}),r.scene!==void 0&&a.getRoot().setDefaultScene(o.scenes[r.scene]),a.getRoot().listExtensionsUsed().forEach(c=>c.read(o)),_.forEach((c,m)=>{const y=o.accessors[m],g=!!c.sparse,R=!c.bufferView&&!y.getArray();(g||R)&&y.setSparse(!0).setArray(Kc(c,o))}),a}static validate(e,n){const s=e.json;if(s.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${s.asset.version}".`);if(s.extensionsRequired){for(const r of s.extensionsRequired)if(!n.extensions.find(a=>a.EXTENSION_NAME===r))throw new Error(`Missing required extension, "${r}".`)}if(s.extensionsUsed)for(const r of s.extensionsUsed)n.extensions.find(a=>a.EXTENSION_NAME===r)||n.logger.warn(`Missing optional extension, "${r}".`)}}function Hc(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],a=gr[t.componentType],o=te.getElementSize(t.type),i=a.BYTES_PER_ELEMENT,u=t.byteOffset||0,p=new a(t.count*o),h=new DataView(s.buffer,s.byteOffset,s.byteLength),d=r.byteStride;for(let E=0;E<t.count;E++)for(let _=0;_<o;_++){const A=u+E*d+_*i;let j;switch(t.componentType){case te.ComponentType.FLOAT:j=h.getFloat32(A,!0);break;case te.ComponentType.UNSIGNED_INT:j=h.getUint32(A,!0);break;case te.ComponentType.UNSIGNED_SHORT:j=h.getUint16(A,!0);break;case te.ComponentType.UNSIGNED_BYTE:j=h.getUint8(A);break;case te.ComponentType.SHORT:j=h.getInt16(A,!0);break;case te.ComponentType.BYTE:j=h.getInt8(A);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}p[E*o+_]=j}return p}function nr(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],a=gr[t.componentType],o=te.getElementSize(t.type),i=a.BYTES_PER_ELEMENT,u=o*i;if(r.byteStride!==void 0&&r.byteStride!==u)return Hc(t,e);const p=s.byteOffset+(t.byteOffset||0),h=t.count*o*i;return new a(s.buffer.slice(p,p+h))}function Kc(t,e){const n=gr[t.componentType],s=te.getElementSize(t.type);let r;t.bufferView!==void 0?r=nr(t,e):r=new n(t.count*s);const a=t.sparse;if(!a)return r;const o=a.count,i=Ue({},t,a.indices,{count:o,type:"SCALAR"}),u=Ue({},t,a.values,{count:o}),p=nr(i,e),h=nr(u,e);for(let d=0;d<i.count;d++)for(let E=0;E<s;E++)r[p[d]*s+E]=h[d*s+E];return r}var xn;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(xn||(xn={}));class kt{constructor(e,n,s){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=s;const r=e.getRoot(),a=r.listBuffers().length,o=r.listTextures().length;this.bufferURIGenerator=new zs(a>1,()=>s.basename||"buffer"),this.imageURIGenerator=new zs(o>1,i=>Wc(e,i)||s.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const s={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},r=JSON.stringify(s);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(s));const a={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},o=JSON.stringify(a);this.textureDefIndexMap.has(o)||(this.textureDefIndexMap.set(o,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(a));const i={index:this.textureDefIndexMap.get(o)};return n.getTexCoord()!==0&&(i.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(i.extras=n.getExtras()),this.textureInfoDefMap.set(n,i),i}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(r=>r.getName()==="attributes"&&r.getAttributes().key==="POSITION"||r.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,s){if(this.options.format===pt.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const r=Ft.mimeTypeToExtension(s.getMimeType());e.uri=this.imageURIGenerator.createURI(s,r),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,s){const r=this.jsonDoc.resources;if(!(e in r)){r[e]=n;return}if(n===r[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const a=`Resource URI "${e}" already assigned to different data.`;if(!s){this.logger.warn(a);return}throw new Error(a)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return Je.SPARSE;for(const s of this._doc.getGraph().listParentEdges(e)){const{usage:r}=s.getAttributes();if(r)return r;s.getParent().propertyType!==Y.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${s.getName()}".`)}return Je.OTHER}addAccessorToUsageGroup(e,n){const s=this._accessorUsageMap.get(e);if(s&&s!==n)throw new Error(`Accessor with usage "${s}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}kt.BufferViewTarget=xn;kt.BufferViewUsage=Je;kt.USAGE_TO_TARGET={[Je.ARRAY_BUFFER]:xn.ARRAY_BUFFER,[Je.ELEMENT_ARRAY_BUFFER]:xn.ELEMENT_ARRAY_BUFFER};class zs{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const s=this.basename(e);return this.counter[s]=this.counter[s]||1,`${s}_${this.counter[s]++}.${n}`}else return`${this.basename(e)}.${n}`}}function Wc(t,e){const n=t.getGraph().listParentEdges(e).find(s=>s.getParent()!==t.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:qn}=kt,{UNSIGNED_INT:Gc,UNSIGNED_SHORT:Yc,UNSIGNED_BYTE:qc}=te.ComponentType,Jc=new Set([Y.ACCESSOR,Y.BUFFER,Y.MATERIAL,Y.MESH]);class Xc{static write(e,n){const s=e.getGraph(),r=e.getRoot(),a={asset:Ue({generator:`glTF-Transform ${La}`},r.getAsset()),extras:Ue({},r.getExtras())},o={json:a,resources:{}},i=new kt(e,o,n),u=n.logger||Qe.DEFAULT_INSTANCE,p=new Set(n.extensions.map(f=>f.EXTENSION_NAME)),h=e.getRoot().listExtensionsUsed().filter(f=>p.has(f.extensionName)).sort((f,w)=>f.extensionName>w.extensionName?1:-1),d=e.getRoot().listExtensionsRequired().filter(f=>p.has(f.extensionName)).sort((f,w)=>f.extensionName>w.extensionName?1:-1);h.length<e.getRoot().listExtensionsUsed().length&&u.warn("Some extensions were not registered for I/O, and will not be written.");for(const f of h){const w=f.prewriteTypes.filter(v=>!Jc.has(v));w.length&&u.warn(`Prewrite hooks for some types (${w.join()}), requested by extension ${f.extensionName}, are unsupported. Please file an issue or a PR.`);for(const v of f.writeDependencies)f.install(v,n.dependencies[v])}function E(f,w,v,S){const x=[];let b=0;for(const y of f){const g=i.createAccessorDef(y);g.bufferView=a.bufferViews.length;const R=y.getArray(),F=fe.pad(fe.toView(R));g.byteOffset=b,b+=F.byteLength,x.push(F),i.accessorIndexMap.set(y,a.accessors.length),a.accessors.push(g)}const c=fe.concat(x),m={buffer:w,byteOffset:v,byteLength:c.byteLength};return S&&(m.target=S),a.bufferViews.push(m),{buffers:x,byteLength:b}}function _(f,w,v){const S=f[0].getCount();let x=0;for(const g of f){const R=i.createAccessorDef(g);R.bufferView=a.bufferViews.length,R.byteOffset=x;const F=g.getElementSize(),L=g.getComponentSize();x+=fe.padNumber(F*L),i.accessorIndexMap.set(g,a.accessors.length),a.accessors.push(R)}const b=S*x,c=new ArrayBuffer(b),m=new DataView(c);for(let g=0;g<S;g++){let R=0;for(const F of f){const L=F.getElementSize(),U=F.getComponentSize(),N=F.getComponentType(),V=F.getArray();for(let I=0;I<L;I++){const $=g*x+R+I*U,q=V[g*L+I];switch(N){case te.ComponentType.FLOAT:m.setFloat32($,q,!0);break;case te.ComponentType.BYTE:m.setInt8($,q);break;case te.ComponentType.SHORT:m.setInt16($,q,!0);break;case te.ComponentType.UNSIGNED_BYTE:m.setUint8($,q);break;case te.ComponentType.UNSIGNED_SHORT:m.setUint16($,q,!0);break;case te.ComponentType.UNSIGNED_INT:m.setUint32($,q,!0);break;default:throw new Error("Unexpected component type: "+N)}}R+=fe.padNumber(L*U)}}const y={buffer:w,byteOffset:v,byteLength:b,byteStride:x,target:kt.BufferViewTarget.ARRAY_BUFFER};return a.bufferViews.push(y),{byteLength:b,buffers:[new Uint8Array(c)]}}function A(f,w,v){const S=[];let x=0;const b=new Map;let c=-1/0,m=!1;for(const N of f){const V=i.createAccessorDef(N);a.accessors.push(V),i.accessorIndexMap.set(N,a.accessors.length-1);const I=[],$=[],q=[],W=new Array(N.getElementSize()).fill(0);for(let xe=0,Z=N.getCount();xe<Z;xe++)if(N.getElement(xe,q),!Te.eq(q,W,0)){c=Math.max(xe,c),I.push(xe);for(let se=0;se<q.length;se++)$.push(q[se])}const ee=I.length,re={accessorDef:V,count:ee};if(b.set(N,re),ee===0)continue;ee>N.getCount()/2&&(m=!0);const Re=gr[N.getComponentType()];re.indices=I,re.values=new Re($)}if(!Number.isFinite(c))return{buffers:S,byteLength:x};m&&u.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const y=c<255?Uint8Array:c<65535?Uint16Array:Uint32Array,g=c<255?qc:c<65535?Yc:Gc,R={buffer:w,byteOffset:v+x,byteLength:0};for(const N of f){const V=b.get(N);if(V.count===0)continue;V.indicesByteOffset=R.byteLength;const I=fe.pad(fe.toView(new y(V.indices)));S.push(I),x+=I.byteLength,R.byteLength+=I.byteLength}a.bufferViews.push(R);const F=a.bufferViews.length-1,L={buffer:w,byteOffset:v+x,byteLength:0};for(const N of f){const V=b.get(N);if(V.count===0)continue;V.valuesByteOffset=L.byteLength;const I=fe.pad(fe.toView(V.values));S.push(I),x+=I.byteLength,L.byteLength+=I.byteLength}a.bufferViews.push(L);const U=a.bufferViews.length-1;for(const N of f){const V=b.get(N);V.count!==0&&(V.accessorDef.sparse={count:V.count,indices:{bufferView:F,byteOffset:V.indicesByteOffset,componentType:g},values:{bufferView:U,byteOffset:V.valuesByteOffset}})}return{buffers:S,byteLength:x}}if(a.accessors=[],a.bufferViews=[],a.samplers=[],a.textures=[],a.images=r.listTextures().map((f,w)=>{const v=i.createPropertyDef(f);f.getMimeType()&&(v.mimeType=f.getMimeType());const S=f.getImage();return S&&i.createImageData(v,S,f),i.imageIndexMap.set(f,w),v}),h.filter(f=>f.prewriteTypes.includes(Y.ACCESSOR)).forEach(f=>f.prewrite(i,Y.ACCESSOR)),r.listAccessors().forEach(f=>{const w=i.accessorUsageGroupedByParent,v=i.accessorParents;if(i.accessorIndexMap.has(f))return;const S=i.getAccessorUsage(f);if(i.addAccessorToUsageGroup(f,S),w.has(S)){const x=s.listParents(f).find(b=>b.propertyType!==Y.ROOT);v.set(f,x)}}),h.filter(f=>f.prewriteTypes.includes(Y.BUFFER)).forEach(f=>f.prewrite(i,Y.BUFFER)),(r.listAccessors().length>0||i.otherBufferViews.size>0||r.listTextures().length>0&&n.format===pt.GLB)&&r.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");a.buffers=[],r.listBuffers().forEach((f,w)=>{const v=i.createPropertyDef(f),S=i.accessorUsageGroupedByParent,x=f.listParents().filter(L=>L instanceof te),b=new Set(x.map(L=>i.accessorParents.get(L))),c=new Map(Array.from(b).map((L,U)=>[L,U])),m={};for(const L of x){var y;if(i.accessorIndexMap.has(L))continue;const U=i.getAccessorUsage(L);let N=U;if(S.has(U)){const V=i.accessorParents.get(L);N+=`:${c.get(V)}`}m[y=N]||(m[y]={usage:U,accessors:[]}),m[N].accessors.push(L)}const g=[],R=a.buffers.length;let F=0;for(const{usage:L,accessors:U}of Object.values(m))if(L===qn.ARRAY_BUFFER&&n.vertexLayout===lr.INTERLEAVED){const N=_(U,R,F);F+=N.byteLength;for(const V of N.buffers)g.push(V)}else if(L===qn.ARRAY_BUFFER)for(const N of U){const V=_([N],R,F);F+=V.byteLength;for(const I of V.buffers)g.push(I)}else if(L===qn.SPARSE){const N=A(U,R,F);F+=N.byteLength;for(const V of N.buffers)g.push(V)}else if(L===qn.ELEMENT_ARRAY_BUFFER){const N=kt.BufferViewTarget.ELEMENT_ARRAY_BUFFER,V=E(U,R,F,N);F+=V.byteLength;for(const I of V.buffers)g.push(I)}else{const N=E(U,R,F);F+=N.byteLength;for(const V of N.buffers)g.push(V)}if(i.imageBufferViews.length&&w===0){for(let L=0;L<i.imageBufferViews.length;L++)if(a.bufferViews[a.images[L].bufferView].byteOffset=F,F+=i.imageBufferViews[L].byteLength,g.push(i.imageBufferViews[L]),F%8){const U=8-F%8;F+=U,g.push(new Uint8Array(U))}}if(i.otherBufferViews.has(f))for(const L of i.otherBufferViews.get(f))a.bufferViews.push({buffer:R,byteOffset:F,byteLength:L.byteLength}),i.otherBufferViewsIndexMap.set(L,a.bufferViews.length-1),F+=L.byteLength,g.push(L);if(F){let L;n.format===pt.GLB?L=or:(L=i.bufferURIGenerator.createURI(f,"bin"),v.uri=L),v.byteLength=F,i.assignResourceURI(L,fe.concat(g),!0)}a.buffers.push(v),i.bufferIndexMap.set(f,w)}),r.listAccessors().find(f=>!f.getBuffer())&&u.warn("Skipped writing one or more Accessors: no Buffer assigned."),h.filter(f=>f.prewriteTypes.includes(Y.MATERIAL)).forEach(f=>f.prewrite(i,Y.MATERIAL)),a.materials=r.listMaterials().map((f,w)=>{const v=i.createPropertyDef(f);if(f.getAlphaMode()!==$t.AlphaMode.OPAQUE&&(v.alphaMode=f.getAlphaMode()),f.getAlphaMode()===$t.AlphaMode.MASK&&(v.alphaCutoff=f.getAlphaCutoff()),f.getDoubleSided()&&(v.doubleSided=!0),v.pbrMetallicRoughness={},Te.eq(f.getBaseColorFactor(),[1,1,1,1])||(v.pbrMetallicRoughness.baseColorFactor=f.getBaseColorFactor()),Te.eq(f.getEmissiveFactor(),[0,0,0])||(v.emissiveFactor=f.getEmissiveFactor()),f.getRoughnessFactor()!==1&&(v.pbrMetallicRoughness.roughnessFactor=f.getRoughnessFactor()),f.getMetallicFactor()!==1&&(v.pbrMetallicRoughness.metallicFactor=f.getMetallicFactor()),f.getBaseColorTexture()){const S=f.getBaseColorTexture(),x=f.getBaseColorTextureInfo();v.pbrMetallicRoughness.baseColorTexture=i.createTextureInfoDef(S,x)}if(f.getEmissiveTexture()){const S=f.getEmissiveTexture(),x=f.getEmissiveTextureInfo();v.emissiveTexture=i.createTextureInfoDef(S,x)}if(f.getNormalTexture()){const S=f.getNormalTexture(),x=f.getNormalTextureInfo(),b=i.createTextureInfoDef(S,x);f.getNormalScale()!==1&&(b.scale=f.getNormalScale()),v.normalTexture=b}if(f.getOcclusionTexture()){const S=f.getOcclusionTexture(),x=f.getOcclusionTextureInfo(),b=i.createTextureInfoDef(S,x);f.getOcclusionStrength()!==1&&(b.strength=f.getOcclusionStrength()),v.occlusionTexture=b}if(f.getMetallicRoughnessTexture()){const S=f.getMetallicRoughnessTexture(),x=f.getMetallicRoughnessTextureInfo();v.pbrMetallicRoughness.metallicRoughnessTexture=i.createTextureInfoDef(S,x)}return i.materialIndexMap.set(f,w),v}),h.filter(f=>f.prewriteTypes.includes(Y.MESH)).forEach(f=>f.prewrite(i,Y.MESH)),a.meshes=r.listMeshes().map((f,w)=>{const v=i.createPropertyDef(f);let S=null;return v.primitives=f.listPrimitives().map(x=>{const b={attributes:{}};b.mode=x.getMode();const c=x.getMaterial();c&&(b.material=i.materialIndexMap.get(c)),Object.keys(x.getExtras()).length&&(b.extras=x.getExtras());const m=x.getIndices();m&&(b.indices=i.accessorIndexMap.get(m));for(const y of x.listSemantics())b.attributes[y]=i.accessorIndexMap.get(x.getAttribute(y));for(const y of x.listTargets()){const g={};for(const R of y.listSemantics())g[R]=i.accessorIndexMap.get(y.getAttribute(R));b.targets=b.targets||[],b.targets.push(g)}return x.listTargets().length&&!S&&(S=x.listTargets().map(y=>y.getName())),b}),f.getWeights().length&&(v.weights=f.getWeights()),S&&(v.extras=v.extras||{},v.extras.targetNames=S),i.meshIndexMap.set(f,w),v}),a.cameras=r.listCameras().map((f,w)=>{const v=i.createPropertyDef(f);if(v.type=f.getType(),v.type===Dt.Type.PERSPECTIVE){v.perspective={znear:f.getZNear(),zfar:f.getZFar(),yfov:f.getYFov()};const S=f.getAspectRatio();S!==null&&(v.perspective.aspectRatio=S)}else v.orthographic={znear:f.getZNear(),zfar:f.getZFar(),xmag:f.getXMag(),ymag:f.getYMag()};return i.cameraIndexMap.set(f,w),v}),a.nodes=r.listNodes().map((f,w)=>{const v=i.createPropertyDef(f);return Te.eq(f.getTranslation(),[0,0,0])||(v.translation=f.getTranslation()),Te.eq(f.getRotation(),[0,0,0,1])||(v.rotation=f.getRotation()),Te.eq(f.getScale(),[1,1,1])||(v.scale=f.getScale()),f.getWeights().length&&(v.weights=f.getWeights()),i.nodeIndexMap.set(f,w),v}),a.skins=r.listSkins().map((f,w)=>{const v=i.createPropertyDef(f),S=f.getInverseBindMatrices();S&&(v.inverseBindMatrices=i.accessorIndexMap.get(S));const x=f.getSkeleton();return x&&(v.skeleton=i.nodeIndexMap.get(x)),v.joints=f.listJoints().map(b=>i.nodeIndexMap.get(b)),i.skinIndexMap.set(f,w),v}),r.listNodes().forEach((f,w)=>{const v=a.nodes[w],S=f.getMesh();S&&(v.mesh=i.meshIndexMap.get(S));const x=f.getCamera();x&&(v.camera=i.cameraIndexMap.get(x));const b=f.getSkin();b&&(v.skin=i.skinIndexMap.get(b)),f.listChildren().length>0&&(v.children=f.listChildren().map(c=>i.nodeIndexMap.get(c)))}),a.animations=r.listAnimations().map((f,w)=>{const v=i.createPropertyDef(f),S=new Map;return v.samplers=f.listSamplers().map((x,b)=>{const c=i.createPropertyDef(x);return c.input=i.accessorIndexMap.get(x.getInput()),c.output=i.accessorIndexMap.get(x.getOutput()),c.interpolation=x.getInterpolation(),S.set(x,b),c}),v.channels=f.listChannels().map(x=>{const b=i.createPropertyDef(x);return b.sampler=S.get(x.getSampler()),b.target={node:i.nodeIndexMap.get(x.getTargetNode()),path:x.getTargetPath()},b}),i.animationIndexMap.set(f,w),v}),a.scenes=r.listScenes().map((f,w)=>{const v=i.createPropertyDef(f);return v.nodes=f.listChildren().map(S=>i.nodeIndexMap.get(S)),i.sceneIndexMap.set(f,w),v});const C=r.getDefaultScene();return C&&(a.scene=r.listScenes().indexOf(C)),a.extensionsUsed=h.map(f=>f.extensionName),a.extensionsRequired=d.map(f=>f.extensionName),h.forEach(f=>f.write(i)),Zc(a),o}}function Zc(t){const e=[];for(const n in t){const s=t[n];(Array.isArray(s)&&s.length===0||s===null||s===""||s&&typeof s=="object"&&Object.keys(s).length===0)&&e.push(n)}for(const n of e)delete t[n]}var ur;(function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"})(ur||(ur={}));class Qc{constructor(){this._logger=Qe.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=lr.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const s=Hs(n)?this._binaryToJSON(n):{json:JSON.parse(fe.decodeText(n)),resources:{}};return await this._readResourcesExternal(s,this.dirname(e)),this._readResourcesInternal(s),s}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),zc.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(fe.assertView(e));this._readResourcesInternal(n);const s=n.json;if(s.buffers&&s.buffers.some(r=>eu(n,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(s.images&&s.images.some(r=>tu(n,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(fe.assertView(e)))}async writeJSON(e,n={}){if(n.format===pt.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return Xc.write(e,{format:n.format||pt.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Ue({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:s}=await this.writeJSON(e,{format:pt.GLB}),r=new Uint32Array([1179937895,2,12]),a=JSON.stringify(n),o=fe.pad(fe.encodeText(a),32),i=fe.toView(new Uint32Array([o.byteLength,1313821514])),u=fe.concat([i,o]);r[r.length-1]+=u.byteLength;const p=Object.values(s)[0];if(!p||!p.byteLength)return fe.concat([fe.toView(r),u]);const h=fe.pad(p,0),d=fe.toView(new Uint32Array([h.byteLength,5130562])),E=fe.concat([d,h]);return r[r.length-1]+=E.byteLength,fe.concat([fe.toView(r),u,E])}async _readResourcesExternal(e,n){var s=this;const r=e.json.images||[],a=e.json.buffers||[],o=[...r,...a].map(async function(i){const u=i.uri;if(!u||u.match(/data:/))return Promise.resolve();e.resources[u]=await s.readURI(s.resolve(n,u),"view"),s.lastReadBytes+=e.resources[u].byteLength});await Promise.all(o)}_readResourcesInternal(e){function n(a){if(a.uri){if(a.uri in e.resources){fe.assertView(e.resources[a.uri]);return}if(a.uri.match(/data:/)){const o=`__${jc()}.${Lt.extension(a.uri)}`;e.resources[o]=fe.createBufferFromDataURI(a.uri),a.uri=o}}}(e.json.images||[]).forEach(a=>{if(a.bufferView===void 0&&a.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(a)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:s}=e.json;return e={json:Ue({},e.json),resources:Ue({},e.resources)},n&&(e.json.images=n.map(r=>Ue({},r))),s&&(e.json.buffers=s.map(r=>Ue({},r))),e}_binaryToJSON(e){if(!Hs(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==ur.JSON)throw new Error("Missing required GLB JSON chunk.");const s=20,r=n[0],a=fe.decodeText(fe.toView(e,s,r)),o=JSON.parse(a),i=s+r;if(e.byteLength<=i)return{json:o,resources:{}};const u=new Uint32Array(e.buffer,e.byteOffset+i,2);if(u[1]!==ur.BIN)return{json:o,resources:{}};const p=u[0],h=fe.toView(e,i+8,p);return{json:o,resources:{[or]:h}}}}function eu(t,e){return e.uri!==void 0&&!(e.uri in t.resources)}function tu(t,e){return e.uri!==void 0&&!(e.uri in t.resources)&&e.bufferView===void 0}function Hs(t){if(t.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(t.buffer,t.byteOffset,3);return e[0]===1179937895&&e[1]===2}class nu extends Qc{constructor(e=null,n=nt.DEFAULT_INIT){super(),this._fetch=void 0,this._fetchConfig=void 0,this._init=void 0,this._fetchEnabled=!1,this._fetch=e,this._fetchConfig=n,this._init=this.init()}async init(){return this._init?this._init:Promise.all([fs(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),fs(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])]).then(([e,n])=>{this._fs=e.promises,this._path=n})}setAllowNetwork(e){if(e&&!this._fetch)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this._fetchEnabled=e,this}async readURI(e,n){if(await this.init(),nt.isAbsoluteURL(e)){if(!this._fetchEnabled||!this._fetch)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");const s=await this._fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await s.arrayBuffer());case"text":return s.text()}}else switch(n){case"view":return this._fs.readFile(e);case"text":return this._fs.readFile(e,"utf8")}}resolve(e,n){return nt.isAbsoluteURL(e)||nt.isAbsoluteURL(n)?nt.resolve(e,n):this._path.resolve(e,decodeURIComponent(n))}dirname(e){return nt.isAbsoluteURL(e)?nt.dirname(e):this._path.dirname(e)}async write(e,n){await this.init(),await(!!e.match(/\.glb$/)?this._writeGLB(e,n):this._writeGLTF(e,n))}async _writeGLTF(e,n){var s=this;this.lastWriteBytes=0;const{json:r,resources:a}=await this.writeJSON(n,{format:pt.GLTF,basename:Lt.basename(e)}),{_fs:o,_path:i}=this,u=i.dirname(e),p=JSON.stringify(r,null,2);await o.writeFile(e,p),this.lastWriteBytes+=p.length;for(const h of ru(Object.keys(a),10))await Promise.all(h.map(async function(d){if(nt.isAbsoluteURL(d)){if(nt.extension(d)==="bin")throw new Error(`Cannot write buffer to path "${d}".`);return}const E=i.join(u,decodeURIComponent(d));await o.mkdir(i.dirname(E),{recursive:!0}),await o.writeFile(E,a[d]),s.lastWriteBytes+=a[d].byteLength}))}async _writeGLB(e,n){const s=await this.writeBinary(n);await this._fs.writeFile(e,s),this.lastWriteBytes=s.byteLength}}function ru(t,e){const n=[];for(let s=0,r=t.length;s<r;s+=e){const a=[];for(let o=0;o<e&&s+o<r;o++)a.push(t[s+o]);n.push(a)}return n}const su=[79/255,209/255,197/255,1];function Jn(t,e=1){let n=t.replace(/^#/,"");n.length===3?n=n.split("").map(i=>i+i).join(""):n.length===4&&(n=n.split("").map(i=>i+i).join(""));let s=0,r=0,a=0,o=e;if(n.length===6)s=parseInt(n.slice(0,2),16)/255,r=parseInt(n.slice(2,4),16)/255,a=parseInt(n.slice(4,6),16)/255;else if(n.length===8)s=parseInt(n.slice(0,2),16)/255,r=parseInt(n.slice(2,4),16)/255,a=parseInt(n.slice(4,6),16)/255,o=parseInt(n.slice(6,8),16)/255;else throw new Error("Invalid hex color format");return[s,r,a,o]}function au(t,e,{positions:n,indices:s,colors:r}){const a=t.createPrimitive().setMode(Rn.Mode.TRIANGLES).setMaterial(t.createMaterial().setDoubleSided(!0).setAlphaMode(e[3]<1?"BLEND":"OPAQUE").setMetallicFactor(0).setRoughnessFactor(.8).setBaseColorFactor(e)).setAttribute("POSITION",t.createAccessor().setType(te.Type.VEC3).setArray(n)).setIndices(t.createAccessor().setType(te.Type.SCALAR).setArray(s));return r&&a.setAttribute("COLOR_0",t.createAccessor().setType(te.Type.VEC3).setArray(r)),a}function iu(t){const e=new Float32Array(t.vertices.length*3),n=new Uint32Array(t.faces.length*3),s=new Map;let r=0;const a=o=>{let i=s.get(o);if(i===void 0){const u=r*3,p=t.vertices[o];e[u]=p.x,e[u+1]=p.y,e[u+2]=p.z,i=r++,s.set(o,i)}return i};return t.faces.forEach((o,i)=>{const{vertices:u}=o;if(u.length<3)throw new Error("Face must have at least 3 vertices");const p=i*3;n[p]=a(u[0]),n[p+1]=a(u[1]),n[p+2]=a(u[2])}),{positions:e.slice(0,r*3),indices:n}}async function ou(t,e=!1){const n=[[.615686274509804,.796078431372549,.3176470588235294,1],[.9764705882352941,.8431372549019608,.17254901960784313,1]],s=e?[Jn("#322"),Jn("#222")]:[Jn("#efdfdf"),Jn("#fff")],r=t.colors.map(h=>{for(let d=0;d<n.length;++d)if(h.length===4&&Math.abs(h[0]-n[d][0])<1e-6&&Math.abs(h[1]-n[d][1])<1e-6&&Math.abs(h[2]-n[d][2])<1e-6&&Math.abs(h[3]-n[d][3])<1e-6)return s[d];return h}),a=new qt;a.createBuffer();const o=a.createScene(),i=a.createMesh(),u=new Map;t.faces.forEach(h=>{let d=u.get(h.colorIndex);d||u.set(h.colorIndex,d=[]),d.push(h)});for(const[h,d]of u.entries()){const E=r[h];i.addPrimitive(au(a,E,iu({vertices:t.vertices,faces:d})))}o.addChild(a.createNode().setMesh(i));const p=await new nu().writeBinary(a);return new Blob([p],{type:"model/gltf-binary"})}function Ks(t){const e=t.split(`
`).map(h=>h.trim()).filter(h=>h.length>0&&!h.startsWith("#"));if(e.length===0)throw new Error("Empty OFF file");let n,s=0;if(e[0].match(/^OFF(\s|$)/))n=e[0].substring(3).trim(),s=1;else if(e[s]==="OFF"&&e.length>1)n=e[1],s=2;else throw new Error("Invalid OFF file: missing OFF header");const[r,a]=n.split(/\s+/).map(Number);if(isNaN(r)||isNaN(a))throw new Error("Invalid OFF file: invalid vertex or face counts");if(s+r+a>e.length)throw new Error("Invalid OFF file: not enough lines");const o=[];for(let h=0;h<r;h++){const d=e[s+h].split(/\s+/).map(Number);if(d.length<3||d.some(isNaN))throw new Error(`Invalid OFF file: invalid vertex at line ${s+h+1}`);o.push({x:d[0],y:d[1],z:d[2]})}s+=r;const i=[],u=new Map,p=[];for(let h=0;h<a;h++){const d=e[s+h].split(/\s+/).map(Number),E=d[0],_=d.slice(1,E+1),A=d.length>=E+4?d.slice(E+1,E+5).map(f=>f/255):su;if(_.length<3)throw new Error(`Invalid OFF file: face at line ${s+h+1} must have at least 3 vertices`);const j=A?A.join(","):"";let C=u.get(j);if(C==null){C=i.length;const[f,w,v,S]=A;i.push([f,w,v,S??1]),u.set(j,C)}if(_.length==3)p.push({vertices:_,colorIndex:C});else for(let f=1;f<_.length-1;f++)p.push({vertices:[_[0],_[f],_[f+1]],colorIndex:C})}return{vertices:o,faces:p,colors:i}}function Zr(){return Zr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Zr.apply(null,arguments)}function wn(t){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(t)}function lu(t,e){if(wn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(wn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cu(t){var e=lu(t,"string");return wn(e)=="symbol"?e:e+""}function uu(t,e,n){return(e=cu(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function fu(t){if(Array.isArray(t))return Qr(t)}function du(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ya(t,e){if(t){if(typeof t=="string")return Qr(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qr(t,e):void 0}}function pu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hu(t){return fu(t)||du(t)||Ya(t)||pu()}function mu(t){if(Array.isArray(t))return t}function gu(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function yu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xn(t,e){return mu(t)||gu(t,e)||Ya(t,e)||yu()}var vu={handle:function(e){var n=e.index,s=e.handleIndex;return ue("p-slider-handle",{"p-slider-handle-start":n===0,"p-slider-handle-end":n===1,"p-slider-handle-active":s.current===n})},range:"p-slider-range",root:function(e){var n=e.props,s=e.vertical,r=e.horizontal;return ue("p-slider p-component",{"p-disabled":n.disabled,"p-slider-horizontal":r,"p-slider-vertical":s})}},bu=`
@layer primereact {
    .p-slider {
        position: relative;
    }
    
    .p-slider .p-slider-handle {
        position: absolute;
        cursor: grab;
        touch-action: none;
        display: block;
        z-index: 1;
    }
    
    .p-slider .p-slider-handle.p-slider-handle-active {
        z-index: 2;
    }
    
    .p-slider-range {
        position: absolute;
        display: block;
    }
    
    .p-slider-horizontal .p-slider-range {
        top: 0;
        left: 0;
        height: 100%;
    }
    
    .p-slider-horizontal .p-slider-handle {
        top: 50%;
    }
    
    .p-slider-vertical {
        height: 100px;
    }
    
    .p-slider-vertical .p-slider-handle {
        left: 50%;
    }
    
    .p-slider-vertical .p-slider-range {
        bottom: 0;
        left: 0;
        width: 100%;
    }
}
`,xu={handle:{position:"absolute"},range:{position:"absolute"}},an=mt.extend({defaultProps:{__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,children:void 0},css:{classes:vu,styles:bu,inlineStyles:xu}});function Ws(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ws(Object(n),!0).forEach(function(s){uu(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var qa=l.memo(l.forwardRef(function(t,e){var n,s,r,a=lt(),o=l.useContext(ht),i=an.getProps(t,o),u=l.useRef(null),p=l.useRef(0),h=l.useRef(!1),d=l.useRef(!1),E=l.useRef(0),_=l.useRef(0),A=l.useRef(0),j=l.useRef(0),C=l.useRef(),f=i.range?(n=i.value)!==null&&n!==void 0?n:[i.min,i.max]:(s=(r=i.value)!==null&&r!==void 0?r:i.min)!==null&&s!==void 0?s:0,w=i.orientation==="horizontal",v=i.orientation==="vertical",S=kn({type:"mousemove",listener:function(T){return Ce(T)}}),x=Xn(S,2),b=x[0],c=x[1],m=kn({type:"mouseup",listener:function(T){return Le(T)}}),y=Xn(m,2),g=y[0],R=y[1],F=kn({type:"touchmove",listener:function(T){return Ce(T)}}),L=Xn(F,2),U=L[0],N=L[1],V=kn({type:"touchend",listener:function(T){return Le(T)}}),I=Xn(V,2),$=I[0],q=I[1],W=an.setMetaData({props:i}),ee=W.ptm,re=W.cx,Re=W.sx,xe=W.isUnstyled;wt(an.css.styles,xe,{name:"slider"});var Z=function(T,D){var H=i.range?f[p.current]:f,ae=(i.step||1)*D;ze(T,H+ae),T.preventDefault()},se=function(T,D){i.disabled||(d.current=!0,Fe(),h.current=!0,i.range&&f[0]===i.max?p.current=0:p.current=D,T.preventDefault())},Ce=function(T){d.current&&(we(T),T.preventDefault())},Le=function(T){if(d.current){d.current=!1;var D=we(T);i.onSlideEnd&&i.onSlideEnd({originalEvent:T,value:D}),C.current=void 0,c(),R(),N(),q()}},$e=function(T,D){b(),g(),se(T,D)},le=function(T,D){T.changedTouches&&T.changedTouches[0]&&(C.current=T.changedTouches[0].identifier),U(),$(),se(T,D)},Ie=function(T,D){if(!i.disabled){p.current=D;var H=T.key;switch(H){case"ArrowRight":case"ArrowUp":Z(T,1);break;case"ArrowLeft":case"ArrowDown":Z(T,-1);break;case"PageUp":Z(T,10),T.preventDefault();break;case"PageDown":Z(T,-10),T.preventDefault();break;case"Home":Z(T,-f),T.preventDefault();break;case"End":Z(T,i.max),T.preventDefault();break}}},Oe=function(T){if(!i.disabled){if(!h.current){Fe();var D=we(T);i.onSlideEnd&&i.onSlideEnd({originalEvent:T,value:D})}h.current=!1}},Fe=function(){var T=u.current.getBoundingClientRect();E.current=T.left+K.getWindowScrollLeft(),_.current=T.top+K.getWindowScrollTop(),A.current=u.current.offsetWidth,j.current=u.current.offsetHeight},ke=function(T){var D,H=Array.from((D=T.changedTouches)!==null&&D!==void 0?D:[]).find(function(ae){return ae.identifier===C.current})||T;return{pageX:H.pageX,pageY:H.pageY}},we=function(T){var D,H=ke(T),ae=H.pageX,Ae=H.pageY;if(!(!ae||!Ae)){w?D=(ae-E.current)*100/A.current:D=(_.current+j.current-Ae)*100/j.current;var ve=(i.max-i.min)*(D/100)+i.min;if(i.step){var Ee=i.range?f[p.current]:f,_e=ve-Ee;_e<0?ve=Ee+Math.ceil(ve/i.step-Ee/i.step)*i.step:_e>0&&(ve=Ee+Math.floor(ve/i.step-Ee/i.step)*i.step)}else ve=Math.floor(ve);return ze(T,ve)}},ze=function(T,D){var H=parseFloat(D.toFixed(10)),ae=H;return i.range?(p.current===0?H<i.min?H=i.min:H>i.max&&(H=i.max):H>i.max?H=i.max:H<i.min&&(H=i.min),ae=hu(f),ae[p.current]=H,i.onChange&&i.onChange({originalEvent:T,value:ae})):(H<i.min?H=i.min:H>i.max&&(H=i.max),ae=H,i.onChange&&i.onChange({originalEvent:T,value:ae})),ae},Be=function(T,D,H){T=ce.isEmpty(T)?null:T,D=ce.isEmpty(D)?null:D;var ae={transition:d.current?"none":null,left:T!=null?T+"%":null,bottom:D!=null?D+"%":null},Ae=a(Rt({className:re("handle",{index:H,handleIndex:p}),style:Rt(Rt({},Re("handle",{dragging:d,leftValue:T,bottomValue:D})),ae),tabIndex:i.tabIndex,role:"slider",onMouseDown:function(Ee){return $e(Ee,H)},onTouchStart:function(Ee){return le(Ee,H)},onKeyDown:function(Ee){return Ie(Ee,H)},"aria-valuemin":i.min,"aria-valuemax":i.max,"aria-valuenow":T||D||0,"aria-orientation":i.orientation},He),ee("handle"));return l.createElement("span",Ae)},De=function(){var T=(f[0]<i.min?i.min:f[0]-i.min)*100/(i.max-i.min),D=(f[1]>i.max?i.max:f[1]-i.min)*100/(i.max-i.min),H=w?Be(T,null,0):Be(null,T,0),ae=w?Be(D,null,1):Be(null,D,1),Ae=D>T?D-T:T-D,ve=D>T?T:D,Ee=w?{left:ve+"%",width:Ae+"%"}:{bottom:ve+"%",height:Ae+"%"},_e=a({className:re("range"),style:Rt(Rt({},Re("range")),Ee)},ee("range"));return l.createElement(l.Fragment,null,l.createElement("span",_e),H,ae)},st=function(){var T;f<i.min?T=i.min:f>i.max?T=i.max:T=(f-i.min)*100/(i.max-i.min);var D=w?{width:T+"%"}:{height:T+"%"},H=w?Be(T,null,null):Be(null,T,null),ae=a({className:re("range"),style:Rt(Rt({},Re("range")),D)},ee("range"));return l.createElement(l.Fragment,null,l.createElement("span",ae),H)};l.useImperativeHandle(e,function(){return{props:i,getElement:function(){return u.current}}});var Xe=an.getOtherProps(i),He=ce.reduceKeys(Xe,K.ARIA_PROPS),Ne=i.range?De():st(),et=a({style:i.style,className:ue(i.className,re("root",{vertical:v,horizontal:w})),onClick:Oe},an.getOtherProps(i),ee("root"));return l.createElement("div",Zr({id:i.id,ref:u},et),Ne)}));qa.displayName="Slider";function pn(){return pn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},pn.apply(null,arguments)}function En(t){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(t)}function wu(t,e){if(En(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(En(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eu(t){var e=wu(t,"string");return En(e)=="symbol"?e:e+""}function Su(t,e,n){return(e=Eu(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tu(t){if(Array.isArray(t))return t}function Cu(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function Gs(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Iu(t,e){if(t){if(typeof t=="string")return Gs(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gs(t,e):void 0}}function Ru(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ou(t,e){return Tu(t)||Cu(t,e)||Iu(t,e)||Ru()}var Mu={box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon",root:function(e){var n=e.props,s=e.checked,r=e.context;return ue("p-checkbox p-component",{"p-highlight":s,"p-disabled":n.disabled,"p-invalid":n.invalid,"p-variant-filled":n.variant?n.variant==="filled":r&&r.inputStyle==="filled"})}},Zn=mt.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,invalid:!1,variant:null,name:null,onChange:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0},css:{classes:Mu}});function Ys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ys(Object(n),!0).forEach(function(s){Su(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var Ja=l.memo(l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=Zn.getProps(t,s),a=l.useState(!1),o=Ou(a,2),i=o[0],u=o[1],p=Zn.setMetaData({props:r,state:{focused:i},context:{checked:r.checked===r.trueValue,disabled:r.disabled}}),h=p.ptm,d=p.cx,E=p.isUnstyled;wt(Zn.css.styles,E,{name:"checkbox"});var _=l.useRef(null),A=l.useRef(r.inputRef),j=function(){return r.checked===r.trueValue},C=function(g){if(!(r.disabled||r.readOnly)&&r.onChange){var R,F=j(),L=F?r.falseValue:r.trueValue,U={originalEvent:g,value:r.value,checked:L,stopPropagation:function(){g?.stopPropagation()},preventDefault:function(){g?.preventDefault()},target:{type:"checkbox",name:r.name,id:r.id,value:r.value,checked:L}};if(r==null||(R=r.onChange)===null||R===void 0||R.call(r,U),g.defaultPrevented)return;K.focus(A.current)}},f=function(g){var R;u(!0),r==null||(R=r.onFocus)===null||R===void 0||R.call(r,g)},w=function(g){var R;u(!1),r==null||(R=r.onBlur)===null||R===void 0||R.call(r,g)};l.useImperativeHandle(e,function(){return{props:r,focus:function(){return K.focus(A.current)},getElement:function(){return _.current},getInput:function(){return A.current}}}),l.useEffect(function(){ce.combinedRefs(A,r.inputRef)},[A,r.inputRef]),dt(function(){A.current.checked=j()},[r.checked,r.trueValue]),Tn(function(){r.autoFocus&&K.focus(A.current,r.autoFocus)});var v=j(),S=ce.isNotEmpty(r.tooltip),x=Zn.getOtherProps(r),b=n({id:r.id,className:ue(r.className,d("root",{checked:v,context:s})),style:r.style,"data-p-highlight":v,"data-p-disabled":r.disabled,onContextMenu:r.onContextMenu,onMouseDown:r.onMouseDown},x,h("root")),c=function(){var g=ce.reduceKeys(x,K.ARIA_PROPS),R=n(qs({id:r.inputId,type:"checkbox",className:d("input"),name:r.name,tabIndex:r.tabIndex,onFocus:function(L){return f(L)},onBlur:function(L){return w(L)},onChange:function(L){return C(L)},disabled:r.disabled,readOnly:r.readOnly,required:r.required,"aria-invalid":r.invalid,checked:v},g),h("input"));return l.createElement("input",pn({ref:A},R))},m=function(){var g=n({className:d("icon")},h("icon")),R=n({className:d("box",{checked:v}),"data-p-highlight":v,"data-p-disabled":r.disabled},h("box")),F=v?r.icon||l.createElement(sa,g):null,L=We.getJSXIcon(F,qs({},g),{props:r,checked:v});return l.createElement("div",R,L)};return l.createElement(l.Fragment,null,l.createElement("div",pn({ref:_},b),c(),m()),S&&l.createElement(ns,pn({target:_,content:r.tooltip,pt:h("tooltip")},r.tooltipOptions)))}));Ja.displayName="Checkbox";function fr(){return fr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},fr.apply(null,arguments)}function Pu(t){if(Array.isArray(t))return t}function Au(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,i=[],u=!0,p=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(i.push(s.value),i.length!==e);u=!0);}catch(h){p=!0,r=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw r}}return i}}function Js(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Nu(t,e){if(t){if(typeof t=="string")return Js(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Js(t,e):void 0}}function _u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xs(t,e){return Pu(t)||Au(t,e)||Nu(t,e)||_u()}var Qn=mt.extend({defaultProps:{__TYPE:"Fieldset",id:null,legend:null,className:null,style:null,toggleable:null,collapsed:null,collapseIcon:null,transitionOptions:null,expandIcon:null,onExpand:null,onCollapse:null,onToggle:null,onClick:null,children:void 0},css:{classes:{root:function(e){var n=e.props;return ue("p-fieldset p-component",{"p-fieldset-toggleable":n.toggleable})},toggleableContent:"p-toggleable-content",togglericon:"p-fieldset-toggler",legendTitle:"p-fieldset-legend-text",legend:"p-fieldset-legend p-unselectable-text",content:"p-fieldset-content",transition:"p-toggleable-content"},styles:`
        @layer primereact {
            .p-fieldset-legend > a,
            .p-fieldset-legend > span {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .p-fieldset-toggleable .p-fieldset-legend a {
                cursor: pointer;
                user-select: none;
                overflow: hidden;
                position: relative;
                text-decoration: none;
            }
            
            .p-fieldset-legend-text {
                line-height: 1;
            }
        }
        `}}),Xa=l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=Qn.getProps(t,s),a=l.useState(r.id),o=Xs(a,2),i=o[0],u=o[1],p=l.useState(r.collapsed),h=Xs(p,2),d=h[0],E=h[1],_=r.toggleable?r.onToggle?r.collapsed:d:!1,A=l.useRef(null),j=l.useRef(null),C=i+"_header",f=i+"_content",w=Qn.setMetaData({props:r,state:{id:i,collapsed:_}}),v=w.ptm,S=w.cx,x=w.isUnstyled;wt(Qn.css.styles,x,{name:"fieldset"});var b=function($){r.toggleable&&(_?c($):m($),r.onToggle&&r.onToggle({originalEvent:$,value:!_})),$.preventDefault()},c=function($){r.onToggle||E(!1),r.onExpand&&r.onExpand($)},m=function($){r.onToggle||E(!0),r.onCollapse&&r.onCollapse($)};Tn(function(){r.id||u(pr())});var y=function($){($.code==="Enter"||$.code==="NumpadEnter"||$.code==="Space")&&(b($),$.preventDefault())},g=function(){var $=n({className:S("content")},v("content")),q=n({ref:j,id:f,role:"region","aria-labelledby":C,className:S("toggleableContent")},v("toggleableContent")),W=n({classNames:S("transition"),timeout:{enter:1e3,exit:450},in:!_,unmountOnExit:!0,options:r.transitionOptions},v("transition"));return l.createElement(hr,fr({nodeRef:j},W),l.createElement("div",q,l.createElement("div",$,r.children)))},R=function(){if(r.toggleable){var $=n({className:S("togglericon")},v("togglericon")),q=_?r.expandIcon||l.createElement(Ti,$):r.collapseIcon||l.createElement(hi,$),W=We.getJSXIcon(q,$,{props:r});return W}return null},F=function(){var $=n({className:S("legendTitle")},v("legendTitle")),q=n({id:C,role:"button","aria-expanded":!_,"aria-controls":f,onKeyDown:y,onClick:b,"aria-label":r.legend,tabIndex:0},v("toggler"));if(r.toggleable){var W=R();return l.createElement("a",q,W,l.createElement("span",$,r.legend),l.createElement(_t,null))}return l.createElement("span",fr({},$,{id:C}),r.legend)},L=function(){var $=n({className:S("legend")},v("legend"));if(r.legend!=null||r.toggleable){var q=F();return l.createElement("legend",$,q)}};l.useImperativeHandle(e,function(){return{props:r,getElement:function(){return A.current},getContent:function(){return j.current}}});var U=n({id:i,ref:A,style:r.style,className:ue(r.className,S("root")),onClick:r.onClick},Qn.getOtherProps(r),v("root")),N=L(),V=g();return l.createElement("fieldset",U,N,V)});Xa.displayName="Fieldset";function ju(t){const e=(t.parameterSet?.parameters??[]).reduce((s,r)=>(s[r.group]||(s[r.group]=[]),s[r.group].push(r),s),{}),n=Object.entries(e);return t.parameterSet?k.jsx("div",{className:t.className,style:{display:"flex",flexDirection:"column",alignItems:"center",overflowY:"scroll",padding:16,...t.style,bottom:"unset"},children:n.map(([s,r])=>k.jsx(Xa,{style:{width:"99%",backgroundColor:"transparent"},legend:s,toggleable:!0,children:r.map(a=>k.jsx(Fu,{value:t.parameterValues[a.name],param:a,handleChange:t.onChange},a.name))},s))}):k.jsx(Gt,{style:t.style,text:"Waiting for customizer to run"})}function Fu({param:t,value:e,className:n,style:s,handleChange:r}){return k.jsxs("div",{style:{flex:1,...s,display:"flex",marginTop:8,marginBottom:8,flexDirection:"column"},children:[k.jsxs("div",{style:{flex:1,display:"flex",gap:8,flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[k.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minWidth:100},children:[k.jsx("label",{children:k.jsx("b",{children:t.name})}),k.jsx("div",{style:{wordBreak:"break-all"},children:t.caption})]}),k.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[t.type==="number"&&"options"in t&&k.jsx(ps,{style:{flex:1},value:e||t.initial,options:t.options,onChange:a=>r(t.name,a.value),optionLabel:"name",optionValue:"value"}),t.type==="string"&&t.options&&k.jsx(ps,{value:e||t.initial,options:t.options,onChange:a=>r(t.name,a.value),optionLabel:"name",optionValue:"value"}),t.type==="boolean"&&k.jsx(Ja,{checked:e??t.initial,onChange:a=>r(t.name,a.checked)}),!Array.isArray(t.initial)&&t.type==="number"&&!("options"in t)&&k.jsx(hs,{style:{flex:1},value:e||t.initial,showButtons:!0,size:5,onValueChange:a=>r(t.name,a.value)}),t.type==="string"&&!t.options&&k.jsx(ta,{style:{flex:1},value:e||t.initial,onChange:a=>r(t.name,a.target.value)}),Array.isArray(t.initial)&&"min"in t&&k.jsx("div",{style:{flex:1,display:"flex",flexDirection:"row"},children:t.initial.map((a,o)=>k.jsx(hs,{style:{flex:1},value:e?.[o]??t.initial[o],min:t.min,max:t.max,showButtons:!0,size:5,step:t.step,onValueChange:i=>{const u=[...e??t.initial];u[o]=i.value,r(t.name,u)}},o))}),k.jsx(Yt,{onClick:()=>r(t.name,t.initial),style:{marginRight:"0",visibility:e===void 0||JSON.stringify(e)===JSON.stringify(t.initial)?"hidden":"visible"},tooltipOptions:{position:"left"},icon:"pi pi-refresh",className:"p-button-text"})]})]}),!Array.isArray(t.initial)&&t.type==="number"&&t.min!==void 0&&k.jsx(qa,{style:{flex:1,minHeight:"5px",margin:"5px 40px 5px 5px"},value:e||t.initial,min:t.min,max:t.max,step:t.step,onChange:a=>r(t.name,a.value)})]})}const ku=`
/* [Meta] */
title = "OpenSCAD Demo";
show_text = true;
debug = true;

/* [Plate Settings] */
// Plate size (mm)
plate_size = 40;          // [20:1:80]
// Plate thickness
thickness  = 6;           // [2:0.5:20]
// Corner rounding
fillet     = 3;           // [0:0.5:10]

/* [Holes] */
// Number of holes
hole_count   = 6;         // [0:1:12]
// Hole diameter
hole_d       = 4;         // [2:0.5:10]
// Hole pattern
hole_pattern = "circle";  // ["circle", "grid"]

/* [Quality] */
$fs = $preview ? 1   : 0.2;
$fa = $preview ? 15  : 5;


/* ---------- Helpers ---------- */

module label(txt) {
    if (show_text)
        color("pink")
            translate([0, -plate_size/2 - 8, thickness])
                linear_extrude(1)
                    text(txt, size=6, halign="center");
}


/* ---------- Geometry ---------- */

module holes_2d() {
    if (hole_pattern == "circle")
        for (i = [0 : hole_count - 1])
            rotate(360 / hole_count * i)
                translate([plate_size / 3, 0])
                    circle(d = hole_d);
    else
        for (x = [-1, 0, 1], y = [-1, 0, 1])
            translate([x * plate_size / 4, y * plate_size / 4])
                circle(d = hole_d);
}

module plate_2d() {
    difference() {
        offset(r = fillet)
            square(plate_size - 2 * fillet, center = true);
        holes_2d();
    }
}


/* ---------- Output ---------- */

color("steelblue")
difference() {
    linear_extrude(thickness)
        plate_2d();

    // Debug cutaway
    if (debug)
        translate([0, 0, thickness/2])
            cube([plate_size, plate_size/2, thickness+1], center=true);
}

label(title);

`;function es(){return es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},es.apply(null,arguments)}function Sn(t){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(t)}function Lu(t,e){if(Sn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Sn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $u(t){var e=Lu(t,"string");return Sn(e)=="symbol"?e:e+""}function Du(t,e,n){return(e=$u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bu={root:function(e){var n=e.props,s=e.context,r=e.isFilled;return ue("p-inputtextarea p-inputtext p-component",{"p-disabled":n.disabled,"p-filled":r,"p-inputtextarea-resizable":n.autoResize,"p-invalid":n.invalid,"p-variant-filled":n.variant?n.variant==="filled":s&&s.inputStyle==="filled"})}},Uu=`
@layer primereact {
    .p-inputtextarea-resizable {
        overflow: hidden;
        resize: none;
    }
    
    .p-fluid .p-inputtextarea {
        width: 100%;
    }
}
`,er=mt.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,invalid:!1,variant:null,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0,className:null},css:{classes:Bu,styles:Uu}});function Zs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zs(Object(n),!0).forEach(function(s){Du(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var us=l.memo(l.forwardRef(function(t,e){var n=lt(),s=l.useContext(ht),r=er.getProps(t,s),a=l.useRef(e),o=l.useRef(0),i=er.setMetaData(Qs(Qs({props:r},r.__parentMetadata),{},{context:{disabled:r.disabled}})),u=i.ptm,p=i.cx,h=i.isUnstyled;wt(er.css.styles,h,{name:"inputtextarea"});var d=function(m){r.autoResize&&w(),r.onFocus&&r.onFocus(m)},E=function(m){r.autoResize&&w(),r.onBlur&&r.onBlur(m)},_=function(m){r.autoResize&&w(),r.onKeyUp&&r.onKeyUp(m)},A=function(m){r.onKeyDown&&r.onKeyDown(m),r.keyfilter&&Tr.onKeyPress(m,r.keyfilter,r.validateOnly)},j=function(m){r.onBeforeInput&&r.onBeforeInput(m),r.keyfilter&&Tr.onBeforeInput(m,r.keyfilter,r.validateOnly)},C=function(m){r.onPaste&&r.onPaste(m),r.keyfilter&&Tr.onPaste(m,r.keyfilter,r.validateOnly)},f=function(m){var y=m.target;r.autoResize&&w(ce.isEmpty(y.value)),r.onInput&&r.onInput(m),ce.isNotEmpty(y.value)?K.addClass(y,"p-filled"):K.removeClass(y,"p-filled")},w=function(m){var y=a.current;y&&v()&&(o.current||(o.current=y.scrollHeight,y.style.overflow="hidden"),(o.current!==y.scrollHeight||m)&&(y.style.height="",y.style.height=y.scrollHeight+"px",parseFloat(y.style.height)>=parseFloat(y.style.maxHeight)?(y.style.overflowY="scroll",y.style.height=y.style.maxHeight):y.style.overflow="hidden",o.current=y.scrollHeight))},v=function(){if(K.isVisible(a.current)){var m=a.current.getBoundingClientRect();return m.width>0&&m.height>0}return!1};l.useEffect(function(){ce.combinedRefs(a,e)},[a,e]),l.useEffect(function(){r.autoResize&&w(!0)},[r.autoResize,r.value]);var S=l.useMemo(function(){return ce.isNotEmpty(r.value)||ce.isNotEmpty(r.defaultValue)},[r.value,r.defaultValue]),x=ce.isNotEmpty(r.tooltip),b=n({ref:a,className:ue(r.className,p("root",{context:s,isFilled:S})),onFocus:d,onBlur:E,onKeyUp:_,onKeyDown:A,onBeforeInput:j,onInput:f,onPaste:C},er.getOtherProps(r),u("root"));return l.createElement(l.Fragment,null,l.createElement("textarea",b),x&&l.createElement(ns,es({target:a,content:r.tooltip,pt:u("tooltip")},r.tooltipOptions)))}));us.displayName="InputTextarea";function Vu(t,e,n){const s=e.x-t.x,r=e.y-t.y,a=e.z-t.z,o=n.x-t.x,i=n.y-t.y,u=n.z-t.z;return{x:r*u-a*i,y:a*o-s*u,z:s*i-r*o}}async function zu(t){let e=`solid polyhedron
`;for(const n of t.faces){const[s,r,a]=n.vertices,o=t.vertices[s],i=t.vertices[r],u=t.vertices[a],p=Vu(o,i,u);e+=`  facet normal ${p.x} ${p.y} ${p.z}
`,e+=`    outer loop
`,e+=`      vertex ${o.x} ${o.y} ${o.z}
`,e+=`      vertex ${i.x} ${i.y} ${i.z}
`,e+=`      vertex ${u.x} ${u.y} ${u.z}
`,e+=`    endloop
`,e+=`  endfacet
`}return e+=`endsolid polyhedron
`,new Blob([e],{type:"model/stl"})}const Hu=({modelId:t})=>{const e=na(),[n,s]=l.useState([]),[r,a]=l.useState(""),[o,i]=l.useState(!0),[u,p]=l.useState(!1),[h,d]=l.useState(null),E=async()=>{i(!0),d(null);try{const A=await un.fetchModelComments(t);s(A)}catch{d("Failed to load comments.")}finally{i(!1)}};l.useEffect(()=>{E()},[t]);const _=async()=>{if(r.trim())try{await un.addModelComment(t,r),s(A=>[{id:"temp-"+wi(),model_id:t,user_id:e.user.id,username:e.username,body:r,created_at:Fr(new Date)},...A]),a("")}catch{d("Failed to post comment.")}finally{p(!1)}};return k.jsx(jr,{title:"Comments",style:{flex:1,background:"#111"},className:"card-body-p16 comments",children:o?k.jsx(Gt,{text:"Loading comments"}):k.jsxs(k.Fragment,{children:[e.user?k.jsxs("div",{style:{marginBottom:12,display:"flex",gap:8},children:[k.jsx(us,{style:{flex:1,resize:"vertical"},maxLength:2e3,placeholder:"Add a comment...",value:r,onChange:A=>a(A.target.value),disabled:u}),k.jsx(Yt,{label:"Post",icon:"pi pi-send",outlined:!0,onClick:_,loading:u})]}):k.jsx("div",{children:"You need to be logged in to post comments."}),h&&k.jsx("div",{style:{color:"red",marginBottom:8},children:h}),n.length===0?k.jsx("div",{children:"No comments yet."}):n.map(A=>k.jsxs("div",{children:[k.jsxs("b",{children:[k.jsx("a",{href:`#/user/${A.username}`,children:A.username})," - ",A.created_at]}),k.jsx("p",{dangerouslySetInnerHTML:{__html:ia(A.body)}})]},A.id))]})})};function nf({viewModelId:t}){const{modelId:e}=ai();e&&(t=e);const{user:n}=na(),s=Ei("readonly")!==null,[r,a]=l.useState(void 0),[o,i]=l.useState(void 0),u=t??"new",[p,h]=l.useState(void 0),[d,E]=l.useState(void 0),[_,A]=l.useState(void 0),[j,C]=l.useState(void 0),[f,w]=l.useState(void 0),[v,S]=l.useState(void 0),[x,b]=l.useState(!1),[c,m]=l.useState(!1),[y,g]=l.useState(!0),[R,F]=l.useState(!1),[L,U]=l.useState(void 0),[N,V]=l.useState(void 0),[I,$]=l.useState({}),[q,W]=l.useState(!1),[ee,re]=l.useState(null),[Re,xe]=l.useState(t!==void 0?0:1),Z=l.useRef(null),se=l.useRef(null),Ce=l.useRef(!1),[Le,$e]=l.useState(0),le=l.useCallback(()=>`/src/${u}/index.scad`,[u]),Ie=l.useCallback(async T=>{try{const D=le();if(u=="new")Or(D,ku,!1);else if(!Ot(D)&&T!==void 0)Or(D,T.source_code,!0);else if(T!==void 0){const H=Ln(D);await Si(H)!=T.source_code_hash&&F(!0)}}catch(D){console.error(D)}},[u,le]),Oe=l.useCallback(async()=>{C("Checking Syntax...");try{const T=le(),D=Ln(T),ae=await yc({activePath:T,sources:[{path:T,content:D}]})({now:!0});ae.parameterSet&&U(ae.parameterSet),ae.markers&&V(ae.markers)}catch(T){w(T?.message||String(T))}finally{C(void 0)}},[]),Fe=T=>async()=>{C(T?"Previewing...":"Rendering..."),w(void 0),S(void 0);try{const D=le();let H=Ln(D);const ve=await bc({scadPath:D,sources:[{path:D,content:H}],vars:I,isPreview:T,mountArchives:!0,renderFormat:"off",streamsCallback:_e=>{"stderr"in _e&&S(Ge=>(Ge?Ge+`
`:"")+_e.stderr),"stdout"in _e&&S(Ge=>(Ge?Ge+`
`:"")+_e.stdout)}})({now:!0});d&&URL.revokeObjectURL(d),E(URL.createObjectURL(ve.outFile));let Ee;try{const _e=Ks(await ve.outFile.text());Ee=new File([await ou(_e)],ve.outFile.name.replace(".off",".glb"))}catch(_e){w("Failed to convert OFF to GLB: "+_e),C(void 0);return}p&&URL.revokeObjectURL(p),h(URL.createObjectURL(Ee))}catch(D){w(D?.message||String(D))}finally{C(void 0)}},ke=l.useCallback(Fe(!0),[I]),we=l.useCallback(Fe(!1),[I]),ze=async()=>{if(!se.current)return;const T=await se.current.getWebpScreenshot();if(!T){w("Failed to capture screenshot for publish.");return}re(T),W(!0)},Be=async()=>{if(!(!n||!ee||!o)){W(!1),Z.current?.show({severity:"info",summary:"Uploading...",life:5e3});try{const D=await(await fetch(ee)).blob(),H=new File([D],`${Date.now()}.webp`,{type:"image/webp"}),ae=Ln(le());await un.uploadModel(H,ae,o),Z.current?.clear(),Z.current?.show({severity:"success",summary:"Published",detail:"Model published successfully!",life:3e3})}catch(T){Z.current?.clear(),Z.current?.show({severity:"error",summary:"Publish Failed",detail:T.message||String(T),life:4e3})}finally{W(!1),re(null)}}},De=()=>{W(!1),re(null)},st=async()=>{const T=le(),D=await un.fetchModelSource(u);if(D===void 0)throw new Error("Failed to fetch model source");Or(T,D,!0),$e(H=>H+1)},Xe=l.useCallback(async()=>{if(console.debug("Fetching model details...",t),t){const T=await un.fetchModelById(t);return a(T),i({id:T?.id,title:T?.title??"Untitled Model",description:T?.description??""}),T}else{i({id:void 0,title:"Untitled Model",description:""});return}},[]);l.useEffect(()=>(Ce.current||(Ce.current=!0,(async()=>{const T=await Xe();await mi(!0),await Ie(T),await Promise.all([Oe(),ke()]),g(!1)})()),()=>{p&&URL.revokeObjectURL(p),d&&URL.revokeObjectURL(d),_&&URL.revokeObjectURL(_)}),[Oe,Xe,Ie,ke]);function He(T,D){const H=document.createElement("a");H.href=T,H.download=D,document.body.appendChild(H),H.click(),document.body.removeChild(H)}const Ne=l.useCallback(async()=>{try{if(_&&URL.revokeObjectURL(_),!d)throw new Error("No OFF file to convert");const T=await(await fetch(d)).text(),D=Ks(T),H=await zu(D),ae=et()+".stl",Ae=URL.createObjectURL(H);He(Ae,ae),setTimeout(()=>URL.revokeObjectURL(Ae),1e3),A(void 0)}catch(T){console.error(T)}},[d]);l.useEffect(()=>{const T=D=>{D.key==="F4"?(D.preventDefault(),Oe()):D.key==="F5"?(D.preventDefault(),ke()):D.key==="F6"?(D.preventDefault(),we()):D.key==="F7"?(D.preventDefault(),Ne()):D.key==="F8"&&(D.preventDefault(),ze())};return window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}},[d]);function et(){return r?.title??o?.title??"Untitled Model"}function he(){return F(!0),Oe()}return k.jsxs("div",{className:"editor-page-container",style:{flexDirection:x?"column":void 0},children:[k.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:16},children:[k.jsxs("div",{style:{background:"#111",display:"flex",flexDirection:"column"},children:[k.jsx("div",{style:{width:"100%",maxHeight:"85vh",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:p?k.jsx(dc,{ref:se,lightMode:c,style:{width:"100%",height:"100%"},modelUri:p}):k.jsx(Gt,{text:"Waiting for model to render"})}),k.jsx(ds,{model:[x?{label:"Smaller Preview",className:"editor-page-hide-on-small",icon:"pi pi-window-minimize",command:()=>b(!1)}:{label:"Larger Preview",className:"editor-page-hide-on-small",icon:"pi pi-window-maximize",command:()=>b(!0)},c?{label:"Dark Mode",icon:"pi pi-moon",command:()=>m(!1)}:{label:"Light Mode",icon:"pi pi-sun",command:()=>m(!0)},{label:"Reset View",icon:"pi pi-refresh",command:()=>{se.current?.resetView()}},{label:"Download",icon:"pi pi-download",items:[{label:"GLB",icon:"pi pi-download",disabled:!p,command:()=>{p&&He(p,et()+".glb")}},{label:"OFF",icon:"pi pi-download",disabled:!d,command:()=>{d&&He(d,et()+".off")}},{label:"STL (F7)",icon:"pi pi-download",disabled:!d,command:Ne}]}],style:{padding:8,background:"none",border:"none"}})]}),!s&&n?.id!==void 0&&(r===void 0||r?.owner_id===n?.id)&&o!==void 0?k.jsx(jr,{className:"card-body-p16",style:{background:"#111"},children:k.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content 1fr",gap:12,alignItems:"center",marginBottom:8},children:[k.jsx("label",{htmlFor:"edit-title",style:{whiteSpace:"nowrap"},children:k.jsx("b",{children:"Title"})}),k.jsx(ta,{id:"edit-title",maxLength:100,value:o.title,onChange:T=>i(D=>({...D,title:T.target.value})),placeholder:"Enter model title"}),k.jsx("label",{htmlFor:"edit-description",style:{whiteSpace:"nowrap"},children:k.jsx("b",{children:"Description"})}),k.jsx(us,{id:"edit-description",maxLength:2e3,value:o.description,onChange:T=>i(D=>({...D,description:T.target.value})),placeholder:"Enter model description",style:{resize:"vertical"}})]})}):r!==void 0?k.jsx(jr,{title:r.title,className:"card-body-p16",style:{background:"#111"},children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[k.jsx("div",{dangerouslySetInnerHTML:{__html:ia(r.description)}}),k.jsxs("span",{children:["by ",k.jsx("a",{href:"#/user/"+r.username,children:r.username})," on"," ",r.created_at]}),k.jsx("span",{children:k.jsx(oi,{model:r})})]})}):k.jsx(k.Fragment,{}),r?k.jsx(Hu,{modelId:r?.id}):""]}),k.jsxs("div",{style:{flex:2,display:"flex",flexDirection:"column",minWidth:0,gap:16,maxHeight:"90vh"},children:[k.jsxs(ua,{className:"tab-view-flex",activeIndex:Re,onTabChange:T=>xe(T.index),panelContainerStyle:{padding:0,background:"#111"},children:[k.jsx(tr,{header:"Customizer",children:k.jsx(ju,{parameterSet:L,parameterValues:I,onChange:(T,D)=>$(H=>({...H,[T]:D}))})}),k.jsx(tr,{header:"EditorPage",style:{background:"#111"},children:k.jsx($l,{isInitializing:y,style:{width:"100%",height:"100%"},path:le(),homeFileProp:le(),hideTopBar:!0,markers:N,onSave:T=>he(),reloadKey:Le})}),k.jsx(tr,{header:"Logs & Error",children:k.jsxs("div",{style:{overflow:"auto"},children:[f&&k.jsx("pre",{style:{margin:0,padding:16,background:"transparent",color:"var(--color-danger)"},children:f}),v&&k.jsx("pre",{style:{margin:0,padding:16,background:"transparent"},children:v}),!f&&!v&&k.jsx("span",{children:"No logs or errors yet."})]})})]}),k.jsx(ds,{model:[{label:"Preview (F5)",icon:"pi pi-play",command:ke,disabled:j!==void 0},{label:"Render (F6)",icon:"pi pi-play",command:we,disabled:j!==void 0},...n?[{label:"Publish (F8)",icon:"pi pi-upload",command:ze,disabled:j!==void 0,visible:r===void 0||r?.owner_id===n?.id}]:[],{label:"Overwrite with remote source",icon:"pi pi-download color-danger",command:st,disabled:j!==void 0,visible:R}],style:{flex:0,background:"#111",padding:8,border:"none"},end:k.jsx("div",{style:{display:"flex",gap:8},children:j!==void 0&&k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{flex:1,alignContent:"center"},children:j}),k.jsx(ii,{style:{width:40,height:40},strokeWidth:"8"})]})})})]}),k.jsx(Ci,{header:"Publish Model",visible:q,onHide:De,footer:k.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[k.jsx(Yt,{label:"Cancel",icon:"pi pi-times",onClick:De,className:"p-button-text"}),k.jsx(Yt,{label:"Publish",icon:"pi pi-upload",onClick:Be,autoFocus:!0})]}),closable:!1,modal:!0,children:o!==void 0&&k.jsx(li,{model:{id:"",title:o.title,preview_url:ee??"",owner_id:n?.id||"",username:n?.user_metadata?.user_name||n?.user_metadata?.name||n?.email||"Unknown User",description:o.description,created_at:Fr(new Date),updated_at:Fr(new Date),likes:0,comments:0}})}),k.jsx(os,{ref:Z,position:"top-right"})]})}export{nf as default};
