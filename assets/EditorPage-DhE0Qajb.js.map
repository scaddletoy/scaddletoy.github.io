{"version":3,"mappings":"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AA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA,ECGTC,GAAuB,CAC3B,MACA,OACA,OACA,OACA,QACA,OACA,MACA,MACA,KACA,MACA,SACA,MACA,MACA,OACA,MACA,QACA,SACA,OACA,MACA,MACA,OACA,MACA,SACA,MACA,QACA,QACA,MACA,KACF,EACMC,GAAqB,CACzB,WACA,SACA,QACA,OACA,WACA,WACA,aACA,OACA,UACA,MACA,WACA,OACA,KACA,UACA,mBACA,eACA,SACA,YACA,SACA,SACA,aACA,SACA,aACA,aACA,SACA,SACA,SACA,SACA,QACA,QACA,SACA,SACA,UACA,YACA,QACA,MACA,QACA,SACF,EACMC,GAAkB,CACtB,QACA,OACA,KACA,QACA,YACA,MACA,MACA,MACA,KACA,OACA,OACA,MACF,EAEMC,GAAWC,IACR,CACL,sBAAuB,CACrB,CAAC,IAAK,GAAG,EACT,CAAC,IAAK,GAAG,EACT,CAAC,IAAK,GAAG,GAGX,YACE,uFACF,SAAU,CACR,YAAa,KACb,aAAc,CAAC,KAAM,IAAI,GAE3B,SAAU,CACR,CAAC,IAAK,GAAG,EACT,CAAC,IAAK,GAAG,EACT,CAAC,IAAK,GAAG,GAEX,aAAc,CACZ,CACE,WAAY,qCACZ,UAAW,YACX,OAAQ,CACN,aAAcA,EAAe,UAAU,aAAa,cACpD,WAAY,MACd,EAEF,CACE,WAAY,qCACZ,OAAQ,CACN,aAAcA,EAAe,UAAU,aAAa,KACpD,WAAY,MACd,EAEF,CACE,WAAY,2CACZ,OAAQ,CACN,aAAcA,EAAe,UAAU,aAAa,KACpD,WAAY,KACd,EAEF,CACE,WAAY,0BACZ,OAAQ,CACN,aAAcA,EAAe,UAAU,aAAa,KACpD,WAAY,EACd,CACF,EAEF,iBAAkB,CAChB,CAAE,KAAM,IAAK,MAAO,KACpB,CAAE,KAAM,IAAK,MAAO,KACpB,CAAE,KAAM,IAAK,MAAO,KACpB,CAAE,KAAM,IAAK,MAAO,IAAK,MAAO,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","names":["_assertThisInitialized","e","getChildMapping","children","mapFn","mapper","child","isValidElement","result","Children","c","mergeChildMappings","prev","next","getValueForKey","key","nextKeysPending","pendingKeys","prevKey","i","childMapping","nextKey","pendingNextKey","getProp","prop","props","getInitialChildMapping","onExited","cloneElement","getNextChildMapping","nextProps","prevChildMapping","nextChildMapping","hasPrev","hasNext","prevChild","isLeaving","values","obj","k","defaultProps","TransitionGroup","_React$Component","_inheritsLoose","context","_this","handleExited","_proto","_ref","firstRender","node","currentChildMapping","state","_extends","_this$props","Component","childFactory","_objectWithoutPropertiesLoose","contextValue","React","TransitionGroupContext","spawnOpenSCAD","invocation","streamsCallback","worker","terminate","AbortablePromise","resolve","reject","ignoredLogs","processMergedOutputs","outputs","opts","joinMergedOutputs","parseMergedOutputs","mergedOutputs","allLines","stderr","stdout","error","line","unmatchedLines","markers","warningCount","errorCount","addError","file","shiftSourceName","getLine","path","lineStr","m","_","warning","syntaxDelay","checkSyntax","turnIntoDelayableExecution","sargs","activePath","sources","outFile","job","streams","res","rej","parameterSet","content","renderDelay","formatValue","any","render","renderArgs","scadPath","isPreview","mountArchives","vars","features","extraArgs","renderFormat","prefixLines","source","s","actualRenderFormat","args","v","f","logText","output","filePath","filePathFragments","fileName","type","blob","n","t","r","ExclamationTriangleIcon","React.memo","React.forwardRef","inProps","ref","pti","IconBase","React.createElement","InfoCircleIcon","TimesCircleIcon","_arrayLikeToArray","a","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_toConsumableArray","_arrayWithHoles","_iterableToArrayLimit","l","u","o","_nonIterableRest","_slicedToArray","_typeof","toPrimitive","toPropertyKey","_defineProperty","styles","classes","classNames","PrimeReact","_ref2","severity","inlineStyles","_ref3","ToastBase","ComponentBase","ownKeys","_objectSpread","ToastMessage","mergeProps","useMergeProps","messageInfo","parentMetaData","_props$ptCallbacks","ptm","ptmo","cx","index","_messageInfo$message","summary","detail","closable","life","sticky","_className","style","_contentClassName","contentStyle","_icon","_closeIcon","pt","params","parentParams","_React$useState","React.useState","_React$useState2","focused","setFocused","_useTimeout","useTimeout","onClose","_useTimeout2","clearTimer","getPTOptions","options","onClick","event","DomHandler","onMouseEnter","onMouseLeave","createCloseIcon","buttonIconProps","icon","TimesIcon","closeIcon","IconUtils","closeButtonProps","ariaLabel","Ripple","createMessage","contentEl","ObjectUtils","iconProps","CheckIcon","messageIcon","textProps","summaryProps","detailProps","React.Fragment","message","messageProps","contentProps","messageIdx","Toast","React.useContext","PrimeReactContext","messagesState","setMessagesState","containerRef","React.useRef","metaData","ptCallbacks","useHandleStyle","show","assignIdentifiers","currentState","copy","messages","multipleMessages","acc","clear","ZIndexUtils","replace","previousMessagesState","remove","removeMessage","msg","onEntered","useUpdateEffect","useUnmountEffect","React.useImperativeHandle","createElement","rootProps","transitionProps","messageRef","React.createRef","CSSTransition","element","Portal","q","x","p","h","F","M","d","C","z","L","U","b","y","B","R","w","P","G","T","V","I","E","j","A","D","g","$","H","O","S","loadImage","src","img","imageToBlurhash","imageUrl","rgba","getImageThumbnail","parts","encodeBlurHash","blurHashToImage","hash","width","height","pixels","decodeBlurHash","canvas","ctx","imageData","maxSize","opaque","image","scale","resizedWidth","resizedHeight","PREDEFINED_ORBITS","spherePoint","theta","phi","euclideanDist","dx","dy","dz","radDist","getClosestPredefinedOrbitIndex","point","distances","radDistances","ptheta","pphi","dist","originalOrbit","name","ModelViewer","forwardRef","interactionPrompt","setInteractionPrompt","useState","modelViewerRef","useRef","axesViewerRef","toastRef","loadedUri","setLoadedUri","cachedImageHash","setCachedImageHash","loaded","uri","onLoad","useCallback","useEffect","otherRef","handleCameraChange","cameraOrbit","mouseDownSpherePoint","getSpherePoint","orbit","onMouseDown","onMouseUp","axesOrbit","modelOrbit","currentIndex","newIndex","onContextMenu","getWebpScreenshot","pngDataUrl","resetView","useImperativeHandle","jsxs","jsx","Fragment","CenteredSpinner","FieldsetBase","Fieldset","idState","setIdState","_React$useState3","_React$useState4","collapsedState","setCollapsedState","collapsed","elementRef","contentRef","headerId","contentId","_FieldsetBase$setMeta","isUnstyled","toggle","expand","collapse","useMountEffect","UniqueComponentId","onKeyDown","createContent","toggleableProps","createToggleIcon","togglerIconProps","PlusIcon","MinusIcon","toggleIcon","createLegendContent","legendTextProps","togglerProps","createLegend","legendProps","legendContent","legend","checked","CheckboxBase","Checkbox","focusedState","setFocusedState","_CheckboxBase$setMeta","inputRef","isChecked","_onChange","_props$onChange","_checked","value","eventData","_onFocus","_props$onFocus","_onBlur","_props$onBlur","React.useEffect","hasTooltip","otherProps","createInputElement","ariaProps","inputProps","createBoxElement","boxProps","checkboxIcon","Tooltip","handleIndex","vertical","horizontal","SliderBase","Slider","_props$value","_props$value2","sliderHandleClick","dragging","initX","initY","barWidth","barHeight","touchId","_useEventListener","useEventListener","onDrag","_useEventListener2","bindDocumentMouseMoveListener","unbindDocumentMouseMoveListener","_useEventListener3","onDragEnd","_useEventListener4","bindDocumentMouseUpListener","unbindDocumentMouseUpListener","_useEventListener5","_useEventListener6","bindDocumentTouchMoveListener","unbindDocumentTouchMoveListener","_useEventListener7","_useEventListener8","bindDocumentTouchEndListener","unbindDocumentTouchEndListener","_SliderBase$setMetaDa","sx","spin","dir","val","step","updateValue","onDragStart","updateDomData","setValue","newValue","_onMouseDown","_onTouchStart","_onKeyDown","onBarClick","_value","rect","trackTouch","_event$changedTouches","_event","handleValue","_trackTouch","pageX","pageY","oldValue","diff","parsedValue","createHandle","leftValue","bottomValue","handleProps","createRangeSlider","handleValueStart","handleValueEnd","rangeStartHandle","rangeEndHandle","rangeSliderWidth","rangeSliderPosition","rangeStyle","rangeProps","createSingleSlider","handle","CustomizerPanel","groupedParameters","param","groups","skipSingleRootGroup","group","ParameterInput","handleChange","resetVisible","Dropdown","InputNumber","InputText","newArray","isFilled","InputTextareaBase","InputTextarea","cachedScrollHeight","_InputTextareaBase$se","onFocus","resize","onBlur","onKeyUp","KeyFilter","onBeforeInput","onPaste","onInput","target","initial","inputEl","isVisible","React.useMemo","PanelBase","Panel","_PanelBase$setMetaDat","buttonId","createHeader","header","icons","togglerElement","titleProps","titleElement","iconsProps","iconsElement","headerProps","defaultContentOptions","createFooter","footer","footerProps","toggleableContentProps","CommentsPanel","modelId","onToggle","userContext","useUserContext","comments","setComments","myComment","setMyComment","loading","setLoading","posting","setPosting","setError","loadComments","data","SupabaseService","handleAddComment","formatDateTime","formatDate","Button","sanitizeAndLinkify","stripComments","parseOpenSCAD","skipPrivates","withoutComments","functions","modules","includes","uses","paramsStr","optBody","paramStr","am","paramName","defaultValue","builtinSignatures","builtInFunctionNames","builtInModuleNames","builtInVarNames","getConf","monacoInstance","language","openscadLanguage","makeFunctionoidSuggestion","mod","argSnippets","namedArgs","collectingPosArgs","insertText","builtinCompletions","keywordSnippets","cleanupVariables","snippet","buildOpenSCADCompletionItemProvider","fs","workingDir","zipArchives","parsedFiles","toAbsolutePath","allSymlinks","deployed","symlinks","readFile","bytes","builtinsPath","builtinsDefs","getParsed","addBuiltins","mergeDefinitions","isUse","defs","handleInclude","otherPath","found","option","otherSrc","sub","ownDefs","model","position","token","word","offset","text","previous","includeMatch","prefix","folder","filePrefix","folderPrefix","folderName","files","join","suggestions","isFolder","completion","inputFile","parsed","previousWithoutComments","statementMatch","start","mapObject","allWithoutComments","named","registerOpenSCADLanguage","_toPropertyKey","_objectSpread2","_objectWithoutProperties","_toPrimitive","object","enumerableOnly","keys","symbols","sym","compose","_len","fns","_key","curry","fn","curried","_len2","_key2","_len3","nextArgs","_key3","isObject","isEmpty","isFunction","hasOwnProperty","property","validateChanges","changes","errorHandler","field","validateSelector","selector","validateHandler","handler","_handler","validateInitial","throwError","errorMessages","validators","create","didUpdate","didStateUpdate","update","updateState","validate","getChanges","extractChanges","getState","setState","causedChanges","_handler$field","config","validateConfig","informAboutDeprecation","merge","CANCELATION_MESSAGE","makeCancelable","promise","hasCanceled_","wrappedPromise","_excluded","_state$create","config$1","_state$create2","globalConfig","_validators$config","monaco","init","isInitialized","wrapperPromise","storeMonacoInstance","injectScripts","getMonacoLoaderScript","configureLoader","script","createScript","loaderScript","require","__getMonacoInstance","_ref4","loader","le","ae","Y","Me","me","Z","Ee","Q","ee","ye","Ce","xe","he","Re","ge","De","be","te","Oe","N","re","Se","oe","ne","ke","ie","Te","He","ve","Ue","se","Ve","ue","Ne","pe","X","_e","W","J","K","We","fe","de","ze","Ft","_arrayLikeToArray$1","_unsupportedIterableToArray$1","overlayVisibleState","isValueEmpty","getLabel","TreeSelectBase","ownKeys$1","_objectSpread$1","TreeSelectPanel","wrapperStyle","panelProps","wrapperProps","_createForOfIteratorHelper","_n","TreeSelect","setOverlayVisibleState","_React$useState5","_React$useState6","expandedKeysState","setExpandedKeysState","_useDebounce","useDebounce","_useDebounce2","filterValue","filterValueState","setFilterValueState","overlayRef","filterInputRef","focusInputRef","triggerRef","selfChange","treeRef","firstHiddenFocusableElementOnOverlay","lastHiddenFocusableElementOnOverlay","focusToTree","listId","expandedKeys","filteredValue","isSingleSelectionMode","isCheckboxSelectionMode","_TreeSelectBase$setMe","filterOptions","onFilterInputChange","resetFilter","_useOverlayListener","useOverlayListener","valid","hide","alignOverlay","_useOverlayListener2","bindOverlayListener","unbindOverlayListener","selectedNodes","onInputFocus","onInputBlur","onSelectionChange","onClearIconKeyDown","onNodeSelect","onNodeUnselect","onNodeToggle","onFilterValueChange","onOverlayClick","OverlayService","onFirstHiddenFocus","focusableEl","onLastHiddenFocus","onHeaderElementKeyDown","isHideButton","setFocusToFocusableFirstNode","onEscapeKey","onArrowDownKey","onEnterKey","onTabKey","pressedInInputText","hasFocusableElements","onOverlayEnter","scrollInView","onOverlayEntered","onOverlayExit","onOverlayExited","highlightItem","_findSelectedNodes","isSelected","_iterator","_step","childNode","err","_iterator2","_step2","_childNode","updateTreeState","_updateTreeBranchState","_treeRef$current","treeNodeEl","focusedElement","item","expandPath","_iterator3","_step3","_iterator4","_step4","_childNode2","_expandedKeys","_iterator5","_step5","getSelectedNodes","createKeyboardHelper","hiddenInputWrapperProps","hiddenInputProps","createLabel","tokenProps","tokenLabelProps","labelContainerProps","labelProps","createDropdownIcon","triggerProps","triggerIconProps","ChevronDownIcon","dropdownIcon","createClearIcon","clearIconProps","localeOption","Tree","createFilterElement","filterContainerProps","filterProps","filterIconProps","SearchIcon","filterIcon","filterContent","filterElement","closeIconProps","closeElement","defaultOptions","firstHiddenFocusableElementOnOverlayProps","lastHiddenFocusableElementOnOverlayProps","keyboardHelper","labelElement","clearIcon","useDebounceFn","delay","timeoutRef","_ref5","submenu","_ref6","_ref7","MenuBase","Menu","visibleState","setVisibleState","focusedOptionIndex","setFocusedOptionIndex","_React$useState7","_React$useState8","selectedOptionIndex","setSelectedOptionIndex","_React$useState9","_React$useState10","_MenuBase$setMetaData","getMenuItemPTOptions","menuContext","menuRef","listRef","targetRef","isCloseOnEscape","popupMenuDisplayOrder","useDisplayOrder","useGlobalOnEscapeKey","ESC_KEY_HANDLING_PRIORITIES","onPanelClick","onItemClick","onItemMouseMove","onListFocus","changeFocusedOptionIndex","onListBlur","currentTarget","relatedTarget","onListKeyDown","onArrowUpKey","onHomeKey","onEndKey","onSpaceKey","optionIndex","findNextOptionIndex","findPrevOptionIndex","anchorElement","links","matchedOptionIndex","link","order","focusedOptionId","onEnter","onExit","createSubmenu","items","createMenuItem","submenuHeaderProps","createSeparator","separatorProps","parentId","linkClassName","iconClassName","label","actionProps","menuitemProps","createItem","createMenu","menuitems","menuProps","ZenMonacoPrime","editor","setEditor","setMonacoInstance","setFiles","currentFile","setCurrentFile","isLoading","setIsLoading","initialFileContent","setInitialFileContent","setExpandedKeys","homeFile","setHome","isSmall","setIsSmall","showError","buildTreeSelectNodes","nodes","entries","fs.readdirSync","entry","fullPath","fs.existsSync","fs.statSync","refreshFiles","allEntries","handleNewFile","fs.mkdirSync","fs.writeFileSync","handleRenameFile","fs.readFileSync","fs.unlinkSync","handleDeleteFile","debouncedSave","fileContent","handleEditorChange","onMount","handleResize","treeValue","menuItems","selectedKey","Editor","EventDispatcher","listener","listeners","listenerArray","array","GraphEdge","_name","_parent","_child","_attributes","Graph","parentSet","edge","childSet","filter","attributes","parent","RefList","refs","RefSet","RefMap","map","$attributes","$immutableKeys","GraphNode","graph","defaultAttributes","other","prevValue","nextValue","attribute","refAttributes","prevRef","metadata","refMap","VERSION","GLB_BUFFER","PropertyType","VertexLayout","BufferViewUsage$1","BufferViewUsage","TextureChannel","Format","ComponentTypeToTypedArray","BufferUtils","dataURI","byteString","ia","isBase64","arrays","totalByteLength","byteOffset","srcArray","paddingByte","paddedLength","dstArray","byteLength","view","JPEGImageUtils","validateJPEGBuffer","_buffer","PNGImageUtils","ImageUtils","mimeType","impl","buffer","uncompressedBytes","channels","resolution","extension","FileUtils","ARRAY_TYPE","out","length","vec","stride","count","arg","NULL_DOMAIN","HTTPUtils","base","stack","isPlainObject","ctor","prot","_Logger","Verbosity","Logger","verbosity","determinant","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","multiply","b0","b1","b2","b3","getScaling","mat","m11","m12","m13","m21","m22","m23","m31","m32","m33","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","MathUtils","tolerance","min","max","componentType","srcMat","dstTranslation","dstRotation","dstScale","sy","sz","_m1","invSX","invSY","invSZ","srcTranslation","srcRotation","srcScale","dstMat","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","equalsRef","refA","refB","equalsRefSet","refSetA","refSetB","refValuesA","refValuesB","equalsRefMap","refMapA","refMapB","keysA","keysB","equalsArray","equalsObject","_a","_b","numKeysA","numKeysB","valueA","valueB","isArray","ALPHABET","UNIQUE_RETRIES","ID_LENGTH","previousIDs","generateOne","rtn","uuid","retries","id","COPY_IDENTITY","EMPTY_SET","Property","extras","PropertyClass","thisValue","otherValue","subkey","skip","ExtensibleProperty","extensionProperty","Accessor","normalized","elementSize","sparse","arrayToComponentType","Animation","channel","sampler","AnimationChannel","targetPath","targetNode","AnimationSampler","interpolation","input","Buffer$1","Camera","znear","zfar","aspectRatio","yfov","xmag","ymag","ExtensionProperty","TextureInfo","texCoord","magFilter","minFilter","wrapS","wrapT","Material","doubleSided","alpha","baseColorFactor","alphaMode","alphaCutoff","texture","emissiveFactor","strength","factor","Mesh","primitive","weights","Node","translation","rotation","matrix","ancestors","ancestor","worldMatrix","parentNode","mesh","camera","skin","Primitive","indices","semantic","accessor","material","mode","PrimitiveTarget","Scene","Skin","skeleton","inverseBindMatrices","joint","Texture","Root","extensionName","otherExtension","defaultScene","Document","logger","_other","transforms","transform","ext","ReaderContext","jsonDoc","textureInfo","textureInfoDef","textureDef","samplerDef","DEFAULT_OPTIONS","SUPPORTED_PREREAD_TYPES","GLTFReader","_options","json","document","assetDef","asset","extensionsUsed","extensionsRequired","Extension","unsupportedHooks","bufferDefs","bufferDef","bufferViewDefs","bufferViewDef","resource","accessorDefs","accessorDef","getAccessorArray","imageDefs","textureDefs","imageDef","bufferData","materialDefs","materialDef","pbrDef","meshDefs","meshDef","primitiveDef","targetNames","targetDef","targetIndex","targetName","accessorIndex","cameraDefs","cameraDef","perspectiveDef","orthoDef","nodeDefs","nodeDef","skinDefs","skinDef","nodeIndex","childIndex","animationDefs","animationDef","animation","samplers","channelDef","sceneDefs","sceneDef","scene","hasSparseValues","isZeroFilled","getSparseArray","getInterleavedArray","bufferView","TypedArray","componentSize","accessorByteOffset","byteStride","elementStride","sparseDef","indicesDef","valuesDef","BufferViewTarget","WriterContext","_doc","root","numBuffers","numImages","UniqueURIGenerator","getSlot","samplerKey","textureKey","def","throwOnConflict","resources","conflictMessage","cachedUsage","usage","prevUsage","multiple","basename","UNSIGNED_INT","UNSIGNED_SHORT","UNSIGNED_BYTE","SUPPORTED_PREWRITE_TYPES","GLTFWriter","doc","extensionsRegistered","concatAccessors","accessors","bufferIndex","bufferByteOffset","bufferViewTarget","buffers","accessorArray","bufferViewData","interleaveAccessors","vertexCount","vertexByteOffset","viewByteOffset","concatSparseAccessors","sparseData","maxIndex","needSparseWarning","el","il","ValueArray","IndexArray","IndexComponentType","indicesBufferViewDef","indicesBufferViewIndex","valuesBufferViewDef","valuesBufferViewIndex","textureIndex","groupByParent","accessorParents","uniqueParents","parentToIndex","accessorGroups","bufferByteLength","groupAccessors","_buffer2","_buffer3","_buffer4","_buffer5","imagePadding","samplerIndexMap","samplerIndex","clean","unused","ChunkType","PlatformIO","extensions","dependencies","layout","isGLB","glb","isExternalBuffer","isExternalImage","jsonText","jsonChunkData","jsonChunkHeader","jsonChunk","binBuffer","binChunkData","binChunkHeader","binChunk","images","pendingResources","resolveResource","resourceUUID","jsonByteOffset","jsonByteLength","binByteOffset","binByteLength","jsonDocument","NodeIO","_fetch","_fetchConfig","__vitePreload","allow","response","jsonContent","batch","listBatches","resourceURI","resourcePath","batchSize","batches","DEFAULT_FACE_COLOR","colorFromHex","hex","hexStr","createPrimitive","positions","colors","prim","getGeom","addedVertices","verticesAdded","addVertex","vertex","face","vertices","exportGlb","isLightMode","oldColors","newColors","replacedColors","facesByColor","faces","colorIndex","color","defaultScad","parseOff","lines","counts","currentLine","numVertices","numFaces","colorMap","numVerts","colorKey","calculateNormal","v1","v2","v3","ux","uy","uz","vx","vy","vz","exportStl","stl","i1","i2","i3","EditorPage","viewModelId","useParams","userPrefs","setUserPrefs","useUserPreferences","user","isReadonly","getHashQueryParam","viewModel","setViewModel","editModel","setEditModel","currentModelId","glbFileUrl","setGlbFileUrl","offFileUrl","setOffFileUrl","stlFileUrl","setStlFileUrl","runningTaskName","setRunningTaskName","logs","setLogs","largePreview","setLargePreview","setIsLightMode","outdated","setIsOutdated","setParameterSet","setMarkers","parameterValues","setParameterValues","publishDialogVisible","setPublishDialogVisible","publishPreviewDataUrl","setPublishPreviewDataUrl","activeTabIndex","setActiveTabIndex","viewerRef","hasInitialized","editorReloadKey","setEditorReloadKey","getIndexScadFilePath","initFiles","viewModelInner","indexScadFilePath","writeFileSafe","localFileContent","readFileSafe","hashSha1","customizer","renderCreator","runOpenSCADRender","ps","glbFile","offData","preview","debouncedPreview","handlePublish","screenshot","handleConfirmPublish","editorContent","handleCancelPublish","handleFetchRemoteFile","modelSource","fetchModelDetails","createEditorZenFS","downloadUrl","url","filename","downloadStl","offText","stlBlob","getTitle","handleKeyDown","handleOnSave","showEditModelDetails","Menubar","ModelStats","ProgressSpinner","Dialog","ModelCard"],"ignoreList":[0,1,2,6,7,8,9,10,13,14,15,17,18,25,26,27,28,29,30,31,32,33,34,35,36,38,40,41],"sources":["../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../node_modules/react-transition-group/esm/utils/ChildMapping.js","../../node_modules/react-transition-group/esm/TransitionGroup.js","../../src/services/openscad-wasm-runner/openscad-runner.ts","../../src/services/openscad-wasm-runner/output-parser.ts","../../src/services/openscad-wasm-runner/actions.ts","../../node_modules/primereact/icons/exclamationtriangle/index.esm.js","../../node_modules/primereact/icons/infocircle/index.esm.js","../../node_modules/primereact/icons/timescircle/index.esm.js","../../node_modules/primereact/toast/toast.esm.js","../../node_modules/blurhash/dist/esm/index.js","../../src/services/io/image_hashes.ts","../../src/components/ModelViewer.tsx","../../node_modules/primereact/fieldset/fieldset.esm.js","../../node_modules/primereact/checkbox/checkbox.esm.js","../../node_modules/primereact/slider/slider.esm.js","../../src/components/CustomizerPanel.tsx","../../node_modules/primereact/inputtextarea/inputtextarea.esm.js","../../node_modules/primereact/panel/panel.esm.js","../../src/components/CommentsPanel.tsx","../../src/services/monaco-language/openscad-pseudoparser.ts","../../src/services/monaco-language/openscad-builtins.ts","../../src/services/monaco-language/openscad-language.ts","../../src/services/monaco-language/openscad-completions.ts","../../src/services/monaco-language/openscad-register-language.ts","../../node_modules/@monaco-editor/loader/lib/es/_virtual/_rollupPluginBabelHelpers.js","../../node_modules/state-local/lib/es/state-local.js","../../node_modules/@monaco-editor/loader/lib/es/config/index.js","../../node_modules/@monaco-editor/loader/lib/es/utils/curry.js","../../node_modules/@monaco-editor/loader/lib/es/utils/isObject.js","../../node_modules/@monaco-editor/loader/lib/es/validators/index.js","../../node_modules/@monaco-editor/loader/lib/es/utils/compose.js","../../node_modules/@monaco-editor/loader/lib/es/utils/deepMerge.js","../../node_modules/@monaco-editor/loader/lib/es/utils/makeCancelable.js","../../node_modules/@monaco-editor/loader/lib/es/loader/index.js","../../node_modules/@monaco-editor/react/dist/index.mjs","../../node_modules/primereact/treeselect/treeselect.esm.js","../../src/react-utils.ts","../../node_modules/primereact/menu/menu.esm.js","../../src/components/ZenMonacoPrime.tsx","../../node_modules/property-graph/dist/property-graph.modern.js","../../node_modules/@gltf-transform/core/dist/index.modern.js","../../src/services/io/common.ts","../../src/services/io/export_glb.ts","../../src/components/default-scad.ts","../../src/services/io/import_off.ts","../../src/services/io/export_stl.ts","../../src/pages/EditorPage.tsx"],"sourcesContent":["function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","import { Children, cloneElement, isValidElement } from 'react';\n/**\n * Given `this.props.children`, return an object mapping key to child.\n *\n * @param {*} children `this.props.children`\n * @return {object} Mapping of key to child\n */\n\nexport function getChildMapping(children, mapFn) {\n  var mapper = function mapper(child) {\n    return mapFn && isValidElement(child) ? mapFn(child) : child;\n  };\n\n  var result = Object.create(null);\n  if (children) Children.map(children, function (c) {\n    return c;\n  }).forEach(function (child) {\n    // run the map function here instead so that the key is the computed one\n    result[child.key] = mapper(child);\n  });\n  return result;\n}\n/**\n * When you're adding or removing children some may be added or removed in the\n * same render pass. We want to show *both* since we want to simultaneously\n * animate elements in and out. This function takes a previous set of keys\n * and a new set of keys and merges them with its best guess of the correct\n * ordering. In the future we may expose some of the utilities in\n * ReactMultiChild to make this easy, but for now React itself does not\n * directly have this concept of the union of prevChildren and nextChildren\n * so we implement it here.\n *\n * @param {object} prev prev children as returned from\n * `ReactTransitionChildMapping.getChildMapping()`.\n * @param {object} next next children as returned from\n * `ReactTransitionChildMapping.getChildMapping()`.\n * @return {object} a key set that contains all keys in `prev` and all keys\n * in `next` in a reasonable order.\n */\n\nexport function mergeChildMappings(prev, next) {\n  prev = prev || {};\n  next = next || {};\n\n  function getValueForKey(key) {\n    return key in next ? next[key] : prev[key];\n  } // For each key of `next`, the list of keys to insert before that key in\n  // the combined list\n\n\n  var nextKeysPending = Object.create(null);\n  var pendingKeys = [];\n\n  for (var prevKey in prev) {\n    if (prevKey in next) {\n      if (pendingKeys.length) {\n        nextKeysPending[prevKey] = pendingKeys;\n        pendingKeys = [];\n      }\n    } else {\n      pendingKeys.push(prevKey);\n    }\n  }\n\n  var i;\n  var childMapping = {};\n\n  for (var nextKey in next) {\n    if (nextKeysPending[nextKey]) {\n      for (i = 0; i < nextKeysPending[nextKey].length; i++) {\n        var pendingNextKey = nextKeysPending[nextKey][i];\n        childMapping[nextKeysPending[nextKey][i]] = getValueForKey(pendingNextKey);\n      }\n    }\n\n    childMapping[nextKey] = getValueForKey(nextKey);\n  } // Finally, add the keys which didn't appear before any key in `next`\n\n\n  for (i = 0; i < pendingKeys.length; i++) {\n    childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n  }\n\n  return childMapping;\n}\n\nfunction getProp(child, prop, props) {\n  return props[prop] != null ? props[prop] : child.props[prop];\n}\n\nexport function getInitialChildMapping(props, onExited) {\n  return getChildMapping(props.children, function (child) {\n    return cloneElement(child, {\n      onExited: onExited.bind(null, child),\n      in: true,\n      appear: getProp(child, 'appear', props),\n      enter: getProp(child, 'enter', props),\n      exit: getProp(child, 'exit', props)\n    });\n  });\n}\nexport function getNextChildMapping(nextProps, prevChildMapping, onExited) {\n  var nextChildMapping = getChildMapping(nextProps.children);\n  var children = mergeChildMappings(prevChildMapping, nextChildMapping);\n  Object.keys(children).forEach(function (key) {\n    var child = children[key];\n    if (!isValidElement(child)) return;\n    var hasPrev = (key in prevChildMapping);\n    var hasNext = (key in nextChildMapping);\n    var prevChild = prevChildMapping[key];\n    var isLeaving = isValidElement(prevChild) && !prevChild.props.in; // item is new (entering)\n\n    if (hasNext && (!hasPrev || isLeaving)) {\n      // console.log('entering', key)\n      children[key] = cloneElement(child, {\n        onExited: onExited.bind(null, child),\n        in: true,\n        exit: getProp(child, 'exit', nextProps),\n        enter: getProp(child, 'enter', nextProps)\n      });\n    } else if (!hasNext && hasPrev && !isLeaving) {\n      // item is old (exiting)\n      // console.log('leaving', key)\n      children[key] = cloneElement(child, {\n        in: false\n      });\n    } else if (hasNext && hasPrev && isValidElement(prevChild)) {\n      // item hasn't changed transition states\n      // copy over the last transition props;\n      // console.log('unchanged', key)\n      children[key] = cloneElement(child, {\n        onExited: onExited.bind(null, child),\n        in: prevChild.props.in,\n        exit: getProp(child, 'exit', nextProps),\n        enter: getProp(child, 'enter', nextProps)\n      });\n    }\n  });\n  return children;\n}","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TransitionGroupContext from './TransitionGroupContext';\nimport { getChildMapping, getInitialChildMapping, getNextChildMapping } from './utils/ChildMapping';\n\nvar values = Object.values || function (obj) {\n  return Object.keys(obj).map(function (k) {\n    return obj[k];\n  });\n};\n\nvar defaultProps = {\n  component: 'div',\n  childFactory: function childFactory(child) {\n    return child;\n  }\n};\n/**\n * The `<TransitionGroup>` component manages a set of transition components\n * (`<Transition>` and `<CSSTransition>`) in a list. Like with the transition\n * components, `<TransitionGroup>` is a state machine for managing the mounting\n * and unmounting of components over time.\n *\n * Consider the example below. As items are removed or added to the TodoList the\n * `in` prop is toggled automatically by the `<TransitionGroup>`.\n *\n * Note that `<TransitionGroup>`  does not define any animation behavior!\n * Exactly _how_ a list item animates is up to the individual transition\n * component. This means you can mix and match animations across different list\n * items.\n */\n\nvar TransitionGroup = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(TransitionGroup, _React$Component);\n\n  function TransitionGroup(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this;\n\n    var handleExited = _this.handleExited.bind(_assertThisInitialized(_this)); // Initial children should all be entering, dependent on appear\n\n\n    _this.state = {\n      contextValue: {\n        isMounting: true\n      },\n      handleExited: handleExited,\n      firstRender: true\n    };\n    return _this;\n  }\n\n  var _proto = TransitionGroup.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.mounted = true;\n    this.setState({\n      contextValue: {\n        isMounting: false\n      }\n    });\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.mounted = false;\n  };\n\n  TransitionGroup.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, _ref) {\n    var prevChildMapping = _ref.children,\n        handleExited = _ref.handleExited,\n        firstRender = _ref.firstRender;\n    return {\n      children: firstRender ? getInitialChildMapping(nextProps, handleExited) : getNextChildMapping(nextProps, prevChildMapping, handleExited),\n      firstRender: false\n    };\n  } // node is `undefined` when user provided `nodeRef` prop\n  ;\n\n  _proto.handleExited = function handleExited(child, node) {\n    var currentChildMapping = getChildMapping(this.props.children);\n    if (child.key in currentChildMapping) return;\n\n    if (child.props.onExited) {\n      child.props.onExited(node);\n    }\n\n    if (this.mounted) {\n      this.setState(function (state) {\n        var children = _extends({}, state.children);\n\n        delete children[child.key];\n        return {\n          children: children\n        };\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        Component = _this$props.component,\n        childFactory = _this$props.childFactory,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"component\", \"childFactory\"]);\n\n    var contextValue = this.state.contextValue;\n    var children = values(this.state.children).map(childFactory);\n    delete props.appear;\n    delete props.enter;\n    delete props.exit;\n\n    if (Component === null) {\n      return /*#__PURE__*/React.createElement(TransitionGroupContext.Provider, {\n        value: contextValue\n      }, children);\n    }\n\n    return /*#__PURE__*/React.createElement(TransitionGroupContext.Provider, {\n      value: contextValue\n    }, /*#__PURE__*/React.createElement(Component, props, children));\n  };\n\n  return TransitionGroup;\n}(React.Component);\n\nTransitionGroup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * `<TransitionGroup>` renders a `<div>` by default. You can change this\n   * behavior by providing a `component` prop.\n   * If you use React v16+ and would like to avoid a wrapping `<div>` element\n   * you can pass in `component={null}`. This is useful if the wrapping div\n   * borks your css styles.\n   */\n  component: PropTypes.any,\n\n  /**\n   * A set of `<Transition>` components, that are toggled `in` and out as they\n   * leave. the `<TransitionGroup>` will inject specific transition props, so\n   * remember to spread them through if you are wrapping the `<Transition>` as\n   * with our `<Fade>` example.\n   *\n   * While this component is meant for multiple `Transition` or `CSSTransition`\n   * children, sometimes you may want to have a single transition child with\n   * content that you want to be transitioned out and in when you change it\n   * (e.g. routes, images etc.) In that case you can change the `key` prop of\n   * the transition child as you change its content, this will cause\n   * `TransitionGroup` to transition the child out and back in.\n   */\n  children: PropTypes.node,\n\n  /**\n   * A convenience prop that enables or disables appear animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  appear: PropTypes.bool,\n\n  /**\n   * A convenience prop that enables or disables enter animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  enter: PropTypes.bool,\n\n  /**\n   * A convenience prop that enables or disables exit animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  exit: PropTypes.bool,\n\n  /**\n   * You may need to apply reactive updates to a child as it is exiting.\n   * This is generally done by using `cloneElement` however in the case of an exiting\n   * child the element has already been removed and not accessible to the consumer.\n   *\n   * If you do need to update a child as it leaves you can provide a `childFactory`\n   * to wrap every child, even the ones that are leaving.\n   *\n   * @type Function(child: ReactElement) -> ReactElement\n   */\n  childFactory: PropTypes.func\n} : {};\nTransitionGroup.defaultProps = defaultProps;\nexport default TransitionGroup;","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport { AbortablePromise } from '../../utils.ts';\n\nexport type OpenSCADFile = {\n  // If path ends w/ /, it's a directory, and URL should contain a ZIP file that can be mounted\n  path: string;\n  content?: string;\n};\n\nexport type OpenSCADInvocation = {\n  taskName: string;\n  mountArchives: boolean;\n  files?: OpenSCADFile[];\n  args: string[];\n  outputPaths?: string[];\n  id?: string;\n};\n\nexport type OpenSCADInvocationResults = {\n  exitCode?: number;\n  error?: string;\n  outputs?: [string, string][];\n  mergedOutputs: MergedOutputs;\n  elapsedMillis: number;\n};\n\nexport type MergedOutputs = { stdout?: string; stderr?: string; error?: string }[];\nexport type ProcessStreams = { stderr: string } | { stdout: string };\nexport type OpenSCADInvocationCallback = { result: OpenSCADInvocationResults } | ProcessStreams;\n\nexport function spawnOpenSCAD(\n  invocation: OpenSCADInvocation,\n  streamsCallback: (ps: ProcessStreams) => void,\n): AbortablePromise<OpenSCADInvocationResults> {\n  let worker: Worker | null;\n  let rejection: (err: any) => void;\n\n  invocation.id =\n    'WORKER.' + invocation.taskName + '.' + Math.random().toString(36).substring(2) + ' |';\n\n  function terminate() {\n    if (!worker) {\n      return;\n    }\n    worker.terminate();\n    worker = null;\n  }\n\n  return AbortablePromise<OpenSCADInvocationResults>(\n    (resolve: (result: OpenSCADInvocationResults) => void, reject: (error: any) => void) => {\n      // console.log('OpenSCAD Runner | Spawning worker with invocation: ', invocation);\n      worker = new Worker(new URL('./openscad-worker.ts', import.meta.url), { type: 'module' });\n      rejection = reject;\n      worker.onmessage = (e: MessageEvent<OpenSCADInvocationCallback>) => {\n        if ('result' in e.data) {\n          resolve(e.data.result);\n          terminate();\n        } else {\n          streamsCallback(e.data);\n        }\n      };\n      worker.postMessage(invocation);\n      return () => {\n        terminate();\n      };\n    },\n  );\n}\n","import type * as monaco from 'monaco-editor';\nimport { MergedOutputs } from './openscad-runner.ts';\n\nconst ignoredLogs = new Set(['Could not initialize localization.']);\n\ntype MergedOutputsOptions = {\n  shiftSourceLines?: {\n    sourcePath: string;\n    skipLines: number;\n  };\n};\n\nexport const processMergedOutputs = (outputs: MergedOutputs, opts: MergedOutputsOptions) => ({\n  logText: joinMergedOutputs(outputs, opts),\n  markers: parseMergedOutputs(outputs, opts),\n});\n\nexport function joinMergedOutputs(mergedOutputs: MergedOutputs, opts: MergedOutputsOptions) {\n  const allLines: string[] = [];\n  for (const { stderr, stdout, error } of mergedOutputs) {\n    const line = stderr ?? stdout ?? `EXCEPTION: ${error}`;\n    if (ignoredLogs.has(line)) {\n      continue;\n    }\n    allLines.push(line);\n  }\n\n  return allLines.join('\\n');\n}\n\nexport function parseMergedOutputs(\n  mergedOutputs: MergedOutputs,\n  opts: MergedOutputsOptions,\n): monaco.editor.IMarkerData[] {\n  let unmatchedLines: string[] = [];\n\n  const markers: any[] = [];\n  let warningCount = 0,\n    errorCount = 0;\n  const addError = (error: string, file: string, line: number) => {\n    markers.push({\n      startLineNumber: Number(line),\n      startColumn: 1,\n      endLineNumber: Number(line),\n      endColumn: 1000,\n      message: error,\n      severity: 8, // monacoInstance.MarkerSeverity.Error\n    });\n  };\n  const shiftSourceName = opts.shiftSourceLines && opts.shiftSourceLines.sourcePath;\n  const getLine = (path: string, lineStr: string) => {\n    const line = Number(lineStr);\n    if (shiftSourceName && path.endsWith(shiftSourceName)) {\n      return line - opts.shiftSourceLines!.skipLines;\n    } else {\n      return line;\n    }\n  };\n  for (const { stderr, stdout, error } of mergedOutputs) {\n    if (stderr) {\n      if (stderr.startsWith('ERROR:')) errorCount++;\n      if (stderr.startsWith('WARNING:')) warningCount++;\n\n      let m = /^ERROR: Parser error in file \"([^\"]+)\", line (\\d+): (.*)$/.exec(stderr);\n      if (m) {\n        const [_, file, line, error] = m;\n        addError(error, file, getLine(file, line));\n        continue;\n      }\n\n      m = /^ERROR: Parser error: (.*?) in file ([^\",]+), line (\\d+)$/.exec(stderr);\n      if (m) {\n        const [_, error, file, line] = m;\n        addError(error, file, getLine(file, line));\n        continue;\n      }\n\n      m = /^WARNING: (.*?),? in file ([^,]+), line (\\d+)\\.?/.exec(stderr);\n      if (m) {\n        const [_, warning, file, line] = m;\n        markers.push({\n          startLineNumber: getLine(file, line),\n          startColumn: 1,\n          endLineNumber: getLine(file, line),\n          endColumn: 1000,\n          message: warning,\n          severity: 4, // monacoInstance.MarkerSeverity.Warning,\n        });\n        continue;\n      }\n    }\n    unmatchedLines.push(stderr ?? stdout ?? `EXCEPTION: ${error}`);\n  }\n  if (errorCount || warningCount)\n    unmatchedLines = [`${errorCount} errors, ${warningCount} warnings!`, '', ...unmatchedLines];\n\n  // logsElement.innerText = unmatchedLines.join(\"\\n\")\n\n  return markers;\n}\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport type * as monaco from 'monaco-editor';\nimport { OpenSCADFile, ProcessStreams, spawnOpenSCAD } from './openscad-runner.ts';\nimport { processMergedOutputs } from './output-parser.ts';\nimport { AbortablePromise, turnIntoDelayableExecution } from '../../utils.ts';\n\nconst syntaxDelay = 300;\n\nexport const VALID_RENDER_FORMATS = {\n  off: true,\n  svg: true,\n};\nexport const VALID_EXPORT_FORMATS_2D = {\n  svg: true,\n  dxf: true,\n};\nexport const VALID_EXPORT_FORMATS_3D = {\n  'stl': true,\n  'off': true,\n  'glb': true,\n  '3mf': true,\n};\n\nexport type ParameterOption = {\n  name: string;\n  value: number | string;\n};\n\nexport type BaseParameter = {\n  caption: string;\n  group: string;\n  name: string;\n  type: 'number' | 'string' | 'boolean';\n};\n\nexport type NumberParameter = BaseParameter & {\n  type: 'number';\n  initial: number;\n  min?: number;\n  max?: number;\n  step?: number;\n  options?: ParameterOption[];\n};\n\nexport type StringParameter = BaseParameter & {\n  type: 'string';\n  initial: string;\n  options?: ParameterOption[];\n};\n\nexport type BooleanParameter = BaseParameter & {\n  type: 'boolean';\n  initial: boolean;\n};\n\nexport type VectorParameter = BaseParameter & {\n  type: 'number';\n  initial: number[];\n  min: number;\n  max: number;\n  step: number;\n};\n\nexport type Parameter = NumberParameter | StringParameter | BooleanParameter | VectorParameter;\n\nexport type ParameterSet = {\n  parameters: Parameter[];\n  title: string;\n};\n\ntype SyntaxCheckArgs = {\n  activePath: string;\n  sources: OpenSCADFile[];\n};\ntype SyntaxCheckOutput = {\n  logText: string;\n  markers: monaco.editor.IMarkerData[];\n  parameterSet?: ParameterSet;\n};\nexport const checkSyntax = turnIntoDelayableExecution(syntaxDelay, (sargs: SyntaxCheckArgs) => {\n  const { activePath, sources } = sargs;\n\n  const content = '$preview=true;\\n' + sources[0].content;\n\n  const outFile = 'out.json';\n  const job = spawnOpenSCAD(\n    {\n      taskName: 'checkSyntax',\n      mountArchives: true,\n      files: sources,\n      args: [activePath, '-o', outFile, '--export-format=param'],\n      outputPaths: [outFile],\n    },\n    (streams) => {},\n  );\n\n  return AbortablePromise<SyntaxCheckOutput>((res, rej) => {\n    (async () => {\n      try {\n        const result = await job;\n\n        let parameterSet: ParameterSet | undefined = undefined;\n        if (result.outputs && result.outputs.length == 1) {\n          const [[, content]] = result.outputs;\n          try {\n            parameterSet = JSON.parse(content);\n            // console.log('PARAMETER SET', JSON.stringify(parameterSet, null, 2))\n          } catch (e) {\n            console.error(`Error while parsing parameter set: ${e}\\n${content}`);\n          }\n        } else {\n          console.error('No output from runner!');\n        }\n\n        res({\n          ...processMergedOutputs(result.mergedOutputs, {}),\n          parameterSet,\n        });\n      } catch (e) {\n        console.error(e);\n        rej(e);\n      }\n    })();\n    return () => job.kill();\n  });\n});\n\nconst renderDelay = 1000;\nexport type OpenSCADRenderOutput = {\n  outFile: File;\n  logText: string;\n  markers: monaco.editor.IMarkerData[];\n  elapsedMillis: number;\n};\n\nexport type OpenSCADRenderArgs = {\n  scadPath: string;\n  sources: OpenSCADFile[];\n  vars?: { [name: string]: any };\n  features?: string[];\n  extraArgs?: string[];\n  isPreview: boolean;\n  mountArchives: boolean;\n  renderFormat: keyof typeof VALID_EXPORT_FORMATS_2D | keyof typeof VALID_EXPORT_FORMATS_3D;\n  streamsCallback: (ps: ProcessStreams) => void;\n};\n\nfunction formatValue(any: any): string {\n  if (typeof any === 'string') {\n    return `\"${any}\"`;\n  } else if (any instanceof Array) {\n    return `[${any.map(formatValue).join(', ')}]`;\n  } else {\n    return `${any}`;\n  }\n}\nexport const render = turnIntoDelayableExecution(renderDelay, (renderArgs: OpenSCADRenderArgs) => {\n  const {\n    scadPath,\n    sources,\n    isPreview,\n    mountArchives,\n    vars,\n    features,\n    extraArgs,\n    renderFormat,\n    streamsCallback,\n  } = renderArgs;\n\n  const prefixLines: string[] = [];\n  if (isPreview) {\n    // TODO: add render-modifiers feature to OpenSCAD.\n    prefixLines.push('$preview=true;');\n  }\n  if (!scadPath.endsWith('.scad'))\n    throw new Error('First source must be a .scad file, got ' + sources[0].path + ' instead');\n\n  const source = sources.filter((s) => s.path === scadPath)[0];\n  if (!source) throw new Error('Active path not found in sources!');\n\n  if (source.content == null) throw new Error('Source content is null!');\n  const content = [...prefixLines, source.content].join('\\n');\n\n  const actualRenderFormat = renderFormat == 'glb' || renderFormat == '3mf' ? 'off' : renderFormat;\n  const stem = scadPath\n    .replace(/\\.scad$/, '')\n    .split('/')\n    .pop();\n  const outFile = `${stem}.${actualRenderFormat}`;\n  const args = [\n    scadPath,\n    '-o',\n    outFile,\n    '--backend=manifold',\n    '--export-format=' + (actualRenderFormat == 'stl' ? 'binstl' : actualRenderFormat),\n    ...Object.entries(vars ?? {}).flatMap(([k, v]) => [`-D${k}=${formatValue(v)}`]),\n    ...(features ?? []).map((f) => `--enable=${f}`),\n    ...(extraArgs ?? []),\n  ];\n\n  const job = spawnOpenSCAD(\n    {\n      taskName: isPreview ? 'preview' : 'render',\n      mountArchives: mountArchives,\n      files: sources.map((s) => (s.path === scadPath ? { path: s.path, content } : s)),\n      args,\n      outputPaths: [outFile],\n    },\n    streamsCallback,\n  );\n\n  return AbortablePromise<OpenSCADRenderOutput>((resolve, reject) => {\n    (async () => {\n      try {\n        const result = await job;\n        const { logText, markers } = processMergedOutputs(result.mergedOutputs, {\n          shiftSourceLines: {\n            sourcePath: source.path,\n            skipLines: prefixLines.length,\n          },\n        });\n\n        if (result.error) {\n          reject(result.error);\n        }\n\n        const [output] = result.outputs ?? [];\n        if (!output) {\n          reject(new Error('No output from runner!'));\n          return;\n        }\n        const [filePath, content] = output;\n        const filePathFragments = filePath.split('/');\n        const fileName = filePathFragments[filePathFragments.length - 1];\n\n        // TODO: have the runner accept and return files.\n        const type = filePath.endsWith('.svg') ? 'image/svg+xml' : 'application/octet-stream';\n        const blob = new Blob([content]);\n        const outFile = new File([blob], fileName, { type });\n        resolve({ outFile, logText, markers, elapsedMillis: result.elapsedMillis });\n      } catch (e) {\n        console.error(e);\n        reject(e);\n      }\n    })();\n\n    return () => job.kill();\n  });\n});\n","'use client';\nimport * as React from 'react';\nimport { IconBase } from 'primereact/iconbase';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nvar ExclamationTriangleIcon = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var pti = IconBase.getPTI(inProps);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 14 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, pti), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z\",\n    fill: \"currentColor\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z\",\n    fill: \"currentColor\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z\",\n    fill: \"currentColor\"\n  }));\n}));\nExclamationTriangleIcon.displayName = 'ExclamationTriangleIcon';\n\nexport { ExclamationTriangleIcon };\n","'use client';\nimport * as React from 'react';\nimport { IconBase } from 'primereact/iconbase';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nvar InfoCircleIcon = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var pti = IconBase.getPTI(inProps);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 14 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, pti), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z\",\n    fill: \"currentColor\"\n  }));\n}));\nInfoCircleIcon.displayName = 'InfoCircleIcon';\n\nexport { InfoCircleIcon };\n","'use client';\nimport * as React from 'react';\nimport { IconBase } from 'primereact/iconbase';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nvar TimesCircleIcon = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var pti = IconBase.getPTI(inProps);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 14 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, pti), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z\",\n    fill: \"currentColor\"\n  }));\n}));\nTimesCircleIcon.displayName = 'TimesCircleIcon';\n\nexport { TimesCircleIcon };\n","'use client';\nimport * as React from 'react';\nimport { TransitionGroup } from 'react-transition-group';\nimport PrimeReact, { ariaLabel, PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { CSSTransition } from 'primereact/csstransition';\nimport { useMergeProps, useTimeout, useUpdateEffect, useUnmountEffect } from 'primereact/hooks';\nimport { Portal } from 'primereact/portal';\nimport { classNames, DomHandler, IconUtils, ObjectUtils, ZIndexUtils } from 'primereact/utils';\nimport { CheckIcon } from 'primereact/icons/check';\nimport { ExclamationTriangleIcon } from 'primereact/icons/exclamationtriangle';\nimport { InfoCircleIcon } from 'primereact/icons/infocircle';\nimport { TimesIcon } from 'primereact/icons/times';\nimport { TimesCircleIcon } from 'primereact/icons/timescircle';\nimport { Ripple } from 'primereact/ripple';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\n\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\n\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nvar styles = \"\\n@layer primereact {\\n    .p-toast {\\n        width: calc(100% - var(--toast-indent, 0px));\\n        max-width: 25rem;\\n    }\\n    \\n    .p-toast-message-icon {\\n        flex-shrink: 0;\\n    }\\n    \\n    .p-toast-message-content {\\n        display: flex;\\n        align-items: flex-start;\\n    }\\n    \\n    .p-toast-message-text {\\n        flex: 1 1 auto;\\n    }\\n    \\n    .p-toast-summary {\\n        overflow-wrap: anywhere;\\n    }\\n    \\n    .p-toast-detail {\\n        overflow-wrap: anywhere;\\n    }\\n    \\n    .p-toast-top-center {\\n        transform: translateX(-50%);\\n    }\\n    \\n    .p-toast-bottom-center {\\n        transform: translateX(-50%);\\n    }\\n    \\n    .p-toast-center {\\n        min-width: 20vw;\\n        transform: translate(-50%, -50%);\\n    }\\n    \\n    .p-toast-icon-close {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        overflow: hidden;\\n        position: relative;\\n    }\\n    \\n    .p-toast-icon-close.p-link {\\n        cursor: pointer;\\n    }\\n    \\n    /* Animations */\\n    .p-toast-message-enter {\\n        opacity: 0;\\n        transform: translateY(50%);\\n    }\\n    \\n    .p-toast-message-enter-active {\\n        opacity: 1;\\n        transform: translateY(0);\\n        transition: transform 0.3s, opacity 0.3s;\\n    }\\n    \\n    .p-toast-message-enter-done {\\n        transform: none;\\n    }\\n    \\n    .p-toast-message-exit {\\n        opacity: 1;\\n        max-height: 1000px;\\n    }\\n    \\n    .p-toast .p-toast-message.p-toast-message-exit-active {\\n        opacity: 0;\\n        max-height: 0;\\n        margin-bottom: 0;\\n        overflow: hidden;\\n        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;\\n    }\\n}\\n\";\nvar classes = {\n  root: function root(_ref) {\n    var props = _ref.props,\n      context = _ref.context;\n    return classNames('p-toast p-component p-toast-' + props.position, props.className, {\n      'p-input-filled': context && context.inputStyle === 'filled' || PrimeReact.inputStyle === 'filled',\n      'p-ripple-disabled': context && context.ripple === false || PrimeReact.ripple === false\n    });\n  },\n  message: {\n    message: function message(_ref2) {\n      var severity = _ref2.severity;\n      return classNames('p-toast-message', _defineProperty({}, \"p-toast-message-\".concat(severity), severity));\n    },\n    content: 'p-toast-message-content',\n    buttonicon: 'p-toast-icon-close-icon',\n    closeButton: 'p-toast-icon-close p-link',\n    icon: 'p-toast-message-icon',\n    text: 'p-toast-message-text',\n    summary: 'p-toast-summary',\n    detail: 'p-toast-detail'\n  },\n  transition: 'p-toast-message'\n};\nvar inlineStyles = {\n  root: function root(_ref3) {\n    var props = _ref3.props;\n    return {\n      position: 'fixed',\n      top: props.position === 'top-right' || props.position === 'top-left' || props.position === 'top-center' ? '20px' : props.position === 'center' ? '50%' : null,\n      right: (props.position === 'top-right' || props.position === 'bottom-right') && '20px',\n      bottom: (props.position === 'bottom-left' || props.position === 'bottom-right' || props.position === 'bottom-center') && '20px',\n      left: props.position === 'top-left' || props.position === 'bottom-left' ? '20px' : props.position === 'center' || props.position === 'top-center' || props.position === 'bottom-center' ? '50%' : null\n    };\n  }\n};\nvar ToastBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Toast',\n    id: null,\n    className: null,\n    content: null,\n    style: null,\n    baseZIndex: 0,\n    position: 'top-right',\n    transitionOptions: null,\n    appendTo: 'self',\n    onClick: null,\n    onRemove: null,\n    onShow: null,\n    onHide: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    children: undefined\n  },\n  css: {\n    classes: classes,\n    styles: styles,\n    inlineStyles: inlineStyles\n  }\n});\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar ToastMessage = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (props, ref) {\n  var mergeProps = useMergeProps();\n  var messageInfo = props.messageInfo,\n    parentMetaData = props.metaData,\n    _props$ptCallbacks = props.ptCallbacks,\n    ptm = _props$ptCallbacks.ptm,\n    ptmo = _props$ptCallbacks.ptmo,\n    cx = _props$ptCallbacks.cx,\n    index = props.index;\n  var _messageInfo$message = messageInfo.message,\n    severity = _messageInfo$message.severity,\n    content = _messageInfo$message.content,\n    summary = _messageInfo$message.summary,\n    detail = _messageInfo$message.detail,\n    closable = _messageInfo$message.closable,\n    life = _messageInfo$message.life,\n    sticky = _messageInfo$message.sticky,\n    _className = _messageInfo$message.className,\n    style = _messageInfo$message.style,\n    _contentClassName = _messageInfo$message.contentClassName,\n    contentStyle = _messageInfo$message.contentStyle,\n    _icon = _messageInfo$message.icon,\n    _closeIcon = _messageInfo$message.closeIcon,\n    pt = _messageInfo$message.pt;\n  var params = {\n    index: index\n  };\n  var parentParams = _objectSpread(_objectSpread({}, parentMetaData), params);\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    focused = _React$useState2[0],\n    setFocused = _React$useState2[1];\n  var _useTimeout = useTimeout(function () {\n      onClose();\n    }, life || 3000, !sticky && !focused),\n    _useTimeout2 = _slicedToArray(_useTimeout, 1),\n    clearTimer = _useTimeout2[0];\n  var getPTOptions = function getPTOptions(key, options) {\n    return ptm(key, _objectSpread({\n      hostName: props.hostName\n    }, options));\n  };\n  var onClose = function onClose() {\n    clearTimer();\n    props.onClose && props.onClose(messageInfo);\n  };\n  var onClick = function onClick(event) {\n    if (props.onClick && !(DomHandler.hasClass(event.target, 'p-toast-icon-close') || DomHandler.hasClass(event.target, 'p-toast-icon-close-icon'))) {\n      props.onClick(messageInfo.message);\n    }\n  };\n  var onMouseEnter = function onMouseEnter(event) {\n    props.onMouseEnter && props.onMouseEnter(event);\n\n    // do not continue if the user has canceled the event\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    // stop timer while user has focused message\n    if (!sticky) {\n      clearTimer();\n      setFocused(true);\n    }\n  };\n  var onMouseLeave = function onMouseLeave(event) {\n    props.onMouseLeave && props.onMouseLeave(event);\n\n    // do not continue if the user has canceled the event\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    // restart timer when user has left message\n    if (!sticky) {\n      setFocused(false);\n    }\n  };\n  var createCloseIcon = function createCloseIcon() {\n    var buttonIconProps = mergeProps({\n      className: cx('message.buttonicon')\n    }, getPTOptions('buttonicon', parentParams), ptmo(pt, 'buttonicon', _objectSpread(_objectSpread({}, params), {}, {\n      hostName: props.hostName\n    })));\n    var icon = _closeIcon || /*#__PURE__*/React.createElement(TimesIcon, buttonIconProps);\n    var closeIcon = IconUtils.getJSXIcon(icon, _objectSpread({}, buttonIconProps), {\n      props: props\n    });\n    var closeButtonProps = mergeProps({\n      type: 'button',\n      className: cx('message.closeButton'),\n      onClick: onClose,\n      'aria-label': props.ariaCloseLabel || ariaLabel('close')\n    }, getPTOptions('closeButton', parentParams), ptmo(pt, 'closeButton', _objectSpread(_objectSpread({}, params), {}, {\n      hostName: props.hostName\n    })));\n    if (closable !== false) {\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"button\", closeButtonProps, closeIcon, /*#__PURE__*/React.createElement(Ripple, null)));\n    }\n    return null;\n  };\n  var createMessage = function createMessage() {\n    if (messageInfo) {\n      var contentEl = ObjectUtils.getJSXElement(content, {\n        message: messageInfo.message,\n        onClick: onClick,\n        onClose: onClose\n      });\n      var iconProps = mergeProps({\n        className: cx('message.icon')\n      }, getPTOptions('icon', parentParams), ptmo(pt, 'icon', _objectSpread(_objectSpread({}, params), {}, {\n        hostName: props.hostName\n      })));\n      var icon = _icon;\n      if (!_icon) {\n        switch (severity) {\n          case 'info':\n            icon = /*#__PURE__*/React.createElement(InfoCircleIcon, iconProps);\n            break;\n          case 'warn':\n            icon = /*#__PURE__*/React.createElement(ExclamationTriangleIcon, iconProps);\n            break;\n          case 'error':\n            icon = /*#__PURE__*/React.createElement(TimesCircleIcon, iconProps);\n            break;\n          case 'success':\n            icon = /*#__PURE__*/React.createElement(CheckIcon, iconProps);\n            break;\n        }\n      }\n      var messageIcon = IconUtils.getJSXIcon(icon, _objectSpread({}, iconProps), {\n        props: props\n      });\n      var textProps = mergeProps({\n        className: cx('message.text')\n      }, getPTOptions('text', parentParams), ptmo(pt, 'text', _objectSpread(_objectSpread({}, params), {}, {\n        hostName: props.hostName\n      })));\n      var summaryProps = mergeProps({\n        className: cx('message.summary')\n      }, getPTOptions('summary', parentParams), ptmo(pt, 'summary', _objectSpread(_objectSpread({}, params), {}, {\n        hostName: props.hostName\n      })));\n      var detailProps = mergeProps({\n        className: cx('message.detail')\n      }, getPTOptions('detail', parentParams), ptmo(pt, 'detail', _objectSpread(_objectSpread({}, params), {}, {\n        hostName: props.hostName\n      })));\n      return contentEl || /*#__PURE__*/React.createElement(React.Fragment, null, messageIcon, /*#__PURE__*/React.createElement(\"div\", textProps, /*#__PURE__*/React.createElement(\"span\", summaryProps, summary), detail && /*#__PURE__*/React.createElement(\"div\", detailProps, detail)));\n    }\n    return null;\n  };\n  var message = createMessage();\n  var closeIcon = createCloseIcon();\n  var messageProps = mergeProps({\n    ref: ref,\n    className: classNames(_className, cx('message.message', {\n      severity: severity\n    })),\n    style: style,\n    role: 'alert',\n    'aria-live': 'assertive',\n    'aria-atomic': 'true',\n    onClick: onClick,\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave\n  }, getPTOptions('message', parentParams), ptmo(pt, 'root', _objectSpread(_objectSpread({}, params), {}, {\n    hostName: props.hostName\n  })));\n  var contentProps = mergeProps({\n    className: classNames(_contentClassName, cx('message.content')),\n    style: contentStyle\n  }, getPTOptions('content', parentParams), ptmo(pt, 'content', _objectSpread(_objectSpread({}, params), {}, {\n    hostName: props.hostName\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", messageProps, /*#__PURE__*/React.createElement(\"div\", contentProps, message, closeIcon));\n}));\nToastMessage.displayName = 'ToastMessage';\n\nvar messageIdx = 0;\nvar Toast = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = ToastBase.getProps(inProps, context);\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    messagesState = _React$useState2[0],\n    setMessagesState = _React$useState2[1];\n  var containerRef = React.useRef(null);\n  var metaData = {\n    props: props,\n    state: {\n      messages: messagesState\n    }\n  };\n  var ptCallbacks = ToastBase.setMetaData(metaData);\n  useHandleStyle(ToastBase.css.styles, ptCallbacks.isUnstyled, {\n    name: 'toast'\n  });\n  var show = function show(messageInfo) {\n    if (messageInfo) {\n      setMessagesState(function (prev) {\n        return assignIdentifiers(prev, messageInfo, true);\n      });\n    }\n  };\n  var assignIdentifiers = function assignIdentifiers(currentState, messageInfo, copy) {\n    var messages;\n    if (Array.isArray(messageInfo)) {\n      var multipleMessages = messageInfo.reduce(function (acc, message) {\n        acc.push({\n          _pId: messageIdx++,\n          message: message\n        });\n        return acc;\n      }, []);\n      if (copy) {\n        messages = currentState ? [].concat(_toConsumableArray(currentState), _toConsumableArray(multipleMessages)) : multipleMessages;\n      } else {\n        messages = multipleMessages;\n      }\n    } else {\n      var message = {\n        _pId: messageIdx++,\n        message: messageInfo\n      };\n      if (copy) {\n        messages = currentState ? [].concat(_toConsumableArray(currentState), [message]) : [message];\n      } else {\n        messages = [message];\n      }\n    }\n    return messages;\n  };\n  var clear = function clear() {\n    ZIndexUtils.clear(containerRef.current);\n    setMessagesState([]);\n  };\n  var replace = function replace(messageInfo) {\n    setMessagesState(function (previousMessagesState) {\n      return assignIdentifiers(previousMessagesState, messageInfo, false);\n    });\n  };\n  var remove = function remove(messageInfo) {\n    // allow removal by ID or by message equality\n    var removeMessage = ObjectUtils.isNotEmpty(messageInfo._pId) ? messageInfo._pId : messageInfo.message || messageInfo;\n    setMessagesState(function (prev) {\n      return prev.filter(function (msg) {\n        return msg._pId !== messageInfo._pId && !ObjectUtils.deepEquals(msg.message, removeMessage);\n      });\n    });\n    props.onRemove && props.onRemove(messageInfo.message || removeMessage);\n  };\n  var onClose = function onClose(messageInfo) {\n    remove(messageInfo);\n  };\n  var onEntered = function onEntered() {\n    props.onShow && props.onShow();\n  };\n  var onExited = function onExited() {\n    messagesState.length === 1 && ZIndexUtils.clear(containerRef.current);\n    props.onHide && props.onHide();\n  };\n  useUpdateEffect(function () {\n    ZIndexUtils.set('toast', containerRef.current, context && context.autoZIndex || PrimeReact.autoZIndex, props.baseZIndex || context && context.zIndex.toast || PrimeReact.zIndex.toast);\n  }, [messagesState, props.baseZIndex]);\n  useUnmountEffect(function () {\n    ZIndexUtils.clear(containerRef.current);\n  });\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      show: show,\n      replace: replace,\n      remove: remove,\n      clear: clear,\n      getElement: function getElement() {\n        return containerRef.current;\n      }\n    };\n  });\n  var createElement = function createElement() {\n    var rootProps = mergeProps({\n      ref: containerRef,\n      id: props.id,\n      className: ptCallbacks.cx('root', {\n        context: context\n      }),\n      style: ptCallbacks.sx('root')\n    }, ToastBase.getOtherProps(props), ptCallbacks.ptm('root'));\n    var transitionProps = mergeProps({\n      classNames: ptCallbacks.cx('transition'),\n      timeout: {\n        enter: 300,\n        exit: 300\n      },\n      options: props.transitionOptions,\n      unmountOnExit: true,\n      onEntered: onEntered,\n      onExited: onExited\n    }, ptCallbacks.ptm('transition'));\n    return /*#__PURE__*/React.createElement(\"div\", rootProps, /*#__PURE__*/React.createElement(TransitionGroup, null, messagesState && messagesState.map(function (messageInfo, index) {\n      var messageRef = /*#__PURE__*/React.createRef();\n      return /*#__PURE__*/React.createElement(CSSTransition, _extends({\n        nodeRef: messageRef,\n        key: messageInfo._pId\n      }, transitionProps), inProps.content ? ObjectUtils.getJSXElement(inProps.content, {\n        message: messageInfo.message\n      }) : /*#__PURE__*/React.createElement(ToastMessage, {\n        hostName: \"Toast\",\n        ref: messageRef,\n        messageInfo: messageInfo,\n        index: index,\n        onClick: props.onClick,\n        onClose: onClose,\n        onMouseEnter: props.onMouseEnter,\n        onMouseLeave: props.onMouseLeave,\n        closeIcon: props.closeIcon,\n        ptCallbacks: ptCallbacks,\n        metaData: metaData\n      }));\n    })));\n  };\n  var element = createElement();\n  return /*#__PURE__*/React.createElement(Portal, {\n    element: element,\n    appendTo: props.appendTo\n  });\n}));\nToast.displayName = 'Toast';\n\nexport { Toast };\n","var q=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"#\",\"$\",\"%\",\"*\",\"+\",\",\",\"-\",\".\",\":\",\";\",\"=\",\"?\",\"@\",\"[\",\"]\",\"^\",\"_\",\"{\",\"|\",\"}\",\"~\"],x=t=>{let e=0;for(let r=0;r<t.length;r++){let n=t[r],l=q.indexOf(n);e=e*83+l}return e},p=(t,e)=>{var r=\"\";for(let n=1;n<=e;n++){let l=Math.floor(t)/Math.pow(83,e-n)%83;r+=q[Math.floor(l)]}return r};var f=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},h=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},F=t=>t<0?-1:1,M=(t,e)=>F(t)*Math.pow(Math.abs(t),e);var d=class extends Error{constructor(e){super(e),this.name=\"ValidationError\",this.message=e}};var C=t=>{if(!t||t.length<6)throw new d(\"The blurhash string must be at least 6 characters\");let e=x(t[0]),r=Math.floor(e/9)+1,n=e%9+1;if(t.length!==4+2*n*r)throw new d(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*n*r}`)},N=t=>{try{C(t)}catch(e){return{result:!1,errorReason:e.message}}return{result:!0}},z=t=>{let e=t>>16,r=t>>8&255,n=t&255;return[f(e),f(r),f(n)]},L=(t,e)=>{let r=Math.floor(t/361),n=Math.floor(t/19)%19,l=t%19;return[M((r-9)/9,2)*e,M((n-9)/9,2)*e,M((l-9)/9,2)*e]},U=(t,e,r,n)=>{C(t),n=n|1;let l=x(t[0]),m=Math.floor(l/9)+1,b=l%9+1,i=(x(t[1])+1)/166,u=new Array(b*m);for(let o=0;o<u.length;o++)if(o===0){let a=x(t.substring(2,6));u[o]=z(a)}else{let a=x(t.substring(4+o*2,6+o*2));u[o]=L(a,i*n)}let c=e*4,s=new Uint8ClampedArray(c*r);for(let o=0;o<r;o++)for(let a=0;a<e;a++){let y=0,B=0,R=0;for(let w=0;w<m;w++)for(let P=0;P<b;P++){let G=Math.cos(Math.PI*a*P/e)*Math.cos(Math.PI*o*w/r),T=u[P+w*b];y+=T[0]*G,B+=T[1]*G,R+=T[2]*G}let V=h(y),I=h(B),E=h(R);s[4*a+0+o*c]=V,s[4*a+1+o*c]=I,s[4*a+2+o*c]=E,s[4*a+3+o*c]=255}return s},j=U;var A=4,D=(t,e,r,n)=>{let l=0,m=0,b=0,g=e*A;for(let u=0;u<e;u++){let c=A*u;for(let s=0;s<r;s++){let o=c+s*g,a=n(u,s);l+=a*f(t[o]),m+=a*f(t[o+1]),b+=a*f(t[o+2])}}let i=1/(e*r);return[l*i,m*i,b*i]},$=t=>{let e=h(t[0]),r=h(t[1]),n=h(t[2]);return(e<<16)+(r<<8)+n},H=(t,e)=>{let r=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[0]/e,.5)*9+9.5)))),n=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[1]/e,.5)*9+9.5)))),l=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[2]/e,.5)*9+9.5))));return r*19*19+n*19+l},O=(t,e,r,n,l)=>{if(n<1||n>9||l<1||l>9)throw new d(\"BlurHash must have between 1 and 9 components\");if(e*r*4!==t.length)throw new d(\"Width and height must match the pixels array\");let m=[];for(let s=0;s<l;s++)for(let o=0;o<n;o++){let a=o==0&&s==0?1:2,y=D(t,e,r,(B,R)=>a*Math.cos(Math.PI*o*B/e)*Math.cos(Math.PI*s*R/r));m.push(y)}let b=m[0],g=m.slice(1),i=\"\",u=n-1+(l-1)*9;i+=p(u,1);let c;if(g.length>0){let s=Math.max(...g.map(a=>Math.max(...a))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(s*166-.5))));c=(o+1)/166,i+=p(o,1)}else c=1,i+=p(0,1);return i+=p($(b),4),g.forEach(s=>{i+=p(H(s,c),2)}),i},S=O;export{d as ValidationError,j as decode,S as encode,N as isBlurhashValid};\n//# sourceMappingURL=index.js.map","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport { rgbaToThumbHash, thumbHashToRGBA } from 'thumbhash';\nimport { decode as decodeBlurHash, encode as encodeBlurHash } from 'blurhash';\n\nasync function loadImage(src: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => resolve(img);\n    img.onerror = (...args) => reject(args);\n    img.src = src;\n  });\n}\n\nexport async function imageToBlurhash(imageUrl: string): Promise<string> {\n  const { rgba, w, h } = await getImageThumbnail(imageUrl, { maxSize: 100, opaque: true });\n  const parts = 9;\n  // const parts = 6;\n  return encodeBlurHash(new Uint8ClampedArray(rgba), w, h, parts, parts);\n}\n\nexport async function imageToThumbhash(imagePath: string): Promise<string> {\n  const { rgba, w, h } = await getImageThumbnail(imagePath, { maxSize: 100, opaque: false });\n  const hash = rgbaToThumbHash(w, h, rgba);\n  return btoa(String.fromCharCode(...hash));\n}\n\nexport function blurHashToImage(hash: string, width: number, height: number): string {\n  const pixels = decodeBlurHash(hash, width, height);\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d')!;\n  const imageData = ctx.createImageData(width, height);\n  imageData.data.set(pixels);\n  ctx.putImageData(imageData, 0, 0);\n  return canvas.toDataURL('image/png');\n}\n\nexport function thumbHashToImage(hash: string): string {\n  const {\n    w: width,\n    h: height,\n    rgba,\n  } = thumbHashToRGBA(new Uint8Array([...atob(hash)].map((c) => c.charCodeAt(0))));\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d')!;\n  const imageData = ctx.createImageData(width, height);\n  imageData.data.set(rgba);\n  ctx.putImageData(imageData, 0, 0);\n  return canvas.toDataURL('image/png');\n}\n\nasync function getImageThumbnail(\n  imageUrl: string,\n  { maxSize, opaque }: { maxSize: number; opaque: boolean },\n): Promise<{ rgba: Uint8Array; w: number; h: number }> {\n  const image = await loadImage(imageUrl);\n  const width = image.width;\n  const height = image.height;\n\n  const scale = Math.min(maxSize / width, maxSize / height);\n  const resizedWidth = Math.floor(width * scale);\n  const resizedHeight = Math.floor(height * scale);\n\n  const canvas = document.createElement('canvas');\n  canvas.width = resizedWidth;\n  canvas.height = resizedHeight;\n  const ctx = canvas.getContext('2d');\n  if (!ctx) throw new Error('Could not get canvas context');\n\n  if (opaque) {\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, resizedWidth, resizedHeight);\n  }\n  ctx.drawImage(image, 0, 0, resizedWidth, resizedHeight);\n\n  const imageData = ctx.getImageData(0, 0, resizedWidth, resizedHeight);\n  const rgba = new Uint8Array(imageData.data.buffer);\n  return { rgba, w: resizedWidth, h: resizedHeight };\n}\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport {\n  CSSProperties,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { Toast } from 'primereact/toast';\nimport { blurHashToImage, imageToBlurhash } from '../services/io/image_hashes.ts';\nimport { CenteredSpinner } from './CenteredSpinner.tsx';\n\n/// <reference types=\"@google/model-viewer\" />\ndeclare module 'react/jsx-runtime' {\n  namespace JSX {\n    interface IntrinsicElements {\n      'model-viewer': any;\n    }\n  }\n}\n\nexport const PREDEFINED_ORBITS: [string, number, number][] = [\n  ['Diagonal', Math.PI / 4, Math.PI / 4],\n  ['Front', 0, Math.PI / 2],\n  ['Right', Math.PI / 2, Math.PI / 2],\n  ['Back', Math.PI, Math.PI / 2],\n  ['Left', -Math.PI / 2, Math.PI / 2],\n  ['Top', 0, 0],\n  ['Bottom', 0, Math.PI],\n];\n\nfunction spherePoint(theta: number, phi: number): [number, number, number] {\n  return [Math.cos(theta) * Math.sin(phi), Math.sin(theta) * Math.sin(phi), Math.cos(phi)];\n}\n\nfunction euclideanDist(a: [number, number, number], b: [number, number, number]): number {\n  const dx = a[0] - b[0];\n  const dy = a[1] - b[1];\n  const dz = a[2] - b[2];\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\n\nconst radDist = (a: number, b: number) =>\n  Math.min(Math.abs(a - b), Math.abs(a - b + 2 * Math.PI), Math.abs(a - b - 2 * Math.PI));\n\nfunction getClosestPredefinedOrbitIndex(theta: number, phi: number): [number, number, number] {\n  const point = spherePoint(theta, phi);\n  const points = PREDEFINED_ORBITS.map(([_, t, p]) => spherePoint(t, p));\n  const distances = points.map((p) => euclideanDist(point, p));\n  const radDistances = PREDEFINED_ORBITS.map(([_, ptheta, pphi]) =>\n    Math.max(radDist(theta, ptheta), radDist(phi, pphi)),\n  );\n  const [index, dist] = distances.reduce(\n    (acc, d, i) => (d < acc[1] ? [i, d] : acc),\n    [0, Infinity],\n  ) as [number, number];\n  return [index, dist, radDistances[index]];\n}\n\nconst originalOrbit = (([name, theta, phi]) => `${theta}rad ${phi}rad auto`)(PREDEFINED_ORBITS[0]);\n\ninterface ModelViewerProps {\n  className?: string;\n  style?: CSSProperties;\n  modelUri?: string;\n  preview?: { blurhash: string };\n}\n\nexport interface ModelViewerHandle {\n  getWebpScreenshot: () => Promise<string | null>;\n  resetView: () => void;\n}\n\ninterface ModelViewerProps {\n  lightMode?: boolean;\n}\n\nconst ModelViewer = forwardRef<ModelViewerHandle, ModelViewerProps>(\n  function ModelViewer(props, ref) {\n    const [interactionPrompt, setInteractionPrompt] = useState('none'); // disable for now\n    // const [interactionPrompt, setInteractionPrompt] = useState('auto');\n    const modelViewerRef = useRef<any>(null);\n    const axesViewerRef = useRef<any>(null);\n    const toastRef = useRef<Toast>(null);\n\n    const [loadedUri, setLoadedUri] = useState<string | undefined>();\n\n    const [cachedImageHash, setCachedImageHash] = useState<\n      { hash: string; uri: string } | undefined\n    >(undefined);\n\n    const loaded = loadedUri === props.modelUri;\n\n    if (props?.preview) {\n      let { hash, uri } = cachedImageHash ?? { hash: '' };\n      if (props.preview.blurhash && hash !== props.preview.blurhash) {\n        hash = props.preview.blurhash;\n        uri = blurHashToImage(hash, 100, 100);\n        setCachedImageHash({ hash, uri });\n      }\n    } else if (cachedImageHash) {\n      setCachedImageHash(undefined);\n    }\n\n    const onLoad = useCallback(\n      async (e: any) => {\n        setLoadedUri(props.modelUri);\n\n        if (!modelViewerRef.current) return;\n\n        const uri = await modelViewerRef.current.toDataURL('image/png', 0.5);\n        const preview = { blurhash: await imageToBlurhash(uri) };\n        // props.preview = preview;\n      },\n      [props.modelUri, setLoadedUri, modelViewerRef.current],\n    );\n\n    useEffect(() => {\n      if (!modelViewerRef.current) return;\n\n      const element = modelViewerRef.current;\n      element.addEventListener('load', onLoad);\n      return () => element.removeEventListener('load', onLoad);\n    }, [modelViewerRef.current, onLoad]);\n\n    for (const ref of [modelViewerRef, axesViewerRef]) {\n      const otherRef = ref === modelViewerRef ? axesViewerRef : modelViewerRef;\n      useEffect(() => {\n        if (!ref.current) return;\n\n        function handleCameraChange(e: any) {\n          if (!otherRef.current) return;\n          if (e.detail.source === 'user-interaction') {\n            const cameraOrbit = ref.current.getCameraOrbit();\n            cameraOrbit.radius = otherRef.current.getCameraOrbit().radius;\n\n            otherRef.current.cameraOrbit = cameraOrbit.toString();\n          }\n        }\n\n        const element = ref.current;\n        element.addEventListener('camera-change', handleCameraChange);\n        return () => element.removeEventListener('camera-change', handleCameraChange);\n      }, [ref.current, otherRef.current]);\n    }\n\n    // Cycle through predefined views when user clicks on the axes viewer\n    useEffect(() => {\n      let mouseDownSpherePoint: [number, number, number] | undefined;\n\n      function getSpherePoint() {\n        const orbit = axesViewerRef.current.getCameraOrbit();\n        return spherePoint(orbit.theta, orbit.phi);\n      }\n\n      function onMouseDown(e: MouseEvent) {\n        if (e.target === axesViewerRef.current) {\n          mouseDownSpherePoint = getSpherePoint();\n        }\n      }\n\n      function onMouseUp(e: MouseEvent) {\n        if (e.target === axesViewerRef.current) {\n          const euclEps = 0.01;\n          const radEps = 0.1;\n\n          const spherePoint = getSpherePoint();\n          const clickDist =\n            mouseDownSpherePoint ? euclideanDist(spherePoint, mouseDownSpherePoint) : Infinity;\n          if (clickDist > euclEps) {\n            return;\n          }\n          // Note: unlike the axes viewer, the model viewer has a prompt that makes the model wiggle around, we only fetch it to get the radius.\n          const axesOrbit = axesViewerRef.current.getCameraOrbit();\n          const modelOrbit = modelViewerRef.current.getCameraOrbit();\n          const [currentIndex, dist, radDist] = getClosestPredefinedOrbitIndex(\n            axesOrbit.theta,\n            axesOrbit.phi,\n          );\n          const newIndex =\n            e.button == 2 ? 0\n            : dist < euclEps && radDist < radEps ? (currentIndex + 1) % PREDEFINED_ORBITS.length\n            : currentIndex;\n          const [name, theta, phi] = PREDEFINED_ORBITS[newIndex];\n          Object.assign(modelOrbit, { theta, phi });\n          const newOrbit =\n            (modelViewerRef.current.cameraOrbit =\n            axesViewerRef.current.cameraOrbit =\n              modelOrbit.toString());\n          // toastRef.current?.show({ severity: 'info', detail: `${name} view`, life: 1000 });\n          setInteractionPrompt('none');\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n\n      function onContextMenu(e: MouseEvent) {\n        if (e.target === axesViewerRef.current) {\n          e.preventDefault();\n        }\n      }\n\n      window.addEventListener('mousedown', onMouseDown);\n      window.addEventListener('mouseup', onMouseUp);\n      window.addEventListener('contextmenu', onContextMenu);\n      // window.addEventListener('click', onClick);\n\n      return () => {\n        // window.removeEventListener('click', onClick);\n        window.removeEventListener('mousedown', onMouseDown);\n        window.removeEventListener('mouseup', onMouseUp);\n        window.removeEventListener('contextmenu', onContextMenu);\n      };\n    });\n\n    /**\n     * Captures a screenshot of the current model-viewer at 500x500px in WebP format.\n     * Returns a data URL (webp) or null if failed.\n     */\n    async function getWebpScreenshot(): Promise<string | null> {\n      if (!modelViewerRef.current) return null;\n      // Get PNG data URL from model-viewer (default size)\n      const pngDataUrl = await modelViewerRef.current.toDataURL('image/png', 1.0);\n\n      const img = new window.Image();\n      img.src = pngDataUrl;\n      await new Promise((resolve) => {\n        img.onload = resolve;\n      });\n      const canvas = document.createElement('canvas');\n      canvas.width = 500;\n      canvas.height = 500;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return null;\n      ctx.drawImage(img, 0, 0, 500, 500);\n      // Convert to WebP data URL\n      return canvas.toDataURL('image/webp', 0.9); // 0.9 quality for good compression\n    }\n\n    function resetView() {\n      if (!modelViewerRef.current || !axesViewerRef.current) return;\n      modelViewerRef.current.cameraOrbit = originalOrbit;\n      axesViewerRef.current.cameraOrbit = originalOrbit;\n    }\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        getWebpScreenshot,\n        resetView,\n      }),\n      [getWebpScreenshot, resetView],\n    );\n\n    return (\n      <div\n        className={props.className}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          position: 'relative',\n          flex: 1,\n          width: '100%',\n          background: props.lightMode ? '#eee' : '#111',\n          ...(props.style ?? {}),\n        }}\n      >\n        <Toast ref={toastRef} position=\"top-right\" />\n        <style>\n          {`\n          @keyframes pulse {\n            0% { opacity: 0.4; }\n            50% { opacity: 0.7; }\n            100% { opacity: 0.4; }\n          }\n        `}\n        </style>\n\n        {!loaded ?\n          cachedImageHash ?\n            <img\n              src={cachedImageHash.uri}\n              style={{\n                animation: 'pulse 1.5s ease-in-out infinite',\n                position: 'absolute',\n                pointerEvents: 'none',\n                width: '100%',\n                height: '100%',\n              }}\n            />\n          : <CenteredSpinner text=\"Loading model\" />\n        : <></>}\n\n        <model-viewer\n          orientation=\"0deg -90deg 0deg\"\n          class=\"main-viewer\"\n          src={props.modelUri}\n          style={{\n            transition: 'opacity 0.5s',\n            // opacity: loaded ? 1 : 0,\n            position: 'absolute',\n            width: '100%',\n            height: '100%',\n          }}\n          camera-orbit={originalOrbit}\n          interaction-prompt={interactionPrompt}\n          environment-image=\"./skybox-lights.jpg\"\n          // skybox-image=\"./skybox-lights.jpg\"\n          exposure={2}\n          max-camera-orbit=\"auto 180deg auto\"\n          min-camera-orbit=\"auto 0deg auto\"\n          camera-controls\n          ar\n          ref={modelViewerRef}\n        >\n          <span slot=\"progress-bar\"></span>\n        </model-viewer>\n        <model-viewer\n          orientation=\"0deg -90deg 0deg\"\n          src=\"./axes.glb\"\n          style={{\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            zIndex: 10,\n            height: '100px',\n            width: '100px',\n          }}\n          loading=\"eager\"\n          camera-orbit={originalOrbit}\n          // interpolation-decay=\"0\"\n          // environment-image=\"./skybox-lights.jpg\"\n          max-camera-orbit=\"auto 180deg auto\"\n          min-camera-orbit=\"auto 0deg auto\"\n          orbit-sensitivity=\"5\"\n          interaction-prompt=\"none\"\n          camera-controls=\"false\"\n          disable-zoom\n          disable-tap\n          disable-pan\n          ref={axesViewerRef}\n        >\n          <span slot=\"progress-bar\"></span>\n        </model-viewer>\n      </div>\n    );\n  },\n);\n\nexport default ModelViewer;\n","'use client';\nimport * as React from 'react';\nimport { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { CSSTransition } from 'primereact/csstransition';\nimport { useMergeProps, useMountEffect } from 'primereact/hooks';\nimport { MinusIcon } from 'primereact/icons/minus';\nimport { PlusIcon } from 'primereact/icons/plus';\nimport { Ripple } from 'primereact/ripple';\nimport { classNames, UniqueComponentId, IconUtils } from 'primereact/utils';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\n\nvar FieldsetBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Fieldset',\n    id: null,\n    legend: null,\n    className: null,\n    style: null,\n    toggleable: null,\n    collapsed: null,\n    collapseIcon: null,\n    transitionOptions: null,\n    expandIcon: null,\n    onExpand: null,\n    onCollapse: null,\n    onToggle: null,\n    onClick: null,\n    children: undefined\n  },\n  css: {\n    classes: {\n      root: function root(_ref) {\n        var props = _ref.props;\n        return classNames('p-fieldset p-component', {\n          'p-fieldset-toggleable': props.toggleable\n        });\n      },\n      toggleableContent: 'p-toggleable-content',\n      togglericon: 'p-fieldset-toggler',\n      legendTitle: 'p-fieldset-legend-text',\n      legend: 'p-fieldset-legend p-unselectable-text',\n      content: 'p-fieldset-content',\n      transition: 'p-toggleable-content'\n    },\n    styles: \"\\n        @layer primereact {\\n            .p-fieldset-legend > a,\\n            .p-fieldset-legend > span {\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n            }\\n            \\n            .p-fieldset-toggleable .p-fieldset-legend a {\\n                cursor: pointer;\\n                user-select: none;\\n                overflow: hidden;\\n                position: relative;\\n                text-decoration: none;\\n            }\\n            \\n            .p-fieldset-legend-text {\\n                line-height: 1;\\n            }\\n        }\\n        \"\n  }\n});\n\nvar Fieldset = /*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = FieldsetBase.getProps(inProps, context);\n  var _React$useState = React.useState(props.id),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    idState = _React$useState2[0],\n    setIdState = _React$useState2[1];\n  var _React$useState3 = React.useState(props.collapsed),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    collapsedState = _React$useState4[0],\n    setCollapsedState = _React$useState4[1];\n  var collapsed = props.toggleable ? props.onToggle ? props.collapsed : collapsedState : false;\n  var elementRef = React.useRef(null);\n  var contentRef = React.useRef(null);\n  var headerId = idState + '_header';\n  var contentId = idState + '_content';\n  var _FieldsetBase$setMeta = FieldsetBase.setMetaData({\n      props: props,\n      state: {\n        id: idState,\n        collapsed: collapsed\n      }\n    }),\n    ptm = _FieldsetBase$setMeta.ptm,\n    cx = _FieldsetBase$setMeta.cx,\n    isUnstyled = _FieldsetBase$setMeta.isUnstyled;\n  useHandleStyle(FieldsetBase.css.styles, isUnstyled, {\n    name: 'fieldset'\n  });\n  var toggle = function toggle(event) {\n    if (props.toggleable) {\n      collapsed ? expand(event) : collapse(event);\n      if (props.onToggle) {\n        props.onToggle({\n          originalEvent: event,\n          value: !collapsed\n        });\n      }\n    }\n    event.preventDefault();\n  };\n  var expand = function expand(event) {\n    if (!props.onToggle) {\n      setCollapsedState(false);\n    }\n    props.onExpand && props.onExpand(event);\n  };\n  var collapse = function collapse(event) {\n    if (!props.onToggle) {\n      setCollapsedState(true);\n    }\n    props.onCollapse && props.onCollapse(event);\n  };\n  useMountEffect(function () {\n    if (!props.id) {\n      setIdState(UniqueComponentId());\n    }\n  });\n  var onKeyDown = function onKeyDown(event) {\n    if (event.code === 'Enter' || event.code === 'NumpadEnter' || event.code === 'Space') {\n      toggle(event);\n      event.preventDefault();\n    }\n  };\n  var createContent = function createContent() {\n    var contentProps = mergeProps({\n      className: cx('content')\n    }, ptm('content'));\n    var toggleableProps = mergeProps({\n      ref: contentRef,\n      id: contentId,\n      role: 'region',\n      'aria-labelledby': headerId,\n      className: cx('toggleableContent')\n    }, ptm('toggleableContent'));\n    var transitionProps = mergeProps({\n      classNames: cx('transition'),\n      timeout: {\n        enter: 1000,\n        exit: 450\n      },\n      \"in\": !collapsed,\n      unmountOnExit: true,\n      options: props.transitionOptions\n    }, ptm('transition'));\n    return /*#__PURE__*/React.createElement(CSSTransition, _extends({\n      nodeRef: contentRef\n    }, transitionProps), /*#__PURE__*/React.createElement(\"div\", toggleableProps, /*#__PURE__*/React.createElement(\"div\", contentProps, props.children)));\n  };\n  var createToggleIcon = function createToggleIcon() {\n    if (props.toggleable) {\n      var togglerIconProps = mergeProps({\n        className: cx('togglericon')\n      }, ptm('togglericon'));\n      var icon = collapsed ? props.expandIcon || /*#__PURE__*/React.createElement(PlusIcon, togglerIconProps) : props.collapseIcon || /*#__PURE__*/React.createElement(MinusIcon, togglerIconProps);\n      var toggleIcon = IconUtils.getJSXIcon(icon, togglerIconProps, {\n        props: props\n      });\n      return toggleIcon;\n    }\n    return null;\n  };\n  var createLegendContent = function createLegendContent() {\n    var legendTextProps = mergeProps({\n      className: cx('legendTitle')\n    }, ptm('legendTitle'));\n    var togglerProps = mergeProps({\n      id: headerId,\n      role: 'button',\n      'aria-expanded': !collapsed,\n      'aria-controls': contentId,\n      onKeyDown: onKeyDown,\n      onClick: toggle,\n      'aria-label': props.legend,\n      tabIndex: 0\n    }, ptm('toggler'));\n    if (props.toggleable) {\n      var toggleIcon = createToggleIcon();\n      return /*#__PURE__*/React.createElement(\"a\", togglerProps, toggleIcon, /*#__PURE__*/React.createElement(\"span\", legendTextProps, props.legend), /*#__PURE__*/React.createElement(Ripple, null));\n    }\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, legendTextProps, {\n      id: headerId\n    }), props.legend);\n  };\n  var createLegend = function createLegend() {\n    var legendProps = mergeProps({\n      className: cx('legend')\n    }, ptm('legend'));\n    if (props.legend != null || props.toggleable) {\n      var legendContent = createLegendContent();\n      return /*#__PURE__*/React.createElement(\"legend\", legendProps, legendContent);\n    }\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      getElement: function getElement() {\n        return elementRef.current;\n      },\n      getContent: function getContent() {\n        return contentRef.current;\n      }\n    };\n  });\n  var rootProps = mergeProps({\n    id: idState,\n    ref: elementRef,\n    style: props.style,\n    className: classNames(props.className, cx('root')),\n    onClick: props.onClick\n  }, FieldsetBase.getOtherProps(props), ptm('root'));\n  var legend = createLegend();\n  var content = createContent();\n  return /*#__PURE__*/React.createElement(\"fieldset\", rootProps, legend, content);\n});\nFieldset.displayName = 'Fieldset';\n\nexport { Fieldset };\n","'use client';\nimport * as React from 'react';\nimport { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { useMergeProps, useUpdateEffect, useMountEffect } from 'primereact/hooks';\nimport { CheckIcon } from 'primereact/icons/check';\nimport { Tooltip } from 'primereact/tooltip';\nimport { classNames, DomHandler, ObjectUtils, IconUtils } from 'primereact/utils';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\n\nvar classes = {\n  box: 'p-checkbox-box',\n  input: 'p-checkbox-input',\n  icon: 'p-checkbox-icon',\n  root: function root(_ref) {\n    var props = _ref.props,\n      checked = _ref.checked,\n      context = _ref.context;\n    return classNames('p-checkbox p-component', {\n      'p-highlight': checked,\n      'p-disabled': props.disabled,\n      'p-invalid': props.invalid,\n      'p-variant-filled': props.variant ? props.variant === 'filled' : context && context.inputStyle === 'filled'\n    });\n  }\n};\nvar CheckboxBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Checkbox',\n    autoFocus: false,\n    checked: false,\n    className: null,\n    disabled: false,\n    falseValue: false,\n    icon: null,\n    id: null,\n    inputId: null,\n    inputRef: null,\n    invalid: false,\n    variant: null,\n    name: null,\n    onChange: null,\n    onContextMenu: null,\n    onMouseDown: null,\n    readOnly: false,\n    required: false,\n    style: null,\n    tabIndex: null,\n    tooltip: null,\n    tooltipOptions: null,\n    trueValue: true,\n    value: null,\n    children: undefined\n  },\n  css: {\n    classes: classes\n  }\n});\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar Checkbox = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = CheckboxBase.getProps(inProps, context);\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    focusedState = _React$useState2[0],\n    setFocusedState = _React$useState2[1];\n  var _CheckboxBase$setMeta = CheckboxBase.setMetaData({\n      props: props,\n      state: {\n        focused: focusedState\n      },\n      context: {\n        checked: props.checked === props.trueValue,\n        disabled: props.disabled\n      }\n    }),\n    ptm = _CheckboxBase$setMeta.ptm,\n    cx = _CheckboxBase$setMeta.cx,\n    isUnstyled = _CheckboxBase$setMeta.isUnstyled;\n  useHandleStyle(CheckboxBase.css.styles, isUnstyled, {\n    name: 'checkbox'\n  });\n  var elementRef = React.useRef(null);\n  var inputRef = React.useRef(props.inputRef);\n  var isChecked = function isChecked() {\n    return props.checked === props.trueValue;\n  };\n  var _onChange = function onChange(event) {\n    if (props.disabled || props.readOnly) {\n      return;\n    }\n    if (props.onChange) {\n      var _props$onChange;\n      var _checked = isChecked();\n      var value = _checked ? props.falseValue : props.trueValue;\n      var eventData = {\n        originalEvent: event,\n        value: props.value,\n        checked: value,\n        stopPropagation: function stopPropagation() {\n          event === null || event === void 0 || event.stopPropagation();\n        },\n        preventDefault: function preventDefault() {\n          event === null || event === void 0 || event.preventDefault();\n        },\n        target: {\n          type: 'checkbox',\n          name: props.name,\n          id: props.id,\n          value: props.value,\n          checked: value\n        }\n      };\n      props === null || props === void 0 || (_props$onChange = props.onChange) === null || _props$onChange === void 0 || _props$onChange.call(props, eventData);\n\n      // do not continue if the user defined click wants to prevent\n      if (event.defaultPrevented) {\n        return;\n      }\n      DomHandler.focus(inputRef.current);\n    }\n  };\n  var _onFocus = function onFocus(event) {\n    var _props$onFocus;\n    setFocusedState(true);\n    props === null || props === void 0 || (_props$onFocus = props.onFocus) === null || _props$onFocus === void 0 || _props$onFocus.call(props, event);\n  };\n  var _onBlur = function onBlur(event) {\n    var _props$onBlur;\n    setFocusedState(false);\n    props === null || props === void 0 || (_props$onBlur = props.onBlur) === null || _props$onBlur === void 0 || _props$onBlur.call(props, event);\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      focus: function focus() {\n        return DomHandler.focus(inputRef.current);\n      },\n      getElement: function getElement() {\n        return elementRef.current;\n      },\n      getInput: function getInput() {\n        return inputRef.current;\n      }\n    };\n  });\n  React.useEffect(function () {\n    ObjectUtils.combinedRefs(inputRef, props.inputRef);\n  }, [inputRef, props.inputRef]);\n  useUpdateEffect(function () {\n    inputRef.current.checked = isChecked();\n  }, [props.checked, props.trueValue]);\n  useMountEffect(function () {\n    if (props.autoFocus) {\n      DomHandler.focus(inputRef.current, props.autoFocus);\n    }\n  });\n  var checked = isChecked();\n  var hasTooltip = ObjectUtils.isNotEmpty(props.tooltip);\n  var otherProps = CheckboxBase.getOtherProps(props);\n  var rootProps = mergeProps({\n    id: props.id,\n    className: classNames(props.className, cx('root', {\n      checked: checked,\n      context: context\n    })),\n    style: props.style,\n    'data-p-highlight': checked,\n    'data-p-disabled': props.disabled,\n    onContextMenu: props.onContextMenu,\n    onMouseDown: props.onMouseDown\n  }, otherProps, ptm('root'));\n  var createInputElement = function createInputElement() {\n    var ariaProps = ObjectUtils.reduceKeys(otherProps, DomHandler.ARIA_PROPS);\n    var inputProps = mergeProps(_objectSpread({\n      id: props.inputId,\n      type: 'checkbox',\n      className: cx('input'),\n      name: props.name,\n      tabIndex: props.tabIndex,\n      onFocus: function onFocus(e) {\n        return _onFocus(e);\n      },\n      onBlur: function onBlur(e) {\n        return _onBlur(e);\n      },\n      onChange: function onChange(e) {\n        return _onChange(e);\n      },\n      disabled: props.disabled,\n      readOnly: props.readOnly,\n      required: props.required,\n      'aria-invalid': props.invalid,\n      checked: checked\n    }, ariaProps), ptm('input'));\n    return /*#__PURE__*/React.createElement(\"input\", _extends({\n      ref: inputRef\n    }, inputProps));\n  };\n  var createBoxElement = function createBoxElement() {\n    var iconProps = mergeProps({\n      className: cx('icon')\n    }, ptm('icon'));\n    var boxProps = mergeProps({\n      className: cx('box', {\n        checked: checked\n      }),\n      'data-p-highlight': checked,\n      'data-p-disabled': props.disabled\n    }, ptm('box'));\n    var icon = checked ? props.icon || /*#__PURE__*/React.createElement(CheckIcon, iconProps) : null;\n    var checkboxIcon = IconUtils.getJSXIcon(icon, _objectSpread({}, iconProps), {\n      props: props,\n      checked: checked\n    });\n    return /*#__PURE__*/React.createElement(\"div\", boxProps, checkboxIcon);\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: elementRef\n  }, rootProps), createInputElement(), createBoxElement()), hasTooltip && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    target: elementRef,\n    content: props.tooltip,\n    pt: ptm('tooltip')\n  }, props.tooltipOptions)));\n}));\nCheckbox.displayName = 'Checkbox';\n\nexport { Checkbox };\n","'use client';\nimport * as React from 'react';\nimport { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { useMergeProps, useEventListener } from 'primereact/hooks';\nimport { classNames, ObjectUtils, DomHandler } from 'primereact/utils';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\n\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\n\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\n\nvar classes = {\n  handle: function handle(_ref) {\n    var index = _ref.index,\n      handleIndex = _ref.handleIndex;\n    return classNames('p-slider-handle', {\n      'p-slider-handle-start': index === 0,\n      'p-slider-handle-end': index === 1,\n      'p-slider-handle-active': handleIndex.current === index\n    });\n  },\n  range: 'p-slider-range',\n  root: function root(_ref2) {\n    var props = _ref2.props,\n      vertical = _ref2.vertical,\n      horizontal = _ref2.horizontal;\n    return classNames('p-slider p-component', {\n      'p-disabled': props.disabled,\n      'p-slider-horizontal': horizontal,\n      'p-slider-vertical': vertical\n    });\n  }\n};\nvar styles = \"\\n@layer primereact {\\n    .p-slider {\\n        position: relative;\\n    }\\n    \\n    .p-slider .p-slider-handle {\\n        position: absolute;\\n        cursor: grab;\\n        touch-action: none;\\n        display: block;\\n        z-index: 1;\\n    }\\n    \\n    .p-slider .p-slider-handle.p-slider-handle-active {\\n        z-index: 2;\\n    }\\n    \\n    .p-slider-range {\\n        position: absolute;\\n        display: block;\\n    }\\n    \\n    .p-slider-horizontal .p-slider-range {\\n        top: 0;\\n        left: 0;\\n        height: 100%;\\n    }\\n    \\n    .p-slider-horizontal .p-slider-handle {\\n        top: 50%;\\n    }\\n    \\n    .p-slider-vertical {\\n        height: 100px;\\n    }\\n    \\n    .p-slider-vertical .p-slider-handle {\\n        left: 50%;\\n    }\\n    \\n    .p-slider-vertical .p-slider-range {\\n        bottom: 0;\\n        left: 0;\\n        width: 100%;\\n    }\\n}\\n\";\nvar inlineStyles = {\n  handle: {\n    position: 'absolute'\n  },\n  range: {\n    position: 'absolute'\n  }\n};\nvar SliderBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Slider',\n    id: null,\n    value: null,\n    min: 0,\n    max: 100,\n    orientation: 'horizontal',\n    step: null,\n    range: false,\n    style: null,\n    className: null,\n    disabled: false,\n    tabIndex: 0,\n    onChange: null,\n    onSlideEnd: null,\n    children: undefined\n  },\n  css: {\n    classes: classes,\n    styles: styles,\n    inlineStyles: inlineStyles\n  }\n});\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar Slider = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var _props$value, _ref, _props$value2;\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = SliderBase.getProps(inProps, context);\n  var elementRef = React.useRef(null);\n  var handleIndex = React.useRef(0);\n  var sliderHandleClick = React.useRef(false);\n  var dragging = React.useRef(false);\n  var initX = React.useRef(0);\n  var initY = React.useRef(0);\n  var barWidth = React.useRef(0);\n  var barHeight = React.useRef(0);\n  var touchId = React.useRef();\n  var value = props.range ? (_props$value = props.value) !== null && _props$value !== void 0 ? _props$value : [props.min, props.max] : (_ref = (_props$value2 = props.value) !== null && _props$value2 !== void 0 ? _props$value2 : props.min) !== null && _ref !== void 0 ? _ref : 0;\n  var horizontal = props.orientation === 'horizontal';\n  var vertical = props.orientation === 'vertical';\n  var _useEventListener = useEventListener({\n      type: 'mousemove',\n      listener: function listener(event) {\n        return onDrag(event);\n      }\n    }),\n    _useEventListener2 = _slicedToArray(_useEventListener, 2),\n    bindDocumentMouseMoveListener = _useEventListener2[0],\n    unbindDocumentMouseMoveListener = _useEventListener2[1];\n  var _useEventListener3 = useEventListener({\n      type: 'mouseup',\n      listener: function listener(event) {\n        return onDragEnd(event);\n      }\n    }),\n    _useEventListener4 = _slicedToArray(_useEventListener3, 2),\n    bindDocumentMouseUpListener = _useEventListener4[0],\n    unbindDocumentMouseUpListener = _useEventListener4[1];\n  var _useEventListener5 = useEventListener({\n      type: 'touchmove',\n      listener: function listener(event) {\n        return onDrag(event);\n      }\n    }),\n    _useEventListener6 = _slicedToArray(_useEventListener5, 2),\n    bindDocumentTouchMoveListener = _useEventListener6[0],\n    unbindDocumentTouchMoveListener = _useEventListener6[1];\n  var _useEventListener7 = useEventListener({\n      type: 'touchend',\n      listener: function listener(event) {\n        return onDragEnd(event);\n      }\n    }),\n    _useEventListener8 = _slicedToArray(_useEventListener7, 2),\n    bindDocumentTouchEndListener = _useEventListener8[0],\n    unbindDocumentTouchEndListener = _useEventListener8[1];\n  var _SliderBase$setMetaDa = SliderBase.setMetaData({\n      props: props\n    }),\n    ptm = _SliderBase$setMetaDa.ptm,\n    cx = _SliderBase$setMetaDa.cx,\n    sx = _SliderBase$setMetaDa.sx,\n    isUnstyled = _SliderBase$setMetaDa.isUnstyled;\n  useHandleStyle(SliderBase.css.styles, isUnstyled, {\n    name: 'slider'\n  });\n  var spin = function spin(event, dir) {\n    var val = props.range ? value[handleIndex.current] : value;\n    var step = (props.step || 1) * dir;\n    updateValue(event, val + step);\n    event.preventDefault();\n  };\n  var onDragStart = function onDragStart(event, index) {\n    if (props.disabled) {\n      return;\n    }\n    dragging.current = true;\n    updateDomData();\n    sliderHandleClick.current = true;\n    if (props.range && value[0] === props.max) {\n      handleIndex.current = 0;\n    } else {\n      handleIndex.current = index;\n    }\n    event.preventDefault();\n  };\n  var onDrag = function onDrag(event) {\n    if (dragging.current) {\n      setValue(event);\n      event.preventDefault();\n    }\n  };\n  var onDragEnd = function onDragEnd(event) {\n    if (dragging.current) {\n      dragging.current = false;\n      var newValue = setValue(event);\n      props.onSlideEnd && props.onSlideEnd({\n        originalEvent: event,\n        value: newValue\n      });\n      touchId.current = undefined;\n      unbindDocumentMouseMoveListener();\n      unbindDocumentMouseUpListener();\n      unbindDocumentTouchMoveListener();\n      unbindDocumentTouchEndListener();\n    }\n  };\n  var _onMouseDown = function onMouseDown(event, index) {\n    bindDocumentMouseMoveListener();\n    bindDocumentMouseUpListener();\n    onDragStart(event, index);\n  };\n  var _onTouchStart = function onTouchStart(event, index) {\n    if (event.changedTouches && event.changedTouches[0]) {\n      touchId.current = event.changedTouches[0].identifier;\n    }\n    bindDocumentTouchMoveListener();\n    bindDocumentTouchEndListener();\n    onDragStart(event, index);\n  };\n  var _onKeyDown = function onKeyDown(event, index) {\n    if (props.disabled) {\n      return;\n    }\n    handleIndex.current = index;\n    var key = event.key;\n    switch (key) {\n      case 'ArrowRight':\n      case 'ArrowUp':\n        spin(event, 1);\n        break;\n      case 'ArrowLeft':\n      case 'ArrowDown':\n        spin(event, -1);\n        break;\n      case 'PageUp':\n        spin(event, 10);\n        event.preventDefault();\n        break;\n      case 'PageDown':\n        spin(event, -10);\n        event.preventDefault();\n        break;\n      case 'Home':\n        spin(event, -value);\n        event.preventDefault();\n        break;\n      case 'End':\n        spin(event, props.max);\n        event.preventDefault();\n        break;\n    }\n  };\n  var onBarClick = function onBarClick(event) {\n    if (props.disabled) {\n      return;\n    }\n    if (!sliderHandleClick.current) {\n      updateDomData();\n      var _value = setValue(event);\n      props.onSlideEnd && props.onSlideEnd({\n        originalEvent: event,\n        value: _value\n      });\n    }\n    sliderHandleClick.current = false;\n  };\n  var updateDomData = function updateDomData() {\n    var rect = elementRef.current.getBoundingClientRect();\n    initX.current = rect.left + DomHandler.getWindowScrollLeft();\n    initY.current = rect.top + DomHandler.getWindowScrollTop();\n    barWidth.current = elementRef.current.offsetWidth;\n    barHeight.current = elementRef.current.offsetHeight;\n  };\n  var trackTouch = function trackTouch(event) {\n    var _event$changedTouches;\n    var _event = Array.from((_event$changedTouches = event.changedTouches) !== null && _event$changedTouches !== void 0 ? _event$changedTouches : []).find(function (t) {\n      return t.identifier === touchId.current;\n    }) || event;\n    return {\n      pageX: _event.pageX,\n      pageY: _event.pageY\n    };\n  };\n  var setValue = function setValue(event) {\n    var handleValue;\n    var _trackTouch = trackTouch(event),\n      pageX = _trackTouch.pageX,\n      pageY = _trackTouch.pageY;\n    if (!pageX || !pageY) {\n      return;\n    }\n    if (horizontal) {\n      handleValue = (pageX - initX.current) * 100 / barWidth.current;\n    } else {\n      handleValue = (initY.current + barHeight.current - pageY) * 100 / barHeight.current;\n    }\n    var newValue = (props.max - props.min) * (handleValue / 100) + props.min;\n    if (props.step) {\n      var oldValue = props.range ? value[handleIndex.current] : value;\n      var diff = newValue - oldValue;\n      if (diff < 0) {\n        newValue = oldValue + Math.ceil(newValue / props.step - oldValue / props.step) * props.step;\n      } else if (diff > 0) {\n        newValue = oldValue + Math.floor(newValue / props.step - oldValue / props.step) * props.step;\n      }\n    } else {\n      newValue = Math.floor(newValue);\n    }\n    return updateValue(event, newValue);\n  };\n  var updateValue = function updateValue(event, val) {\n    var parsedValue = parseFloat(val.toFixed(10));\n    var newValue = parsedValue;\n    if (props.range) {\n      if (handleIndex.current === 0) {\n        if (parsedValue < props.min) {\n          parsedValue = props.min;\n        } else if (parsedValue > props.max) {\n          parsedValue = props.max;\n        }\n      } else if (parsedValue > props.max) {\n        parsedValue = props.max;\n      } else if (parsedValue < props.min) {\n        parsedValue = props.min;\n      }\n      newValue = _toConsumableArray(value);\n      newValue[handleIndex.current] = parsedValue;\n      if (props.onChange) {\n        props.onChange({\n          originalEvent: event,\n          value: newValue\n        });\n      }\n    } else {\n      if (parsedValue < props.min) {\n        parsedValue = props.min;\n      } else if (parsedValue > props.max) {\n        parsedValue = props.max;\n      }\n      newValue = parsedValue;\n      if (props.onChange) {\n        props.onChange({\n          originalEvent: event,\n          value: newValue\n        });\n      }\n    }\n    return newValue;\n  };\n  var createHandle = function createHandle(leftValue, bottomValue, index) {\n    leftValue = ObjectUtils.isEmpty(leftValue) ? null : leftValue;\n    bottomValue = ObjectUtils.isEmpty(bottomValue) ? null : bottomValue;\n    var style = {\n      transition: dragging.current ? 'none' : null,\n      left: leftValue != null ? leftValue + '%' : null,\n      bottom: bottomValue != null ? bottomValue + '%' : null\n    };\n    var handleProps = mergeProps(_objectSpread({\n      className: cx('handle', {\n        index: index,\n        handleIndex: handleIndex\n      }),\n      style: _objectSpread(_objectSpread({}, sx('handle', {\n        dragging: dragging,\n        leftValue: leftValue,\n        bottomValue: bottomValue\n      })), style),\n      tabIndex: props.tabIndex,\n      role: 'slider',\n      onMouseDown: function onMouseDown(event) {\n        return _onMouseDown(event, index);\n      },\n      onTouchStart: function onTouchStart(event) {\n        return _onTouchStart(event, index);\n      },\n      onKeyDown: function onKeyDown(event) {\n        return _onKeyDown(event, index);\n      },\n      'aria-valuemin': props.min,\n      'aria-valuemax': props.max,\n      'aria-valuenow': leftValue || bottomValue || 0,\n      'aria-orientation': props.orientation\n    }, ariaProps), ptm('handle'));\n    return /*#__PURE__*/React.createElement(\"span\", handleProps);\n  };\n  var createRangeSlider = function createRangeSlider() {\n    var handleValueStart = (value[0] < props.min ? props.min : value[0] - props.min) * 100 / (props.max - props.min);\n    var handleValueEnd = (value[1] > props.max ? props.max : value[1] - props.min) * 100 / (props.max - props.min);\n    var rangeStartHandle = horizontal ? createHandle(handleValueStart, null, 0) : createHandle(null, handleValueStart, 0);\n    var rangeEndHandle = horizontal ? createHandle(handleValueEnd, null, 1) : createHandle(null, handleValueEnd, 1);\n    var rangeSliderWidth = handleValueEnd > handleValueStart ? handleValueEnd - handleValueStart : handleValueStart - handleValueEnd;\n    var rangeSliderPosition = handleValueEnd > handleValueStart ? handleValueStart : handleValueEnd;\n    var rangeStyle = horizontal ? {\n      left: rangeSliderPosition + '%',\n      width: rangeSliderWidth + '%'\n    } : {\n      bottom: rangeSliderPosition + '%',\n      height: rangeSliderWidth + '%'\n    };\n    var rangeProps = mergeProps({\n      className: cx('range'),\n      style: _objectSpread(_objectSpread({}, sx('range')), rangeStyle)\n    }, ptm('range'));\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", rangeProps), rangeStartHandle, rangeEndHandle);\n  };\n  var createSingleSlider = function createSingleSlider() {\n    var handleValue;\n    if (value < props.min) {\n      handleValue = props.min;\n    } else if (value > props.max) {\n      handleValue = props.max;\n    } else {\n      handleValue = (value - props.min) * 100 / (props.max - props.min);\n    }\n    var rangeStyle = horizontal ? {\n      width: handleValue + '%'\n    } : {\n      height: handleValue + '%'\n    };\n    var handle = horizontal ? createHandle(handleValue, null, null) : createHandle(null, handleValue, null);\n    var rangeProps = mergeProps({\n      className: cx('range'),\n      style: _objectSpread(_objectSpread({}, sx('range')), rangeStyle)\n    }, ptm('range'));\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", rangeProps), handle);\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      getElement: function getElement() {\n        return elementRef.current;\n      }\n    };\n  });\n  var otherProps = SliderBase.getOtherProps(props);\n  var ariaProps = ObjectUtils.reduceKeys(otherProps, DomHandler.ARIA_PROPS);\n  var content = props.range ? createRangeSlider() : createSingleSlider();\n  var rootProps = mergeProps({\n    style: props.style,\n    className: classNames(props.className, cx('root', {\n      vertical: vertical,\n      horizontal: horizontal\n    })),\n    onClick: onBarClick\n  }, SliderBase.getOtherProps(props), ptm('root'));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: props.id,\n    ref: elementRef\n  }, rootProps), content);\n}));\nSlider.displayName = 'Slider';\n\nexport { Slider };\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport React, { CSSProperties } from 'react';\n\nimport { Parameter, ParameterSet } from '../services/openscad-wasm-runner/actions.ts';\nimport { CenteredSpinner } from './CenteredSpinner.tsx';\nimport { InputNumber } from 'primereact/inputnumber';\nimport { InputText } from 'primereact/inputtext';\nimport { Fieldset } from 'primereact/fieldset';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Checkbox } from 'primereact/checkbox';\nimport { Slider } from 'primereact/slider';\nimport styles from './CustomizerPanel.module.css';\n\ninterface CustomizerProps {\n  className?: string;\n  style?: CSSProperties;\n  parameterSet?: ParameterSet;\n  parameterValues: { [key: string]: any };\n  onChange: (name: string, value: any) => void;\n}\n\nexport default function CustomizerPanel(props: CustomizerProps) {\n  const groupedParameters = (props.parameterSet?.parameters ?? []).reduce(\n    (acc, param) => {\n      if (!acc[param.group]) {\n        acc[param.group] = [];\n      }\n      acc[param.group].push(param);\n      return acc;\n    },\n    {} as { [key: string]: any[] },\n  );\n\n  const groups = Object.entries(groupedParameters);\n  const skipSingleRootGroup = groups.length === 1;\n\n  return props.parameterSet ?\n      <div\n        className={styles.customizerRoot + (props.className ? ' ' + props.className : '')}\n        style={props.style}\n      >\n        {groups.map(([group, params]) =>\n          skipSingleRootGroup ?\n            <>\n              {params.map((param) => (\n                <ParameterInput\n                  key={param.name}\n                  value={props.parameterValues[param.name]}\n                  param={param}\n                  handleChange={props.onChange}\n                />\n              ))}\n            </>\n          : <Fieldset className={styles.customizerFieldset} key={group} legend={group} toggleable>\n              {params.map((param) => (\n                <ParameterInput\n                  key={param.name}\n                  value={props.parameterValues[param.name]}\n                  param={param}\n                  handleChange={props.onChange}\n                />\n              ))}\n            </Fieldset>,\n        )}\n      </div>\n    : <CenteredSpinner text=\"Waiting for customizer to run\" />;\n}\n\nfunction ParameterInput({\n  param,\n  value,\n  style,\n  handleChange,\n}: {\n  param: Parameter;\n  value: any;\n  style?: React.CSSProperties;\n  handleChange: (key: string, value: any) => void;\n}) {\n  const resetVisible =\n    value !== undefined && JSON.stringify(value) !== JSON.stringify(param.initial);\n  return (\n    <div className={styles.parameterInput} style={style}>\n      <div className={styles.parameterInputRow}>\n        <div className={styles.parameterInputLeft}>\n          <label className={styles.parameterInputLabel}>\n            <b>{param.name}</b>\n            <i\n              className={\n                'pi pi-refresh '\n                + styles.parameterInputReset\n                + ' '\n                + (resetVisible ?\n                  styles.parameterInputResetVisible\n                : styles.parameterInputResetHidden)\n              }\n              onClick={() => handleChange(param.name, param.initial)}\n            ></i>\n          </label>\n          <div className={styles.parameterInputCaption}>{param.caption}</div>\n        </div>\n        <div className={styles.parameterInputRight}>\n          {param.type === 'number' && 'options' in param && (\n            <Dropdown\n              className={styles.parameterInputDropdown}\n              value={value !== undefined && value !== null ? value : param.initial}\n              options={param.options}\n              onChange={(e) => handleChange(param.name, e.value)}\n              optionLabel=\"name\"\n              optionValue=\"value\"\n            />\n          )}\n          {param.type === 'string' && param.options && (\n            <Dropdown\n              className={styles.parameterInputDropdown}\n              value={value !== undefined && value !== null ? value : param.initial}\n              options={param.options}\n              onChange={(e) => handleChange(param.name, e.value)}\n              optionLabel=\"name\"\n              optionValue=\"value\"\n            />\n          )}\n          {param.type === 'boolean' && (\n            <Checkbox\n              checked={value !== undefined && value !== null ? value : param.initial}\n              onChange={(e) => handleChange(param.name, e.checked)}\n            />\n          )}\n          {!Array.isArray(param.initial) && param.type === 'number' && !('options' in param) && (\n            <InputNumber\n              className={styles.parameterInputNumber}\n              value={value !== undefined && value !== null ? value : param.initial}\n              showButtons\n              size={5}\n              onValueChange={(e) => handleChange(param.name, e.value)}\n            />\n          )}\n          {param.type === 'string' && !param.options && (\n            <InputText\n              className={styles.parameterInputText}\n              value={value !== undefined && value !== null ? value : param.initial}\n              onChange={(e) => handleChange(param.name, e.target.value)}\n            />\n          )}\n          {Array.isArray(param.initial) && 'min' in param && (\n            <div className={styles.parameterInputArrayRow}>\n              {param.initial.map((_, index) => (\n                <InputNumber\n                  className={styles.parameterInputNumber}\n                  key={index}\n                  value={\n                    value?.[index] !== undefined && value?.[index] !== null ?\n                      value[index]\n                    : (param.initial as any)[index]\n                  }\n                  min={param.min}\n                  max={param.max}\n                  showButtons\n                  size={5}\n                  step={param.step}\n                  onValueChange={(e) => {\n                    const newArray = [...(value ?? param.initial)];\n                    newArray[index] = e.value;\n                    handleChange(param.name, newArray);\n                  }}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n      {!Array.isArray(param.initial) && param.type === 'number' && param.min !== undefined && (\n        <Slider\n          className={styles.parameterInputSlider}\n          value={value !== undefined && value !== null ? value : param.initial}\n          min={param.min}\n          max={param.max}\n          step={param.step}\n          onChange={(e) => handleChange(param.name, e.value)}\n        />\n      )}\n    </div>\n  );\n}\n","'use client';\nimport * as React from 'react';\nimport { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { useMergeProps } from 'primereact/hooks';\nimport { KeyFilter } from 'primereact/keyfilter';\nimport { Tooltip } from 'primereact/tooltip';\nimport { classNames, ObjectUtils, DomHandler } from 'primereact/utils';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nvar classes = {\n  root: function root(_ref) {\n    var props = _ref.props,\n      context = _ref.context,\n      isFilled = _ref.isFilled;\n    return classNames('p-inputtextarea p-inputtext p-component', {\n      'p-disabled': props.disabled,\n      'p-filled': isFilled,\n      'p-inputtextarea-resizable': props.autoResize,\n      'p-invalid': props.invalid,\n      'p-variant-filled': props.variant ? props.variant === 'filled' : context && context.inputStyle === 'filled'\n    });\n  }\n};\nvar styles = \"\\n@layer primereact {\\n    .p-inputtextarea-resizable {\\n        overflow: hidden;\\n        resize: none;\\n    }\\n    \\n    .p-fluid .p-inputtextarea {\\n        width: 100%;\\n    }\\n}\\n\";\nvar InputTextareaBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'InputTextarea',\n    __parentMetadata: null,\n    autoResize: false,\n    invalid: false,\n    variant: null,\n    keyfilter: null,\n    onBlur: null,\n    onFocus: null,\n    onBeforeInput: null,\n    onInput: null,\n    onKeyDown: null,\n    onKeyUp: null,\n    onPaste: null,\n    tooltip: null,\n    tooltipOptions: null,\n    validateOnly: false,\n    children: undefined,\n    className: null\n  },\n  css: {\n    classes: classes,\n    styles: styles\n  }\n});\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar InputTextarea = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = InputTextareaBase.getProps(inProps, context);\n  var elementRef = React.useRef(ref);\n  var cachedScrollHeight = React.useRef(0);\n  var _InputTextareaBase$se = InputTextareaBase.setMetaData(_objectSpread(_objectSpread({\n      props: props\n    }, props.__parentMetadata), {}, {\n      context: {\n        disabled: props.disabled\n      }\n    })),\n    ptm = _InputTextareaBase$se.ptm,\n    cx = _InputTextareaBase$se.cx,\n    isUnstyled = _InputTextareaBase$se.isUnstyled;\n  useHandleStyle(InputTextareaBase.css.styles, isUnstyled, {\n    name: 'inputtextarea'\n  });\n  var onFocus = function onFocus(event) {\n    if (props.autoResize) {\n      resize();\n    }\n    props.onFocus && props.onFocus(event);\n  };\n  var onBlur = function onBlur(event) {\n    if (props.autoResize) {\n      resize();\n    }\n    props.onBlur && props.onBlur(event);\n  };\n  var onKeyUp = function onKeyUp(event) {\n    if (props.autoResize) {\n      resize();\n    }\n    props.onKeyUp && props.onKeyUp(event);\n  };\n  var onKeyDown = function onKeyDown(event) {\n    props.onKeyDown && props.onKeyDown(event);\n    if (props.keyfilter) {\n      KeyFilter.onKeyPress(event, props.keyfilter, props.validateOnly);\n    }\n  };\n  var onBeforeInput = function onBeforeInput(event) {\n    props.onBeforeInput && props.onBeforeInput(event);\n    if (props.keyfilter) {\n      KeyFilter.onBeforeInput(event, props.keyfilter, props.validateOnly);\n    }\n  };\n  var onPaste = function onPaste(event) {\n    props.onPaste && props.onPaste(event);\n    if (props.keyfilter) {\n      KeyFilter.onPaste(event, props.keyfilter, props.validateOnly);\n    }\n  };\n  var onInput = function onInput(event) {\n    var target = event.target;\n    if (props.autoResize) {\n      resize(ObjectUtils.isEmpty(target.value));\n    }\n    props.onInput && props.onInput(event);\n    ObjectUtils.isNotEmpty(target.value) ? DomHandler.addClass(target, 'p-filled') : DomHandler.removeClass(target, 'p-filled');\n  };\n  var resize = function resize(initial) {\n    var inputEl = elementRef.current;\n    if (inputEl && isVisible()) {\n      if (!cachedScrollHeight.current) {\n        cachedScrollHeight.current = inputEl.scrollHeight;\n        inputEl.style.overflow = 'hidden';\n      }\n      if (cachedScrollHeight.current !== inputEl.scrollHeight || initial) {\n        inputEl.style.height = '';\n        inputEl.style.height = inputEl.scrollHeight + 'px';\n        if (parseFloat(inputEl.style.height) >= parseFloat(inputEl.style.maxHeight)) {\n          inputEl.style.overflowY = 'scroll';\n          inputEl.style.height = inputEl.style.maxHeight;\n        } else {\n          inputEl.style.overflow = 'hidden';\n        }\n        cachedScrollHeight.current = inputEl.scrollHeight;\n      }\n    }\n  };\n  var isVisible = function isVisible() {\n    if (DomHandler.isVisible(elementRef.current)) {\n      var rect = elementRef.current.getBoundingClientRect();\n      return rect.width > 0 && rect.height > 0;\n    }\n    return false;\n  };\n  React.useEffect(function () {\n    ObjectUtils.combinedRefs(elementRef, ref);\n  }, [elementRef, ref]);\n  React.useEffect(function () {\n    if (props.autoResize) {\n      resize(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.autoResize, props.value]);\n  var isFilled = React.useMemo(function () {\n    return ObjectUtils.isNotEmpty(props.value) || ObjectUtils.isNotEmpty(props.defaultValue);\n  }, [props.value, props.defaultValue]);\n  var hasTooltip = ObjectUtils.isNotEmpty(props.tooltip);\n  var rootProps = mergeProps({\n    ref: elementRef,\n    className: classNames(props.className, cx('root', {\n      context: context,\n      isFilled: isFilled\n    })),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onKeyUp: onKeyUp,\n    onKeyDown: onKeyDown,\n    onBeforeInput: onBeforeInput,\n    onInput: onInput,\n    onPaste: onPaste\n  }, InputTextareaBase.getOtherProps(props), ptm('root'));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"textarea\", rootProps), hasTooltip && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    target: elementRef,\n    content: props.tooltip,\n    pt: ptm('tooltip')\n  }, props.tooltipOptions)));\n}));\nInputTextarea.displayName = 'InputTextarea';\n\nexport { InputTextarea };\n","'use client';\nimport * as React from 'react';\nimport { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { CSSTransition } from 'primereact/csstransition';\nimport { useMergeProps, useMountEffect } from 'primereact/hooks';\nimport { MinusIcon } from 'primereact/icons/minus';\nimport { PlusIcon } from 'primereact/icons/plus';\nimport { Ripple } from 'primereact/ripple';\nimport { classNames, UniqueComponentId, ObjectUtils, IconUtils } from 'primereact/utils';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\n\nvar PanelBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Panel',\n    id: null,\n    header: null,\n    headerTemplate: null,\n    footer: null,\n    footerTemplate: null,\n    toggleable: null,\n    style: null,\n    className: null,\n    collapsed: null,\n    expandIcon: null,\n    collapseIcon: null,\n    icons: null,\n    transitionOptions: null,\n    onExpand: null,\n    onCollapse: null,\n    onToggle: null,\n    children: undefined\n  },\n  css: {\n    classes: {\n      root: function root(_ref) {\n        var props = _ref.props;\n        return classNames('p-panel p-component', {\n          'p-panel-toggleable': props.toggleable\n        });\n      },\n      header: 'p-panel-header',\n      title: 'p-panel-title',\n      icons: 'p-panel-icons',\n      toggler: 'p-panel-header-icon p-panel-toggler p-link',\n      togglerIcon: 'p-panel-header-icon p-panel-toggler p-link',\n      toggleableContent: 'p-toggleable-content',\n      content: 'p-panel-content',\n      footer: 'p-panel-footer',\n      transition: 'p-toggleable-content'\n    },\n    styles: \"\\n        @layer primereact {\\n            .p-panel-header {\\n              display: flex;\\n              justify-content: space-between;\\n              align-items: center;\\n            }\\n            \\n            .p-panel-title {\\n              line-height: 1;\\n            }\\n            \\n            .p-panel-header-icon {\\n              display: inline-flex;\\n              justify-content: center;\\n              align-items: center;\\n              cursor: pointer;\\n              text-decoration: none;\\n              overflow: hidden;\\n              position: relative;\\n            }\\n        }\\n        \"\n  }\n});\n\nvar Panel = /*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = PanelBase.getProps(inProps, context);\n  var _React$useState = React.useState(props.id),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    idState = _React$useState2[0],\n    setIdState = _React$useState2[1];\n  var _React$useState3 = React.useState(props.collapsed),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    collapsedState = _React$useState4[0],\n    setCollapsedState = _React$useState4[1];\n  var elementRef = React.useRef(null);\n  var contentRef = React.useRef(null);\n  var collapsed = props.toggleable ? props.onToggle ? props.collapsed : collapsedState : false;\n  var headerId = idState + '_header';\n  var contentId = idState + '_content';\n  var _PanelBase$setMetaDat = PanelBase.setMetaData({\n      props: props,\n      state: {\n        id: idState,\n        collapsed: collapsed\n      }\n    }),\n    ptm = _PanelBase$setMetaDat.ptm,\n    cx = _PanelBase$setMetaDat.cx,\n    isUnstyled = _PanelBase$setMetaDat.isUnstyled;\n  useHandleStyle(PanelBase.css.styles, isUnstyled, {\n    name: 'panel'\n  });\n  var toggle = function toggle(event) {\n    if (!props.toggleable) {\n      return;\n    }\n    collapsed ? expand(event) : collapse(event);\n    if (event) {\n      if (props.onToggle) {\n        props.onToggle({\n          originalEvent: event,\n          value: !collapsed\n        });\n      }\n      event.preventDefault();\n    }\n  };\n  var expand = function expand(event) {\n    if (!props.onToggle) {\n      setCollapsedState(false);\n    }\n    props.onExpand && event && props.onExpand(event);\n  };\n  var collapse = function collapse(event) {\n    if (!props.onToggle) {\n      setCollapsedState(true);\n    }\n    props.onCollapse && event && props.onCollapse(event);\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      toggle: toggle,\n      expand: expand,\n      collapse: collapse,\n      getElement: function getElement() {\n        return elementRef.current;\n      },\n      getContent: function getContent() {\n        return contentRef.current;\n      }\n    };\n  });\n  useMountEffect(function () {\n    if (!idState) {\n      setIdState(UniqueComponentId());\n    }\n  });\n  var createToggleIcon = function createToggleIcon() {\n    if (props.toggleable) {\n      var buttonId = idState + '_label';\n      var togglerProps = mergeProps({\n        className: cx('toggler'),\n        onClick: toggle,\n        id: buttonId,\n        'aria-controls': contentId,\n        'aria-expanded': !collapsed,\n        type: 'button',\n        role: 'button',\n        'aria-label': props.header\n      }, ptm('toggler'));\n      var togglerIconProps = mergeProps(ptm('togglericon'));\n      var icon = collapsed ? props.expandIcon || /*#__PURE__*/React.createElement(PlusIcon, togglerIconProps) : props.collapseIcon || /*#__PURE__*/React.createElement(MinusIcon, togglerIconProps);\n      var toggleIcon = IconUtils.getJSXIcon(icon, togglerIconProps, {\n        props: props,\n        collapsed: collapsed\n      });\n      return /*#__PURE__*/React.createElement(\"button\", togglerProps, toggleIcon, /*#__PURE__*/React.createElement(Ripple, null));\n    }\n    return null;\n  };\n  var createHeader = function createHeader() {\n    var header = ObjectUtils.getJSXElement(props.header, props);\n    var icons = ObjectUtils.getJSXElement(props.icons, props);\n    var togglerElement = createToggleIcon();\n    var titleProps = mergeProps({\n      id: headerId,\n      className: cx('title')\n    }, ptm('title'));\n    var titleElement = /*#__PURE__*/React.createElement(\"span\", titleProps, header);\n    var iconsProps = mergeProps({\n      className: cx('icons')\n    }, ptm('icons'));\n    var iconsElement = /*#__PURE__*/React.createElement(\"div\", iconsProps, icons, togglerElement);\n    var headerProps = mergeProps({\n      className: cx('header')\n    }, ptm('header'));\n    var content = /*#__PURE__*/React.createElement(\"div\", headerProps, titleElement, iconsElement);\n    if (props.headerTemplate) {\n      var defaultContentOptions = {\n        className: 'p-panel-header',\n        titleClassName: 'p-panel-title',\n        iconsClassName: 'p-panel-icons',\n        togglerClassName: 'p-panel-header-icon p-panel-toggler p-link',\n        onTogglerClick: toggle,\n        titleElement: titleElement,\n        iconsElement: iconsElement,\n        togglerElement: togglerElement,\n        element: content,\n        id: idState + '_header',\n        props: props,\n        collapsed: collapsed\n      };\n      return ObjectUtils.getJSXElement(props.headerTemplate, defaultContentOptions);\n    } else if (props.header || props.toggleable) {\n      return content;\n    }\n    return null;\n  };\n  var createFooter = function createFooter() {\n    var footer = ObjectUtils.getJSXElement(props.footer, props);\n    var footerProps = mergeProps({\n      className: cx('footer')\n    }, ptm('footer'));\n    var content = /*#__PURE__*/React.createElement(\"div\", footerProps, footer);\n    if (props.footerTemplate) {\n      var defaultContentOptions = {\n        className: cx('footer'),\n        element: content,\n        props: props\n      };\n      return ObjectUtils.getJSXElement(props.footerTemplate, defaultContentOptions);\n    } else if (props.footer) {\n      return content;\n    }\n    return null;\n  };\n  var createContent = function createContent() {\n    var toggleableContentProps = mergeProps({\n      ref: contentRef,\n      className: cx('toggleableContent'),\n      'aria-hidden': collapsed,\n      role: 'region',\n      id: contentId,\n      'aria-labelledby': headerId\n    }, ptm('toggleablecontent'));\n    var contentProps = mergeProps({\n      className: cx('content')\n    }, ptm('content'));\n    var transitionProps = mergeProps({\n      classNames: cx('transition'),\n      timeout: {\n        enter: 1000,\n        exit: 450\n      },\n      \"in\": !collapsed,\n      unmountOnExit: true,\n      options: props.transitionOptions\n    }, ptm('transition'));\n    return /*#__PURE__*/React.createElement(CSSTransition, _extends({\n      nodeRef: contentRef\n    }, transitionProps), /*#__PURE__*/React.createElement(\"div\", toggleableContentProps, /*#__PURE__*/React.createElement(\"div\", contentProps, props.children)));\n  };\n  var rootProps = mergeProps({\n    id: idState,\n    ref: elementRef,\n    style: props.style,\n    className: classNames(props.className, cx('root'))\n  }, PanelBase.getOtherProps(props), ptm('root'));\n  var header = createHeader();\n  var content = createContent();\n  var footer = createFooter();\n  return /*#__PURE__*/React.createElement(\"div\", rootProps, header, content, footer);\n});\nPanel.displayName = 'Panel';\n\nexport { Panel };\n","import { SupabaseService, ViewModelComment } from '../services/SupabaseService.ts';\nimport { formatDate, formatDateTime, sanitizeAndLinkify } from '../utils';\nimport { useUserContext } from '../state/UseUserContext.tsx';\nimport { InputTextarea } from 'primereact/inputtextarea';\nimport { CenteredSpinner } from './CenteredSpinner.tsx';\nimport React, { useEffect, useState } from 'react';\nimport { Button } from 'primereact/button';\nimport { Panel, PanelToggleEvent } from 'primereact/panel';\n\ninterface CommentsPanelProps {\n  modelId: string;\n  collapsed?: boolean;\n  onToggle?: ((event: PanelToggleEvent) => void) | undefined;\n}\n\nexport const CommentsPanel: React.FC<CommentsPanelProps> = ({ modelId, collapsed, onToggle }) => {\n  const userContext = useUserContext();\n\n  const [comments, setComments] = useState<ViewModelComment[]>([]);\n  const [myComment, setMyComment] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [posting, setPosting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const loadComments = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await SupabaseService.fetchModelComments(modelId);\n      setComments(data);\n    } catch (e) {\n      setError('Failed to load comments.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadComments();\n  }, [modelId]);\n\n  const handleAddComment = async () => {\n    if (!myComment.trim()) return;\n    try {\n      await SupabaseService.addModelComment(modelId, myComment);\n      setComments((prev) => [\n        {\n          id: 'temp-' + formatDateTime(),\n          model_id: modelId,\n          user_id: userContext.user!.id,\n          username: userContext.username,\n          body: myComment,\n          created_at: formatDate(new Date()),\n        } as ViewModelComment,\n        ...prev,\n      ]);\n      setMyComment('');\n    } catch (e) {\n      setError('Failed to post comment.');\n    } finally {\n      setPosting(false);\n    }\n  };\n\n  return (\n    <Panel\n      toggleable\n      header=\"Comments\"\n      style={{ flex: 1 }}\n      className=\"panel-comments\"\n      collapsed={collapsed}\n      onToggle={onToggle}\n    >\n      {loading ?\n        <CenteredSpinner text=\"Loading comments\" />\n      : <>\n          {userContext.user ?\n            <div style={{ marginBottom: 12, display: 'flex', gap: 8 }}>\n              <InputTextarea\n                style={{ flex: 1, resize: 'vertical' }}\n                maxLength={2000}\n                placeholder=\"Add a comment...\"\n                value={myComment}\n                onChange={(e) => setMyComment(e.target.value)}\n                disabled={posting}\n              />\n              <Button\n                label=\"Post\"\n                icon=\"pi pi-send\"\n                outlined\n                onClick={handleAddComment}\n                loading={posting}\n              />\n            </div>\n          : <div>You need to be logged in to post comments.</div>}\n          {error && <div style={{ color: 'red', marginBottom: 8 }}>{error}</div>}\n          {comments.length === 0 ?\n            <div>No comments yet.</div>\n          : comments.map((c) => (\n              <div key={c.id}>\n                <b>\n                  <a href={`#/user/${c.username}`}>{c.username}</a> - {c.created_at}\n                </b>\n                <p dangerouslySetInnerHTML={{ __html: sanitizeAndLinkify(c.body) }}></p>\n              </div>\n            ))\n          }\n        </>\n      }\n    </Panel>\n  );\n};\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nexport type ParsedFunctionoidDef = {\n  path: string;\n  name: string;\n  params?: {\n    name: string;\n    defaultValue: string;\n  }[];\n  signature: string;\n  referencesChildren: boolean | null;\n};\nexport type ParsedFunctionoidDefs = { [name: string]: ParsedFunctionoidDef };\n\nexport type ParsedFile = {\n  functions: ParsedFunctionoidDefs;\n  modules: ParsedFunctionoidDefs;\n  vars: string[];\n  includes: string[];\n  uses: string[];\n};\n\nexport const stripComments = (src: string) => src.replaceAll(/\\/\\*(.|[\\s\\S])*?\\*\\/|\\/\\/.*?$/gm, '');\n\nexport function parseOpenSCAD(path: string, src: string, skipPrivates: boolean): ParsedFile {\n  const withoutComments = stripComments(src);\n  const vars: string[] = [];\n  const functions: ParsedFunctionoidDefs = {};\n  const modules: ParsedFunctionoidDefs = {};\n  const includes: string[] = [];\n  const uses: string[] = [];\n  for (const m of withoutComments.matchAll(/(use|include)\\s*<([^>]+)>/g)) {\n    (m[1] == 'use' ? uses : includes).push(m[2]);\n  }\n  for (const m of withoutComments.matchAll(/(?:^|[{};])\\s*([$\\w]+)\\s*=/g)) {\n    vars.push(m[1]);\n  }\n  for (const m of withoutComments.matchAll(\n    /(function|module)\\s+([$\\w]+)\\s*\\(([^)]*)\\)(?:\\s*(?:=\\s*)?(\\{\\}|[^{}]+?;))?/gm,\n  )) {\n    const type = m[1];\n    const name = m[2];\n    if (skipPrivates && name.startsWith('_')) {\n      continue;\n    }\n    const paramsStr = m[3];\n    const optBody = m[4];\n    const params: { name: string; defaultValue: string }[] = [];\n    if (/^(\\s*([$\\w]+(\\s*=[^,()[]+)?(\\s*,\\s*[$\\w]+(\\s*=[^,()[]+)?)*)?\\s*)$/m.test(paramsStr)) {\n      for (const paramStr of paramsStr.split(',')) {\n        const am = /^\\s*([$\\w]+)(?:\\s*=([^,()[]+))?\\s*$/.exec(paramStr);\n        if (am) {\n          const paramName = am[1];\n          const defaultValue = am[2];\n          params.push({\n            name: paramName,\n            defaultValue,\n          });\n        }\n      }\n    }\n    (type == 'function' ? functions : modules)[name] = {\n      path,\n      name,\n      signature: `${name}(${paramsStr.replaceAll(/[\\s]+/gm, ' ').replaceAll(/\\b | \\b/g, '')})`,\n      params,\n      referencesChildren: optBody != null ? optBody.indexOf('children()') >= 0 : null,\n    };\n  }\n  return { vars, functions, modules, includes, uses };\n}\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nexport default `\n  $fa=undef;\n  $fs=undef;\n  $fn=undef;\n  $t=undef;\n\n  $preview=undef;\n\n  // shows rotation\n  $vpr=undef;\n  // shows translation (i.e. won't be affected by rotate and zoom)\n  $vpt=undef;\n  // shows the FOV of the view [Note: Requires version 2021.01]\n  $vpf=undef;\n  // shows the camera distance [Note: Requires version 2015.03]\n  $vpd=undef;\n\n  PI=undef;\n\n  function abs(x) = x;\n  function acos(x) = x;\n  function asin(x) = x;\n  function atan(x) = x;\n  function atan2(y, x) = x;\n  function ceil(x) = x;\n  function chr(x) = 0;\n  function len(assignments) = $children;\n  function let(x) = x;\n  function ln(x) = x;\n  function log(x) = x;\n  function lookup(key, array) = x;\n  function max(values) = x;\n  function min(values) = x;\n  function sqrt(x) = x;\n  function tan(degrees) = x;\n  function rands(min_value, max_value, value_count, seed_value=undef) = x;\n  function search(match_value, string_or_vector, num_returns_per_match=1, index_col_num=0) = x;\n  function ord(x) = x;\n  function round(x) = x;\n  function sign(x) = x;\n  function sin(degrees) = x;\n  function str(values) = x;\n  function norm(x) = x;\n  function pow(base, exponent) = x;\n  function concat(values) = x;\n  function cos(degrees) = x;\n  function cross(a, b) = x;\n  function floor(x) = x;\n  function exp(x) = x;\n  function chr(x) = x;\n  function is_undef(x) = x;\n  function is_list(x) = x;\n  function is_num(x) = x;\n  function is_bool(x) = x;\n  function is_string(x) = x;\n  function is_function(x) = x;\n\n  function version() = '';\n  function version_num() = 0;\n\n  $parent_modules=0;\n  module parent_module(n) {}\n\n  module children() {}\n\n  module render(convexity=undef) {}\n  module surface(file, center=false, invert=false, convexity=undef) {}\n\n  function assert(condition, message=undef) = children();\n  module assert(condition, message=undef) children();\n\n  module cube(size, center=false) {}\n  module sphere(r, d=undef, $fa, $fs, $fn) {}\n  module cylinder(h, r, r1=undef, r2, d, d1, d2, center=false, $fa, $fs, $fn) {}\n  module polyhedron(points, faces, convexity=undef) {}\n\n  module square(size, center=false) {}\n  module circle(r, d=undef, $fa, $fs, $fn) {}\n  module polygon(points, paths, convexity=undef) {}\n  module linear_extrude(height, center=false, twist=undef, slices=undef, scale=undef, convexity=undef) children();\n  module rotate_extrude(degrees, convexity=undef, $fa, $fs, $fn) children();\n\n  module scale(v) children();\n  module resize(newsize, auto=false) children();\n  module rotate(a, v=undef) children();\n  module translate(v) children();\n  module mirror(v) children();\n  module multmatrix(m) children();\n\n  module color(c, alpha) children();\n\n  module offset(r, delta=undef, chamfer) children();\n\n  module minkowski() children();\n  module union() children();\n  module difference() children();\n  module intersection() children();\n  module hull() children();\n\n  module children() {}\n\n  // module for(i=undef) children();\n\n  module import(file, convexity=undef, $fn, $fa, $fs) {}\n`;\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport type * as monaco from 'monaco-editor';\nimport { MonacoInstance } from './openscad-register-language.ts';\n\nconst builtInFunctionNames = [\n  'abs',\n  'acos',\n  'asin',\n  'atan',\n  'atan2',\n  'ceil',\n  'len',\n  'let',\n  'ln',\n  'log',\n  'lookup',\n  'max',\n  'min',\n  'sqrt',\n  'tan',\n  'rands',\n  'search',\n  'sign',\n  'sin',\n  'str',\n  'norm',\n  'pow',\n  'concat',\n  'cos',\n  'cross',\n  'floor',\n  'exp',\n  'chr',\n];\nconst builtInModuleNames = [\n  'children',\n  'circle',\n  'color',\n  'cube',\n  'cylinder',\n  'diameter',\n  'difference',\n  'echo',\n  'extrude',\n  'for',\n  'function',\n  'hull',\n  'if',\n  'include',\n  'intersection_for',\n  'intersection',\n  'linear',\n  'minkowski',\n  'mirror',\n  'module',\n  'multmatrix',\n  'offset',\n  'polyhedron',\n  'projection',\n  'radius',\n  'render',\n  'resize',\n  'rotate',\n  'round',\n  'scale',\n  'sphere',\n  'square',\n  'surface',\n  'translate',\n  'union',\n  'use',\n  'value',\n  'version',\n];\nconst builtInVarNames = [\n  'false',\n  'true',\n  'PI',\n  'undef',\n  '$children',\n  '$fa',\n  '$fn',\n  '$fs',\n  '$t',\n  '$vpd',\n  '$vpr',\n  '$vpt',\n];\n\nconst getConf = (monacoInstance: MonacoInstance): monaco.languages.LanguageConfiguration => {\n  return {\n    colorizedBracketPairs: [\n      ['{', '}'],\n      ['(', ')'],\n      ['[', ']'],\n    ],\n\n    wordPattern:\n      /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g,\n    comments: {\n      lineComment: '//',\n      blockComment: ['/*', '*/'],\n    },\n    brackets: [\n      ['{', '}'],\n      ['[', ']'],\n      ['(', ')'],\n    ],\n    onEnterRules: [\n      {\n        beforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\n        afterText: /^\\s*\\*\\/$/,\n        action: {\n          indentAction: monacoInstance.languages.IndentAction.IndentOutdent,\n          appendText: ' * ',\n        },\n      },\n      {\n        beforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\n        action: {\n          indentAction: monacoInstance.languages.IndentAction.None,\n          appendText: ' * ',\n        },\n      },\n      {\n        beforeText: /^(\\t|(\\ \\ ))*\\ \\*(\\ ([^\\*]|\\*(?!\\/))*)?$/,\n        action: {\n          indentAction: monacoInstance.languages.IndentAction.None,\n          appendText: '* ',\n        },\n      },\n      {\n        beforeText: /^(\\t|(\\ \\ ))*\\ \\*\\/\\s*$/,\n        action: {\n          indentAction: monacoInstance.languages.IndentAction.None,\n          removeText: 1,\n        },\n      },\n    ],\n    autoClosingPairs: [\n      { open: '{', close: '}' },\n      { open: '[', close: ']' },\n      { open: '(', close: ')' },\n      { open: '\"', close: '\"', notIn: ['string'] },\n      { open: \"'\", close: \"'\", notIn: ['string', 'comment'] },\n      { open: '`', close: '`', notIn: ['string', 'comment'] },\n      { open: '/**', close: ' */', notIn: ['string'] },\n    ],\n    folding: {\n      markers: {\n        start: new RegExp('^\\\\s*//\\\\s*#?region\\\\b'),\n        end: new RegExp('^\\\\s*//\\\\s*#?endregion\\\\b'),\n      },\n    },\n  };\n};\n\nconst language: monaco.languages.IMonarchLanguage = {\n  defaultToken: 'invalid',\n  tokenPostfix: '.js',\n  keywords: [...builtInFunctionNames, ...builtInModuleNames, ...builtInVarNames, 'each'],\n  typeKeywords: [],\n  operators: [\n    '<=',\n    '>=',\n    '==',\n    '!=',\n    '=>',\n    '+',\n    '-',\n    '*',\n    '/',\n    '%',\n    '<<',\n    '>>',\n    '>>>',\n    '&',\n    '|',\n    '^',\n    '!',\n    '&&',\n    '||',\n    '?',\n    ':',\n    '=',\n  ],\n  symbols: /[=><!~?:&|+\\-*\\/\\^%]+/,\n  escapes: /\\\\[abfnrtv\\\\\"']/,\n  digits: /\\d+/,\n  tokenizer: {\n    root: [[/[{}]/, 'delimiter.bracket'], { include: 'common' }],\n    common: [\n      [\n        /[a-z_$][\\w$]*/,\n        {\n          cases: {\n            '@keywords': 'keyword',\n            '@default': 'identifier',\n          },\n        },\n      ],\n      [/[A-Z][\\w\\$]*/, 'type.identifier'],\n      { include: '@whitespace' },\n      [/[()\\[\\]]/, '@brackets'],\n      [/[<>](?!@symbols)/, '@brackets'],\n      [/!(?=([^=]|$))/, 'delimiter'],\n      [\n        /@symbols/,\n        {\n          cases: {\n            '@operators': 'delimiter',\n            '@default': '',\n          },\n        },\n      ],\n      [/(@digits)[eE]([\\-+]?(@digits))?/, 'number.float'],\n      [/(@digits)\\.(@digits)([eE][\\-+]?(@digits))?/, 'number.float'],\n      [/(@digits)n?/, 'number'],\n      [/[;,.]/, 'delimiter'],\n      [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'],\n      [/'([^'\\\\]|\\\\.)*$/, 'string.invalid'],\n      [/\"/, 'string', '@string_double'],\n    ],\n    whitespace: [\n      [/[ \\t\\r\\n]+/, ''],\n      [/\\/\\*/, 'comment', '@comment'],\n      [/\\/\\/.*$/, 'comment'],\n    ],\n    comment: [\n      [/[^\\/*]+/, 'comment'],\n      [/\\*\\//, 'comment', '@pop'],\n      [/[\\/*]/, 'comment'],\n    ],\n    string_double: [\n      [/[^\\\\\"]+/, 'string'],\n      [/@escapes/, 'string.escape'],\n      [/\\\\./, 'string.escape.invalid'],\n      [/\"/, 'string', '@pop'],\n    ],\n    bracketCounting: [\n      [/\\{/, 'delimiter.bracket', '@bracketCounting'],\n      [/\\}/, 'delimiter.bracket', '@pop'],\n      { include: 'common' },\n    ],\n  },\n};\n\nexport default {\n  getConf,\n  language,\n};\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport {\n  ParsedFile,\n  ParsedFunctionoidDef,\n  parseOpenSCAD,\n  stripComments,\n} from './openscad-pseudoparser';\nimport builtinSignatures from './openscad-builtins';\nimport { mapObject } from '../../utils';\nimport { ZipArchives } from '../fs/zip-archives';\nimport openscadLanguage from './openscad-language';\nimport { join, Symlinks } from '../fs/filesystem.ts';\nimport { ZenFS } from '../../types';\nimport type * as monaco from 'monaco-editor';\nimport { MonacoInstance } from './openscad-register-language.ts';\n\nfunction makeFunctionoidSuggestion(\n  monacoInstance: MonacoInstance,\n  name: string,\n  mod: ParsedFunctionoidDef,\n) {\n  const argSnippets: string[] = [];\n  const namedArgs: string[] = [];\n  let collectingPosArgs = true;\n  let i = 0;\n  for (const param of mod.params ?? []) {\n    if (collectingPosArgs) {\n      if (param.defaultValue != null) {\n        collectingPosArgs = false;\n      } else {\n        //argSnippets.push(`${param.name}=${'${' + (i + 1) + ':' + param.name + '}'}`);\n        argSnippets.push(\n          `${param.name.replaceAll('$', '\\\\$')}=${'${' + ++i + ':' + param.name + '}'}`,\n        );\n        continue;\n      }\n    }\n    namedArgs.push(param.name);\n  }\n  if (namedArgs.length) {\n    argSnippets.push(`${'${' + ++i + ':' + namedArgs.join('|') + '=}'}`);\n  }\n  let insertText = `${name.replaceAll('$', '\\\\$')}(${argSnippets.join(', ')})`;\n  if (mod.referencesChildren !== null) {\n    insertText += mod.referencesChildren ? ' ${' + ++i + ':children}' : ';';\n  }\n  return {\n    label: mod.signature, //`${name}(${(mod.params ?? []).join(', ')})`,\n    kind: monacoInstance.languages.CompletionItemKind.Function,\n    insertText,\n    insertTextRules: monacoInstance.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n  };\n}\n\nconst builtinCompletions = (monacoInstance: MonacoInstance) => {\n  return [\n    ...[true, false].map((v) => ({\n      label: `${v}`,\n      kind: monacoInstance.languages.CompletionItemKind.Value,\n      insertText: `${v}`,\n      insertTextRules: monacoInstance.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n    })),\n    ...openscadLanguage.language.keywords.map((v: string) => ({\n      label: v,\n      kind: monacoInstance.languages.CompletionItemKind.Function,\n      insertText: v,\n      insertTextRules: monacoInstance.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n    })),\n  ];\n};\n\nconst keywordSnippets = [\n  'for(${1:variable}=[${2:start}:${3:end}) ${4:body}',\n  'for(${1:variable}=[${2:start}:${3:increment}:${4:end}) ${5:body}',\n  'if (${1:condition}) {\\n\\t$0\\n} else {\\n\\t\\n}',\n];\n\nfunction cleanupVariables(snippet: string) {\n  return snippet\n    .replaceAll(/\\$\\{\\d+:([$\\w]+)\\}/g, '$1')\n    .replaceAll(/\\$\\d+/g, '')\n    .replaceAll(/\\s+/g, ' ')\n    .trim();\n}\n\n// https://microsoft.github.io/monaco-editor/playground.html#extending-language-services-custom-languages\nexport async function buildOpenSCADCompletionItemProvider(\n  monacoInstance: MonacoInstance,\n  fs: ZenFS,\n  workingDir: string,\n  zipArchives: ZipArchives,\n) {\n  const parsedFiles: { [path: string]: Promise<ParsedFile> } = {};\n  const toAbsolutePath = (path: string) => (path.startsWith('/') ? path : `${workingDir}/${path}`);\n\n  const allSymlinks: Symlinks = {};\n  for (const [n, { deployed, symlinks }] of Object.entries(zipArchives)) {\n    if (n == 'fonts') {\n      continue;\n    }\n    if (deployed === false) {\n      continue;\n    }\n    for (const s in symlinks) {\n      allSymlinks[s] = `${n}/${symlinks[s]}`;\n    }\n  }\n  async function readFile(path: string) {\n    if (path in allSymlinks) {\n      path = allSymlinks[path];\n    }\n    path = toAbsolutePath(path);\n    try {\n      const bytes = fs.readFileSync(path);\n      const src = new TextDecoder('utf-8').decode(bytes as any);\n      return src;\n    } catch (e) {\n      throw e;\n    }\n  }\n  const builtinsPath = '<builtins>';\n  let builtinsDefs: ParsedFile;\n\n  function getParsed(\n    path: string,\n    src: string,\n    { skipPrivates, addBuiltins }: { skipPrivates: boolean; addBuiltins: boolean },\n  ) {\n    return (parsedFiles[path] ??= new Promise(async (res, rej) => {\n      if (src == null) {\n        src = await readFile(path);\n      }\n      const result: ParsedFile = {\n        functions: {},\n        modules: {},\n        vars: [],\n        includes: [],\n        uses: [],\n      };\n\n      const mergeDefinitions = (isUse: boolean, defs: ParsedFile) => {\n        result.functions = { ...result.functions, ...defs.functions };\n        result.modules = { ...result.modules, ...defs.modules };\n        if (!isUse) {\n          result.vars = [...result.vars, ...defs.vars];\n        }\n      };\n      const dir = (path.split('/').slice(0, -1).join('/') || '.') + '/';\n\n      const handleInclude = async (isUse: boolean, otherPath: string) => {\n        let found = false;\n        for (const option of [`/libraries/${otherPath}`, `${dir}/${otherPath}`, otherPath]) {\n          try {\n            const otherSrc = await readFile(option);\n            const sub = await getParsed(otherPath, otherSrc, {\n              skipPrivates: true,\n              addBuiltins: false,\n            });\n            mergeDefinitions(isUse, sub);\n            found = true;\n            break;\n          } catch (e) {\n            console.warn(\n              `Failed to read file option ${option} for ${otherPath} ${isUse ? 'used' : 'included'} by ${path}`,\n              e,\n            );\n          }\n        }\n        if (!found) {\n          console.error('Failed to find ', otherPath, '(context imported in ', path, ')');\n        }\n      };\n\n      if (addBuiltins && path != builtinsPath) {\n        mergeDefinitions(false, builtinsDefs);\n      }\n\n      const ownDefs = parseOpenSCAD(path, src, skipPrivates);\n\n      await Promise.all(\n        [\n          ...(ownDefs.uses ?? []).map((p) => [p, true] as [string, boolean]),\n          ...(ownDefs.includes ?? []).map((p) => [p, false] as [string, boolean]),\n        ].map(([otherPath, isUse]) => handleInclude(isUse, otherPath)),\n      );\n\n      mergeDefinitions(false, ownDefs);\n\n      res(result);\n    }));\n  }\n\n  builtinsDefs = await getParsed(builtinsPath, builtinSignatures, {\n    skipPrivates: false,\n    addBuiltins: false,\n  });\n\n  return {\n    triggerCharacters: ['<', '/'], //, \"\\n\"],\n    //provideCompletionItems: (async (model, position, context, token) => {\n    provideCompletionItems: (async (\n      model: monaco.editor.ITextModel,\n      position: monaco.Position,\n      context: monaco.languages.CompletionContext,\n      token: monaco.CancellationToken,\n    ) => {\n      try {\n        const { word } = model.getWordUntilPosition(position);\n        const offset = model.getOffsetAt(position);\n        const text = model.getValue();\n        let previous = text.substring(0, offset);\n        const i = previous.lastIndexOf('\\n');\n        previous = previous.substring(i + 1);\n\n        const includeMatch = /\\b(include|use)\\s*<([^<>\\n\"]*)$/.exec(previous);\n        if (includeMatch) {\n          const prefix = includeMatch[2];\n          let folder, filePrefix, folderPrefix;\n          const i = prefix.lastIndexOf('/');\n          if (i < 0) {\n            folderPrefix = '';\n            filePrefix = prefix;\n          } else {\n            folderPrefix = prefix.substring(0, i);\n            filePrefix = prefix.substring(i + 1);\n          }\n          const folderName = folderPrefix == '' ? '' : '/' + folderPrefix;\n          let files: string[] | null = null;\n          for (const folder of [join('/libraries', folderName), join(workingDir, folderName)]) {\n            files = folderPrefix == '' ? [...Object.keys(allSymlinks)] : [];\n            try {\n              files = [...(fs.readdirSync(folder) ?? []), ...files];\n              // files = [...(await readDirAsArray(fs, folder) ?? []), ...files];\n              // console.log('readDir', folder, files);\n              break;\n            } catch (e) {\n              //console.error(e);\n            }\n          }\n          const suggestions: any[] = [];\n          if (!files) {\n            console.warn('Failed to find folder named ' + folderName);\n          } else {\n            for (const file of files) {\n              if (filePrefix != '' && !file.startsWith(filePrefix)) {\n                continue;\n              }\n              if (/^(LICENSE.*|fonts)$/.test(file)) {\n                continue;\n              }\n              if (folderPrefix == '' && file in zipArchives && zipArchives[file].symlinks) {\n                continue;\n              }\n              const isFolder = !file.endsWith('.scad');\n              const completion = file + (isFolder ? '' : '>\\n'); // don't append '/' as it's a useful trigger char\n\n              // console.log(JSON.stringify({\n              //   prefix,\n              //   folder,\n              //   filePrefix,\n              //   folderPrefix,\n              //   // files,\n              //   completion,\n              //   file,\n              // }, null, 2));\n\n              suggestions.push({\n                label: file,\n                kind:\n                  isFolder ?\n                    monacoInstance.languages.CompletionItemKind.Folder\n                  : monacoInstance.languages.CompletionItemKind.File,\n                insertText: completion,\n              });\n            }\n          }\n          suggestions.sort();\n\n          return { suggestions };\n        }\n\n        const inputFile = join(workingDir, 'foo.scad');\n        delete parsedFiles[inputFile];\n        const parsed = await getParsed(inputFile, text, { skipPrivates: false, addBuiltins: true });\n        // console.log(\"PARSED\", parsed);\n\n        type CompletionItem = monaco.languages.CompletionItem & {\n          range?: monaco.IRange;\n        };\n\n        const previousWithoutComments = stripComments(previous);\n        // console.log('previousWithoutComments', previousWithoutComments);\n        const statementMatch = /(^|.*?[{});]|>\\s*\\n)\\s*([$\\w]*)$/m.exec(previousWithoutComments);\n        if (statementMatch) {\n          const start = statementMatch[1];\n          const suggestions: CompletionItem[] = [\n            ...builtinCompletions(monacoInstance),\n            ...mapObject(\n              parsed.modules ?? {},\n              (name, mod) => makeFunctionoidSuggestion(monacoInstance, name, mod),\n              (name) => name.indexOf(word) >= 0,\n            ),\n            ...(parsed.vars ?? [])\n              .filter((name) => name.indexOf(word) >= 0)\n              .map((name) => ({\n                label: name,\n                kind: monacoInstance.languages.CompletionItemKind.Variable,\n                insertText: name.replaceAll('$', '\\\\$'),\n                insertTextRules:\n                  monacoInstance.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n              })),\n            ...keywordSnippets.map((snippet) => ({\n              label: cleanupVariables(snippet).replaceAll(/ body/g, ''),\n              kind: monacoInstance.languages.CompletionItemKind.Keyword,\n              insertText: snippet,\n              insertTextRules:\n                monacoInstance.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            })),\n            // ...getStatementSuggestions().filter(s => start == '' || s.insertText.indexOf(start) >= 0)\n          ];\n          suggestions.sort((a, b) => a.insertText.indexOf(start) - b.insertText.indexOf(start));\n          return { suggestions };\n        }\n\n        const allWithoutComments = stripComments(text);\n\n        const named: [string, CompletionItem][] = [\n          ...mapObject(\n            parsed.functions ?? {},\n            (name, mod) => [name, makeFunctionoidSuggestion(monacoInstance, name, mod)],\n            (name) => name.indexOf(word) >= 0,\n          ),\n        ];\n        named.sort(([a], [b]) => a.indexOf(word) - b.indexOf(word));\n        // const suggestions = names.map(name => ({\n        //   label: name,\n        //   kind: languages.CompletionItemKind.Constant,\n        //   insertText: name\n        // }));\n\n        const suggestions = named.map(([n, s]) => s as any as monaco.languages.CompletionItem);\n        return { suggestions };\n      } catch (e) {\n        console.error(e); //, (e as any).stackTrace);\n        return { suggestions: [] };\n      }\n    }) as any,\n  } as monaco.languages.CompletionItemProvider;\n}\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nimport { ZipArchives } from '../fs/zip-archives';\nimport { buildOpenSCADCompletionItemProvider } from './openscad-completions';\nimport openscadLanguage from './openscad-language';\nimport { ZenFS } from '../../types';\nimport type * as monaco from 'monaco-editor';\n\nexport type MonacoInstance = typeof monaco;\n\n// https://microsoft.github.io/monaco-editor/playground.html#extending-language-services-custom-languages\nexport async function registerOpenSCADLanguage(\n  monacoInstance: MonacoInstance,\n  fs: ZenFS,\n  workingDir: string,\n  zipArchives: ZipArchives,\n) {\n  monacoInstance.languages.register({\n    id: 'openscad',\n    extensions: ['.scad'],\n    mimetypes: ['text/openscad'],\n  });\n\n  const { getConf, language } = openscadLanguage;\n  monacoInstance.languages.setLanguageConfiguration('openscad', getConf(monacoInstance));\n  monacoInstance.languages.setMonarchTokensProvider('openscad', language);\n\n  monacoInstance.languages.registerCompletionItemProvider(\n    'openscad',\n    await buildOpenSCADCompletionItemProvider(monacoInstance, fs, workingDir, zipArchives),\n  );\n}\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: true,\n    configurable: true,\n    writable: true\n  }) : e[r] = t, e;\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = true,\n      o = false;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) ; else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = true, n = r;\n    } finally {\n      try {\n        if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), true).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = _objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r);\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nexport { _arrayLikeToArray as arrayLikeToArray, _arrayWithHoles as arrayWithHoles, _defineProperty as defineProperty, _iterableToArrayLimit as iterableToArrayLimit, _nonIterableRest as nonIterableRest, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _slicedToArray as slicedToArray, _toPrimitive as toPrimitive, _toPropertyKey as toPropertyKey, _unsupportedIterableToArray as unsupportedIterableToArray };\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\n\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\n\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\n\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\n\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\n\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n\n  return [getState, setState];\n}\n\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\n\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\n\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\n\nvar index = {\n  create: create\n};\n\nexport default index;\n","var config = {\n  paths: {\n    vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs'\n  }\n};\n\nexport { config as default };\n","function curry(fn) {\n  return function curried() {\n    var _this = this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len2 = arguments.length, nextArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        nextArgs[_key2] = arguments[_key2];\n      }\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nexport { curry as default };\n","function isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nexport { isObject as default };\n","import curry from '../utils/curry.js';\nimport isObject from '../utils/isObject.js';\n\n/**\n * validates the configuration object and informs about deprecation\n * @param {Object} config - the configuration object \n * @return {Object} config - the validated configuration object\n */\nfunction validateConfig(config) {\n  if (!config) errorHandler('configIsRequired');\n  if (!isObject(config)) errorHandler('configType');\n  if (config.urls) {\n    informAboutDeprecation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n  return config;\n}\n\n/**\n * logs deprecation message\n */\nfunction informAboutDeprecation() {\n  console.warn(errorMessages.deprecation);\n}\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\nvar errorMessages = {\n  configIsRequired: 'the configuration object is required',\n  configType: 'the configuration object should be an object',\n  \"default\": 'an unknown error accured in `@monaco-editor/loader` package',\n  deprecation: \"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\\n  \"\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  config: validateConfig\n};\n\nexport { validators as default, errorHandler, errorMessages };\n","var compose = function compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n};\n\nexport { compose as default };\n","import { objectSpread2 as _objectSpread2 } from '../_virtual/_rollupPluginBabelHelpers.js';\n\nfunction merge(target, source) {\n  Object.keys(source).forEach(function (key) {\n    if (source[key] instanceof Object) {\n      if (target[key]) {\n        Object.assign(source[key], merge(target[key], source[key]));\n      }\n    }\n  });\n  return _objectSpread2(_objectSpread2({}, target), source);\n}\n\nexport { merge as default };\n","// The source (has been changed) is https://github.com/facebook/react/issues/5465#issuecomment-157888325\n\nvar CANCELATION_MESSAGE = {\n  type: 'cancelation',\n  msg: 'operation is manually canceled'\n};\nfunction makeCancelable(promise) {\n  var hasCanceled_ = false;\n  var wrappedPromise = new Promise(function (resolve, reject) {\n    promise.then(function (val) {\n      return hasCanceled_ ? reject(CANCELATION_MESSAGE) : resolve(val);\n    });\n    promise[\"catch\"](reject);\n  });\n  return wrappedPromise.cancel = function () {\n    return hasCanceled_ = true;\n  }, wrappedPromise;\n}\n\nexport { CANCELATION_MESSAGE, makeCancelable as default };\n","import { slicedToArray as _slicedToArray, objectWithoutProperties as _objectWithoutProperties } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport state from 'state-local';\nimport config$1 from '../config/index.js';\nimport validators from '../validators/index.js';\nimport compose from '../utils/compose.js';\nimport merge from '../utils/deepMerge.js';\nimport makeCancelable from '../utils/makeCancelable.js';\n\nvar _excluded = [\"monaco\"];\n\n/** the local state of the module */\nvar _state$create = state.create({\n    config: config$1,\n    isInitialized: false,\n    resolve: null,\n    reject: null,\n    monaco: null\n  }),\n  _state$create2 = _slicedToArray(_state$create, 2),\n  getState = _state$create2[0],\n  setState = _state$create2[1];\n\n/**\n * set the loader configuration\n * @param {Object} config - the configuration object\n */\nfunction config(globalConfig) {\n  var _validators$config = validators.config(globalConfig),\n    monaco = _validators$config.monaco,\n    config = _objectWithoutProperties(_validators$config, _excluded);\n  setState(function (state) {\n    return {\n      config: merge(state.config, config),\n      monaco: monaco\n    };\n  });\n}\n\n/**\n * handles the initialization of the monaco-editor\n * @return {Promise} - returns an instance of monaco (with a cancelable promise)\n */\nfunction init() {\n  var state = getState(function (_ref) {\n    var monaco = _ref.monaco,\n      isInitialized = _ref.isInitialized,\n      resolve = _ref.resolve;\n    return {\n      monaco: monaco,\n      isInitialized: isInitialized,\n      resolve: resolve\n    };\n  });\n  if (!state.isInitialized) {\n    setState({\n      isInitialized: true\n    });\n    if (state.monaco) {\n      state.resolve(state.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n    if (window.monaco && window.monaco.editor) {\n      storeMonacoInstance(window.monaco);\n      state.resolve(window.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n    compose(injectScripts, getMonacoLoaderScript)(configureLoader);\n  }\n  return makeCancelable(wrapperPromise);\n}\n\n/**\n * injects provided scripts into the document.body\n * @param {Object} script - an HTML script element\n * @return {Object} - the injected HTML script element\n */\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n\n/**\n * creates an HTML script element with/without provided src\n * @param {string} [src] - the source path of the script\n * @return {Object} - the created HTML script element\n */\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n\n/**\n * creates an HTML script element with the monaco loader src\n * @return {Object} - the created HTML script element\n */\nfunction getMonacoLoaderScript(configureLoader) {\n  var state = getState(function (_ref2) {\n    var config = _ref2.config,\n      reject = _ref2.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n  loaderScript.onload = function () {\n    return configureLoader();\n  };\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n\n/**\n * configures the monaco loader\n */\nfunction configureLoader() {\n  var state = getState(function (_ref3) {\n    var config = _ref3.config,\n      resolve = _ref3.resolve,\n      reject = _ref3.reject;\n    return {\n      config: config,\n      resolve: resolve,\n      reject: reject\n    };\n  });\n  var require = window.require;\n  require.config(state.config);\n  require(['vs/editor/editor.main'], function (loaded) {\n    var monaco = loaded.m /* for 0.53 & 0.54 */ || loaded /* for other versions */;\n    storeMonacoInstance(monaco);\n    state.resolve(monaco);\n  }, function (error) {\n    state.reject(error);\n  });\n}\n\n/**\n * store monaco instance in local state\n */\nfunction storeMonacoInstance(monaco) {\n  if (!getState().monaco) {\n    setState({\n      monaco: monaco\n    });\n  }\n}\n\n/**\n * internal helper function\n * extracts stored monaco instance\n * @return {Object|null} - the monaco instance\n */\nfunction __getMonacoInstance() {\n  return getState(function (_ref4) {\n    var monaco = _ref4.monaco;\n    return monaco;\n  });\n}\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar loader = {\n  config: config,\n  init: init,\n  __getMonacoInstance: __getMonacoInstance\n};\n\nexport { loader as default };\n","import _t from\"@monaco-editor/loader\";import{memo as Te}from\"react\";import ke,{useState as re,useRef as S,useCallback as oe,useEffect as ne}from\"react\";import Se from\"@monaco-editor/loader\";import{memo as ye}from\"react\";import Q from\"react\";var le={wrapper:{display:\"flex\",position:\"relative\",textAlign:\"initial\"},fullWidth:{width:\"100%\"},hide:{display:\"none\"}},v=le;import me from\"react\";var ae={container:{display:\"flex\",height:\"100%\",width:\"100%\",justifyContent:\"center\",alignItems:\"center\"}},Y=ae;function Me({children:e}){return me.createElement(\"div\",{style:Y.container},e)}var Z=Me;var $=Z;function Ee({width:e,height:r,isEditorReady:n,loading:t,_ref:a,className:m,wrapperProps:E}){return Q.createElement(\"section\",{style:{...v.wrapper,width:e,height:r},...E},!n&&Q.createElement($,null,t),Q.createElement(\"div\",{ref:a,style:{...v.fullWidth,...!n&&v.hide},className:m}))}var ee=Ee;var H=ye(ee);import{useEffect as xe}from\"react\";function Ce(e){xe(e,[])}var k=Ce;import{useEffect as ge,useRef as Re}from\"react\";function he(e,r,n=!0){let t=Re(!0);ge(t.current||!n?()=>{t.current=!1}:e,r)}var l=he;function D(){}function h(e,r,n,t){return De(e,t)||be(e,r,n,t)}function De(e,r){return e.editor.getModel(te(e,r))}function be(e,r,n,t){return e.editor.createModel(r,n,t?te(e,t):void 0)}function te(e,r){return e.Uri.parse(r)}function Oe({original:e,modified:r,language:n,originalLanguage:t,modifiedLanguage:a,originalModelPath:m,modifiedModelPath:E,keepCurrentOriginalModel:g=!1,keepCurrentModifiedModel:N=!1,theme:x=\"light\",loading:P=\"Loading...\",options:y={},height:V=\"100%\",width:z=\"100%\",className:F,wrapperProps:j={},beforeMount:A=D,onMount:q=D}){let[M,O]=re(!1),[T,c]=re(!0),u=S(null),s=S(null),w=S(null),d=S(q),o=S(A),b=S(!1);k(()=>{let i=Se.init();return i.then(f=>(s.current=f)&&c(!1)).catch(f=>f?.type!==\"cancelation\"&&console.error(\"Monaco initialization: error:\",f)),()=>u.current?I():i.cancel()}),l(()=>{if(u.current&&s.current){let i=u.current.getOriginalEditor(),f=h(s.current,e||\"\",t||n||\"text\",m||\"\");f!==i.getModel()&&i.setModel(f)}},[m],M),l(()=>{if(u.current&&s.current){let i=u.current.getModifiedEditor(),f=h(s.current,r||\"\",a||n||\"text\",E||\"\");f!==i.getModel()&&i.setModel(f)}},[E],M),l(()=>{let i=u.current.getModifiedEditor();i.getOption(s.current.editor.EditorOption.readOnly)?i.setValue(r||\"\"):r!==i.getValue()&&(i.executeEdits(\"\",[{range:i.getModel().getFullModelRange(),text:r||\"\",forceMoveMarkers:!0}]),i.pushUndoStop())},[r],M),l(()=>{u.current?.getModel()?.original.setValue(e||\"\")},[e],M),l(()=>{let{original:i,modified:f}=u.current.getModel();s.current.editor.setModelLanguage(i,t||n||\"text\"),s.current.editor.setModelLanguage(f,a||n||\"text\")},[n,t,a],M),l(()=>{s.current?.editor.setTheme(x)},[x],M),l(()=>{u.current?.updateOptions(y)},[y],M);let L=oe(()=>{if(!s.current)return;o.current(s.current);let i=h(s.current,e||\"\",t||n||\"text\",m||\"\"),f=h(s.current,r||\"\",a||n||\"text\",E||\"\");u.current?.setModel({original:i,modified:f})},[n,r,a,e,t,m,E]),U=oe(()=>{!b.current&&w.current&&(u.current=s.current.editor.createDiffEditor(w.current,{automaticLayout:!0,...y}),L(),s.current?.editor.setTheme(x),O(!0),b.current=!0)},[y,x,L]);ne(()=>{M&&d.current(u.current,s.current)},[M]),ne(()=>{!T&&!M&&U()},[T,M,U]);function I(){let i=u.current?.getModel();g||i?.original?.dispose(),N||i?.modified?.dispose(),u.current?.dispose()}return ke.createElement(H,{width:z,height:V,isEditorReady:M,loading:P,_ref:w,className:F,wrapperProps:j})}var ie=Oe;var we=Te(ie);import{useState as Ie}from\"react\";import ce from\"@monaco-editor/loader\";function Pe(){let[e,r]=Ie(ce.__getMonacoInstance());return k(()=>{let n;return e||(n=ce.init(),n.then(t=>{r(t)})),()=>n?.cancel()}),e}var Le=Pe;import{memo as ze}from\"react\";import We,{useState as ue,useEffect as W,useRef as C,useCallback as _e}from\"react\";import Ne from\"@monaco-editor/loader\";import{useEffect as Ue,useRef as ve}from\"react\";function He(e){let r=ve();return Ue(()=>{r.current=e},[e]),r.current}var se=He;var _=new Map;function Ve({defaultValue:e,defaultLanguage:r,defaultPath:n,value:t,language:a,path:m,theme:E=\"light\",line:g,loading:N=\"Loading...\",options:x={},overrideServices:P={},saveViewState:y=!0,keepCurrentModel:V=!1,width:z=\"100%\",height:F=\"100%\",className:j,wrapperProps:A={},beforeMount:q=D,onMount:M=D,onChange:O,onValidate:T=D}){let[c,u]=ue(!1),[s,w]=ue(!0),d=C(null),o=C(null),b=C(null),L=C(M),U=C(q),I=C(void 0),i=C(t),f=se(m),B=C(!1),G=C(!1);k(()=>{let p=Ne.init();return p.then(R=>(d.current=R)&&w(!1)).catch(R=>R?.type!==\"cancelation\"&&console.error(\"Monaco initialization: error:\",R)),()=>o.current?pe():p.cancel()}),l(()=>{let p=h(d.current,e||t||\"\",r||a||\"\",m||n||\"\");p!==o.current?.getModel()&&(y&&_.set(f,o.current?.saveViewState()),o.current?.setModel(p),y&&o.current?.restoreViewState(_.get(m)))},[m],c),l(()=>{o.current?.updateOptions(x)},[x],c),l(()=>{!o.current||t===void 0||(o.current.getOption(d.current.editor.EditorOption.readOnly)?o.current.setValue(t):t!==o.current.getValue()&&(G.current=!0,o.current.executeEdits(\"\",[{range:o.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),o.current.pushUndoStop(),G.current=!1))},[t],c),l(()=>{let p=o.current?.getModel();c&&p&&a&&d.current?.editor.setModelLanguage(p,a)},[a,c],c),l(()=>{g!==void 0&&o.current?.revealLine(g)},[g],c),l(()=>{d.current?.editor.setTheme(E)},[E],c);let X=_e(()=>{if(!(!b.current||!d.current)&&!B.current){U.current(d.current);let p=m||n,R=h(d.current,t||e||\"\",r||a||\"\",p||\"\");o.current=d.current?.editor.create(b.current,{model:R,automaticLayout:!0,...x},P),y&&o.current.restoreViewState(_.get(p)),d.current.editor.setTheme(E),g!==void 0&&o.current.revealLine(g),u(!0),B.current=!0}},[e,r,n,t,a,m,x,P,y,E,g]);W(()=>{c&&L.current(o.current,d.current)},[c]),W(()=>{!s&&!c&&X()},[s,c,X]),i.current=t,W(()=>{c&&O&&(I.current?.dispose(),I.current=o.current?.onDidChangeModelContent(p=>{G.current||O(o.current.getValue(),p)}))},[c,O]),W(()=>{if(c){let p=d.current.editor.onDidChangeMarkers(R=>{let J=o.current.getModel()?.uri;if(J&&R.find(K=>K.path===J.path)){let K=d.current.editor.getModelMarkers({resource:J});T?.(K)}});return()=>{p?.dispose()}}return()=>{}},[c,T]);function pe(){I.current?.dispose(),V?y&&_.set(m,o.current.saveViewState()):o.current.getModel()?.dispose(),o.current.dispose(),o.current=null,B.current=!1,u(!1)}return We.createElement(H,{width:z,height:F,isEditorReady:c,loading:N,_ref:b,className:j,wrapperProps:A})}var fe=Ve;var de=ze(fe);var Ft=de;export{we as DiffEditor,de as Editor,Ft as default,_t as loader,Le as useMonaco};\n//# sourceMappingURL=index.mjs.map","'use client';\nimport * as React from 'react';\nimport PrimeReact, { PrimeReactContext, localeOption, ariaLabel } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { useMergeProps, useDebounce, useOverlayListener, useMountEffect, useUpdateEffect, useUnmountEffect } from 'primereact/hooks';\nimport { ChevronDownIcon } from 'primereact/icons/chevrondown';\nimport { SearchIcon } from 'primereact/icons/search';\nimport { TimesIcon } from 'primereact/icons/times';\nimport { OverlayService } from 'primereact/overlayservice';\nimport { Ripple } from 'primereact/ripple';\nimport { Tooltip } from 'primereact/tooltip';\nimport { Tree } from 'primereact/tree';\nimport { classNames, ObjectUtils, DomHandler, UniqueComponentId, ZIndexUtils, IconUtils } from 'primereact/utils';\nimport { CSSTransition } from 'primereact/csstransition';\nimport { Portal } from 'primereact/portal';\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _arrayLikeToArray$1(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray$1(r);\n}\n\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\n\nfunction _unsupportedIterableToArray$1(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray$1(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray$1(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray$1(r) || _nonIterableSpread();\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray$1(r, e) || _nonIterableRest();\n}\n\nvar classes = {\n  root: function root(_ref) {\n    var props = _ref.props,\n      focusedState = _ref.focusedState,\n      context = _ref.context,\n      overlayVisibleState = _ref.overlayVisibleState,\n      isValueEmpty = _ref.isValueEmpty;\n    return classNames('p-treeselect p-component p-inputwrapper', {\n      'p-treeselect-chip': props.display === 'chip',\n      'p-treeselect-clearable': props.showClear && !props.disabled,\n      'p-disabled': props.disabled,\n      'p-invalid': props.invalid,\n      'p-focus': focusedState,\n      'p-variant-filled': props.variant ? props.variant === 'filled' : context && context.inputStyle === 'filled',\n      'p-inputwrapper-filled': !isValueEmpty,\n      'p-inputwrapper-focus': focusedState || overlayVisibleState\n    });\n  },\n  label: function label(_ref2) {\n    var props = _ref2.props,\n      isValueEmpty = _ref2.isValueEmpty,\n      getLabel = _ref2.getLabel;\n    return classNames('p-treeselect-label', {\n      'p-placeholder': getLabel() === props.placeholder,\n      'p-treeselect-label-empty': !props.placeholder && isValueEmpty\n    });\n  },\n  panel: function panel(_ref3) {\n    var props = _ref3.panelProps,\n      context = _ref3.context;\n    return classNames('p-treeselect-panel p-component', props.panelClassName, {\n      'p-input-filled': context && context.inputStyle === 'filled' || PrimeReact.inputStyle === 'filled',\n      'p-ripple-disabled': context && context.ripple === false || PrimeReact.ripple === false\n    });\n  },\n  labelContainer: 'p-treeselect-label-container',\n  tokenLabel: 'p-treeselect-token-label',\n  token: 'p-treeselect-token',\n  trigger: 'p-treeselect-trigger',\n  triggerIcon: 'p-treeselect-trigger-icon p-clickable',\n  emptyMessage: 'p-treeselect-empty-message',\n  filterContainer: 'p-treeselect-filter-container',\n  filter: 'p-treeselect-filter p-inputtext p-component',\n  filterIcon: 'p-treeselect-filter-icon',\n  closeIcon: 'p-treeselect-close-icon',\n  clearIcon: 'p-treeselect-clear-icon p-clickable',\n  closeButton: 'p-treeselect-close p-link',\n  header: 'p-treeselect-header',\n  wrapper: 'p-treeselect-items-wrapper',\n  transition: 'p-connected-overlay'\n};\nvar styles = \"\\n@layer primereact {\\n    .p-treeselect {\\n        display: inline-flex;\\n        cursor: pointer;\\n        position: relative;\\n        user-select: none;\\n    }\\n\\n    .p-treeselect-trigger {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        flex-shrink: 0;\\n    }\\n\\n    .p-treeselect-label-container {\\n        overflow: hidden;\\n        flex: 1 1 auto;\\n        cursor: pointer;\\n    }\\n\\n    .p-treeselect-label  {\\n        display: block;\\n        white-space: nowrap;\\n        cursor: pointer;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n    }\\n\\n    .p-treeselect-label-empty {\\n        overflow: hidden;\\n        visibility: hidden;\\n    }\\n\\n    .p-treeselect-token {\\n        cursor: default;\\n        display: inline-flex;\\n        align-items: center;\\n        flex: 0 0 auto;\\n    }\\n\\n    .p-treeselect .p-treeselect-panel {\\n        min-width: 100%;\\n    }\\n\\n    .p-treeselect-items-wrapper {\\n        overflow: auto;\\n    }\\n\\n    .p-treeselect-header {\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n    }\\n\\n    .p-treeselect-filter-container {\\n        position: relative;\\n        flex: 1 1 auto;\\n    }\\n\\n    .p-treeselect-filter-icon {\\n        position: absolute;\\n        top: 50%;\\n        margin-top: -.5rem;\\n    }\\n\\n    .p-treeselect-filter-container .p-inputtext {\\n        width: 100%;\\n    }\\n\\n    .p-treeselect-close {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        flex-shrink: 0;\\n        overflow: hidden;\\n        position: relative;\\n        margin-left: auto;\\n    }\\n\\n    .p-treeselect-clear-icon {\\n        position: absolute;\\n        top: 50%;\\n        margin-top: -.5rem;\\n    }\\n\\n    .p-fluid .p-treeselect {\\n        display: flex;\\n}\\n}\\n\";\nvar TreeSelectBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'TreeSelect',\n    appendTo: null,\n    ariaLabel: null,\n    ariaLabelledBy: null,\n    className: null,\n    closeIcon: null,\n    clearIcon: null,\n    disabled: false,\n    display: 'comma',\n    dropdownIcon: null,\n    emptyMessage: null,\n    expandedKeys: null,\n    filter: false,\n    filterBy: 'label',\n    filterDelay: 300,\n    filterIcon: null,\n    filterInputAutoFocus: true,\n    filterLocale: undefined,\n    filterMode: 'lenient',\n    filterPlaceholder: null,\n    filterTemplate: null,\n    filterValue: null,\n    inputId: null,\n    inputRef: null,\n    invalid: false,\n    variant: null,\n    metaKeySelection: false,\n    name: null,\n    nodeTemplate: null,\n    onChange: null,\n    onFocus: null,\n    onBlur: null,\n    onFilterValueChange: null,\n    onHide: null,\n    onNodeClick: null,\n    onNodeCollapse: null,\n    onNodeDoubleClick: null,\n    onNodeExpand: null,\n    onNodeSelect: null,\n    onNodeUnselect: null,\n    onShow: null,\n    options: null,\n    panelClassName: null,\n    panelFooterTemplate: null,\n    panelHeaderTemplate: null,\n    panelStyle: null,\n    placeholder: null,\n    resetFilterOnHide: false,\n    scrollHeight: '400px',\n    selectionMode: 'single',\n    showClear: false,\n    style: null,\n    tabIndex: null,\n    togglerTemplate: null,\n    transitionOptions: null,\n    value: null,\n    valueTemplate: null,\n    children: undefined\n  },\n  css: {\n    classes: classes,\n    styles: styles\n  }\n});\n\nfunction ownKeys$1(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$1(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar TreeSelectPanel = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var ptm = props.ptm,\n    cx = props.cx;\n  var getPTOptions = function getPTOptions(key, options) {\n    return ptm(key, _objectSpread$1({\n      hostName: props.hostName\n    }, options));\n  };\n  var onKeyDown = function onKeyDown(event) {\n    if (event.key === 'Escape') {\n      event.preventDefault();\n      props.hide();\n    }\n  };\n  var createElement = function createElement() {\n    var wrapperStyle = {\n      maxHeight: props.scrollHeight || 'auto'\n    };\n    var panelProps = mergeProps({\n      className: cx('panel', {\n        panelProps: props,\n        context: context\n      }),\n      style: props.panelStyle,\n      onKeyDown: onKeyDown,\n      onClick: props.onClick\n    }, getPTOptions('panel'));\n    var wrapperProps = mergeProps({\n      className: cx('wrapper'),\n      style: wrapperStyle\n    }, getPTOptions('wrapper'));\n    var transitionProps = mergeProps({\n      classNames: cx('transition'),\n      \"in\": props[\"in\"],\n      timeout: {\n        enter: 120,\n        exit: 100\n      },\n      options: props.transitionOptions,\n      unmountOnExit: true,\n      onEnter: props.onEnter,\n      onEntered: props.onEntered,\n      onExit: props.onExit,\n      onExited: props.onExited\n    }, getPTOptions('transition'));\n    return /*#__PURE__*/React.createElement(CSSTransition, _extends({\n      nodeRef: ref\n    }, transitionProps), /*#__PURE__*/React.createElement(\"div\", _extends({\n      ref: ref\n    }, panelProps), props.firstHiddenFocusableElementOnOverlay, props.header, /*#__PURE__*/React.createElement(\"div\", wrapperProps, props.children), props.footer, props.lastHiddenFocusableElementOnOverlay));\n  };\n  var element = createElement();\n  return /*#__PURE__*/React.createElement(Portal, {\n    element: element,\n    appendTo: props.appendTo\n  });\n});\nTreeSelectPanel.displayName = 'TreeSelectPanel';\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nvar TreeSelect = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = TreeSelectBase.getProps(inProps, context);\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    focusedState = _React$useState2[0],\n    setFocusedState = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    overlayVisibleState = _React$useState4[0],\n    setOverlayVisibleState = _React$useState4[1];\n  var _React$useState5 = React.useState(props.expandedKeys),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    expandedKeysState = _React$useState6[0],\n    setExpandedKeysState = _React$useState6[1];\n  var _useDebounce = useDebounce('', props.filterDelay || 0),\n    _useDebounce2 = _slicedToArray(_useDebounce, 3),\n    filterValue = _useDebounce2[0],\n    filterValueState = _useDebounce2[1],\n    setFilterValueState = _useDebounce2[2];\n  var elementRef = React.useRef(null);\n  var overlayRef = React.useRef(null);\n  var filterInputRef = React.useRef(null);\n  var focusInputRef = React.useRef(props.inputRef);\n  var triggerRef = React.useRef(null);\n  var selfChange = React.useRef(null);\n  var treeRef = React.useRef(null);\n  var firstHiddenFocusableElementOnOverlay = React.useRef(null);\n  var lastHiddenFocusableElementOnOverlay = React.useRef(null);\n  var focusToTree = React.useRef(false);\n  var listId = React.useRef('');\n  var expandedKeys = props.onToggle ? props.expandedKeys : expandedKeysState;\n  var filteredValue = props.onFilterValueChange ? props.filterValue : filterValueState;\n  var isValueEmpty = ObjectUtils.isEmpty(props.value);\n  var isSingleSelectionMode = props.selectionMode === 'single';\n  var isCheckboxSelectionMode = props.selectionMode === 'checkbox';\n  var hasTooltip = ObjectUtils.isNotEmpty(props.tooltip);\n  var metaData = {\n    props: props,\n    state: {\n      focused: focusedState,\n      overlayVisible: overlayVisibleState,\n      expandedKeys: expandedKeys,\n      filterValue: filteredValue\n    }\n  };\n  var _TreeSelectBase$setMe = TreeSelectBase.setMetaData(metaData),\n    ptm = _TreeSelectBase$setMe.ptm,\n    cx = _TreeSelectBase$setMe.cx,\n    isUnstyled = _TreeSelectBase$setMe.isUnstyled;\n  useHandleStyle(TreeSelectBase.css.styles, isUnstyled, {\n    name: 'treeselect'\n  });\n  var filterOptions = {\n    filter: function filter(e) {\n      return onFilterInputChange(e);\n    },\n    reset: function reset() {\n      return resetFilter();\n    }\n  };\n  var _useOverlayListener = useOverlayListener({\n      target: elementRef,\n      overlay: overlayRef,\n      listener: function listener(event, _ref) {\n        var valid = _ref.valid,\n          type = _ref.type;\n        if (valid) {\n          if (type === 'outside' || context.hideOverlaysOnDocumentScrolling) {\n            hide();\n          } else if (!DomHandler.isDocument(event.target)) {\n            alignOverlay();\n          }\n        }\n      },\n      when: overlayVisibleState\n    }),\n    _useOverlayListener2 = _slicedToArray(_useOverlayListener, 2),\n    bindOverlayListener = _useOverlayListener2[0],\n    unbindOverlayListener = _useOverlayListener2[1];\n  var getLabel = function getLabel() {\n    return selectedNodes.length ? selectedNodes.map(function (node) {\n      return node.label;\n    }).join(', ') : props.placeholder;\n  };\n  var show = function show() {\n    setOverlayVisibleState(true);\n  };\n  var hide = function hide() {\n    setOverlayVisibleState(false);\n    focusInputRef.current && DomHandler.focus(focusInputRef.current);\n  };\n  var onInputFocus = function onInputFocus() {\n    setFocusedState(true);\n    props.onFocus && props.onFocus();\n  };\n  var onInputBlur = function onInputBlur() {\n    setFocusedState(false);\n    props.onBlur && props.onBlur();\n  };\n  var onClick = function onClick(event) {\n    if (!props.disabled && (!overlayRef.current || !overlayRef.current.contains(event.target)) && !DomHandler.isAttributeEquals(event.target, 'data-pc-section', 'closebutton')) {\n      DomHandler.focus(focusInputRef.current);\n      overlayVisibleState ? hide() : show();\n    }\n  };\n  var onSelectionChange = function onSelectionChange(event) {\n    if (props.onChange) {\n      selfChange.current = true;\n      props.onChange({\n        originalEvent: event.originalEvent,\n        value: event.value,\n        stopPropagation: function stopPropagation() {\n          event.originalEvent.stopPropagation();\n        },\n        preventDefault: function preventDefault() {\n          event.originalEvent.preventDefault();\n        },\n        target: {\n          name: props.name,\n          id: props.id,\n          value: event.value\n        }\n      });\n    }\n  };\n  var clear = function clear(event) {\n    if (props.onChange) {\n      selfChange.current = true;\n      props.onChange({\n        originalEvent: event,\n        value: undefined,\n        stopPropagation: function stopPropagation() {\n          event === null || event === void 0 || event.stopPropagation();\n        },\n        preventDefault: function preventDefault() {\n          event === null || event === void 0 || event.preventDefault();\n        },\n        target: {\n          name: props.name,\n          id: props.id,\n          value: undefined\n        }\n      });\n    }\n  };\n  var onClearIconKeyDown = function onClearIconKeyDown(event) {\n    if (event.key === 'Enter' || event.code === 'Space') {\n      clear(event);\n      event.preventDefault();\n    }\n  };\n  var onNodeSelect = function onNodeSelect(node) {\n    props.onNodeSelect && props.onNodeSelect(node);\n    isSingleSelectionMode && hide();\n  };\n  var onNodeUnselect = function onNodeUnselect(node) {\n    props.onNodeUnselect && props.onNodeUnselect(node);\n    isCheckboxSelectionMode && node.originalEvent.stopPropagation();\n  };\n  var onNodeToggle = function onNodeToggle(e) {\n    if (props.onToggle) {\n      props.onToggle(e);\n    } else {\n      setExpandedKeysState(e.value);\n    }\n  };\n  var onFilterValueChange = function onFilterValueChange(e) {\n    setFilterValueState(e.value);\n  };\n  var onOverlayClick = function onOverlayClick(event) {\n    OverlayService.emit('overlay-click', {\n      originalEvent: event,\n      target: elementRef.current\n    });\n  };\n  var onFirstHiddenFocus = function onFirstHiddenFocus(event) {\n    var focusableEl = event.relatedTarget === focusInputRef.current ? DomHandler.getFirstFocusableElement(overlayRef.current, ':not([data-p-hidden-focusable=\"true\"])') : focusInputRef.current;\n    DomHandler.focus(focusableEl);\n  };\n  var onLastHiddenFocus = function onLastHiddenFocus(event) {\n    var focusableEl = event.relatedTarget === focusInputRef.current ? DomHandler.getLastFocusableElement(overlayRef.current, ':not([data-p-hidden-focusable=\"true\"])') : focusInputRef.current;\n    DomHandler.focus(focusableEl);\n  };\n  var onHeaderElementKeyDown = function onHeaderElementKeyDown(event, isHideButton) {\n    switch (event.code) {\n      case 'ArrowDown':\n        event.preventDefault();\n        setFocusToFocusableFirstNode();\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        focusInputRef.current && DomHandler.focus(focusInputRef.current);\n        break;\n      case 'Enter':\n      case 'NumpadEnter':\n        event.preventDefault();\n        if (isHideButton) {\n          hide();\n        }\n        break;\n      case 'Escape':\n        onEscapeKey(event);\n        break;\n    }\n  };\n  var onKeyDown = function onKeyDown(event) {\n    switch (event.code) {\n      case 'ArrowDown':\n        onArrowDownKey(event);\n        break;\n      case 'Space':\n      case 'Enter':\n      case 'NumpadEnter':\n        onEnterKey(event);\n        break;\n      case 'Escape':\n        onEscapeKey(event);\n        break;\n      case 'Tab':\n        if (overlayVisibleState) {\n          event.preventDefault();\n          if (event.shiftKey) {\n            setFocusToFocusableFirstNode();\n          } else {\n            onTabKey(event);\n          }\n        }\n        break;\n    }\n  };\n  var onArrowDownKey = function onArrowDownKey(event) {\n    if (overlayVisibleState) {\n      return;\n    }\n    focusToTree.current = true;\n    show();\n    event.preventDefault();\n  };\n  var onEnterKey = function onEnterKey(event) {\n    if (overlayVisibleState) {\n      hide();\n    } else {\n      onArrowDownKey(event);\n    }\n    event.preventDefault();\n  };\n  var onEscapeKey = function onEscapeKey(event) {\n    if (overlayVisibleState) {\n      hide();\n      event.preventDefault();\n    }\n  };\n  var onTabKey = function onTabKey(event) {\n    var pressedInInputText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!pressedInInputText) {\n      if (overlayVisibleState && hasFocusableElements()) {\n        DomHandler.focus(firstHiddenFocusableElementOnOverlay.current);\n        event.preventDefault();\n      }\n    }\n  };\n  var hasFocusableElements = function hasFocusableElements() {\n    return DomHandler.getFocusableElements(overlayRef.current, ':not([data-p-hidden-focusable=\"true\"])').length > 0;\n  };\n  var onFilterInputChange = function onFilterInputChange(event) {\n    var value = event.target.value;\n    if (props.onFilterValueChange) {\n      props.onFilterValueChange({\n        originalEvent: event,\n        value: value\n      });\n    } else {\n      setFilterValueState(value);\n    }\n  };\n  var resetFilter = function resetFilter() {\n    setFilterValueState('');\n  };\n  var onOverlayEnter = function onOverlayEnter() {\n    ZIndexUtils.set('overlay', overlayRef.current, context && context.autoZIndex || PrimeReact.autoZIndex, context && context.zIndex.overlay || PrimeReact.zIndex.overlay);\n    DomHandler.addStyles(overlayRef.current, {\n      position: 'absolute',\n      top: '0',\n      left: '0'\n    });\n    setFocusToFocusableFirstNode();\n    alignOverlay();\n    scrollInView();\n  };\n  var onOverlayEntered = function onOverlayEntered() {\n    bindOverlayListener();\n    if (props.filter && props.filterInputAutoFocus) {\n      DomHandler.focus(filterInputRef.current, props.filterInputAutoFocus);\n    }\n    props.onShow && props.onShow();\n  };\n  var onOverlayExit = function onOverlayExit() {\n    unbindOverlayListener();\n  };\n  var onOverlayExited = function onOverlayExited() {\n    if (props.filter && props.resetFilterOnHide) {\n      resetFilter();\n    }\n    ZIndexUtils.clear(overlayRef.current);\n    props.onHide && props.onHide();\n  };\n  var alignOverlay = function alignOverlay() {\n    DomHandler.alignOverlay(overlayRef.current, triggerRef.current.parentElement, props.appendTo || context && context.appendTo || PrimeReact.appendTo);\n  };\n  var scrollInView = function scrollInView() {\n    var highlightItem = DomHandler.findSingle(overlayRef.current, '[data-pc-section=\"content\"][data-p-highlight=\"true\"]');\n    if (highlightItem && highlightItem.scrollIntoView) {\n      highlightItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'start'\n      });\n    }\n  };\n  var _findSelectedNodes = function findSelectedNodes(node, keys, selectedNodes) {\n    if (node) {\n      if (isSelected(node, keys)) {\n        selectedNodes.push(node);\n        delete keys[node.key];\n      }\n      if (Object.keys(keys).length && node.children) {\n        var _iterator = _createForOfIteratorHelper(node.children),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var childNode = _step.value;\n            _findSelectedNodes(childNode, keys, selectedNodes);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    } else {\n      var _iterator2 = _createForOfIteratorHelper(props.options),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _childNode = _step2.value;\n          _findSelectedNodes(_childNode, keys, selectedNodes);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  };\n  var isSelected = function isSelected(node, keys) {\n    return isCheckboxSelectionMode ? keys[node.key] && keys[node.key].checked : keys[node.key];\n  };\n  var updateTreeState = function updateTreeState() {\n    var keys = isSingleSelectionMode ? _defineProperty({}, \"\".concat(props.value), true) : _objectSpread({}, props.value);\n    setExpandedKeysState({});\n    if (keys && props.options) {\n      _updateTreeBranchState(null, null, keys);\n    }\n  };\n  var setFocusToFocusableFirstNode = function setFocusToFocusableFirstNode() {\n    var _treeRef$current;\n    var treeNodeEl = DomHandler.find((_treeRef$current = treeRef.current) === null || _treeRef$current === void 0 ? void 0 : _treeRef$current.getElement(), '[data-pc-section=\"node\"]');\n    var focusedElement = _toConsumableArray(treeNodeEl).find(function (item) {\n      return item.getAttribute('tabindex') === '0';\n    });\n    DomHandler.focus(focusedElement);\n  };\n  var _updateTreeBranchState = function updateTreeBranchState(node, path, keys) {\n    if (node) {\n      if (isSelected(node, keys)) {\n        expandPath(path);\n        delete keys[node.key];\n      }\n      if (Object.keys(keys).length && node.children) {\n        var _iterator3 = _createForOfIteratorHelper(node.children),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var childNode = _step3.value;\n            path.push(node.key);\n            _updateTreeBranchState(childNode, path, keys);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n    } else {\n      var _iterator4 = _createForOfIteratorHelper(props.options),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _childNode2 = _step4.value;\n          _updateTreeBranchState(_childNode2, [], keys);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  };\n  var expandPath = function expandPath(path) {\n    if (path.length > 0) {\n      var _expandedKeys = _objectSpread({}, expandedKeysState || {});\n      var _iterator5 = _createForOfIteratorHelper(path),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var key = _step5.value;\n          _expandedKeys[key] = true;\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      setExpandedKeysState(_expandedKeys);\n    }\n  };\n  var getSelectedNodes = function getSelectedNodes() {\n    var selectedNodes = [];\n    if (ObjectUtils.isNotEmpty(props.value) && props.options) {\n      var keys = isSingleSelectionMode ? _defineProperty({}, \"\".concat(props.value), true) : _objectSpread({}, props.value);\n      _findSelectedNodes(null, keys, selectedNodes);\n    }\n    return selectedNodes;\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      clear: clear,\n      show: show,\n      hide: hide,\n      focus: function focus() {\n        return DomHandler.focus(focusInputRef.current);\n      },\n      getElement: function getElement() {\n        return elementRef.current;\n      }\n    };\n  });\n  React.useEffect(function () {\n    ObjectUtils.combinedRefs(focusInputRef, props.inputRef);\n  }, [focusInputRef, props.inputRef]);\n  useMountEffect(function () {\n    updateTreeState();\n    listId.current = UniqueComponentId() + '_list';\n    if (props.autoFocus) {\n      DomHandler.focus(focusInputRef.current, props.autoFocus);\n    }\n    alignOverlay();\n  });\n  useUpdateEffect(function () {\n    if (overlayVisibleState && props.filter) {\n      alignOverlay();\n    }\n  });\n  useUpdateEffect(function () {\n    updateTreeState();\n  }, [props.options]);\n  useUpdateEffect(function () {\n    if (focusToTree.current && overlayVisibleState) {\n      focusToTree.current = false;\n      setFocusToFocusableFirstNode();\n    }\n  }, [overlayVisibleState]);\n  useUpdateEffect(function () {\n    if (overlayVisibleState && expandedKeysState) {\n      alignOverlay();\n    }\n  }, [expandedKeysState]);\n  useUpdateEffect(function () {\n    if (overlayVisibleState) {\n      if (!selfChange.current) {\n        updateTreeState();\n      }\n      selfChange.current = false;\n    }\n  }, [props.value]);\n  useUnmountEffect(function () {\n    ZIndexUtils.clear(overlayRef.current);\n  });\n  var createKeyboardHelper = function createKeyboardHelper() {\n    var hiddenInputWrapperProps = mergeProps({\n      className: 'p-hidden-accessible'\n    }, ptm('hiddenInputWrapper'));\n    var hiddenInputProps = mergeProps(_objectSpread({\n      ref: focusInputRef,\n      role: 'listbox',\n      id: props.inputId,\n      type: 'text',\n      'aria-expanded': overlayVisibleState,\n      'aria-label': props.ariaLabel,\n      'aria-labelledby': props.ariaLabelledBy,\n      'aria-haspopup': 'tree',\n      'aria-controls': listId.current,\n      onFocus: onInputFocus,\n      onBlur: onInputBlur,\n      onKeyDown: onKeyDown,\n      disabled: props.disabled,\n      tabIndex: props.tabIndex\n    }, ariaProps), ptm('hiddenInput'));\n    return /*#__PURE__*/React.createElement(\"div\", hiddenInputWrapperProps, /*#__PURE__*/React.createElement(\"input\", _extends({}, hiddenInputProps, {\n      readOnly: true\n    })));\n  };\n  var createLabel = function createLabel() {\n    var tokenProps = mergeProps({\n      className: cx('token')\n    }, ptm('token'));\n    var tokenLabelProps = mergeProps({\n      className: cx('tokenLabel')\n    }, ptm('tokenLabel'));\n    var labelContainerProps = mergeProps({\n      className: cx('labelContainer')\n    }, ptm('labelContainer'));\n    var labelProps = mergeProps({\n      className: cx('label', {\n        isValueEmpty: isValueEmpty,\n        getLabel: getLabel\n      })\n    }, ptm('label'));\n    var content = null;\n    if (props.valueTemplate) {\n      content = ObjectUtils.getJSXElement(props.valueTemplate, selectedNodes, props);\n    } else if (props.display === 'comma') {\n      content = getLabel() || 'empty';\n    } else if (props.display === 'chip') {\n      content = /*#__PURE__*/React.createElement(React.Fragment, null, selectedNodes && selectedNodes.map(function (node, index) {\n        return /*#__PURE__*/React.createElement(\"div\", _extends({}, tokenProps, {\n          key: \"\".concat(node.key, \"_\").concat(index)\n        }), /*#__PURE__*/React.createElement(\"span\", tokenLabelProps, node.label));\n      }), isValueEmpty && (props.placeholder || 'empty'));\n    }\n    return /*#__PURE__*/React.createElement(\"div\", labelContainerProps, /*#__PURE__*/React.createElement(\"div\", labelProps, content));\n  };\n  var createDropdownIcon = function createDropdownIcon() {\n    var triggerProps = mergeProps({\n      ref: triggerRef,\n      className: cx('trigger'),\n      role: 'button',\n      'aria-haspopup': 'tree',\n      'aria-expanded': overlayVisibleState\n    }, ptm('trigger'));\n    var triggerIconProps = mergeProps({\n      className: cx('triggerIcon')\n    }, ptm('triggerIcon'));\n    var icon = props.dropdownIcon || /*#__PURE__*/React.createElement(ChevronDownIcon, triggerIconProps);\n    var dropdownIcon = IconUtils.getJSXIcon(icon, _objectSpread({}, triggerIconProps), {\n      props: props\n    });\n    return /*#__PURE__*/React.createElement(\"div\", triggerProps, dropdownIcon);\n  };\n  var createClearIcon = function createClearIcon() {\n    if (props.value != null && props.showClear && !props.disabled) {\n      var clearIconProps = mergeProps({\n        className: cx('clearIcon'),\n        onPointerUp: clear,\n        tabIndex: props.tabIndex || '0',\n        onKeyDown: onClearIconKeyDown,\n        'aria-label': localeOption('clear')\n      }, ptm('clearIcon'));\n      var icon = props.clearIcon || /*#__PURE__*/React.createElement(TimesIcon, clearIconProps);\n      return IconUtils.getJSXIcon(icon, _objectSpread({}, clearIconProps), {\n        props: props\n      });\n    }\n    return null;\n  };\n  var createContent = function createContent() {\n    return /*#__PURE__*/React.createElement(Tree, {\n      ref: treeRef,\n      id: listId.current,\n      emptyMessage: props.emptyMessage,\n      expandedKeys: expandedKeys,\n      filter: props.filter,\n      filterBy: props.filterBy,\n      filterDelay: props.filterDelay,\n      filterLocale: props.filterLocale,\n      filterMode: props.filterMode,\n      filterPlaceholder: props.filterPlaceholder,\n      filterValue: filteredValue,\n      metaKeySelection: props.metaKeySelection,\n      nodeTemplate: props.nodeTemplate,\n      onCollapse: props.onNodeCollapse,\n      onExpand: props.onNodeExpand,\n      onFilterValueChange: onFilterValueChange,\n      onNodeClick: props.onNodeClick,\n      onNodeDoubleClick: props.onNodeDoubleClick,\n      onSelect: onNodeSelect,\n      onSelectionChange: onSelectionChange,\n      onToggle: onNodeToggle,\n      onUnselect: onNodeUnselect,\n      selectionKeys: props.value,\n      selectionMode: props.selectionMode,\n      showHeader: false,\n      togglerTemplate: props.togglerTemplate,\n      value: props.options,\n      pt: ptm('tree'),\n      __parentMetadata: {\n        parent: metaData\n      }\n    });\n  };\n  var createFilterElement = function createFilterElement() {\n    if (props.filter) {\n      var newValue = props.onFilterValueChange ? props.filterValue : filterValue;\n      newValue = ObjectUtils.isNotEmpty(newValue) ? newValue : '';\n      var filterContainerProps = mergeProps({\n        className: cx('filterContainer')\n      }, ptm('filterContainer'));\n      var filterProps = mergeProps({\n        ref: filterInputRef,\n        type: 'text',\n        value: newValue,\n        autoComplete: 'off',\n        className: cx('filter'),\n        placeholder: props.filterPlaceholder,\n        onKeyDown: function onKeyDown(event) {\n          return onHeaderElementKeyDown(event, false);\n        },\n        onChange: onFilterInputChange,\n        disabled: props.disabled\n      }, ptm('filter'));\n      var filterIconProps = mergeProps({\n        className: cx('filterIcon')\n      }, ptm('filterIcon'));\n      var icon = props.filterIcon || /*#__PURE__*/React.createElement(SearchIcon, filterIconProps);\n      var filterIcon = IconUtils.getJSXIcon(icon, _objectSpread({}, filterIconProps), {\n        props: props\n      });\n      var filterContent = /*#__PURE__*/React.createElement(\"div\", filterContainerProps, /*#__PURE__*/React.createElement(\"input\", filterProps), filterIcon);\n      if (props.filterTemplate) {\n        var defaultContentOptions = {\n          className: 'p-treeselect-filter-container',\n          element: filterContent,\n          filterOptions: filterOptions,\n          filterInputKeyDown: function filterInputKeyDown(event) {\n            return onHeaderElementKeyDown(event, function () {});\n          },\n          filterInputChange: onFilterInputChange,\n          filterIconClassName: 'p-dropdown-filter-icon',\n          props: props\n        };\n        filterContent = ObjectUtils.getJSXElement(props.filterTemplate, defaultContentOptions);\n      }\n      return /*#__PURE__*/React.createElement(React.Fragment, null, filterContent);\n    }\n  };\n  var createHeader = function createHeader() {\n    var filterElement = createFilterElement();\n    var closeIconProps = mergeProps({\n      className: cx('closeIcon'),\n      'aria-hidden': true\n    }, ptm('closeIcon'));\n    var icon = props.closeIcon || /*#__PURE__*/React.createElement(TimesIcon, closeIconProps);\n    var closeIcon = IconUtils.getJSXIcon(icon, _objectSpread({}, closeIconProps), {\n      props: props\n    });\n    var closeButtonProps = mergeProps({\n      type: 'button',\n      className: cx('closeButton'),\n      onKeyDown: function onKeyDown(event) {\n        return onHeaderElementKeyDown(event, true);\n      },\n      onClick: hide,\n      'aria-label': ariaLabel('close')\n    }, ptm('closeButton'));\n    var headerProps = mergeProps({\n      className: cx('header')\n    }, ptm('header'));\n    var closeElement = /*#__PURE__*/React.createElement(\"button\", closeButtonProps, closeIcon, /*#__PURE__*/React.createElement(Ripple, null));\n    var content = /*#__PURE__*/React.createElement(\"div\", headerProps, filterElement, closeElement);\n    if (props.panelHeaderTemplate) {\n      var defaultOptions = {\n        className: 'p-treeselect-header',\n        filterElement: filterElement,\n        closeElement: closeElement,\n        closeElementClassName: 'p-treeselect-close p-link',\n        closeIconClassName: 'p-treeselect-close-icon',\n        onCloseClick: hide,\n        element: content,\n        props: props\n      };\n      return /*#__PURE__*/React.createElement(\"div\", null, content, ObjectUtils.getJSXElement(props.panelHeaderTemplate, defaultOptions));\n    }\n    return content;\n  };\n  var createFooter = function createFooter() {\n    return ObjectUtils.getJSXElement(props.panelFooterTemplate, props);\n  };\n  var selectedNodes = getSelectedNodes();\n  var otherProps = TreeSelectBase.getOtherProps(props);\n  var ariaProps = ObjectUtils.reduceKeys(otherProps, DomHandler.ARIA_PROPS);\n  var firstHiddenFocusableElementOnOverlayProps = mergeProps({\n    ref: firstHiddenFocusableElementOnOverlay,\n    role: 'presentation',\n    className: 'p-hidden-accessible p-hidden-focusable',\n    tabIndex: 0,\n    onFocus: onFirstHiddenFocus,\n    'aria-hidden': true,\n    'data-p-hidden-accessible': true,\n    'data-p-hidden-focusable': true\n  }, ptm('firstHiddenFocusableElementOnOverlay'));\n  var lastHiddenFocusableElementOnOverlayProps = mergeProps({\n    ref: lastHiddenFocusableElementOnOverlay,\n    role: 'presentation',\n    className: 'p-hidden-accessible p-hidden-focusable',\n    tabIndex: 0,\n    onFocus: onLastHiddenFocus,\n    'aria-hidden': true,\n    'data-p-hidden-accessible': true,\n    'data-p-hidden-focusable': true\n  }, ptm('lastHiddenFocusableElementOnOverlay'));\n  var rootProps = mergeProps({\n    ref: elementRef,\n    className: classNames(props.className, cx('root', {\n      context: context,\n      focusedState: focusedState,\n      overlayVisibleState: overlayVisibleState,\n      isValueEmpty: isValueEmpty\n    })),\n    style: props.style,\n    onClick: onClick\n  }, TreeSelectBase.getOtherProps(props), ptm('root'));\n  var keyboardHelper = createKeyboardHelper();\n  var labelElement = createLabel();\n  var dropdownIcon = createDropdownIcon();\n  var clearIcon = createClearIcon();\n  var content = createContent();\n  var header = createHeader();\n  var footer = createFooter();\n  return /*#__PURE__*/React.createElement(\"div\", rootProps, keyboardHelper, labelElement, clearIcon, dropdownIcon, /*#__PURE__*/React.createElement(TreeSelectPanel, {\n    hostName: \"TreeSelect\",\n    ref: overlayRef,\n    appendTo: props.appendTo,\n    panelStyle: props.panelStyle,\n    panelClassName: props.panelClassName,\n    scrollHeight: props.scrollHeight,\n    onClick: onOverlayClick,\n    header: header,\n    hide: hide,\n    footer: footer,\n    firstHiddenFocusableElementOnOverlay: /*#__PURE__*/React.createElement(\"span\", firstHiddenFocusableElementOnOverlayProps),\n    lastHiddenFocusableElementOnOverlay: /*#__PURE__*/React.createElement(\"span\", lastHiddenFocusableElementOnOverlayProps),\n    transitionOptions: props.transitionOptions,\n    \"in\": overlayVisibleState,\n    onEnter: onOverlayEnter,\n    onEntered: onOverlayEntered,\n    onExit: onOverlayExit,\n    onExited: onOverlayExited,\n    ptm: ptm,\n    cx: cx\n  }, content), hasTooltip && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    target: elementRef,\n    content: props.tooltip,\n    pt: ptm('tooltip')\n  }, props.tooltipOptions)));\n}));\nTreeSelect.displayName = 'TreeSelect';\n\nexport { TreeSelect };\n","import { useCallback, useRef } from 'react';\n\nexport function useDebounceFn<F extends (...args: any[]) => any>(fn: F, delay = 500): F {\n  const timeoutRef = useRef<number | null>(null);\n\n  // Create a debounced function with the same signature as F\n  const debouncedFn = useCallback(\n    (...args: Parameters<F>): ReturnType<F> | void => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n      timeoutRef.current = window.setTimeout(() => {\n        fn(...args);\n      }, delay);\n      // Debounced function does not return the result immediately\n    },\n    [fn, delay],\n  );\n\n  return debouncedFn as F;\n}\n","'use client';\nimport * as React from 'react';\nimport PrimeReact, { PrimeReactContext } from 'primereact/api';\nimport { ComponentBase, useHandleStyle } from 'primereact/componentbase';\nimport { CSSTransition } from 'primereact/csstransition';\nimport { useMergeProps, useDisplayOrder, useGlobalOnEscapeKey, ESC_KEY_HANDLING_PRIORITIES, useOverlayListener, useMountEffect, useUnmountEffect } from 'primereact/hooks';\nimport { OverlayService } from 'primereact/overlayservice';\nimport { Portal } from 'primereact/portal';\nimport { Ripple } from 'primereact/ripple';\nimport { classNames, DomHandler, UniqueComponentId, ZIndexUtils, IconUtils, ObjectUtils } from 'primereact/utils';\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\n\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\n\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\n\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\n\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\n\nvar styles = \"\\n@layer primereact {\\n    .p-menu-overlay {\\n        position: absolute;\\n        /* Github #3122: Prevent animation flickering  */\\n        top: -9999px;\\n        left: -9999px;\\n    }\\n\\n    .p-menu ul {\\n        margin: 0;\\n        padding: 0;\\n        list-style: none;\\n    }\\n\\n    .p-menu .p-menuitem-link {\\n        cursor: pointer;\\n        display: flex;\\n        align-items: center;\\n        text-decoration: none;\\n        overflow: hidden;\\n        position: relative;\\n    }\\n\\n    .p-menu .p-menuitem-text {\\n        line-height: 1;\\n    }\\n}\\n\";\nvar classes = {\n  root: function root(_ref) {\n    var props = _ref.props,\n      context = _ref.context;\n    return classNames('p-menu p-component', {\n      'p-menu-overlay': props.popup,\n      'p-input-filled': context && context.inputStyle === 'filled' || PrimeReact.inputStyle === 'filled',\n      'p-ripple-disabled': context && context.ripple === false || PrimeReact.ripple === false\n    });\n  },\n  menu: 'p-menu-list p-reset',\n  content: function content(_ref2) {\n    var item = _ref2.item;\n    return classNames('p-menuitem-content', {\n      'p-disabled': item.disabled\n    });\n  },\n  action: function action(_ref3) {\n    var item = _ref3.item;\n    return classNames('p-menuitem-link', {\n      'p-disabled': item.disabled\n    });\n  },\n  menuitem: function menuitem(_ref4) {\n    var focused = _ref4.focused;\n    return classNames('p-menuitem', {\n      'p-focus': focused\n    });\n  },\n  submenuHeader: function submenuHeader(_ref5) {\n    var submenu = _ref5.submenu;\n    return classNames('p-submenu-header', {\n      'p-disabled': submenu.disabled\n    });\n  },\n  separator: 'p-menu-separator',\n  label: 'p-menuitem-text',\n  icon: 'p-menuitem-icon',\n  transition: 'p-connected-overlay'\n};\nvar inlineStyles = {\n  submenuHeader: function submenuHeader(_ref6) {\n    var submenu = _ref6.submenu;\n    return submenu.style;\n  },\n  menuitem: function menuitem(_ref7) {\n    var item = _ref7.item;\n    return item.style;\n  }\n};\nvar MenuBase = ComponentBase.extend({\n  defaultProps: {\n    __TYPE: 'Menu',\n    id: null,\n    ariaLabel: null,\n    ariaLabelledBy: null,\n    tabIndex: 0,\n    model: null,\n    popup: false,\n    popupAlignment: 'left',\n    style: null,\n    className: null,\n    autoZIndex: true,\n    baseZIndex: 0,\n    appendTo: null,\n    onFocus: null,\n    onBlur: null,\n    transitionOptions: null,\n    onShow: null,\n    onHide: null,\n    children: undefined,\n    closeOnEscape: true\n  },\n  css: {\n    classes: classes,\n    styles: styles,\n    inlineStyles: inlineStyles\n  }\n});\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar Menu = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef(function (inProps, ref) {\n  var mergeProps = useMergeProps();\n  var context = React.useContext(PrimeReactContext);\n  var props = MenuBase.getProps(inProps, context);\n  var _React$useState = React.useState(props.id),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    idState = _React$useState2[0],\n    setIdState = _React$useState2[1];\n  var _React$useState3 = React.useState(!props.popup),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    visibleState = _React$useState4[0],\n    setVisibleState = _React$useState4[1];\n  var _React$useState5 = React.useState(-1),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    focusedOptionIndex = _React$useState6[0],\n    setFocusedOptionIndex = _React$useState6[1];\n  var _React$useState7 = React.useState(-1),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    selectedOptionIndex = _React$useState8[0],\n    setSelectedOptionIndex = _React$useState8[1];\n  var _React$useState9 = React.useState(false),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    focused = _React$useState10[0],\n    setFocused = _React$useState10[1];\n  var _MenuBase$setMetaData = MenuBase.setMetaData({\n      props: props,\n      state: {\n        id: idState,\n        visible: visibleState,\n        focused: focused\n      }\n    }),\n    ptm = _MenuBase$setMetaData.ptm,\n    cx = _MenuBase$setMetaData.cx,\n    sx = _MenuBase$setMetaData.sx,\n    isUnstyled = _MenuBase$setMetaData.isUnstyled;\n  var getMenuItemPTOptions = function getMenuItemPTOptions(key, menuContext) {\n    return ptm(key, {\n      context: menuContext\n    });\n  };\n  useHandleStyle(MenuBase.css.styles, isUnstyled, {\n    name: 'menu'\n  });\n  var menuRef = React.useRef(null);\n  var listRef = React.useRef(null);\n  var targetRef = React.useRef(null);\n  var isCloseOnEscape = !!(visibleState && props.popup && props.closeOnEscape);\n  var popupMenuDisplayOrder = useDisplayOrder('menu', isCloseOnEscape);\n  useGlobalOnEscapeKey({\n    callback: function callback(event) {\n      hide(event);\n    },\n    when: isCloseOnEscape && popupMenuDisplayOrder,\n    priority: [ESC_KEY_HANDLING_PRIORITIES.MENU, popupMenuDisplayOrder]\n  });\n  var _useOverlayListener = useOverlayListener({\n      target: targetRef,\n      overlay: menuRef,\n      listener: function listener(event, _ref) {\n        var valid = _ref.valid,\n          type = _ref.type;\n        if (valid) {\n          if (context.hideOverlaysOnDocumentScrolling || type === 'outside') {\n            hide(event);\n            setFocusedOptionIndex(-1);\n          } else if (!DomHandler.isDocument(event.target)) {\n            DomHandler.absolutePosition(menuRef.current, targetRef.current, props.popupAlignment);\n          }\n        }\n      },\n      when: visibleState\n    }),\n    _useOverlayListener2 = _slicedToArray(_useOverlayListener, 2),\n    bindOverlayListener = _useOverlayListener2[0],\n    unbindOverlayListener = _useOverlayListener2[1];\n  var onPanelClick = function onPanelClick(event) {\n    if (props.popup) {\n      OverlayService.emit('overlay-click', {\n        originalEvent: event,\n        target: targetRef.current\n      });\n    }\n  };\n  var onItemClick = function onItemClick(event, item, key) {\n    if (item.disabled) {\n      event.preventDefault();\n      return;\n    }\n    if (item.command) {\n      item.command({\n        originalEvent: event,\n        item: item\n      });\n    }\n    if (props.popup) {\n      hide(event);\n    }\n    if (!props.popup && focusedOptionIndex !== key) {\n      setFocusedOptionIndex(key);\n    }\n    if (!item.url) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n  var onItemMouseMove = function onItemMouseMove(event, key) {\n    if (event && props.popup && focusedOptionIndex !== key) {\n      setFocusedOptionIndex(key);\n    }\n  };\n  var onListFocus = function onListFocus(event) {\n    setFocused(true);\n    if (!props.popup) {\n      if (selectedOptionIndex !== -1) {\n        changeFocusedOptionIndex(selectedOptionIndex);\n        setSelectedOptionIndex(-1);\n      } else {\n        changeFocusedOptionIndex(0);\n      }\n    }\n    props.onFocus && props.onFocus(event);\n  };\n  var onListBlur = function onListBlur(event) {\n    var currentTarget = event.currentTarget,\n      relatedTarget = event.relatedTarget;\n    if (relatedTarget && currentTarget.contains(relatedTarget)) return;\n    setFocused(false);\n    setFocusedOptionIndex(-1);\n    props.onBlur && props.onBlur(event);\n  };\n  var onListKeyDown = function onListKeyDown(event) {\n    switch (event.code) {\n      case 'ArrowDown':\n        onArrowDownKey(event);\n        break;\n      case 'ArrowUp':\n        onArrowUpKey(event);\n        break;\n      case 'Home':\n        onHomeKey(event);\n        break;\n      case 'End':\n        onEndKey(event);\n        break;\n      case 'Enter':\n      case 'NumpadEnter':\n        onEnterKey(event);\n        break;\n      case 'Space':\n        onSpaceKey(event);\n        break;\n      case 'Escape':\n        if (props.popup) {\n          DomHandler.focus(targetRef.current);\n          hide(event);\n        }\n      case 'Tab':\n        props.popup && visibleState && hide(event);\n        break;\n    }\n  };\n  var onArrowDownKey = function onArrowDownKey(event) {\n    var optionIndex = findNextOptionIndex(focusedOptionIndex);\n    changeFocusedOptionIndex(optionIndex);\n    event.preventDefault();\n  };\n  var onArrowUpKey = function onArrowUpKey(event) {\n    if (event.altKey && props.popup) {\n      DomHandler.focus(targetRef.current);\n      hide(event);\n      event.preventDefault();\n    } else {\n      var optionIndex = findPrevOptionIndex(focusedOptionIndex);\n      changeFocusedOptionIndex(optionIndex);\n      event.preventDefault();\n    }\n  };\n  var onHomeKey = function onHomeKey(event) {\n    changeFocusedOptionIndex(0);\n    event.preventDefault();\n  };\n  var onEndKey = function onEndKey(event) {\n    changeFocusedOptionIndex(DomHandler.find(menuRef.current, 'li[data-pc-section=\"menuitem\"][data-p-disabled=\"false\"]').length - 1);\n    event.preventDefault();\n  };\n  var onEnterKey = function onEnterKey(event) {\n    var element = DomHandler.findSingle(menuRef.current, \"li[id=\\\"\".concat(\"\".concat(focusedOptionIndex), \"\\\"]\"));\n    var anchorElement = element && DomHandler.findSingle(element, 'a[data-pc-section=\"action\"]');\n    props.popup && DomHandler.focus(targetRef.current);\n    anchorElement ? anchorElement.click() : element && element.click();\n    event.preventDefault();\n  };\n  var onSpaceKey = function onSpaceKey(event) {\n    onEnterKey(event);\n  };\n  var findNextOptionIndex = function findNextOptionIndex(index) {\n    var links = DomHandler.find(menuRef.current, 'li[data-pc-section=\"menuitem\"][data-p-disabled=\"false\"]');\n    var matchedOptionIndex = _toConsumableArray(links).findIndex(function (link) {\n      return link.id === index;\n    });\n    return matchedOptionIndex > -1 ? matchedOptionIndex + 1 : 0;\n  };\n  var findPrevOptionIndex = function findPrevOptionIndex(index) {\n    var links = DomHandler.find(menuRef.current, 'li[data-pc-section=\"menuitem\"][data-p-disabled=\"false\"]');\n    var matchedOptionIndex = _toConsumableArray(links).findIndex(function (link) {\n      return link.id === index;\n    });\n    return matchedOptionIndex > -1 ? matchedOptionIndex - 1 : 0;\n  };\n  var changeFocusedOptionIndex = function changeFocusedOptionIndex(index) {\n    var links = DomHandler.find(menuRef.current, 'li[data-pc-section=\"menuitem\"][data-p-disabled=\"false\"]');\n    var order = index >= links.length ? links.length - 1 : index < 0 ? 0 : index;\n    order > -1 && setFocusedOptionIndex(links[order].getAttribute('id'));\n  };\n  var focusedOptionId = function focusedOptionId() {\n    return focusedOptionIndex !== -1 ? focusedOptionIndex : null;\n  };\n  var toggle = function toggle(event) {\n    if (props.popup) {\n      visibleState ? hide(event) : show(event);\n    }\n  };\n  var show = function show(event) {\n    targetRef.current = event.currentTarget;\n    setVisibleState(true);\n    props.onShow && props.onShow(event);\n  };\n  var hide = function hide(event) {\n    targetRef.current = event.currentTarget;\n    setVisibleState(false);\n    props.onHide && props.onHide(event);\n  };\n  var onEnter = function onEnter() {\n    DomHandler.addStyles(menuRef.current, {\n      position: 'absolute',\n      top: '0',\n      left: '0'\n    });\n    ZIndexUtils.set('menu', menuRef.current, context && context.autoZIndex || PrimeReact.autoZIndex, props.baseZIndex || context && context.zIndex.menu || PrimeReact.zIndex.menu);\n    DomHandler.absolutePosition(menuRef.current, targetRef.current, props.popupAlignment);\n    if (props.popup) {\n      DomHandler.focus(listRef.current);\n      changeFocusedOptionIndex(0);\n    }\n  };\n  var onEntered = function onEntered() {\n    bindOverlayListener();\n  };\n  var onExit = function onExit() {\n    targetRef.current = null;\n    unbindOverlayListener();\n  };\n  var onExited = function onExited() {\n    ZIndexUtils.clear(menuRef.current);\n  };\n  useMountEffect(function () {\n    if (!idState) {\n      setIdState(UniqueComponentId());\n    }\n  });\n  useUnmountEffect(function () {\n    ZIndexUtils.clear(menuRef.current);\n  });\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      toggle: toggle,\n      show: show,\n      hide: hide,\n      getElement: function getElement() {\n        return menuRef.current;\n      },\n      getTarget: function getTarget() {\n        return targetRef.current;\n      }\n    };\n  });\n  var createSubmenu = function createSubmenu(submenu, index) {\n    var key = idState + '_sub_' + index;\n    var items = submenu.items.map(function (item, index) {\n      return createMenuItem(item, index, key);\n    });\n    var submenuHeaderProps = mergeProps({\n      id: key,\n      role: 'none',\n      className: classNames(submenu.className, cx('submenuHeader', {\n        submenu: submenu\n      })),\n      style: sx('submenuHeader', {\n        submenu: submenu\n      }),\n      'data-p-disabled': submenu.disabled\n    }, ptm('submenuHeader'));\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: key\n    }, /*#__PURE__*/React.createElement(\"li\", _extends({}, submenuHeaderProps, {\n      key: key\n    }), submenu.label), items);\n  };\n  var createSeparator = function createSeparator(item, index) {\n    if (item.visible === false) {\n      return null;\n    }\n    var key = idState + '_separator_' + index;\n    var separatorProps = mergeProps({\n      id: key,\n      className: classNames(item.className, cx('separator')),\n      role: 'separator'\n    }, ptm('separator'));\n    return /*#__PURE__*/React.createElement(\"li\", _extends({}, separatorProps, {\n      key: key\n    }));\n  };\n  var createMenuItem = function createMenuItem(item, index) {\n    var parentId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    if (item.visible === false) {\n      return null;\n    }\n    var menuContext = {\n      item: item,\n      index: index,\n      parentId: parentId\n    };\n    var linkClassName = classNames('p-menuitem-link', {\n      'p-disabled': item.disabled\n    });\n    var iconClassName = classNames('p-menuitem-icon', item.icon);\n    var iconProps = mergeProps({\n      className: cx('icon')\n    }, getMenuItemPTOptions('icon', menuContext));\n    var icon = IconUtils.getJSXIcon(item.icon, _objectSpread({}, iconProps), {\n      props: props\n    });\n    var labelProps = mergeProps({\n      className: cx('label')\n    }, getMenuItemPTOptions('label', menuContext));\n    var label = item.label && /*#__PURE__*/React.createElement(\"span\", labelProps, item.label);\n    var key = item.id || (parentId || idState) + '_' + index;\n    var contentProps = mergeProps({\n      onClick: function onClick(event) {\n        return onItemClick(event, item, key);\n      },\n      onMouseMove: function onMouseMove(event) {\n        return onItemMouseMove(event, key);\n      },\n      className: cx('content', {\n        item: item\n      })\n    }, getMenuItemPTOptions('content', menuContext));\n    var actionProps = mergeProps({\n      href: item.url || '#',\n      className: cx('action', {\n        item: item\n      }),\n      onFocus: function onFocus(event) {\n        return event.stopPropagation();\n      },\n      target: item.target,\n      tabIndex: '-1',\n      'aria-label': item.label,\n      'aria-disabled': item.disabled,\n      'data-p-disabled': item.disabled\n    }, getMenuItemPTOptions('action', menuContext));\n    var content = /*#__PURE__*/React.createElement(\"div\", contentProps, /*#__PURE__*/React.createElement(\"a\", actionProps, icon, label, /*#__PURE__*/React.createElement(Ripple, null)));\n    if (item.template) {\n      var defaultContentOptions = {\n        onClick: function onClick(event) {\n          return onItemClick(event, item, key);\n        },\n        onMouseMove: function onMouseMove(event) {\n          return onItemMouseMove(event, key);\n        },\n        className: linkClassName,\n        tabIndex: '-1',\n        labelClassName: 'p-menuitem-text',\n        iconClassName: iconClassName,\n        element: content,\n        props: props\n      };\n      content = ObjectUtils.getJSXElement(item.template, item, defaultContentOptions);\n    }\n    var menuitemProps = mergeProps({\n      id: key,\n      className: classNames(item.className, cx('menuitem', {\n        focused: focusedOptionIndex === key\n      })),\n      onClick: function onClick(event) {\n        return onItemClick(event, item, key);\n      },\n      style: sx('menuitem', {\n        item: item\n      }),\n      role: 'menuitem',\n      'aria-label': item.label,\n      'aria-disabled': item.disabled,\n      'data-p-focused': focusedOptionId() === key,\n      'data-p-disabled': item.disabled || false\n    }, getMenuItemPTOptions('menuitem', menuContext));\n    return /*#__PURE__*/React.createElement(\"li\", _extends({}, menuitemProps, {\n      key: key\n    }), content);\n  };\n  var createItem = function createItem(item, index) {\n    if (item.visible === false) {\n      return null;\n    }\n    return item.separator ? createSeparator(item, index) : item.items ? createSubmenu(item, index) : createMenuItem(item, index);\n  };\n  var createMenu = function createMenu() {\n    return props.model.map(createItem);\n  };\n  var createElement = function createElement() {\n    if (props.model) {\n      var menuitems = createMenu();\n      var rootProps = mergeProps({\n        className: classNames(props.className, cx('root', {\n          context: context\n        })),\n        style: props.style,\n        onClick: function onClick(e) {\n          return onPanelClick(e);\n        }\n      }, MenuBase.getOtherProps(props), ptm('root'));\n      var menuProps = mergeProps({\n        ref: listRef,\n        className: cx('menu'),\n        id: idState + '_list',\n        tabIndex: props.tabIndex || '0',\n        role: 'menu',\n        'aria-label': props.ariaLabel,\n        'aria-labelledby': props.ariaLabelledBy,\n        'aria-activedescendant': focused ? focusedOptionId() : undefined,\n        onFocus: onListFocus,\n        onKeyDown: onListKeyDown,\n        onBlur: onListBlur\n      }, ptm('menu'));\n      var transitionProps = mergeProps({\n        classNames: cx('transition'),\n        \"in\": visibleState,\n        timeout: {\n          enter: 120,\n          exit: 100\n        },\n        options: props.transitionOptions,\n        unmountOnExit: true,\n        onEnter: onEnter,\n        onEntered: onEntered,\n        onExit: onExit,\n        onExited: onExited\n      }, ptm('transition'));\n      return /*#__PURE__*/React.createElement(CSSTransition, _extends({\n        nodeRef: menuRef\n      }, transitionProps), /*#__PURE__*/React.createElement(\"div\", _extends({\n        id: props.id,\n        ref: menuRef\n      }, rootProps), /*#__PURE__*/React.createElement(\"ul\", menuProps, menuitems)));\n    }\n    return null;\n  };\n  var element = createElement();\n  return props.popup ? /*#__PURE__*/React.createElement(Portal, {\n    element: element,\n    appendTo: props.appendTo\n  }) : element;\n}));\nMenu.displayName = 'Menu';\n\nexport { Menu };\n","import { registerOpenSCADLanguage } from '../services/monaco-language/openscad-register-language.ts';\nimport React, { CSSProperties, useCallback, useEffect, useRef, useState } from 'react';\nimport { zipArchives } from '../services/fs/zip-archives.ts';\nimport Editor, { type Monaco } from '@monaco-editor/react';\nimport { CenteredSpinner } from './CenteredSpinner.tsx';\nimport { TreeSelect } from 'primereact/treeselect';\nimport { useDebounceFn } from '../react-utils.ts';\nimport { TreeNode } from 'primereact/treenode';\nimport type * as monaco from 'monaco-editor';\nimport { Button } from 'primereact/button';\nimport { Menu } from 'primereact/menu';\nimport { fs } from '@zenfs/core';\n\ninterface ZenMonacoPrimeProps {\n  style?: CSSProperties;\n  homeFileProp: string;\n  path: string;\n  hideTopBar?: boolean;\n  isInitializing: boolean;\n  markers?: monaco.editor.IMarkerData[];\n  onSave?: (fileContent: string) => void;\n  reloadKey?: number;\n}\n\nconst ZenMonacoPrime = function ZenMonacoPrime(props: ZenMonacoPrimeProps) {\n  const [editor, setEditor] = useState<monaco.editor.IStandaloneCodeEditor | null>(null);\n  const [monacoInstance, setMonacoInstance] = useState<Monaco | null>(null);\n  const [files, setFiles] = useState<TreeNode[]>([]);\n  const [currentFile, setCurrentFile] = useState<string>(props.path);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [initialFileContent, setInitialFileContent] = useState<string>('');\n  const [expandedKeys, setExpandedKeys] = useState<{ [key: string]: boolean }>({});\n  const [homeFile, setHome] = useState(props.homeFileProp ?? '');\n  const menuRef = useRef<any>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isSmall, setIsSmall] = useState(false);\n\n  const showError = (msg: string, err: any) => alert(`${msg}: ${err}`);\n\n  // Build TreeSelect nodes directly from fs\n  function buildTreeSelectNodes(path = '/'): any[] {\n    const nodes: TreeNode[] = [];\n    try {\n      const entries = fs.readdirSync(path);\n      entries.sort();\n      for (const entry of entries) {\n        const fullPath = path === '/' ? `/${entry}` : `${path}/${entry}`;\n        const isDir = fs.existsSync(fullPath) && fs.statSync(fullPath).isDirectory();\n        if (isDir) {\n          nodes.push({\n            key: fullPath,\n            label: entry + '/',\n            data: fullPath,\n            selectable: false,\n            children: buildTreeSelectNodes(fullPath),\n            icon: 'pi pi-folder',\n          });\n        } else {\n          nodes.push({\n            key: fullPath,\n            label: entry,\n            data: fullPath,\n            selectable: true,\n            icon: 'pi pi-file',\n          });\n        }\n      }\n    } catch (e) {\n      showError('Failed to build tree', e);\n    }\n    return nodes;\n  }\n\n  const refreshFiles = () => {\n    if (props.hideTopBar) return;\n    try {\n      const allEntries = buildTreeSelectNodes('/');\n      setFiles(allEntries);\n      if (!currentFile && allEntries.length) setCurrentFile(homeFile);\n    } catch (e) {\n      showError('Failed to list files', e);\n    }\n  };\n\n  const handleNewFile = () => {\n    const name = prompt('Enter new file name (with extension):', '/newfile.scad');\n    if (name && name.startsWith('/')) {\n      try {\n        if (fs.existsSync(name)) {\n          alert('File already exists!');\n        } else {\n          fs.mkdirSync(name.substring(0, name.lastIndexOf('/')), { recursive: true });\n          fs.writeFileSync(name, '');\n          setCurrentFile(name);\n          refreshFiles();\n        }\n      } catch (e) {\n        showError('Failed to create file', e);\n      }\n    }\n  };\n\n  const handleRenameFile = () => {\n    const name = prompt('Enter new name for current file:', currentFile);\n    if (name && name.startsWith('/')) {\n      try {\n        if (fs.existsSync(name)) {\n          alert('File already exists!');\n        } else {\n          fs.mkdirSync(name.substring(0, name.lastIndexOf('/')), { recursive: true });\n          fs.writeFileSync(name, fs.readFileSync(currentFile, 'utf-8'));\n          fs.unlinkSync(currentFile);\n          setCurrentFile(name);\n          refreshFiles();\n        }\n      } catch (e) {\n        showError('Failed to rename file', e);\n      }\n    }\n  };\n\n  const handleDeleteFile = () => {\n    if (window.confirm(`Delete ${currentFile}?`)) {\n      try {\n        fs.unlinkSync(currentFile);\n        refreshFiles();\n        setCurrentFile('');\n      } catch (e) {\n        showError('Failed to delete file', e);\n      }\n    }\n  };\n\n  const debouncedSave = useDebounceFn((fileContent: string) => {\n    if (isLoading || !currentFile) return;\n    try {\n      console.debug('ZenMonacoPrime', `Saving ${currentFile}`);\n      fs.writeFileSync(currentFile, fileContent ?? '');\n      if (fileContent == initialFileContent) return;\n      props.onSave?.(fileContent);\n    } catch (e) {\n      showError('Failed to save file', e);\n    }\n  }, 1000);\n\n  const handleEditorChange = useCallback(\n    (value: string | undefined) => {\n      if (!value) return;\n      debouncedSave(value);\n    },\n    [debouncedSave],\n  );\n\n  const onMount = (editor: monaco.editor.IStandaloneCodeEditor, monacoInstance: Monaco) => {\n    monacoInstance.editor.addEditorAction({\n      id: 'openscad-save-do-nothing',\n      label: 'Save (disabled)',\n      keybindings: [monacoInstance.KeyMod.CtrlCmd | monacoInstance.KeyCode.KeyS],\n      run: () => {},\n    });\n    // https://code.visualstudio.com/docs/reference/default-keybindings\n    monacoInstance.editor.addKeybindingRules([\n      {\n        keybinding: monacoInstance.KeyMod.CtrlCmd | monacoInstance.KeyCode.KeyD,\n        command: 'monaco.editor.action.deleteLines',\n      },\n      {\n        keybinding:\n          monacoInstance.KeyMod.CtrlCmd | monacoInstance.KeyMod.Shift | monacoInstance.KeyCode.KeyD,\n        command: 'monaco.editor.action.copyLinesDownAction',\n      },\n      {\n        keybinding: monacoInstance.KeyMod.CtrlCmd | monacoInstance.KeyCode.KeyK,\n        command: 'monaco.editor.action.quickCommand',\n      },\n      {\n        keybinding: monacoInstance.KeyCode.F8,\n        command: undefined,\n      },\n    ]);\n    registerOpenSCADLanguage(monacoInstance, fs, '/', zipArchives);\n    setEditor(editor);\n    setMonacoInstance(monacoInstance);\n  };\n\n  useEffect(() => {\n    if (!editor || !monacoInstance) return;\n    const model = editor.getModel();\n    if (!model) return;\n    monacoInstance.editor.setModelMarkers(model, 'openscad', props.markers ?? []);\n  }, [props.markers]);\n\n  useEffect(() => {\n    if (props.isInitializing || !currentFile || initialFileContent != '') return;\n    (async () => {\n      try {\n        console.debug('ZenMonacoPrime', `Loading ${currentFile}`);\n        if (fs.existsSync(currentFile)) {\n          const fileContent = fs.readFileSync(currentFile, 'utf-8');\n          if (fileContent != initialFileContent) {\n            setInitialFileContent(fileContent);\n          }\n        } else {\n          setInitialFileContent('');\n        }\n        refreshFiles();\n        setIsLoading(false);\n      } catch (e) {\n        showError('Failed to read file', e);\n        setInitialFileContent('');\n      }\n    })();\n  }, [props.isInitializing, currentFile, refreshFiles]);\n\n  useEffect(() => {\n    // When reloadKey changes, reload the file content from fs\n    if (props.reloadKey !== undefined && props.reloadKey > 0) {\n      console.debug('ZenMonacoPrime', `Reloading ${currentFile}`);\n      if (fs.existsSync(currentFile)) {\n        const fileContent = fs.readFileSync(currentFile, 'utf-8');\n        editor?.setValue(fileContent);\n        setIsLoading(false);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.reloadKey]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (containerRef.current) {\n        setIsSmall(containerRef.current.offsetWidth < 600);\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    handleResize();\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // TreeSelect value is the current file path\n  const treeValue = currentFile || null;\n\n  const menuItems = [\n    { label: 'New File', icon: 'pi pi-plus', command: handleNewFile },\n    { label: 'Rename', icon: 'pi pi-pencil', command: handleRenameFile },\n    { label: 'Delete', icon: 'pi pi-trash', command: handleDeleteFile },\n    { separator: true },\n    { label: 'Set as Home', icon: 'pi pi-home', command: () => setHome(currentFile) },\n  ];\n\n  return (\n    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', ...props.style }}>\n      {!props.hideTopBar && (\n        <div\n          style={{\n            flex: 0,\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px',\n            padding: '8px',\n            background: '#222',\n          }}\n        >\n          <div style={{ position: 'relative', flex: 0 }}>\n            <Menu model={menuItems} popup ref={menuRef} />\n            <Button\n              aria-label=\"Editor menu\"\n              style={{ minWidth: 48, minHeight: 48 }}\n              title=\"Menu\"\n              onClick={(e) => menuRef.current && menuRef.current.toggle(e)}\n              disabled={isLoading}\n              icon=\"pi pi-bars\"\n              text\n            />\n          </div>\n          <div style={{ position: 'relative', flex: 1, display: 'flex', alignItems: 'center' }}>\n            {/* TreeSelect file picker */}\n            <TreeSelect\n              value={treeValue}\n              options={files}\n              expandedKeys={expandedKeys}\n              onToggle={(e) => setExpandedKeys(e.value)}\n              onChange={(e) => {\n                const selectedKey = e.value;\n                if (typeof selectedKey === 'string') {\n                  if (fs.existsSync(selectedKey) && !fs.statSync(selectedKey).isDirectory()) {\n                    setCurrentFile(selectedKey);\n                  }\n                }\n              }}\n              selectionMode=\"single\"\n              filter\n              placeholder=\"Select a file\"\n              className=\"w-full\"\n              style={{ minWidth: 300 }}\n              disabled={isLoading}\n              panelStyle={{ maxHeight: 600, overflowY: 'auto' }}\n            />\n          </div>\n          <div style={{ position: 'relative', flex: 0 }}>\n            <Button\n              aria-label=\"Go to HomePage\"\n              title=\"Go to HomePage\"\n              style={{ minWidth: 48, minHeight: 48, color: homeFile ? '#fff' : '#888' }}\n              disabled={!homeFile}\n              onClick={() => homeFile && setCurrentFile(homeFile)}\n              icon=\"pi pi-home\"\n              text\n            />\n          </div>\n        </div>\n      )}\n      <div ref={containerRef} style={{ flex: 1 }}>\n        {isLoading ?\n          <CenteredSpinner text=\"Loading filesystem\" />\n        : <Editor\n            width=\"100%\"\n            height=\"100%\"\n            defaultLanguage=\"openscad\"\n            value={initialFileContent}\n            path={currentFile}\n            onChange={handleEditorChange}\n            theme=\"vs-dark\"\n            onMount={onMount}\n            options={{\n              automaticLayout: true,\n              fontSize: 16,\n              lineNumbers: isSmall ? 'off' : 'on',\n              minimap: { enabled: !isSmall },\n              scrollBeyondLastLine: false,\n              tabSize: 2,\n              insertSpaces: true,\n              detectIndentation: true,\n              maxTokenizationLineLength: 2000,\n              lineNumbersMinChars: 4,\n            }}\n            loading={<CenteredSpinner text=\"Loading monaco editor\" />}\n          />\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default ZenMonacoPrime;\n","class EventDispatcher {\n  constructor() {\n    this._listeners = {};\n  }\n\n  addEventListener(type, listener) {\n    const listeners = this._listeners;\n\n    if (listeners[type] === undefined) {\n      listeners[type] = [];\n    }\n\n    if (listeners[type].indexOf(listener) === -1) {\n      listeners[type].push(listener);\n    }\n\n    return this;\n  }\n\n  removeEventListener(type, listener) {\n    const listeners = this._listeners;\n    const listenerArray = listeners[type];\n\n    if (listenerArray !== undefined) {\n      const index = listenerArray.indexOf(listener);\n\n      if (index !== -1) {\n        listenerArray.splice(index, 1);\n      }\n    }\n\n    return this;\n  }\n\n  dispatchEvent(event) {\n    const listeners = this._listeners;\n    const listenerArray = listeners[event.type];\n\n    if (listenerArray !== undefined) {\n      // Make a copy, in case listeners are removed while iterating.\n      const array = listenerArray.slice(0);\n\n      for (let i = 0, l = array.length; i < l; i++) {\n        array[i].call(this, event);\n      }\n    }\n\n    return this;\n  }\n\n  dispose() {\n    for (const key in this._listeners) {\n      delete this._listeners[key];\n    }\n  }\n\n}\n\n/**\n * Represents a connection between two {@link GraphNode} resources in a {@link Graph}.\n *\n * The left node is considered the owner, and the right node the resource. The\n * owner is responsible for being able find and remove a reference to a resource, given\n * that link. The resource does not hold a reference to the link or to the owner,\n * although that reverse lookup can be done on the graph.\n */\nclass GraphEdge {\n  constructor(_name, _parent, _child, _attributes = {}) {\n    this._name = void 0;\n    this._parent = void 0;\n    this._child = void 0;\n    this._attributes = void 0;\n    this._disposed = false;\n    this._name = _name;\n    this._parent = _parent;\n    this._child = _child;\n    this._attributes = _attributes;\n\n    if (!_parent.isOnGraph(_child)) {\n      throw new Error('Cannot connect disconnected graphs.');\n    }\n  }\n  /** Name (attribute name from parent {@link GraphNode}). */\n\n\n  getName() {\n    return this._name;\n  }\n  /** Owner node. */\n\n\n  getParent() {\n    return this._parent;\n  }\n  /** Resource node. */\n\n\n  getChild() {\n    return this._child;\n  }\n  /**\n   * Sets the child node.\n   *\n   * @internal Only {@link Graph} implementations may safely call this method directly. Use\n   * \t{@link Property.swap} or {@link Graph.swapChild} instead.\n   */\n\n\n  setChild(child) {\n    this._child = child;\n    return this;\n  }\n  /** Attributes of the graph node relationship. */\n\n\n  getAttributes() {\n    return this._attributes;\n  }\n  /** Destroys a (currently intact) edge, updating both the graph and the owner. */\n\n\n  dispose() {\n    if (this._disposed) return; // @ts-expect-error GraphEdge doesn't know types of parent GraphNode.\n\n    this._parent._destroyRef(this);\n\n    this._disposed = true;\n  }\n  /** Whether this link has been destroyed. */\n\n\n  isDisposed() {\n    return this._disposed;\n  }\n\n}\n\n/**\n * A graph manages a network of {@link GraphNode} nodes, connected\n * by {@link @Link} edges.\n */\n\nclass Graph extends EventDispatcher {\n  constructor(...args) {\n    super(...args);\n    this._emptySet = new Set();\n    this._edges = new Set();\n    this._parentEdges = new Map();\n    this._childEdges = new Map();\n  }\n\n  /** Returns a list of all parent->child edges on this graph. */\n  listEdges() {\n    return Array.from(this._edges);\n  }\n  /** Returns a list of all edges on the graph having the given node as their child. */\n\n\n  listParentEdges(node) {\n    return Array.from(this._childEdges.get(node) || this._emptySet);\n  }\n  /** Returns a list of parent nodes for the given child node. */\n\n\n  listParents(node) {\n    const parentSet = new Set();\n\n    for (const edge of this.listParentEdges(node)) {\n      parentSet.add(edge.getParent());\n    }\n\n    return Array.from(parentSet);\n  }\n  /** Returns a list of all edges on the graph having the given node as their parent. */\n\n\n  listChildEdges(node) {\n    return Array.from(this._parentEdges.get(node) || this._emptySet);\n  }\n  /** Returns a list of child nodes for the given parent node. */\n\n\n  listChildren(node) {\n    const childSet = new Set();\n\n    for (const edge of this.listChildEdges(node)) {\n      childSet.add(edge.getChild());\n    }\n\n    return Array.from(childSet);\n  }\n\n  disconnectParents(node, filter) {\n    for (const edge of this.listParentEdges(node)) {\n      if (!filter || filter(edge.getParent())) {\n        edge.dispose();\n      }\n    }\n\n    return this;\n  }\n  /**********************************************************************************************\n   * Internal.\n   */\n\n  /**\n   * Creates a {@link GraphEdge} connecting two {@link GraphNode} instances. Edge is returned\n   * for the caller to store.\n   * @param a Owner\n   * @param b Resource\n   * @hidden\n   * @internal\n   */\n\n\n  _createEdge(name, a, b, attributes) {\n    const edge = new GraphEdge(name, a, b, attributes);\n\n    this._edges.add(edge);\n\n    const parent = edge.getParent();\n    if (!this._parentEdges.has(parent)) this._parentEdges.set(parent, new Set());\n\n    this._parentEdges.get(parent).add(edge);\n\n    const child = edge.getChild();\n    if (!this._childEdges.has(child)) this._childEdges.set(child, new Set());\n\n    this._childEdges.get(child).add(edge);\n\n    return edge;\n  }\n  /**\n   * Detaches a {@link GraphEdge} from the {@link Graph}. Before calling this\n   * method, ensure that the GraphEdge has first been detached from any\n   * associated {@link GraphNode} attributes.\n   * @hidden\n   * @internal\n   */\n\n\n  _destroyEdge(edge) {\n    this._edges.delete(edge);\n\n    this._parentEdges.get(edge.getParent()).delete(edge);\n\n    this._childEdges.get(edge.getChild()).delete(edge);\n\n    return this;\n  }\n\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n/**\n * An ordered collection of {@link Ref Refs}, allowing duplicates. Removing\n * a Ref is an O(n) operation  use {@link RefSet} for faster removal, if\n * duplicates are not required.\n */\nclass RefList {\n  constructor(refs) {\n    this.list = [];\n\n    if (refs) {\n      for (const ref of refs) {\n        this.list.push(ref);\n      }\n    }\n  }\n\n  add(ref) {\n    this.list.push(ref);\n  }\n\n  remove(ref) {\n    const index = this.list.indexOf(ref);\n    if (index >= 0) this.list.splice(index, 1);\n  }\n\n  removeChild(child) {\n    const refs = [];\n\n    for (const ref of this.list) {\n      if (ref.getChild() === child) {\n        refs.push(ref);\n      }\n    }\n\n    for (const ref of refs) {\n      this.remove(ref);\n    }\n\n    return refs;\n  }\n\n  listRefsByChild(child) {\n    const refs = [];\n\n    for (const ref of this.list) {\n      if (ref.getChild() === child) {\n        refs.push(ref);\n      }\n    }\n\n    return refs;\n  }\n\n  values() {\n    return this.list;\n  }\n\n}\n/**\n * An ordered collection of {@link Ref Refs}, without duplicates. Adding or\n * removing a Ref is typically O(1) or O(log(n)), and faster than\n * {@link RefList}. If support for duplicates is required, use {@link RefList}.\n */\n\nclass RefSet {\n  constructor(refs) {\n    this.set = new Set();\n    this.map = new Map();\n\n    if (refs) {\n      for (const ref of refs) {\n        this.add(ref);\n      }\n    }\n  }\n\n  add(ref) {\n    const child = ref.getChild();\n    this.removeChild(child);\n    this.set.add(ref);\n    this.map.set(child, ref);\n  }\n\n  remove(ref) {\n    this.set.delete(ref);\n    this.map.delete(ref.getChild());\n  }\n\n  removeChild(child) {\n    const ref = this.map.get(child) || null;\n    if (ref) this.remove(ref);\n    return ref;\n  }\n\n  getRefByChild(child) {\n    return this.map.get(child) || null;\n  }\n\n  values() {\n    return Array.from(this.set);\n  }\n\n}\n/**\n * Map (or dictionary) from string keys to {@link Ref Refs}.\n */\n\nclass RefMap {\n  constructor(map) {\n    this.map = {};\n\n    if (map) {\n      Object.assign(this.map, map);\n    }\n  }\n\n  set(key, child) {\n    this.map[key] = child;\n  }\n\n  delete(key) {\n    delete this.map[key];\n  }\n\n  get(key) {\n    return this.map[key] || null;\n  }\n\n  keys() {\n    return Object.keys(this.map);\n  }\n\n  values() {\n    return Object.values(this.map);\n  }\n\n}\n\nconst $attributes = Symbol('attributes');\nconst $immutableKeys = Symbol('immutableKeys');\n/**\n * Represents a node in a {@link Graph}.\n */\n\nclass GraphNode extends EventDispatcher {\n  /**\n   * Internal graph used to search and maintain references.\n   * @hidden\n   */\n\n  /**\n   * Attributes (literal values and GraphNode references) associated with this instance. For each\n   * GraphNode reference, the attributes stores a {@link GraphEdge}. List and Map references are\n   * stored as arrays and dictionaries of edges.\n   * @internal\n   */\n\n  /**\n   * Attributes included with `getDefaultAttributes` are considered immutable, and cannot be\n   * modifed by `.setRef()`, `.copy()`, or other GraphNode methods. Both the edges and the\n   * properties will be disposed with the parent GraphNode.\n   *\n   * Currently, only single-edge references (getRef/setRef) are supported as immutables.\n   *\n   * @internal\n   */\n  constructor(graph) {\n    super();\n    this._disposed = false;\n    this.graph = void 0;\n    this[$attributes] = void 0;\n    this[$immutableKeys] = void 0;\n    this.graph = graph;\n    this[$immutableKeys] = new Set();\n    this[$attributes] = this._createAttributes();\n  }\n  /**\n   * Returns default attributes for the graph node. Subclasses having any attributes (either\n   * literal values or references to other graph nodes) must override this method. Literal\n   * attributes should be given their default values, if any. References should generally be\n   * initialized as empty (Ref  null, RefList  [], RefMap  {}) and then modified by setters.\n   *\n   * Any single-edge references (setRef) returned by this method will be considered immutable,\n   * to be owned by and disposed with the parent node. Multi-edge references (addRef, removeRef,\n   * setRefMap) cannot be returned as default attributes.\n   */\n\n\n  getDefaults() {\n    return {};\n  }\n  /**\n   * Constructs and returns an object used to store a graph nodes attributes. Compared to the\n   * default Attributes interface, this has two distinctions:\n   *\n   * 1. Slots for GraphNode<T> objects are replaced with slots for GraphEdge<this, GraphNode<T>>\n   * 2. GraphNode<T> objects provided as defaults are considered immutable\n   *\n   * @internal\n   */\n\n\n  _createAttributes() {\n    const defaultAttributes = this.getDefaults();\n    const attributes = {};\n\n    for (const key in defaultAttributes) {\n      const value = defaultAttributes[key]; // TODO(design): With Ref, RefList, and RefMap types, should users\n      // be able to pass them all here? Listeners must be added.\n\n      if (value instanceof GraphNode) {\n        const ref = this.graph._createEdge(key, this, value);\n\n        this[$immutableKeys].add(key);\n        attributes[key] = ref;\n      } else {\n        attributes[key] = value;\n      }\n    }\n\n    return attributes;\n  }\n  /** @internal Returns true if two nodes are on the same {@link Graph}. */\n\n\n  isOnGraph(other) {\n    return this.graph === other.graph;\n  }\n  /** Returns true if the node has been permanently removed from the graph. */\n\n\n  isDisposed() {\n    return this._disposed;\n  }\n  /**\n   * Removes both inbound references to and outbound references from this object. At the end\n   * of the process the object holds no references, and nothing holds references to it. A\n   * disposed object is not reusable.\n   */\n\n\n  dispose() {\n    if (this._disposed) return;\n    this.graph.listChildEdges(this).forEach(edge => edge.dispose());\n    this.graph.disconnectParents(this);\n    this._disposed = true;\n    this.dispatchEvent({\n      type: 'dispose'\n    });\n  }\n  /**\n   * Removes all inbound references to this object. At the end of the process the object is\n   * considered 'detached': it may hold references to child resources, but nothing holds\n   * references to it. A detached object may be re-attached.\n   */\n\n\n  detach() {\n    this.graph.disconnectParents(this);\n    return this;\n  }\n  /**\n   * Transfers this object's references from the old node to the new one. The old node is fully\n   * detached from this parent at the end of the process.\n   *\n   * @hidden\n   */\n\n\n  swap(prevValue, nextValue) {\n    for (const attribute in this[$attributes]) {\n      const value = this[$attributes][attribute];\n\n      if (value instanceof GraphEdge) {\n        const ref = value;\n\n        if (ref.getChild() === prevValue) {\n          this.setRef(attribute, nextValue, ref.getAttributes());\n        }\n      } else if (value instanceof RefList) {\n        for (const ref of value.listRefsByChild(prevValue)) {\n          const refAttributes = ref.getAttributes();\n          this.removeRef(attribute, prevValue);\n          this.addRef(attribute, nextValue, refAttributes);\n        }\n      } else if (value instanceof RefSet) {\n        const ref = value.getRefByChild(prevValue);\n\n        if (ref) {\n          const refAttributes = ref.getAttributes();\n          this.removeRef(attribute, prevValue);\n          this.addRef(attribute, nextValue, refAttributes);\n        }\n      } else if (value instanceof RefMap) {\n        for (const key of value.keys()) {\n          const ref = value.get(key);\n\n          if (ref.getChild() === prevValue) {\n            this.setRefMap(attribute, key, nextValue, ref.getAttributes());\n          }\n        }\n      }\n    }\n\n    return this;\n  }\n  /**********************************************************************************************\n   * Literal attributes.\n   */\n\n  /** @hidden */\n\n\n  get(attribute) {\n    return this[$attributes][attribute];\n  }\n  /** @hidden */\n\n\n  set(attribute, value) {\n    this[$attributes][attribute] = value;\n    return this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n  /**********************************************************************************************\n   * Ref: 1:1 graph node references.\n   */\n\n  /** @hidden */\n\n\n  getRef(attribute) {\n    const ref = this[$attributes][attribute];\n    return ref ? ref.getChild() : null;\n  }\n  /** @hidden */\n\n\n  setRef(attribute, value, attributes) {\n    if (this[$immutableKeys].has(attribute)) {\n      throw new Error(`Cannot overwrite immutable attribute, \"${attribute}\".`);\n    }\n\n    const prevRef = this[$attributes][attribute];\n    if (prevRef) prevRef.dispose(); // TODO(cleanup): Possible duplicate event.\n\n    if (!value) return this;\n\n    const ref = this.graph._createEdge(attribute, this, value, attributes);\n\n    this[$attributes][attribute] = ref;\n    return this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n  /**********************************************************************************************\n   * RefList: 1:many graph node references.\n   */\n\n  /** @hidden */\n\n\n  listRefs(attribute) {\n    const refs = this.assertRefList(attribute);\n    return refs.values().map(ref => ref.getChild());\n  }\n  /** @hidden */\n\n\n  addRef(attribute, value, attributes) {\n    const ref = this.graph._createEdge(attribute, this, value, attributes);\n\n    const refs = this.assertRefList(attribute);\n    refs.add(ref);\n    return this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n  /** @hidden */\n\n\n  removeRef(attribute, value) {\n    const refs = this.assertRefList(attribute);\n\n    if (refs instanceof RefList) {\n      for (const ref of refs.listRefsByChild(value)) {\n        ref.dispose();\n      }\n    } else {\n      const ref = refs.getRefByChild(value);\n      if (ref) ref.dispose();\n    }\n\n    return this;\n  }\n  /** @hidden */\n\n\n  assertRefList(attribute) {\n    const refs = this[$attributes][attribute];\n\n    if (refs instanceof RefList || refs instanceof RefSet) {\n      return refs;\n    } // TODO(v3) Remove warning.\n\n\n    throw new Error(`Expected RefList or RefSet for attribute \"${attribute}\"`);\n  }\n  /**********************************************************************************************\n   * RefMap: Named 1:many (map) graph node references.\n   */\n\n  /** @hidden */\n\n\n  listRefMapKeys(attribute) {\n    return this.assertRefMap(attribute).keys();\n  }\n  /** @hidden */\n\n\n  listRefMapValues(attribute) {\n    return this.assertRefMap(attribute).values().map(ref => ref.getChild());\n  }\n  /** @hidden */\n\n\n  getRefMap(attribute, key) {\n    const refMap = this.assertRefMap(attribute);\n    const ref = refMap.get(key);\n    return ref ? ref.getChild() : null;\n  }\n  /** @hidden */\n\n\n  setRefMap(attribute, key, value, metadata) {\n    const refMap = this.assertRefMap(attribute);\n    const prevRef = refMap.get(key);\n    if (prevRef) prevRef.dispose(); // TODO(cleanup): Possible duplicate event.\n\n    if (!value) return this;\n    metadata = Object.assign(metadata || {}, {\n      key: key\n    });\n\n    const ref = this.graph._createEdge(attribute, this, value, _extends({}, metadata, {\n      key\n    }));\n\n    refMap.set(key, ref);\n    return this.dispatchEvent({\n      type: 'change',\n      attribute,\n      key\n    });\n  }\n  /** @hidden */\n\n\n  assertRefMap(attribute) {\n    const map = this[$attributes][attribute];\n\n    if (map instanceof RefMap) {\n      return map;\n    } // TODO(v3) Remove warning.\n\n\n    throw new Error(`Expected RefMap for attribute \"${attribute}\"`);\n  }\n  /**********************************************************************************************\n   * Events.\n   */\n\n  /**\n   * Dispatches an event on the GraphNode, and on the associated\n   * Graph. Event types on the graph are prefixed, `\"node:[type]\"`.\n   */\n\n\n  dispatchEvent(event) {\n    super.dispatchEvent(_extends({}, event, {\n      target: this\n    }));\n    this.graph.dispatchEvent(_extends({}, event, {\n      target: this,\n      type: `node:${event.type}`\n    }));\n    return this;\n  }\n  /**********************************************************************************************\n   * Internal.\n   */\n\n  /** @hidden */\n\n\n  _destroyRef(ref) {\n    const attribute = ref.getName();\n\n    if (this[$attributes][attribute] === ref) {\n      this[$attributes][attribute] = null; // TODO(design): See _createAttributes().\n\n      if (this[$immutableKeys].has(attribute)) ref.getChild().dispose();\n    } else if (this[$attributes][attribute] instanceof RefList) {\n      this[$attributes][attribute].remove(ref);\n    } else if (this[$attributes][attribute] instanceof RefSet) {\n      this[$attributes][attribute].remove(ref);\n    } else if (this[$attributes][attribute] instanceof RefMap) {\n      const refMap = this[$attributes][attribute];\n\n      for (const key of refMap.keys()) {\n        if (refMap.get(key) === ref) {\n          refMap.delete(key);\n        }\n      }\n    } else {\n      return;\n    }\n\n    this.graph._destroyEdge(ref);\n\n    this.dispatchEvent({\n      type: 'change',\n      attribute\n    });\n  }\n\n}\n\nexport { $attributes, $immutableKeys, EventDispatcher, Graph, GraphEdge, GraphNode, RefList, RefMap, RefSet };\n//# sourceMappingURL=property-graph.modern.js.map\n","import { GraphNode, $attributes, GraphEdge, $immutableKeys, RefList, RefSet, RefMap, Graph } from 'property-graph';\nexport { Graph, GraphEdge, RefList, RefMap, RefSet } from 'property-graph';\n\n/**\n * Current version of the package.\n * @hidden\n */\nconst VERSION = `v${\"4.2.1\"}`;\n/** @hidden */\nconst GLB_BUFFER = '@glb.bin';\n/** String IDs for core {@link Property} types. */\nvar PropertyType;\n(function (PropertyType) {\n  PropertyType[\"ACCESSOR\"] = \"Accessor\";\n  PropertyType[\"ANIMATION\"] = \"Animation\";\n  PropertyType[\"ANIMATION_CHANNEL\"] = \"AnimationChannel\";\n  PropertyType[\"ANIMATION_SAMPLER\"] = \"AnimationSampler\";\n  PropertyType[\"BUFFER\"] = \"Buffer\";\n  PropertyType[\"CAMERA\"] = \"Camera\";\n  PropertyType[\"MATERIAL\"] = \"Material\";\n  PropertyType[\"MESH\"] = \"Mesh\";\n  PropertyType[\"PRIMITIVE\"] = \"Primitive\";\n  PropertyType[\"PRIMITIVE_TARGET\"] = \"PrimitiveTarget\";\n  PropertyType[\"NODE\"] = \"Node\";\n  PropertyType[\"ROOT\"] = \"Root\";\n  PropertyType[\"SCENE\"] = \"Scene\";\n  PropertyType[\"SKIN\"] = \"Skin\";\n  PropertyType[\"TEXTURE\"] = \"Texture\";\n  PropertyType[\"TEXTURE_INFO\"] = \"TextureInfo\";\n})(PropertyType || (PropertyType = {}));\n/** Vertex layout method. */\nvar VertexLayout;\n(function (VertexLayout) {\n  /**\n   * Stores vertex attributes in a single buffer view per mesh primitive. Interleaving vertex\n   * data may improve performance by reducing page-thrashing in GPU memory.\n   */\n  VertexLayout[\"INTERLEAVED\"] = \"interleaved\";\n  /**\n   * Stores each vertex attribute in a separate buffer view. May decrease performance by causing\n   * page-thrashing in GPU memory. Some 3D engines may prefer this layout, e.g. for simplicity.\n   */\n  VertexLayout[\"SEPARATE\"] = \"separate\";\n})(VertexLayout || (VertexLayout = {}));\n/** Accessor usage. */\nvar BufferViewUsage$1;\n(function (BufferViewUsage) {\n  BufferViewUsage[\"ARRAY_BUFFER\"] = \"ARRAY_BUFFER\";\n  BufferViewUsage[\"ELEMENT_ARRAY_BUFFER\"] = \"ELEMENT_ARRAY_BUFFER\";\n  BufferViewUsage[\"INVERSE_BIND_MATRICES\"] = \"INVERSE_BIND_MATRICES\";\n  BufferViewUsage[\"OTHER\"] = \"OTHER\";\n  BufferViewUsage[\"SPARSE\"] = \"SPARSE\";\n})(BufferViewUsage$1 || (BufferViewUsage$1 = {}));\n/** Texture channels. */\nvar TextureChannel;\n(function (TextureChannel) {\n  TextureChannel[TextureChannel[\"R\"] = 4096] = \"R\";\n  TextureChannel[TextureChannel[\"G\"] = 256] = \"G\";\n  TextureChannel[TextureChannel[\"B\"] = 16] = \"B\";\n  TextureChannel[TextureChannel[\"A\"] = 1] = \"A\";\n})(TextureChannel || (TextureChannel = {}));\nvar Format;\n(function (Format) {\n  Format[\"GLTF\"] = \"GLTF\";\n  Format[\"GLB\"] = \"GLB\";\n})(Format || (Format = {}));\nconst ComponentTypeToTypedArray = {\n  '5120': Int8Array,\n  '5121': Uint8Array,\n  '5122': Int16Array,\n  '5123': Uint16Array,\n  '5125': Uint32Array,\n  '5126': Float32Array\n};\n\n/**\n * *Common utilities for working with Uint8Array and Buffer objects.*\n *\n * @category Utilities\n */\nclass BufferUtils {\n  /** Creates a byte array from a Data URI. */\n  static createBufferFromDataURI(dataURI) {\n    if (typeof Buffer === 'undefined') {\n      // Browser.\n      const byteString = atob(dataURI.split(',')[1]);\n      const ia = new Uint8Array(byteString.length);\n      for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n      return ia;\n    } else {\n      // Node.js.\n      const data = dataURI.split(',')[1];\n      const isBase64 = dataURI.indexOf('base64') >= 0;\n      return Buffer.from(data, isBase64 ? 'base64' : 'utf8');\n    }\n  }\n  /** Encodes text to a byte array. */\n  static encodeText(text) {\n    return new TextEncoder().encode(text);\n  }\n  /** Decodes a byte array to text. */\n  static decodeText(array) {\n    return new TextDecoder().decode(array);\n  }\n  /**\n   * Concatenates N byte arrays.\n   */\n  static concat(arrays) {\n    let totalByteLength = 0;\n    for (const array of arrays) {\n      totalByteLength += array.byteLength;\n    }\n    const result = new Uint8Array(totalByteLength);\n    let byteOffset = 0;\n    for (const array of arrays) {\n      result.set(array, byteOffset);\n      byteOffset += array.byteLength;\n    }\n    return result;\n  }\n  /**\n   * Pads a Uint8Array to the next 4-byte boundary.\n   *\n   * Reference: [glTF  Data Alignment](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment)\n   */\n  static pad(srcArray, paddingByte = 0) {\n    const paddedLength = this.padNumber(srcArray.byteLength);\n    if (paddedLength === srcArray.byteLength) return srcArray;\n    const dstArray = new Uint8Array(paddedLength);\n    dstArray.set(srcArray);\n    if (paddingByte !== 0) {\n      for (let i = srcArray.byteLength; i < paddedLength; i++) {\n        dstArray[i] = paddingByte;\n      }\n    }\n    return dstArray;\n  }\n  /** Pads a number to 4-byte boundaries. */\n  static padNumber(v) {\n    return Math.ceil(v / 4) * 4;\n  }\n  /** Returns true if given byte array instances are equal. */\n  static equals(a, b) {\n    if (a === b) return true;\n    if (a.byteLength !== b.byteLength) return false;\n    let i = a.byteLength;\n    while (i--) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  /**\n   * Returns a Uint8Array view of a typed array, with the same underlying ArrayBuffer.\n   *\n   * A shorthand for:\n   *\n   * ```js\n   * const buffer = new Uint8Array(\n   * \tarray.buffer,\n   * \tarray.byteOffset + byteOffset,\n   * \tMath.min(array.byteLength, byteLength)\n   * );\n   * ```\n   *\n   */\n  static toView(a, byteOffset = 0, byteLength = Infinity) {\n    return new Uint8Array(a.buffer, a.byteOffset + byteOffset, Math.min(a.byteLength, byteLength));\n  }\n  static assertView(view) {\n    if (view && !ArrayBuffer.isView(view)) {\n      throw new Error(`Method requires Uint8Array parameter; received \"${typeof view}\".`);\n    }\n    return view;\n  }\n}\n\n/**\n * *Common utilities for working with colors in vec3, vec4, or hexadecimal form.*\n *\n * Provides methods to convert linear components (vec3, vec4) to sRGB hex values. All colors in\n * the glTF specification, excluding color textures, are linear. Hexadecimal values, in sRGB\n * colorspace, are accessible through helper functions in the API as a convenience.\n *\n * ```typescript\n * // Hex (sRGB) to factor (linear).\n * const factor = ColorUtils.hexToFactor(0xFFCCCC, []);\n *\n * // Factor (linear) to hex (sRGB).\n * const hex = ColorUtils.factorToHex([1, .25, .25])\n * ```\n *\n * @category Utilities\n */\nclass ColorUtils {\n  /**\n   * Converts sRGB hexadecimal to linear components.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static hexToFactor(hex, target) {\n    hex = Math.floor(hex);\n    const _target = target;\n    _target[0] = (hex >> 16 & 255) / 255;\n    _target[1] = (hex >> 8 & 255) / 255;\n    _target[2] = (hex & 255) / 255;\n    return this.convertSRGBToLinear(target, target);\n  }\n  /**\n   * Converts linear components to sRGB hexadecimal.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static factorToHex(factor) {\n    const target = [...factor];\n    const [r, g, b] = this.convertLinearToSRGB(factor, target);\n    return r * 255 << 16 ^ g * 255 << 8 ^ b * 255 << 0;\n  }\n  /**\n   * Converts sRGB components to linear components.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static convertSRGBToLinear(source, target) {\n    const _source = source;\n    const _target = target;\n    for (let i = 0; i < 3; i++) {\n      _target[i] = _source[i] < 0.04045 ? _source[i] * 0.0773993808 : Math.pow(_source[i] * 0.9478672986 + 0.0521327014, 2.4);\n    }\n    return target;\n  }\n  /**\n   * Converts linear components to sRGB components.\n   * @typeParam T vec3 or vec4 linear components.\n   */\n  static convertLinearToSRGB(source, target) {\n    const _source = source;\n    const _target = target;\n    for (let i = 0; i < 3; i++) {\n      _target[i] = _source[i] < 0.0031308 ? _source[i] * 12.92 : 1.055 * Math.pow(_source[i], 0.41666) - 0.055;\n    }\n    return target;\n  }\n}\n\n/** JPEG image support. */\nclass JPEGImageUtils {\n  match(array) {\n    return array.length >= 3 && array[0] === 255 && array[1] === 216 && array[2] === 255;\n  }\n  getSize(array) {\n    // Skip 4 chars, they are for signature\n    let view = new DataView(array.buffer, array.byteOffset + 4);\n    let i, next;\n    while (view.byteLength) {\n      // read length of the next block\n      i = view.getUint16(0, false);\n      // i = buffer.readUInt16BE(0);\n      // ensure correct format\n      validateJPEGBuffer(view, i);\n      // 0xFFC0 is baseline standard(SOF)\n      // 0xFFC1 is baseline optimized(SOF)\n      // 0xFFC2 is progressive(SOF2)\n      next = view.getUint8(i + 1);\n      if (next === 0xc0 || next === 0xc1 || next === 0xc2) {\n        return [view.getUint16(i + 7, false), view.getUint16(i + 5, false)];\n      }\n      // move to the next block\n      view = new DataView(array.buffer, view.byteOffset + i + 2);\n    }\n    throw new TypeError('Invalid JPG, no size found');\n  }\n  getChannels(_buffer) {\n    return 3;\n  }\n}\n/**\n * PNG image support.\n *\n * PNG signature: 'PNG\\r\\n\\x1a\\n'\n * PNG image header chunk name: 'IHDR'\n */\nclass PNGImageUtils {\n  match(array) {\n    return array.length >= 8 && array[0] === 0x89 && array[1] === 0x50 && array[2] === 0x4e && array[3] === 0x47 && array[4] === 0x0d && array[5] === 0x0a && array[6] === 0x1a && array[7] === 0x0a;\n  }\n  getSize(array) {\n    const view = new DataView(array.buffer, array.byteOffset);\n    const magic = BufferUtils.decodeText(array.slice(12, 16));\n    if (magic === PNGImageUtils.PNG_FRIED_CHUNK_NAME) {\n      return [view.getUint32(32, false), view.getUint32(36, false)];\n    }\n    return [view.getUint32(16, false), view.getUint32(20, false)];\n  }\n  getChannels(_buffer) {\n    return 4;\n  }\n}\n/**\n * *Common utilities for working with image data.*\n *\n * @category Utilities\n */\n// Used to detect \"fried\" png's: http://www.jongware.com/pngdefry.html\nPNGImageUtils.PNG_FRIED_CHUNK_NAME = 'CgBI';\nclass ImageUtils {\n  /** Registers support for a new image format; useful for certain extensions. */\n  static registerFormat(mimeType, impl) {\n    this.impls[mimeType] = impl;\n  }\n  /**\n   * Returns detected MIME type of the given image buffer. Note that for image\n   * formats with support provided by extensions, the extension must be\n   * registered with an I/O class before it can be detected by ImageUtils.\n   */\n  static getMimeType(buffer) {\n    for (const mimeType in this.impls) {\n      if (this.impls[mimeType].match(buffer)) {\n        return mimeType;\n      }\n    }\n    return null;\n  }\n  /** Returns the dimensions of the image. */\n  static getSize(buffer, mimeType) {\n    if (!this.impls[mimeType]) return null;\n    return this.impls[mimeType].getSize(buffer);\n  }\n  /**\n   * Returns a conservative estimate of the number of channels in the image. For some image\n   * formats, the method may return 4 indicating the possibility of an alpha channel, without\n   * the ability to guarantee that an alpha channel is present.\n   */\n  static getChannels(buffer, mimeType) {\n    if (!this.impls[mimeType]) return null;\n    return this.impls[mimeType].getChannels(buffer);\n  }\n  /** Returns a conservative estimate of the GPU memory required by this image. */\n  static getVRAMByteLength(buffer, mimeType) {\n    if (!this.impls[mimeType]) return null;\n    if (this.impls[mimeType].getVRAMByteLength) {\n      return this.impls[mimeType].getVRAMByteLength(buffer);\n    }\n    let uncompressedBytes = 0;\n    const channels = 4; // See https://github.com/donmccurdy/glTF-Transform/issues/151.\n    const resolution = this.getSize(buffer, mimeType);\n    if (!resolution) return null;\n    while (resolution[0] > 1 || resolution[1] > 1) {\n      uncompressedBytes += resolution[0] * resolution[1] * channels;\n      resolution[0] = Math.max(Math.floor(resolution[0] / 2), 1);\n      resolution[1] = Math.max(Math.floor(resolution[1] / 2), 1);\n    }\n    uncompressedBytes += 1 * 1 * channels;\n    return uncompressedBytes;\n  }\n  /** Returns the preferred file extension for the given MIME type. */\n  static mimeTypeToExtension(mimeType) {\n    if (mimeType === 'image/jpeg') return 'jpg';\n    return mimeType.split('/').pop();\n  }\n  /** Returns the MIME type for the given file extension. */\n  static extensionToMimeType(extension) {\n    if (extension === 'jpg') return 'image/jpeg';\n    if (!extension) return '';\n    return `image/${extension}`;\n  }\n}\nImageUtils.impls = {\n  'image/jpeg': new JPEGImageUtils(),\n  'image/png': new PNGImageUtils()\n};\nfunction validateJPEGBuffer(view, i) {\n  // index should be within buffer limits\n  if (i > view.byteLength) {\n    throw new TypeError('Corrupt JPG, exceeded buffer limits');\n  }\n  // Every JPEG block must begin with a 0xFF\n  if (view.getUint8(i) !== 0xff) {\n    throw new TypeError('Invalid JPG, marker table corrupted');\n  }\n  return view;\n}\n\n/**\n * *Utility class for working with file systems and URI paths.*\n *\n * @category Utilities\n */\nclass FileUtils {\n  /**\n   * Extracts the basename from a file path, e.g. \"folder/model.glb\" -> \"model\".\n   * See: {@link HTTPUtils.basename}\n   */\n  static basename(uri) {\n    const fileName = uri.split(/[\\\\/]/).pop();\n    return fileName.substring(0, fileName.lastIndexOf('.'));\n  }\n  /**\n   * Extracts the extension from a file path, e.g. \"folder/model.glb\" -> \"glb\".\n   * See: {@link HTTPUtils.extension}\n   */\n  static extension(uri) {\n    if (uri.startsWith('data:image/')) {\n      const mimeType = uri.match(/data:(image\\/\\w+)/)[1];\n      return ImageUtils.mimeTypeToExtension(mimeType);\n    } else if (uri.startsWith('data:model/gltf+json')) {\n      return 'gltf';\n    } else if (uri.startsWith('data:model/gltf-binary')) {\n      return 'glb';\n    } else if (uri.startsWith('data:application/')) {\n      return 'bin';\n    }\n    return uri.split(/[\\\\/]/).pop().split(/[.]/).pop();\n  }\n}\n\n/**\n * Common utilities\n * @module glMatrix\n */\nvar ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nfunction create() {\n  var out = new ARRAY_TYPE(3);\n\n  if (ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nfunction length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\n(function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n})();\n\n/** @hidden Implemented in /core for use by /extensions, publicly exported from /functions. */\nfunction getBounds(node) {\n  const resultBounds = createBounds();\n  const parents = node.propertyType === PropertyType.NODE ? [node] : node.listChildren();\n  for (const parent of parents) {\n    parent.traverse(node => {\n      const mesh = node.getMesh();\n      if (!mesh) return;\n      // Compute mesh bounds and update result.\n      const meshBounds = getMeshBounds(mesh, node.getWorldMatrix());\n      if (meshBounds.min.every(isFinite) && meshBounds.max.every(isFinite)) {\n        expandBounds(meshBounds.min, resultBounds);\n        expandBounds(meshBounds.max, resultBounds);\n      }\n    });\n  }\n  return resultBounds;\n}\n/** Computes mesh bounds in world space. */\nfunction getMeshBounds(mesh, worldMatrix) {\n  const meshBounds = createBounds();\n  // We can't transform a local AABB into world space and still have a tight AABB in world space,\n  // so we need to compute the world AABB vertex by vertex here.\n  for (const prim of mesh.listPrimitives()) {\n    const position = prim.getAttribute('POSITION');\n    const indices = prim.getIndices();\n    if (!position) continue;\n    let localPos = [0, 0, 0];\n    let worldPos = [0, 0, 0];\n    for (let i = 0, il = indices ? indices.getCount() : position.getCount(); i < il; i++) {\n      const index = indices ? indices.getScalar(i) : i;\n      localPos = position.getElement(index, localPos);\n      worldPos = transformMat4(worldPos, localPos, worldMatrix);\n      expandBounds(worldPos, meshBounds);\n    }\n  }\n  return meshBounds;\n}\n/** Expands bounds of target by given source. */\nfunction expandBounds(point, target) {\n  for (let i = 0; i < 3; i++) {\n    target.min[i] = Math.min(point[i], target.min[i]);\n    target.max[i] = Math.max(point[i], target.max[i]);\n  }\n}\n/** Creates new bounds with min=Infinity, max=-Infinity. */\nfunction createBounds() {\n  return {\n    min: [Infinity, Infinity, Infinity],\n    max: [-Infinity, -Infinity, -Infinity]\n  };\n}\n\n// Need a placeholder domain to construct a URL from a relative path. We only\n// access `url.pathname`, so the domain doesn't matter.\nconst NULL_DOMAIN = 'https://null.example';\n/**\n * *Utility class for working with URLs.*\n *\n * @category Utilities\n */\nclass HTTPUtils {\n  static dirname(path) {\n    const index = path.lastIndexOf('/');\n    if (index === -1) return './';\n    return path.substring(0, index + 1);\n  }\n  /**\n   * Extracts the basename from a URL, e.g. \"folder/model.glb\" -> \"model\".\n   * See: {@link FileUtils.basename}\n   */\n  static basename(uri) {\n    return FileUtils.basename(new URL(uri, NULL_DOMAIN).pathname);\n  }\n  /**\n   * Extracts the extension from a URL, e.g. \"folder/model.glb\" -> \"glb\".\n   * See: {@link FileUtils.extension}\n   */\n  static extension(uri) {\n    return FileUtils.extension(new URL(uri, NULL_DOMAIN).pathname);\n  }\n  static resolve(base, path) {\n    if (!this.isRelativePath(path)) return path;\n    const stack = base.split('/');\n    const parts = path.split('/');\n    stack.pop();\n    for (let i = 0; i < parts.length; i++) {\n      if (parts[i] === '.') continue;\n      if (parts[i] === '..') {\n        stack.pop();\n      } else {\n        stack.push(parts[i]);\n      }\n    }\n    return stack.join('/');\n  }\n  /**\n   * Returns true for URLs containing a protocol, and false for both\n   * absolute and relative paths.\n   */\n  static isAbsoluteURL(path) {\n    return this.PROTOCOL_REGEXP.test(path);\n  }\n  /**\n   * Returns true for paths that are declared relative to some unknown base\n   * path. For example, \"foo/bar/\" is relative both \"/foo/bar/\" is not.\n   */\n  static isRelativePath(path) {\n    return !/^(?:[a-zA-Z]+:)?\\//.test(path);\n  }\n}\nHTTPUtils.DEFAULT_INIT = {};\nHTTPUtils.PROTOCOL_REGEXP = /^[a-zA-Z]+:\\/\\//;\n\n// Reference: https://github.com/jonschlinkert/is-plain-object\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\nfunction isPlainObject(o) {\n  if (isObject(o) === false) return false;\n  // If has modified constructor\n  const ctor = o.constructor;\n  if (ctor === undefined) return true;\n  // If has modified prototype\n  const prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n  // If constructor does not have an Object-specific method\n  if (Object.hasOwn(prot, 'isPrototypeOf') === false) {\n    return false;\n  }\n  // Most likely a plain Object\n  return true;\n}\n\nvar _Logger;\n/** Logger verbosity thresholds. */\nvar Verbosity;\n(function (Verbosity) {\n  /** No events are logged. */\n  Verbosity[Verbosity[\"SILENT\"] = 4] = \"SILENT\";\n  /** Only error events are logged. */\n  Verbosity[Verbosity[\"ERROR\"] = 3] = \"ERROR\";\n  /** Only error and warn events are logged. */\n  Verbosity[Verbosity[\"WARN\"] = 2] = \"WARN\";\n  /** Only error, warn, and info events are logged. (DEFAULT) */\n  Verbosity[Verbosity[\"INFO\"] = 1] = \"INFO\";\n  /** All events are logged. */\n  Verbosity[Verbosity[\"DEBUG\"] = 0] = \"DEBUG\";\n})(Verbosity || (Verbosity = {}));\n/**\n * *Logger utility class.*\n *\n * @category Utilities\n */\nclass Logger {\n  /** Constructs a new Logger instance. */\n  constructor(verbosity) {\n    this.verbosity = void 0;\n    this.verbosity = verbosity;\n  }\n  /** Logs an event at level {@link Logger.Verbosity.DEBUG}. */\n  debug(text) {\n    if (this.verbosity <= Logger.Verbosity.DEBUG) {\n      console.debug(text);\n    }\n  }\n  /** Logs an event at level {@link Logger.Verbosity.INFO}. */\n  info(text) {\n    if (this.verbosity <= Logger.Verbosity.INFO) {\n      console.info(text);\n    }\n  }\n  /** Logs an event at level {@link Logger.Verbosity.WARN}. */\n  warn(text) {\n    if (this.verbosity <= Logger.Verbosity.WARN) {\n      console.warn(text);\n    }\n  }\n  /** Logs an event at level {@link Logger.Verbosity.ERROR}. */\n  error(text) {\n    if (this.verbosity <= Logger.Verbosity.ERROR) {\n      console.error(text);\n    }\n  }\n}\n_Logger = Logger;\n/** Logger verbosity thresholds. */\nLogger.Verbosity = Verbosity;\n/** Default logger instance. */\nLogger.DEFAULT_INSTANCE = new _Logger(_Logger.Verbosity.INFO);\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nfunction determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nfunction getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nfunction getRotation(out, mat) {\n  var scaling = new ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n\n/** @hidden */\nclass MathUtils {\n  static identity(v) {\n    return v;\n  }\n  static eq(a, b, tolerance = 10e-6) {\n    if (a.length !== b.length) return false;\n    for (let i = 0; i < a.length; i++) {\n      if (Math.abs(a[i] - b[i]) > tolerance) return false;\n    }\n    return true;\n  }\n  static clamp(value, min, max) {\n    if (value < min) return min;\n    if (value > max) return max;\n    return value;\n  }\n  // TODO(perf): Compare performance if we replace the switch with individual functions.\n  static decodeNormalizedInt(i, componentType) {\n    // Hardcode enums from accessor.ts to avoid a circular dependency.\n    switch (componentType) {\n      case 5126:\n        // FLOAT\n        return i;\n      case 5123:\n        // UNSIGNED_SHORT\n        return i / 65535.0;\n      case 5121:\n        // UNSIGNED_BYTE\n        return i / 255.0;\n      case 5122:\n        // SHORT\n        return Math.max(i / 32767.0, -1.0);\n      case 5120:\n        // BYTE\n        return Math.max(i / 127.0, -1.0);\n      default:\n        throw new Error('Invalid component type.');\n    }\n  }\n  // TODO(perf): Compare performance if we replace the switch with individual functions.\n  static encodeNormalizedInt(f, componentType) {\n    // Hardcode enums from accessor.ts to avoid a circular dependency.\n    switch (componentType) {\n      case 5126:\n        // FLOAT\n        return f;\n      case 5123:\n        // UNSIGNED_SHORT\n        return Math.round(MathUtils.clamp(f, 0, 1) * 65535.0);\n      case 5121:\n        // UNSIGNED_BYTE\n        return Math.round(MathUtils.clamp(f, 0, 1) * 255.0);\n      case 5122:\n        // SHORT\n        return Math.round(MathUtils.clamp(f, -1, 1) * 32767.0);\n      case 5120:\n        // BYTE\n        return Math.round(MathUtils.clamp(f, -1, 1) * 127.0);\n      default:\n        throw new Error('Invalid component type.');\n    }\n  }\n  /**\n   * Decompose a mat4 to TRS properties.\n   *\n   * Equivalent to the Matrix4 decompose() method in three.js, and intentionally not using the\n   * gl-matrix version. See: https://github.com/toji/gl-matrix/issues/408\n   *\n   * @param srcMat Matrix element, to be decomposed to TRS properties.\n   * @param dstTranslation Translation element, to be overwritten.\n   * @param dstRotation Rotation element, to be overwritten.\n   * @param dstScale Scale element, to be overwritten.\n   */\n  static decompose(srcMat, dstTranslation, dstRotation, dstScale) {\n    let sx = length([srcMat[0], srcMat[1], srcMat[2]]);\n    const sy = length([srcMat[4], srcMat[5], srcMat[6]]);\n    const sz = length([srcMat[8], srcMat[9], srcMat[10]]);\n    // if determine is negative, we need to invert one scale\n    const det = determinant(srcMat);\n    if (det < 0) sx = -sx;\n    dstTranslation[0] = srcMat[12];\n    dstTranslation[1] = srcMat[13];\n    dstTranslation[2] = srcMat[14];\n    // scale the rotation part\n    const _m1 = srcMat.slice();\n    const invSX = 1 / sx;\n    const invSY = 1 / sy;\n    const invSZ = 1 / sz;\n    _m1[0] *= invSX;\n    _m1[1] *= invSX;\n    _m1[2] *= invSX;\n    _m1[4] *= invSY;\n    _m1[5] *= invSY;\n    _m1[6] *= invSY;\n    _m1[8] *= invSZ;\n    _m1[9] *= invSZ;\n    _m1[10] *= invSZ;\n    getRotation(dstRotation, _m1);\n    dstScale[0] = sx;\n    dstScale[1] = sy;\n    dstScale[2] = sz;\n  }\n  /**\n   * Compose TRS properties to a mat4.\n   *\n   * Equivalent to the Matrix4 compose() method in three.js, and intentionally not using the\n   * gl-matrix version. See: https://github.com/toji/gl-matrix/issues/408\n   *\n   * @param srcTranslation Translation element of matrix.\n   * @param srcRotation Rotation element of matrix.\n   * @param srcScale Scale element of matrix.\n   * @param dstMat Matrix element, to be modified and returned.\n   * @returns dstMat, overwritten to mat4 equivalent of given TRS properties.\n   */\n  static compose(srcTranslation, srcRotation, srcScale, dstMat) {\n    const te = dstMat;\n    const x = srcRotation[0],\n      y = srcRotation[1],\n      z = srcRotation[2],\n      w = srcRotation[3];\n    const x2 = x + x,\n      y2 = y + y,\n      z2 = z + z;\n    const xx = x * x2,\n      xy = x * y2,\n      xz = x * z2;\n    const yy = y * y2,\n      yz = y * z2,\n      zz = z * z2;\n    const wx = w * x2,\n      wy = w * y2,\n      wz = w * z2;\n    const sx = srcScale[0],\n      sy = srcScale[1],\n      sz = srcScale[2];\n    te[0] = (1 - (yy + zz)) * sx;\n    te[1] = (xy + wz) * sx;\n    te[2] = (xz - wy) * sx;\n    te[3] = 0;\n    te[4] = (xy - wz) * sy;\n    te[5] = (1 - (xx + zz)) * sy;\n    te[6] = (yz + wx) * sy;\n    te[7] = 0;\n    te[8] = (xz + wy) * sz;\n    te[9] = (yz - wx) * sz;\n    te[10] = (1 - (xx + yy)) * sz;\n    te[11] = 0;\n    te[12] = srcTranslation[0];\n    te[13] = srcTranslation[1];\n    te[14] = srcTranslation[2];\n    te[15] = 1;\n    return te;\n  }\n}\n\nfunction equalsRef(refA, refB) {\n  if (!!refA !== !!refB) return false;\n  const a = refA.getChild();\n  const b = refB.getChild();\n  return a === b || a.equals(b);\n}\nfunction equalsRefSet(refSetA, refSetB) {\n  if (!!refSetA !== !!refSetB) return false;\n  const refValuesA = refSetA.values();\n  const refValuesB = refSetB.values();\n  if (refValuesA.length !== refValuesB.length) return false;\n  for (let i = 0; i < refValuesA.length; i++) {\n    const a = refValuesA[i];\n    const b = refValuesB[i];\n    if (a.getChild() === b.getChild()) continue;\n    if (!a.getChild().equals(b.getChild())) return false;\n  }\n  return true;\n}\nfunction equalsRefMap(refMapA, refMapB) {\n  if (!!refMapA !== !!refMapB) return false;\n  const keysA = refMapA.keys();\n  const keysB = refMapB.keys();\n  if (keysA.length !== keysB.length) return false;\n  for (const key of keysA) {\n    const refA = refMapA.get(key);\n    const refB = refMapB.get(key);\n    if (!!refA !== !!refB) return false;\n    const a = refA.getChild();\n    const b = refB.getChild();\n    if (a === b) continue;\n    if (!a.equals(b)) return false;\n  }\n  return true;\n}\nfunction equalsArray(a, b) {\n  if (a === b) return true;\n  if (!!a !== !!b || !a || !b) return false;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\nfunction equalsObject(_a, _b) {\n  if (_a === _b) return true;\n  if (!!_a !== !!_b) return false;\n  if (!isPlainObject(_a) || !isPlainObject(_b)) {\n    return _a === _b;\n  }\n  const a = _a;\n  const b = _b;\n  let numKeysA = 0;\n  let numKeysB = 0;\n  let key;\n  for (key in a) numKeysA++;\n  for (key in b) numKeysB++;\n  if (numKeysA !== numKeysB) return false;\n  for (key in a) {\n    const valueA = a[key];\n    const valueB = b[key];\n    if (isArray(valueA) && isArray(valueB)) {\n      if (!equalsArray(valueA, valueB)) return false;\n    } else if (isPlainObject(valueA) && isPlainObject(valueB)) {\n      if (!equalsObject(valueA, valueB)) return false;\n    } else {\n      if (valueA !== valueB) return false;\n    }\n  }\n  return true;\n}\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nconst ALPHABET = '23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ';\nconst UNIQUE_RETRIES = 999;\nconst ID_LENGTH = 6;\nconst previousIDs = new Set();\nconst generateOne = function generateOne() {\n  let rtn = '';\n  for (let i = 0; i < ID_LENGTH; i++) {\n    rtn += ALPHABET.charAt(Math.floor(Math.random() * ALPHABET.length));\n  }\n  return rtn;\n};\n/**\n * Short ID generator.\n *\n * Generated IDs are short, easy to type, and unique for the duration of the program's execution.\n * Uniqueness across multiple program executions, or on other devices, is not guaranteed. Based on\n * [Short ID Generation in JavaScript](https://tomspencer.dev/blog/2014/11/16/short-id-generation-in-javascript/),\n * with alterations.\n *\n * @category Utilities\n * @hidden\n */\nconst uuid = function uuid() {\n  for (let retries = 0; retries < UNIQUE_RETRIES; retries++) {\n    const id = generateOne();\n    if (!previousIDs.has(id)) {\n      previousIDs.add(id);\n      return id;\n    }\n  }\n  return '';\n};\n\nconst COPY_IDENTITY = t => t;\nconst EMPTY_SET = new Set();\n/**\n * *Properties represent distinct resources in a glTF asset, referenced by other properties.*\n *\n * For example, each material and texture is a property, with material properties holding\n * references to the textures. All properties are created with factory methods on the\n * {@link Document} in which they should be constructed. Properties are destroyed by calling\n * {@link Property.dispose}().\n *\n * Usage:\n *\n * ```ts\n * const texture = doc.createTexture('myTexture');\n * doc.listTextures(); //  [texture x 1]\n *\n * // Attach a texture to a material.\n * material.setBaseColorTexture(texture);\n * material.getBaseColortexture(); //  texture\n *\n * // Detaching a texture removes any references to it, except from the doc.\n * texture.detach();\n * material.getBaseColorTexture(); //  null\n * doc.listTextures(); //  [texture x 1]\n *\n * // Disposing a texture removes all references to it, and its own references.\n * texture.dispose();\n * doc.listTextures(); //  []\n * ```\n *\n * Reference:\n * - [glTF  Concepts](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#concepts)\n *\n * @category Properties\n */\nclass Property extends GraphNode {\n  /** @hidden */\n  constructor(graph, name = '') {\n    super(graph);\n    this[$attributes]['name'] = name;\n    this.init();\n    this.dispatchEvent({\n      type: 'create'\n    });\n  }\n  /**\n   * Returns the Graph associated with this Property. For internal use.\n   * @hidden\n   * @experimental\n   */\n  getGraph() {\n    return this.graph;\n  }\n  /**\n   * Returns default attributes for the property. Empty lists and maps should be initialized\n   * to empty arrays and objects. Always invoke `super.getDefaults()` and extend the result.\n   */\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      name: '',\n      extras: {}\n    });\n  }\n  /** @hidden */\n  set(attribute, value) {\n    if (Array.isArray(value)) value = value.slice(); // copy vector, quat, color \n    return super.set(attribute, value);\n  }\n  /**********************************************************************************************\n   * Name.\n   */\n  /**\n   * Returns the name of this property. While names are not required to be unique, this is\n   * encouraged, and non-unique names will be overwritten in some tools. For custom data about\n   * a property, prefer to use Extras.\n   */\n  getName() {\n    return this.get('name');\n  }\n  /**\n   * Sets the name of this property. While names are not required to be unique, this is\n   * encouraged, and non-unique names will be overwritten in some tools. For custom data about\n   * a property, prefer to use Extras.\n   */\n  setName(name) {\n    return this.set('name', name);\n  }\n  /**********************************************************************************************\n   * Extras.\n   */\n  /**\n   * Returns a reference to the Extras object, containing application-specific data for this\n   * Property. Extras should be an Object, not a primitive value, for best portability.\n   */\n  getExtras() {\n    return this.get('extras');\n  }\n  /**\n   * Updates the Extras object, containing application-specific data for this Property. Extras\n   * should be an Object, not a primitive value, for best portability.\n   */\n  setExtras(extras) {\n    return this.set('extras', extras);\n  }\n  /**********************************************************************************************\n   * Graph state.\n   */\n  /**\n   * Makes a copy of this property, with the same resources (by reference) as the original.\n   */\n  clone() {\n    const PropertyClass = this.constructor;\n    return new PropertyClass(this.graph).copy(this, COPY_IDENTITY);\n  }\n  /**\n   * Copies all data from another property to this one. Child properties are copied by reference,\n   * unless a 'resolve' function is given to override that.\n   * @param other Property to copy references from.\n   * @param resolve Function to resolve each Property being transferred. Default is identity.\n   */\n  copy(other, resolve = COPY_IDENTITY) {\n    // Remove previous references.\n    for (const key in this[$attributes]) {\n      const value = this[$attributes][key];\n      if (value instanceof GraphEdge) {\n        if (!this[$immutableKeys].has(key)) {\n          value.dispose();\n        }\n      } else if (value instanceof RefList || value instanceof RefSet) {\n        for (const ref of value.values()) {\n          ref.dispose();\n        }\n      } else if (value instanceof RefMap) {\n        for (const ref of value.values()) {\n          ref.dispose();\n        }\n      }\n    }\n    // Add new references.\n    for (const key in other[$attributes]) {\n      const thisValue = this[$attributes][key];\n      const otherValue = other[$attributes][key];\n      if (otherValue instanceof GraphEdge) {\n        if (this[$immutableKeys].has(key)) {\n          const ref = thisValue;\n          ref.getChild().copy(resolve(otherValue.getChild()), resolve);\n        } else {\n          // biome-ignore lint/suspicious/noExplicitAny: TODO\n          this.setRef(key, resolve(otherValue.getChild()), otherValue.getAttributes());\n        }\n      } else if (otherValue instanceof RefSet || otherValue instanceof RefList) {\n        for (const ref of otherValue.values()) {\n          // biome-ignore lint/suspicious/noExplicitAny: TODO\n          this.addRef(key, resolve(ref.getChild()), ref.getAttributes());\n        }\n      } else if (otherValue instanceof RefMap) {\n        for (const subkey of otherValue.keys()) {\n          const ref = otherValue.get(subkey);\n          // biome-ignore lint/suspicious/noExplicitAny: TODO\n          this.setRefMap(key, subkey, resolve(ref.getChild()), ref.getAttributes());\n        }\n      } else if (isPlainObject(otherValue)) {\n        this[$attributes][key] = JSON.parse(JSON.stringify(otherValue));\n      } else if (Array.isArray(otherValue) || otherValue instanceof ArrayBuffer || ArrayBuffer.isView(otherValue)) {\n        // biome-ignore lint/suspicious/noExplicitAny: TODO\n        this[$attributes][key] = otherValue.slice();\n      } else {\n        this[$attributes][key] = otherValue;\n      }\n    }\n    return this;\n  }\n  /**\n   * Returns true if two properties are deeply equivalent, recursively comparing the attributes\n   * of the properties. Optionally, a 'skip' set may be included, specifying attributes whose\n   * values should not be considered in the comparison.\n   *\n   * Example: Two {@link Primitive Primitives} are equivalent if they have accessors and\n   * materials with equivalent content  but not necessarily the same specific accessors\n   * and materials.\n   */\n  equals(other, skip = EMPTY_SET) {\n    if (this === other) return true;\n    if (this.propertyType !== other.propertyType) return false;\n    for (const key in this[$attributes]) {\n      if (skip.has(key)) continue;\n      const a = this[$attributes][key];\n      const b = other[$attributes][key];\n      if (a instanceof GraphEdge || b instanceof GraphEdge) {\n        if (!equalsRef(a, b)) {\n          return false;\n        }\n      } else if (a instanceof RefSet || b instanceof RefSet || a instanceof RefList || b instanceof RefList) {\n        if (!equalsRefSet(a, b)) {\n          return false;\n        }\n      } else if (a instanceof RefMap || b instanceof RefMap) {\n        if (!equalsRefMap(a, b)) {\n          return false;\n        }\n      } else if (isPlainObject(a) || isPlainObject(b)) {\n        if (!equalsObject(a, b)) return false;\n      } else if (isArray(a) || isArray(b)) {\n        if (!equalsArray(a, b)) return false;\n      } else {\n        // Literal.\n        if (a !== b) return false;\n      }\n    }\n    return true;\n  }\n  detach() {\n    // Detaching should keep properties in the same Document, and attached to its root.\n    this.graph.disconnectParents(this, n => n.propertyType !== 'Root');\n    return this;\n  }\n  /**\n   * Returns a list of all properties that hold a reference to this property. For example, a\n   * material may hold references to various textures, but a texture does not hold references\n   * to the materials that use it.\n   *\n   * It is often necessary to filter the results for a particular type: some resources, like\n   * {@link Accessor}s, may be referenced by different types of properties. Most properties\n   * include the {@link Root} as a parent, which is usually not of interest.\n   *\n   * Usage:\n   *\n   * ```ts\n   * const materials = texture\n   * \t.listParents()\n   * \t.filter((p) => p instanceof Material)\n   * ```\n   */\n  listParents() {\n    return this.graph.listParents(this);\n  }\n}\n\n/**\n * *A {@link Property} that can have {@link ExtensionProperty} instances attached.*\n *\n * Most properties are extensible. See the {@link Extension} documentation for information about\n * how to use extensions.\n *\n * @category Properties\n */\nclass ExtensibleProperty extends Property {\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      extensions: new RefMap()\n    });\n  }\n  /** Returns an {@link ExtensionProperty} attached to this Property, if any. */\n  getExtension(name) {\n    return this.getRefMap('extensions', name);\n  }\n  /**\n   * Attaches the given {@link ExtensionProperty} to this Property. For a given extension, only\n   * one ExtensionProperty may be attached to any one Property at a time.\n   */\n  setExtension(name, extensionProperty) {\n    if (extensionProperty) extensionProperty._validateParent(this);\n    return this.setRefMap('extensions', name, extensionProperty);\n  }\n  /** Lists all {@link ExtensionProperty} instances attached to this Property. */\n  listExtensions() {\n    return this.listRefMapValues('extensions');\n  }\n}\n\n/**\n * *Accessors store lists of numeric, vector, or matrix elements in a typed array.*\n *\n * All large data for {@link Mesh}, {@link Skin}, and {@link Animation} properties is stored in\n * {@link Accessor}s, organized into one or more {@link Buffer}s. Each accessor provides data in\n * typed arrays, with two abstractions:\n *\n * *Elements* are the logical divisions of the data into useful types: `\"SCALAR\"`, `\"VEC2\"`,\n * `\"VEC3\"`, `\"VEC4\"`, `\"MAT3\"`, or `\"MAT4\"`. The element type can be determined with the\n * {@link Accessor.getType getType}() method, and the number of elements in the accessor determine its\n * {@link Accessor.getCount getCount}(). The number of components in an element  e.g. 9 for `\"MAT3\"`  are its\n * {@link Accessor.getElementSize getElementSize}(). See {@link Accessor.Type}.\n *\n * *Components* are the numeric values within an element  e.g. `.x` and `.y` for `\"VEC2\"`. Various\n * component types are available: `BYTE`, `UNSIGNED_BYTE`, `SHORT`, `UNSIGNED_SHORT`,\n * `UNSIGNED_INT`, and `FLOAT`. The component type can be determined with the\n * {@link Accessor.getComponentType getComponentType} method, and the number of bytes in each component determine its\n * {@link Accessor.getComponentSize getComponentSize}. See {@link Accessor.ComponentType}.\n *\n * Usage:\n *\n * ```typescript\n * const accessor = doc.createAccessor('myData')\n * \t.setArray(new Float32Array([1,2,3,4,5,6,7,8,9,10,11,12]))\n * \t.setType(Accessor.Type.VEC3)\n * \t.setBuffer(doc.getRoot().listBuffers()[0]);\n *\n * accessor.getCount();        //  4\n * accessor.getElementSize();  //  3\n * accessor.getByteLength();   //  48\n * accessor.getElement(1, []); //  [4, 5, 6]\n *\n * accessor.setElement(0, [10, 20, 30]);\n * ```\n *\n * Data access through the {@link Accessor.getElement getElement} and {@link Accessor.setElement setElement}\n * methods reads or overwrites the content of the underlying typed array. These methods use\n * element arrays intended to be compatible with the [gl-matrix](https://github.com/toji/gl-matrix)\n * library, or with the `toArray`/`fromArray` methods of libraries like three.js and babylon.js.\n *\n * Each Accessor must be assigned to a {@link Buffer}, which determines where the accessor's data\n * is stored in the final file. Assigning Accessors to different Buffers allows the data to be\n * written to different `.bin` files.\n *\n * glTF Transform does not expose many details of sparse, normalized, or interleaved accessors\n * through its API. It reads files using those techniques, presents a simplified view of the data\n * for editing, and attempts to write data back out with optimizations. For example, vertex\n * attributes will typically be interleaved by default, regardless of the input file.\n *\n * References:\n * - [glTF  Accessors](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#accessors)\n *\n * @category Properties\n */\nclass Accessor extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.ACCESSOR;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      array: null,\n      type: Accessor.Type.SCALAR,\n      componentType: Accessor.ComponentType.FLOAT,\n      normalized: false,\n      sparse: false,\n      buffer: null\n    });\n  }\n  /**********************************************************************************************\n   * Static.\n   */\n  /** Returns size of a given element type, in components. */\n  static getElementSize(type) {\n    switch (type) {\n      case Accessor.Type.SCALAR:\n        return 1;\n      case Accessor.Type.VEC2:\n        return 2;\n      case Accessor.Type.VEC3:\n        return 3;\n      case Accessor.Type.VEC4:\n        return 4;\n      case Accessor.Type.MAT2:\n        return 4;\n      case Accessor.Type.MAT3:\n        return 9;\n      case Accessor.Type.MAT4:\n        return 16;\n      default:\n        throw new Error('Unexpected type: ' + type);\n    }\n  }\n  /** Returns size of a given component type, in bytes. */\n  static getComponentSize(componentType) {\n    switch (componentType) {\n      case Accessor.ComponentType.BYTE:\n        return 1;\n      case Accessor.ComponentType.UNSIGNED_BYTE:\n        return 1;\n      case Accessor.ComponentType.SHORT:\n        return 2;\n      case Accessor.ComponentType.UNSIGNED_SHORT:\n        return 2;\n      case Accessor.ComponentType.UNSIGNED_INT:\n        return 4;\n      case Accessor.ComponentType.FLOAT:\n        return 4;\n      default:\n        throw new Error('Unexpected component type: ' + componentType);\n    }\n  }\n  /**********************************************************************************************\n   * Min/max bounds.\n   */\n  /**\n   * Minimum value of each component in this attribute. Unlike in a final glTF file, values\n   * returned by this method will reflect the minimum accounting for {@link .normalized}\n   * state.\n   */\n  getMinNormalized(target) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    this.getMin(target);\n    if (normalized) {\n      for (let j = 0; j < elementSize; j++) {\n        target[j] = MathUtils.decodeNormalizedInt(target[j], componentType);\n      }\n    }\n    return target;\n  }\n  /**\n   * Minimum value of each component in this attribute. Values returned by this method do not\n   * reflect normalization: use {@link .getMinNormalized} in that case.\n   */\n  getMin(target) {\n    const array = this.getArray();\n    const count = this.getCount();\n    const elementSize = this.getElementSize();\n    for (let j = 0; j < elementSize; j++) target[j] = Infinity;\n    for (let i = 0; i < count * elementSize; i += elementSize) {\n      for (let j = 0; j < elementSize; j++) {\n        const value = array[i + j];\n        if (Number.isFinite(value)) {\n          target[j] = Math.min(target[j], value);\n        }\n      }\n    }\n    return target;\n  }\n  /**\n   * Maximum value of each component in this attribute. Unlike in a final glTF file, values\n   * returned by this method will reflect the minimum accounting for {@link .normalized}\n   * state.\n   */\n  getMaxNormalized(target) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    this.getMax(target);\n    if (normalized) {\n      for (let j = 0; j < elementSize; j++) {\n        target[j] = MathUtils.decodeNormalizedInt(target[j], componentType);\n      }\n    }\n    return target;\n  }\n  /**\n   * Maximum value of each component in this attribute. Values returned by this method do not\n   * reflect normalization: use {@link .getMinNormalized} in that case.\n   */\n  getMax(target) {\n    const array = this.get('array');\n    const count = this.getCount();\n    const elementSize = this.getElementSize();\n    for (let j = 0; j < elementSize; j++) target[j] = -Infinity;\n    for (let i = 0; i < count * elementSize; i += elementSize) {\n      for (let j = 0; j < elementSize; j++) {\n        const value = array[i + j];\n        if (Number.isFinite(value)) {\n          target[j] = Math.max(target[j], value);\n        }\n      }\n    }\n    return target;\n  }\n  /**********************************************************************************************\n   * Layout.\n   */\n  /**\n   * Number of elements in the accessor. An array of length 30, containing 10 `VEC3` elements,\n   * will have a count of 10.\n   */\n  getCount() {\n    const array = this.get('array');\n    return array ? array.length / this.getElementSize() : 0;\n  }\n  /** Type of element stored in the accessor. `VEC2`, `VEC3`, etc. */\n  getType() {\n    return this.get('type');\n  }\n  /**\n   * Sets type of element stored in the accessor. `VEC2`, `VEC3`, etc. Array length must be a\n   * multiple of the component size (`VEC2` = 2, `VEC3` = 3, ...) for the selected type.\n   */\n  setType(type) {\n    return this.set('type', type);\n  }\n  /**\n   * Number of components in each element of the accessor. For example, the element size of a\n   * `VEC2` accessor is 2. This value is determined automatically based on array length and\n   * accessor type, specified with {@link Accessor.setType setType()}.\n   */\n  // biome-ignore lint/suspicious/useAdjacentOverloadSignatures: Static vs. non-static.\n  getElementSize() {\n    return Accessor.getElementSize(this.get('type'));\n  }\n  /**\n   * Size of each component (a value in the raw array), in bytes. For example, the\n   * `componentSize` of data backed by a `float32` array is 4 bytes.\n   */\n  getComponentSize() {\n    return this.get('array').BYTES_PER_ELEMENT;\n  }\n  /**\n   * Component type (float32, uint16, etc.). This value is determined automatically, and can only\n   * be modified by replacing the underlying array.\n   */\n  getComponentType() {\n    return this.get('componentType');\n  }\n  /**********************************************************************************************\n   * Normalization.\n   */\n  /**\n   * Specifies whether integer data values should be normalized (true) to [0, 1] (for unsigned\n   * types) or [-1, 1] (for signed types), or converted directly (false) when they are accessed.\n   * This property is defined only for accessors that contain vertex attributes or animation\n   * output data.\n   */\n  getNormalized() {\n    return this.get('normalized');\n  }\n  /**\n   * Specifies whether integer data values should be normalized (true) to [0, 1] (for unsigned\n   * types) or [-1, 1] (for signed types), or converted directly (false) when they are accessed.\n   * This property is defined only for accessors that contain vertex attributes or animation\n   * output data.\n   */\n  setNormalized(normalized) {\n    return this.set('normalized', normalized);\n  }\n  /**********************************************************************************************\n   * Data access.\n   */\n  /**\n   * Returns the scalar element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, values are\n   * decoded and returned in floating-point form.\n   */\n  getScalar(index) {\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    if (this.getNormalized()) {\n      return MathUtils.decodeNormalizedInt(array[index * elementSize], componentType);\n    }\n    return array[index * elementSize];\n  }\n  /**\n   * Assigns the scalar element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, \"value\" should be\n   * given in floating-point form  it will be integer-encoded before writing\n   * to the underlying array.\n   */\n  setScalar(index, x) {\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    if (this.getNormalized()) {\n      array[index * elementSize] = MathUtils.encodeNormalizedInt(x, componentType);\n    } else {\n      array[index * elementSize] = x;\n    }\n    return this;\n  }\n  /**\n   * Returns the vector or matrix element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, values are\n   * decoded and returned in floating-point form.\n   *\n   * Example:\n   *\n   * ```javascript\n   * import { add } from 'gl-matrix/add';\n   *\n   * const element = [];\n   * const offset = [1, 1, 1];\n   *\n   * for (let i = 0; i < accessor.getCount(); i++) {\n   * \taccessor.getElement(i, element);\n   * \tadd(element, element, offset);\n   * \taccessor.setElement(i, element);\n   * }\n   * ```\n   */\n  getElement(index, target) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    for (let i = 0; i < elementSize; i++) {\n      if (normalized) {\n        target[i] = MathUtils.decodeNormalizedInt(array[index * elementSize + i], componentType);\n      } else {\n        target[i] = array[index * elementSize + i];\n      }\n    }\n    return target;\n  }\n  /**\n   * Assigns the vector or matrix element value at the given index. For\n   * {@link Accessor.getNormalized normalized} integer accessors, \"value\" should be\n   * given in floating-point form  it will be integer-encoded before writing\n   * to the underlying array.\n   *\n   * Example:\n   *\n   * ```javascript\n   * import { add } from 'gl-matrix/add';\n   *\n   * const element = [];\n   * const offset = [1, 1, 1];\n   *\n   * for (let i = 0; i < accessor.getCount(); i++) {\n   * \taccessor.getElement(i, element);\n   * \tadd(element, element, offset);\n   * \taccessor.setElement(i, element);\n   * }\n   * ```\n   */\n  setElement(index, value) {\n    const normalized = this.getNormalized();\n    const elementSize = this.getElementSize();\n    const componentType = this.getComponentType();\n    const array = this.getArray();\n    for (let i = 0; i < elementSize; i++) {\n      if (normalized) {\n        array[index * elementSize + i] = MathUtils.encodeNormalizedInt(value[i], componentType);\n      } else {\n        array[index * elementSize + i] = value[i];\n      }\n    }\n    return this;\n  }\n  /**********************************************************************************************\n   * Raw data storage.\n   */\n  /**\n   * Specifies whether the accessor should be stored sparsely. When written to a glTF file, sparse\n   * accessors store only values that differ from base values. When loaded in glTF Transform (or most\n   * runtimes) a sparse accessor can be treated like any other accessor. Currently, glTF Transform always\n   * uses zeroes for the base values when writing files.\n   * @experimental\n   */\n  getSparse() {\n    return this.get('sparse');\n  }\n  /**\n   * Specifies whether the accessor should be stored sparsely. When written to a glTF file, sparse\n   * accessors store only values that differ from base values. When loaded in glTF Transform (or most\n   * runtimes) a sparse accessor can be treated like any other accessor. Currently, glTF Transform always\n   * uses zeroes for the base values when writing files.\n   * @experimental\n   */\n  setSparse(sparse) {\n    return this.set('sparse', sparse);\n  }\n  /** Returns the {@link Buffer} into which this accessor will be organized. */\n  getBuffer() {\n    return this.getRef('buffer');\n  }\n  /** Assigns the {@link Buffer} into which this accessor will be organized. */\n  setBuffer(buffer) {\n    return this.setRef('buffer', buffer);\n  }\n  /** Returns the raw typed array underlying this accessor. */\n  getArray() {\n    return this.get('array');\n  }\n  /** Assigns the raw typed array underlying this accessor. */\n  setArray(array) {\n    this.set('componentType', array ? arrayToComponentType(array) : Accessor.ComponentType.FLOAT);\n    this.set('array', array);\n    return this;\n  }\n  /** Returns the total bytelength of this accessor, exclusive of padding. */\n  getByteLength() {\n    const array = this.get('array');\n    return array ? array.byteLength : 0;\n  }\n}\n/**************************************************************************************************\n * Accessor utilities.\n */\n/** @internal */\n/**********************************************************************************************\n * Constants.\n */\n/** Element type contained by the accessor (SCALAR, VEC2, ...). */\nAccessor.Type = {\n  /** Scalar, having 1 value per element. */\n  SCALAR: 'SCALAR',\n  /** 2-component vector, having 2 components per element. */\n  VEC2: 'VEC2',\n  /** 3-component vector, having 3 components per element. */\n  VEC3: 'VEC3',\n  /** 4-component vector, having 4 components per element. */\n  VEC4: 'VEC4',\n  /** 2x2 matrix, having 4 components per element. */\n  MAT2: 'MAT2',\n  /** 3x3 matrix, having 9 components per element. */\n  MAT3: 'MAT3',\n  /** 4x3 matrix, having 16 components per element. */\n  MAT4: 'MAT4'\n};\n/** Data type of the values composing each element in the accessor. */\nAccessor.ComponentType = {\n  /**\n   * 1-byte signed integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array Int8Array}.\n   */\n  BYTE: 5120,\n  /**\n   * 1-byte unsigned integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array Uint8Array}.\n   */\n  UNSIGNED_BYTE: 5121,\n  /**\n   * 2-byte signed integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array Int16Array}.\n   */\n  SHORT: 5122,\n  /**\n   * 2-byte unsigned integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array Uint16Array}.\n   */\n  UNSIGNED_SHORT: 5123,\n  /**\n   * 4-byte unsigned integer, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array Uint32Array}.\n   */\n  UNSIGNED_INT: 5125,\n  /**\n   * 4-byte floating point number, stored as\n   * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array Float32Array}.\n   */\n  FLOAT: 5126\n};\nfunction arrayToComponentType(array) {\n  switch (array.constructor) {\n    case Float32Array:\n      return Accessor.ComponentType.FLOAT;\n    case Uint32Array:\n      return Accessor.ComponentType.UNSIGNED_INT;\n    case Uint16Array:\n      return Accessor.ComponentType.UNSIGNED_SHORT;\n    case Uint8Array:\n      return Accessor.ComponentType.UNSIGNED_BYTE;\n    case Int16Array:\n      return Accessor.ComponentType.SHORT;\n    case Int8Array:\n      return Accessor.ComponentType.BYTE;\n    default:\n      throw new Error('Unknown accessor componentType.');\n  }\n}\n\n/**\n * *Reusable collections of {@link AnimationChannel}s, together representing a discrete animation\n * clip.*\n *\n * One Animation represents one playable unit in an animation system. Each may contain channels\n * affecting multiple paths (`translation`, `rotation`, `scale`, or `weights`) on multiple\n * {@link Node}s. An Animation's channels must be played together, and do not have any meaning in\n * isolation.\n *\n * Multiple Animations _may_ be played together: for example, one character's _Walk_ animation\n * might play while another character's _Run_ animation plays. Or a single character might have\n * both an _Idle_ and a _Talk_ animation playing at the same time. However, glTF does not define\n * any particular relationship between top-level Animations, or any particular playback behavior\n * like looping or sequences of Animations. General-purpose viewers typically autoplay the first\n * animation and provide UI controls for choosing another. Game engines may have significantly\n * more advanced methods of playing and blending animations.\n *\n * For example, a very simple skinned {@link Mesh} might have two Animations, _Idle_ and _Walk_.\n * Each of those Animations might affect the rotations of two bones, _LegL_ and _LegR_, where the\n * keyframes for each target-path pair are stored in {@link AnimationChannel} instances. In  total,\n * this model would contain two Animations and Four {@link AnimationChannel}s.\n *\n * Usage:\n *\n * ```ts\n * const animation = doc.createAnimation('machineRun')\n * \t.addChannel(rotateCog1)\n * \t.addChannel(rotateCog2)\n * \t.addChannel(rotateCog3);\n * ```\n *\n * Reference\n * - [glTF  Animations](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#animations)\n *\n * @category Properties\n */\nclass Animation extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.ANIMATION;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      channels: new RefSet(),\n      samplers: new RefSet()\n    });\n  }\n  /** Adds an {@link AnimationChannel} to this Animation. */\n  addChannel(channel) {\n    return this.addRef('channels', channel);\n  }\n  /** Removes an {@link AnimationChannel} from this Animation. */\n  removeChannel(channel) {\n    return this.removeRef('channels', channel);\n  }\n  /** Lists {@link AnimationChannel}s in this Animation. */\n  listChannels() {\n    return this.listRefs('channels');\n  }\n  /** Adds an {@link AnimationSampler} to this Animation. */\n  addSampler(sampler) {\n    return this.addRef('samplers', sampler);\n  }\n  /** Removes an {@link AnimationSampler} from this Animation. */\n  removeSampler(sampler) {\n    return this.removeRef('samplers', sampler);\n  }\n  /** Lists {@link AnimationSampler}s in this Animation. */\n  listSamplers() {\n    return this.listRefs('samplers');\n  }\n}\n\n/**\n * *A target-path pair within a larger {@link Animation}, which refers to an\n * {@link AnimationSampler} storing the keyframe data for that pair.*\n *\n * A _target_ is always a {@link Node}, in the core glTF spec. A _path_ is any property of that\n * Node that can be affected by animation: `translation`, `rotation`, `scale`, or `weights`. An\n * {@link Animation} affecting the positions and rotations of several {@link Node}s would contain\n * one channel for each Node-position or Node-rotation pair. The keyframe data for an\n * AnimationChannel is stored in an {@link AnimationSampler}, which must be attached to the same\n * {@link Animation}.\n *\n * Usage:\n *\n * ```ts\n * const node = doc.getRoot()\n * \t.listNodes()\n * \t.find((node) => node.getName() === 'Cog');\n *\n * const channel = doc.createAnimationChannel('cogRotation')\n * \t.setTargetPath('rotation')\n * \t.setTargetNode(node)\n * \t.setSampler(rotateSampler);\n * ```\n *\n * Reference\n * - [glTF  Animations](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#animations)\n *\n * @category Properties\n */\nclass AnimationChannel extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.ANIMATION_CHANNEL;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      targetPath: null,\n      targetNode: null,\n      sampler: null\n    });\n  }\n  /**********************************************************************************************\n   * Properties.\n   */\n  /**\n   * Path (property) animated on the target {@link Node}. Supported values include:\n   * `translation`, `rotation`, `scale`, or `weights`.\n   */\n  getTargetPath() {\n    return this.get('targetPath');\n  }\n  /**\n   * Path (property) animated on the target {@link Node}. Supported values include:\n   * `translation`, `rotation`, `scale`, or `weights`.\n   */\n  setTargetPath(targetPath) {\n    return this.set('targetPath', targetPath);\n  }\n  /** Target {@link Node} animated by the channel. */\n  getTargetNode() {\n    return this.getRef('targetNode');\n  }\n  /** Target {@link Node} animated by the channel. */\n  setTargetNode(targetNode) {\n    return this.setRef('targetNode', targetNode);\n  }\n  /**\n   * Keyframe data input/output values for the channel. Must be attached to the same\n   * {@link Animation}.\n   */\n  getSampler() {\n    return this.getRef('sampler');\n  }\n  /**\n   * Keyframe data input/output values for the channel. Must be attached to the same\n   * {@link Animation}.\n   */\n  setSampler(sampler) {\n    return this.setRef('sampler', sampler);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** Name of the property to be modified by an animation channel. */\nAnimationChannel.TargetPath = {\n  /** Channel targets {@link Node.setTranslation}. */\n  TRANSLATION: 'translation',\n  /** Channel targets {@link Node.setRotation}. */\n  ROTATION: 'rotation',\n  /** Channel targets {@link Node.setScale}. */\n  SCALE: 'scale',\n  /** Channel targets {@link Node.setWeights}, affecting {@link PrimitiveTarget} weights. */\n  WEIGHTS: 'weights'\n};\n\n/**\n * *Reusable collection of keyframes affecting particular property of an object.*\n *\n * Each AnimationSampler refers to an input and an output {@link Accessor}. Input contains times\n * (in seconds) for each keyframe. Output contains values (of any {@link Accessor.Type}) for the\n * animated property at each keyframe. Samplers using `CUBICSPLINE` interpolation will also contain\n * in/out tangents in the output, with the layout:\n *\n * in<sub>1</sub>, value<sub>1</sub>, out<sub>1</sub>,\n * in<sub>2</sub>, value<sub>2</sub>, out<sub>2</sub>,\n * in<sub>3</sub>, value<sub>3</sub>, out<sub>3</sub>, ...\n *\n * Usage:\n *\n * ```ts\n * // Create accessor containing input times, in seconds.\n * const input = doc.createAccessor('bounceTimes')\n * \t.setArray(new Float32Array([0, 1, 2]))\n * \t.setType(Accessor.Type.SCALAR);\n *\n * // Create accessor containing output values, in local units.\n * const output = doc.createAccessor('bounceValues')\n * \t.setArray(new Float32Array([\n * \t\t0, 0, 0, // y = 0\n * \t\t0, 1, 0, // y = 1\n * \t\t0, 0, 0, // y = 0\n * \t]))\n * \t.setType(Accessor.Type.VEC3);\n *\n * // Create sampler.\n * const sampler = doc.createAnimationSampler('bounce')\n * \t.setInput(input)\n * \t.setOutput(output)\n * \t.setInterpolation('LINEAR');\n * ```\n *\n * Reference\n * - [glTF  Animations](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#animations)\n *\n * @category Properties\n */\nclass AnimationSampler extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.ANIMATION_SAMPLER;\n  }\n  getDefaultAttributes() {\n    return Object.assign(super.getDefaults(), {\n      interpolation: AnimationSampler.Interpolation.LINEAR,\n      input: null,\n      output: null\n    });\n  }\n  /**********************************************************************************************\n   * Static.\n   */\n  /** Interpolation mode: `STEP`, `LINEAR`, or `CUBICSPLINE`. */\n  getInterpolation() {\n    return this.get('interpolation');\n  }\n  /** Interpolation mode: `STEP`, `LINEAR`, or `CUBICSPLINE`. */\n  setInterpolation(interpolation) {\n    return this.set('interpolation', interpolation);\n  }\n  /** Times for each keyframe, in seconds. */\n  getInput() {\n    return this.getRef('input');\n  }\n  /** Times for each keyframe, in seconds. */\n  setInput(input) {\n    return this.setRef('input', input, {\n      usage: BufferViewUsage$1.OTHER\n    });\n  }\n  /**\n   * Values for each keyframe. For `CUBICSPLINE` interpolation, output also contains in/out\n   * tangents.\n   */\n  getOutput() {\n    return this.getRef('output');\n  }\n  /**\n   * Values for each keyframe. For `CUBICSPLINE` interpolation, output also contains in/out\n   * tangents.\n   */\n  setOutput(output) {\n    return this.setRef('output', output, {\n      usage: BufferViewUsage$1.OTHER\n    });\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** Interpolation method. */\nAnimationSampler.Interpolation = {\n  /** Animated values are linearly interpolated between keyframes. */\n  LINEAR: 'LINEAR',\n  /** Animated values remain constant from one keyframe until the next keyframe. */\n  STEP: 'STEP',\n  /** Animated values are interpolated according to given cubic spline tangents. */\n  CUBICSPLINE: 'CUBICSPLINE'\n};\n\n/**\n * *Buffers are low-level storage units for binary data.*\n *\n * glTF 2.0 has three concepts relevant to binary storage: accessors, buffer views, and buffers.\n * In glTF Transform, an {@link Accessor} is referenced by any property that requires numeric typed\n * array data. Meshes, Primitives, and Animations all reference Accessors. Buffers define how that\n * data is organized into transmitted file(s). A `.glb` file has only a single Buffer, and when\n * exporting to `.glb` your resources should be grouped accordingly. A `.gltf` file may reference\n * one or more `.bin` files  each `.bin` is a Buffer  and grouping Accessors under different\n * Buffers allow you to specify that structure.\n *\n * For engines that can dynamically load portions of a glTF file, splitting data into separate\n * buffers can allow you to avoid loading data until it is needed. For example, you might put\n * binary data for specific meshes into a different `.bin` buffer, or put each animation's binary\n * payload into its own `.bin`.\n *\n * Buffer Views define how Accessors are organized within a given Buffer. glTF Transform creates an\n * efficient Buffer View layout automatically at export: there is no Buffer View property exposed\n * by the glTF Transform API, simplifying data management.\n *\n * Usage:\n *\n * ```ts\n * // Create two buffers with custom filenames.\n * const buffer1 = doc.createBuffer('buffer1')\n * \t.setURI('part1.bin');\n * const buffer2 = doc.createBuffer('buffer2')\n * \t.setURI('part2.bin');\n *\n * // Assign the attributes of two meshes to different buffers. If the meshes\n * // had indices or morph target attributes, you would also want to relocate\n * // those accessors.\n * mesh1\n * \t.listPrimitives()\n * \t.forEach((primitive) => primitive.listAttributes()\n * \t\t.forEach((attribute) => attribute.setBuffer(buffer1)));\n * mesh2\n * \t.listPrimitives()\n * \t.forEach((primitive) => primitive.listAttributes()\n * \t\t.forEach((attribute) => attribute.setBuffer(buffer2)));\n *\n * // Write to disk. Each mesh's binary data will be in a separate binary file;\n * // any remaining accessors will be in a third (default) buffer.\n * await new NodeIO().write('scene.gltf', doc);\n * //  scene.gltf, part1.bin, part2.bin\n * ```\n *\n * References:\n * - [glTF  Buffers and Buffer Views](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#buffers-and-buffer-views)\n * - [glTF  Accessors](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#accessors)\n *\n * @category Properties\n */\nclass Buffer$1 extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.BUFFER;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      uri: ''\n    });\n  }\n  /**\n   * Returns the URI (or filename) of this buffer (e.g. 'myBuffer.bin'). URIs are strongly\n   * encouraged to be relative paths, rather than absolute. Use of a protocol (like `file://`)\n   * is possible for custom applications, but will limit the compatibility of the asset with most\n   * tools.\n   *\n   * Buffers commonly use the extension `.bin`, though this is not required.\n   */\n  getURI() {\n    return this.get('uri');\n  }\n  /**\n   * Sets the URI (or filename) of this buffer (e.g. 'myBuffer.bin'). URIs are strongly\n   * encouraged to be relative paths, rather than absolute. Use of a protocol (like `file://`)\n   * is possible for custom applications, but will limit the compatibility of the asset with most\n   * tools.\n   *\n   * Buffers commonly use the extension `.bin`, though this is not required.\n   */\n  setURI(uri) {\n    return this.set('uri', uri);\n  }\n}\n\n/**\n * *Cameras are perspectives through which the {@link Scene} may be viewed.*\n *\n * Projection can be perspective or orthographic. Cameras are contained in nodes and thus can be\n * transformed. The camera is defined such that the local +X axis is to the right, the lens looks\n * towards the local -Z axis, and the top of the camera is aligned with the local +Y axis. If no\n * transformation is specified, the location of the camera is at the origin.\n *\n * Usage:\n *\n * ```typescript\n * const camera = doc.createCamera('myCamera')\n * \t.setType(GLTF.CameraType.PERSPECTIVE)\n * \t.setZNear(0.1)\n * \t.setZFar(100)\n * \t.setYFov(Math.PI / 4)\n * \t.setAspectRatio(1.5);\n *\n * node.setCamera(camera);\n * ```\n *\n * References:\n * - [glTF  Cameras](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#cameras)\n *\n * @category Properties\n */\nclass Camera extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.CAMERA;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      // Common.\n      type: Camera.Type.PERSPECTIVE,\n      znear: 0.1,\n      zfar: 100,\n      // Perspective.\n      aspectRatio: null,\n      yfov: Math.PI * 2 * 50 / 360,\n      // 50\n      // Orthographic.\n      xmag: 1,\n      ymag: 1\n    });\n  }\n  /**********************************************************************************************\n   * Common.\n   */\n  /** Specifies if the camera uses a perspective or orthographic projection. */\n  getType() {\n    return this.get('type');\n  }\n  /** Specifies if the camera uses a perspective or orthographic projection. */\n  setType(type) {\n    return this.set('type', type);\n  }\n  /** Floating-point distance to the near clipping plane. */\n  getZNear() {\n    return this.get('znear');\n  }\n  /** Floating-point distance to the near clipping plane. */\n  setZNear(znear) {\n    return this.set('znear', znear);\n  }\n  /**\n   * Floating-point distance to the far clipping plane. When defined, zfar must be greater than\n   * znear. If zfar is undefined, runtime must use infinite projection matrix.\n   */\n  getZFar() {\n    return this.get('zfar');\n  }\n  /**\n   * Floating-point distance to the far clipping plane. When defined, zfar must be greater than\n   * znear. If zfar is undefined, runtime must use infinite projection matrix.\n   */\n  setZFar(zfar) {\n    return this.set('zfar', zfar);\n  }\n  /**********************************************************************************************\n   * Perspective.\n   */\n  /**\n   * Floating-point aspect ratio of the field of view. When undefined, the aspect ratio of the\n   * canvas is used.\n   */\n  getAspectRatio() {\n    return this.get('aspectRatio');\n  }\n  /**\n   * Floating-point aspect ratio of the field of view. When undefined, the aspect ratio of the\n   * canvas is used.\n   */\n  setAspectRatio(aspectRatio) {\n    return this.set('aspectRatio', aspectRatio);\n  }\n  /** Floating-point vertical field of view in radians. */\n  getYFov() {\n    return this.get('yfov');\n  }\n  /** Floating-point vertical field of view in radians. */\n  setYFov(yfov) {\n    return this.set('yfov', yfov);\n  }\n  /**********************************************************************************************\n   * Orthographic.\n   */\n  /**\n   * Floating-point horizontal magnification of the view, and half the view's width\n   * in world units.\n   */\n  getXMag() {\n    return this.get('xmag');\n  }\n  /**\n   * Floating-point horizontal magnification of the view, and half the view's width\n   * in world units.\n   */\n  setXMag(xmag) {\n    return this.set('xmag', xmag);\n  }\n  /**\n   * Floating-point vertical magnification of the view, and half the view's height\n   * in world units.\n   */\n  getYMag() {\n    return this.get('ymag');\n  }\n  /**\n   * Floating-point vertical magnification of the view, and half the view's height\n   * in world units.\n   */\n  setYMag(ymag) {\n    return this.set('ymag', ymag);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\nCamera.Type = {\n  /** A perspective camera representing a perspective projection matrix. */\n  PERSPECTIVE: 'perspective',\n  /** An orthographic camera representing an orthographic projection matrix. */\n  ORTHOGRAPHIC: 'orthographic'\n};\n\n/**\n * *Base class for all {@link Property} types that can be attached by an {@link Extension}.*\n *\n * After an {@link Extension} is attached to a glTF {@link Document}, the Extension may be used to\n * construct ExtensionProperty instances, to be referenced throughout the document as prescribed by\n * the Extension. For example, the `KHR_materials_clearcoat` Extension defines a `Clearcoat`\n * ExtensionProperty, which is referenced by {@link Material} Properties in the Document, and may\n * contain references to {@link Texture} properties of its own.\n *\n * For more information on available extensions and their usage, see [Extensions](/extensions).\n *\n * Reference:\n * - [glTF  Extensions](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#specifying-extensions)\n *\n * @category Properties\n */\nclass ExtensionProperty extends Property {\n  /** @hidden */\n  _validateParent(parent) {\n    if (!this.parentTypes.includes(parent.propertyType)) {\n      throw new Error(`Parent \"${parent.propertyType}\" invalid for child \"${this.propertyType}\".`);\n    }\n  }\n}\nExtensionProperty.EXTENSION_NAME = void 0;\n\n/**\n * *Settings associated with a particular use of a {@link Texture}.*\n *\n * Different materials may reuse the same texture but with different texture coordinates,\n * minFilter/magFilter, or wrapS/wrapT settings. The TextureInfo class contains settings\n * derived from both the \"TextureInfo\" and \"Sampler\" properties in the glTF specification,\n * consolidated here for simplicity.\n *\n * TextureInfo properties cannot be directly created. For any material texture slot, such as\n * baseColorTexture, there will be a corresponding method to obtain the TextureInfo for that slot.\n * For example, see {@link Material.getBaseColorTextureInfo}.\n *\n * References:\n * - [glTF  Texture Info](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#reference-textureinfo)\n *\n * @category Properties\n */\nclass TextureInfo extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.TEXTURE_INFO;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      texCoord: 0,\n      magFilter: null,\n      minFilter: null,\n      wrapS: TextureInfo.WrapMode.REPEAT,\n      wrapT: TextureInfo.WrapMode.REPEAT\n    });\n  }\n  /**********************************************************************************************\n   * Texture coordinates.\n   */\n  /** Returns the texture coordinate (UV set) index for the texture. */\n  getTexCoord() {\n    return this.get('texCoord');\n  }\n  /** Sets the texture coordinate (UV set) index for the texture. */\n  setTexCoord(texCoord) {\n    return this.set('texCoord', texCoord);\n  }\n  /**********************************************************************************************\n   * Min/mag filter.\n   */\n  /** Returns the magnification filter applied to the texture. */\n  getMagFilter() {\n    return this.get('magFilter');\n  }\n  /** Sets the magnification filter applied to the texture. */\n  setMagFilter(magFilter) {\n    return this.set('magFilter', magFilter);\n  }\n  /** Sets the minification filter applied to the texture. */\n  getMinFilter() {\n    return this.get('minFilter');\n  }\n  /** Returns the minification filter applied to the texture. */\n  setMinFilter(minFilter) {\n    return this.set('minFilter', minFilter);\n  }\n  /**********************************************************************************************\n   * UV wrapping.\n   */\n  /** Returns the S (U) wrapping mode for UVs used by the texture. */\n  getWrapS() {\n    return this.get('wrapS');\n  }\n  /** Sets the S (U) wrapping mode for UVs used by the texture. */\n  setWrapS(wrapS) {\n    return this.set('wrapS', wrapS);\n  }\n  /** Returns the T (V) wrapping mode for UVs used by the texture. */\n  getWrapT() {\n    return this.get('wrapT');\n  }\n  /** Sets the T (V) wrapping mode for UVs used by the texture. */\n  setWrapT(wrapT) {\n    return this.set('wrapT', wrapT);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** UV wrapping mode. Values correspond to WebGL enums. */\nTextureInfo.WrapMode = {\n  /** */\n  CLAMP_TO_EDGE: 33071,\n  /** */\n  MIRRORED_REPEAT: 33648,\n  /** */\n  REPEAT: 10497\n};\n/** Magnification filter. Values correspond to WebGL enums. */\nTextureInfo.MagFilter = {\n  /** */\n  NEAREST: 9728,\n  /** */\n  LINEAR: 9729\n};\n/** Minification filter. Values correspond to WebGL enums. */\nTextureInfo.MinFilter = {\n  /** */\n  NEAREST: 9728,\n  /** */\n  LINEAR: 9729,\n  /** */\n  NEAREST_MIPMAP_NEAREST: 9984,\n  /** */\n  LINEAR_MIPMAP_NEAREST: 9985,\n  /** */\n  NEAREST_MIPMAP_LINEAR: 9986,\n  /** */\n  LINEAR_MIPMAP_LINEAR: 9987\n};\n\nconst {\n  R,\n  G,\n  B,\n  A\n} = TextureChannel;\n/**\n * *Materials describe a surface's appearance and response to light.*\n *\n * Each {@link Primitive} within a {@link Mesh} may be assigned a single Material. The number of\n * GPU draw calls typically increases with both the numbers of Primitives and of Materials in an\n * asset; Materials should be reused wherever possible. Techniques like texture atlasing and vertex\n * colors allow objects to have varied appearances while technically sharing a single Material.\n *\n * Material properties are modified by both scalars (like `baseColorFactor`) and textures (like\n * `baseColorTexture`). When both are available, factors are considered linear multipliers against\n * textures of the same name. In the case of base color, vertex colors (`COLOR_0` attributes) are\n * also multiplied.\n *\n * Textures containing color data (`baseColorTexture`, `emissiveTexture`) are sRGB. All other\n * textures are linear. Like other resources, textures should be reused when possible.\n *\n * Usage:\n *\n * ```typescript\n * const material = doc.createMaterial('myMaterial')\n * \t.setBaseColorFactor([1, 0.5, 0.5, 1]) // RGBA\n * \t.setOcclusionTexture(aoTexture)\n * \t.setOcclusionStrength(0.5);\n *\n * mesh.listPrimitives()\n * \t.forEach((prim) => prim.setMaterial(material));\n * ```\n *\n * @category Properties\n */\nclass Material extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.MATERIAL;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      alphaMode: Material.AlphaMode.OPAQUE,\n      alphaCutoff: 0.5,\n      doubleSided: false,\n      baseColorFactor: [1, 1, 1, 1],\n      baseColorTexture: null,\n      baseColorTextureInfo: new TextureInfo(this.graph, 'baseColorTextureInfo'),\n      emissiveFactor: [0, 0, 0],\n      emissiveTexture: null,\n      emissiveTextureInfo: new TextureInfo(this.graph, 'emissiveTextureInfo'),\n      normalScale: 1,\n      normalTexture: null,\n      normalTextureInfo: new TextureInfo(this.graph, 'normalTextureInfo'),\n      occlusionStrength: 1,\n      occlusionTexture: null,\n      occlusionTextureInfo: new TextureInfo(this.graph, 'occlusionTextureInfo'),\n      roughnessFactor: 1,\n      metallicFactor: 1,\n      metallicRoughnessTexture: null,\n      metallicRoughnessTextureInfo: new TextureInfo(this.graph, 'metallicRoughnessTextureInfo')\n    });\n  }\n  /**********************************************************************************************\n   * Double-sided / culling.\n   */\n  /** Returns true when both sides of triangles should be rendered. May impact performance. */\n  getDoubleSided() {\n    return this.get('doubleSided');\n  }\n  /** Sets whether to render both sides of triangles. May impact performance. */\n  setDoubleSided(doubleSided) {\n    return this.set('doubleSided', doubleSided);\n  }\n  /**********************************************************************************************\n   * Alpha.\n   */\n  /** Returns material alpha, equivalent to baseColorFactor[3]. */\n  getAlpha() {\n    return this.get('baseColorFactor')[3];\n  }\n  /** Sets material alpha, equivalent to baseColorFactor[3]. */\n  setAlpha(alpha) {\n    const baseColorFactor = this.get('baseColorFactor').slice();\n    baseColorFactor[3] = alpha;\n    return this.set('baseColorFactor', baseColorFactor);\n  }\n  /**\n   * Returns the mode of the material's alpha channels, which are provided by `baseColorFactor`\n   * and `baseColorTexture`.\n   *\n   * - `OPAQUE`: Alpha value is ignored and the rendered output is fully opaque.\n   * - `BLEND`: Alpha value is used to determine the transparency each pixel on a surface, and\n   * \tthe fraction of surface vs. background color in the final result. Alpha blending creates\n   *\tsignificant edge cases in realtime renderers, and some care when structuring the model is\n   * \tnecessary for good results. In particular, transparent geometry should be kept in separate\n   * \tmeshes or primitives from opaque geometry. The `depthWrite` or `zWrite` settings in engines\n   * \tshould usually be disabled on transparent materials.\n   * - `MASK`: Alpha value is compared against `alphaCutoff` threshold for each pixel on a\n   * \tsurface, and the pixel is either fully visible or fully discarded based on that cutoff.\n   * \tThis technique is useful for things like leafs/foliage, grass, fabric meshes, and other\n   * \tsurfaces where no semitransparency is needed. With a good choice of `alphaCutoff`, surfaces\n   * \tthat don't require semitransparency can avoid the performance penalties and visual issues\n   * \tinvolved with `BLEND` transparency.\n   *\n   * Reference:\n   * - [glTF  material.alphaMode](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialalphamode)\n   */\n  getAlphaMode() {\n    return this.get('alphaMode');\n  }\n  /** Sets the mode of the material's alpha channels. See {@link Material.getAlphaMode getAlphaMode} for details. */\n  setAlphaMode(alphaMode) {\n    return this.set('alphaMode', alphaMode);\n  }\n  /** Returns the visibility threshold; applied only when `.alphaMode='MASK'`. */\n  getAlphaCutoff() {\n    return this.get('alphaCutoff');\n  }\n  /** Sets the visibility threshold; applied only when `.alphaMode='MASK'`. */\n  setAlphaCutoff(alphaCutoff) {\n    return this.set('alphaCutoff', alphaCutoff);\n  }\n  /**********************************************************************************************\n   * Base color.\n   */\n  /**\n   * Base color / albedo factor; Linear-sRGB components.\n   * See {@link Material.getBaseColorTexture getBaseColorTexture}.\n   */\n  getBaseColorFactor() {\n    return this.get('baseColorFactor');\n  }\n  /**\n   * Base color / albedo factor; Linear-sRGB components.\n   * See {@link Material.getBaseColorTexture getBaseColorTexture}.\n   */\n  setBaseColorFactor(baseColorFactor) {\n    return this.set('baseColorFactor', baseColorFactor);\n  }\n  /**\n   * Base color / albedo. The visible color of a non-metallic surface under constant ambient\n   * light would be a linear combination (multiplication) of its vertex colors, base color\n   * factor, and base color texture. Lighting, and reflections in metallic or smooth surfaces,\n   * also effect the final color. The alpha (`.a`) channel of base color factors and textures\n   * will have varying effects, based on the setting of {@link Material.getAlphaMode getAlphaMode}.\n   *\n   * Reference:\n   * - [glTF  material.pbrMetallicRoughness.baseColorFactor](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#pbrmetallicroughnessbasecolorfactor)\n   */\n  getBaseColorTexture() {\n    return this.getRef('baseColorTexture');\n  }\n  /**\n   * Settings affecting the material's use of its base color texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getBaseColorTextureInfo() {\n    return this.getRef('baseColorTexture') ? this.getRef('baseColorTextureInfo') : null;\n  }\n  /** Sets base color / albedo texture. See {@link Material.getBaseColorTexture getBaseColorTexture}. */\n  setBaseColorTexture(texture) {\n    return this.setRef('baseColorTexture', texture, {\n      channels: R | G | B | A,\n      isColor: true\n    });\n  }\n  /**********************************************************************************************\n   * Emissive.\n   */\n  /** Emissive color; Linear-sRGB components. See {@link Material.getEmissiveTexture getEmissiveTexture}. */\n  getEmissiveFactor() {\n    return this.get('emissiveFactor');\n  }\n  /** Emissive color; Linear-sRGB components. See {@link Material.getEmissiveTexture getEmissiveTexture}. */\n  setEmissiveFactor(emissiveFactor) {\n    return this.set('emissiveFactor', emissiveFactor);\n  }\n  /**\n   * Emissive texture. Emissive color is added to any base color of the material, after any\n   * lighting/shadowing are applied. An emissive color does not inherently \"glow\", or affect\n   * objects around it at all. To create that effect, most viewers must also enable a\n   * post-processing effect called \"bloom\".\n   *\n   * Reference:\n   * - [glTF  material.emissiveTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialemissivetexture)\n   */\n  getEmissiveTexture() {\n    return this.getRef('emissiveTexture');\n  }\n  /**\n   * Settings affecting the material's use of its emissive texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getEmissiveTextureInfo() {\n    return this.getRef('emissiveTexture') ? this.getRef('emissiveTextureInfo') : null;\n  }\n  /** Sets emissive texture. See {@link Material.getEmissiveTexture getEmissiveTexture}. */\n  setEmissiveTexture(texture) {\n    return this.setRef('emissiveTexture', texture, {\n      channels: R | G | B,\n      isColor: true\n    });\n  }\n  /**********************************************************************************************\n   * Normal.\n   */\n  /** Normal (surface detail) factor; linear multiplier. Affects `.normalTexture`. */\n  getNormalScale() {\n    return this.get('normalScale');\n  }\n  /** Normal (surface detail) factor; linear multiplier. Affects `.normalTexture`. */\n  setNormalScale(scale) {\n    return this.set('normalScale', scale);\n  }\n  /**\n   * Normal (surface detail) texture.\n   *\n   * A tangent space normal map. The texture contains RGB components. Each texel represents the\n   * XYZ components of a normal vector in tangent space. Red [0 to 255] maps to X [-1 to 1].\n   * Green [0 to 255] maps to Y [-1 to 1]. Blue [128 to 255] maps to Z [1/255 to 1]. The normal\n   * vectors use OpenGL conventions where +X is right and +Y is up. +Z points toward the viewer.\n   *\n   * Reference:\n   * - [glTF  material.normalTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialnormaltexture)\n   */\n  getNormalTexture() {\n    return this.getRef('normalTexture');\n  }\n  /**\n   * Settings affecting the material's use of its normal texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getNormalTextureInfo() {\n    return this.getRef('normalTexture') ? this.getRef('normalTextureInfo') : null;\n  }\n  /** Sets normal (surface detail) texture. See {@link Material.getNormalTexture getNormalTexture}. */\n  setNormalTexture(texture) {\n    return this.setRef('normalTexture', texture, {\n      channels: R | G | B\n    });\n  }\n  /**********************************************************************************************\n   * Occlusion.\n   */\n  /** (Ambient) Occlusion factor; linear multiplier. Affects `.occlusionTexture`. */\n  getOcclusionStrength() {\n    return this.get('occlusionStrength');\n  }\n  /** Sets (ambient) occlusion factor; linear multiplier. Affects `.occlusionTexture`. */\n  setOcclusionStrength(strength) {\n    return this.set('occlusionStrength', strength);\n  }\n  /**\n   * (Ambient) Occlusion texture, generally used for subtle 'baked' shadowing effects that are\n   * independent of an object's position, such as shading in inset areas and corners. Direct\n   * lighting is not affected by occlusion, so at least one indirect light source must be present\n   * in the scene for occlusion effects to be visible.\n   *\n   * The occlusion values are sampled from the R channel. Higher values indicate areas that\n   * should receive full indirect lighting and lower values indicate no indirect lighting.\n   *\n   * Reference:\n   * - [glTF  material.occlusionTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#materialocclusiontexture)\n   */\n  getOcclusionTexture() {\n    return this.getRef('occlusionTexture');\n  }\n  /**\n   * Settings affecting the material's use of its occlusion texture. If no texture is attached,\n   * {@link TextureInfo} is `null`.\n   */\n  getOcclusionTextureInfo() {\n    return this.getRef('occlusionTexture') ? this.getRef('occlusionTextureInfo') : null;\n  }\n  /** Sets (ambient) occlusion texture. See {@link Material.getOcclusionTexture getOcclusionTexture}. */\n  setOcclusionTexture(texture) {\n    return this.setRef('occlusionTexture', texture, {\n      channels: R\n    });\n  }\n  /**********************************************************************************************\n   * Metallic / roughness.\n   */\n  /**\n   * Roughness factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  getRoughnessFactor() {\n    return this.get('roughnessFactor');\n  }\n  /**\n   * Sets roughness factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  setRoughnessFactor(factor) {\n    return this.set('roughnessFactor', factor);\n  }\n  /**\n   * Metallic factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  getMetallicFactor() {\n    return this.get('metallicFactor');\n  }\n  /**\n   * Sets metallic factor; linear multiplier. Affects roughness channel of\n   * `metallicRoughnessTexture`. See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  setMetallicFactor(factor) {\n    return this.set('metallicFactor', factor);\n  }\n  /**\n   * Metallic roughness texture. The metalness values are sampled from the B channel. The\n   * roughness values are sampled from the G channel. When a material is fully metallic,\n   * or nearly so, it may require image-based lighting (i.e. an environment map) or global\n   * illumination to appear well-lit.\n   *\n   * Reference:\n   * - [glTF  material.pbrMetallicRoughness.metallicRoughnessTexture](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#pbrmetallicroughnessmetallicroughnesstexture)\n   */\n  getMetallicRoughnessTexture() {\n    return this.getRef('metallicRoughnessTexture');\n  }\n  /**\n   * Settings affecting the material's use of its metallic/roughness texture. If no texture is\n   * attached, {@link TextureInfo} is `null`.\n   */\n  getMetallicRoughnessTextureInfo() {\n    return this.getRef('metallicRoughnessTexture') ? this.getRef('metallicRoughnessTextureInfo') : null;\n  }\n  /**\n   * Sets metallic/roughness texture.\n   * See {@link Material.getMetallicRoughnessTexture getMetallicRoughnessTexture}.\n   */\n  setMetallicRoughnessTexture(texture) {\n    return this.setRef('metallicRoughnessTexture', texture, {\n      channels: G | B\n    });\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\nMaterial.AlphaMode = {\n  /**\n   * The alpha value is ignored and the rendered output is fully opaque\n   */\n  OPAQUE: 'OPAQUE',\n  /**\n   * The rendered output is either fully opaque or fully transparent depending on the alpha\n   * value and the specified alpha cutoff value\n   */\n  MASK: 'MASK',\n  /**\n   * The alpha value is used to composite the source and destination areas. The rendered\n   * output is combined with the background using the normal painting operation (i.e. the\n   * Porter and Duff over operator)\n   */\n  BLEND: 'BLEND'\n};\n\n/**\n * *Meshes define reusable geometry (triangles, lines, or points) and are instantiated by\n * {@link Node}s.*\n *\n * Each draw call required to render a mesh is represented as a {@link Primitive}. Meshes typically\n * have only a single {@link Primitive}, but may have more for various reasons. A mesh manages only\n * a list of primitives  materials, morph targets, and other properties are managed on a per-\n * primitive basis.\n *\n * When the same geometry and material should be rendered at multiple places in the scene, reuse\n * the same Mesh instance and attach it to multiple nodes for better efficiency. Where the geometry\n * is shared but the material is not, reusing {@link Accessor}s under different meshes and\n * primitives can similarly improve transmission efficiency, although some rendering efficiency is\n * lost as the number of materials in a scene increases.\n *\n * Usage:\n *\n * ```ts\n * const primitive = doc.createPrimitive()\n * \t.setAttribute('POSITION', positionAccessor)\n * \t.setAttribute('TEXCOORD_0', uvAccessor);\n * const mesh = doc.createMesh('myMesh')\n * \t.addPrimitive(primitive);\n * node.setMesh(mesh);\n * ```\n *\n * References:\n * - [glTF  Geometry](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#geometry)\n *\n * @category Properties\n */\nclass Mesh extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.MESH;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      weights: [],\n      primitives: new RefSet()\n    });\n  }\n  /** Adds a {@link Primitive} to the mesh's draw call list. */\n  addPrimitive(primitive) {\n    return this.addRef('primitives', primitive);\n  }\n  /** Removes a {@link Primitive} from the mesh's draw call list. */\n  removePrimitive(primitive) {\n    return this.removeRef('primitives', primitive);\n  }\n  /** Lists {@link Primitive} draw calls of the mesh. */\n  listPrimitives() {\n    return this.listRefs('primitives');\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} on this mesh. Each {@link Primitive} must\n   * have the same number of targets. Most engines only support 4-8 active morph targets at a\n   * time.\n   */\n  getWeights() {\n    return this.get('weights');\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} on this mesh. Each {@link Primitive} must\n   * have the same number of targets. Most engines only support 4-8 active morph targets at a\n   * time.\n   */\n  setWeights(weights) {\n    return this.set('weights', weights);\n  }\n}\n\n/**\n * *Nodes are the objects that comprise a {@link Scene}.*\n *\n * Each Node may have one or more children, and a transform (position, rotation, and scale) that\n * applies to all of its descendants. A Node may also reference (or \"instantiate\") other resources\n * at its location, including {@link Mesh}, Camera, Light, and Skin properties. A Node cannot be\n * part of more than one {@link Scene}.\n *\n * A Node's local transform is represented with array-like objects, intended to be compatible with\n * [gl-matrix](https://github.com/toji/gl-matrix), or with the `toArray`/`fromArray` methods of\n * libraries like three.js and babylon.js.\n *\n * Usage:\n *\n * ```ts\n * const node = doc.createNode('myNode')\n * \t.setMesh(mesh)\n * \t.setTranslation([0, 0, 0])\n * \t.addChild(otherNode);\n * ```\n *\n * References:\n * - [glTF  Nodes and Hierarchy](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#nodes-and-hierarchy)\n *\n * @category Properties\n */\nclass Node extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.NODE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      translation: [0, 0, 0],\n      rotation: [0, 0, 0, 1],\n      scale: [1, 1, 1],\n      weights: [],\n      camera: null,\n      mesh: null,\n      skin: null,\n      children: new RefSet()\n    });\n  }\n  copy(other, resolve = COPY_IDENTITY) {\n    // Node cannot be copied, only cloned. Copying is shallow, but Nodes cannot have more than\n    // one parent. Rather than leaving one of the two Nodes without children, throw an error here.\n    if (resolve === COPY_IDENTITY) throw new Error('Node cannot be copied.');\n    return super.copy(other, resolve);\n  }\n  /**********************************************************************************************\n   * Local transform.\n   */\n  /** Returns the translation (position) of this Node in local space. */\n  getTranslation() {\n    return this.get('translation');\n  }\n  /** Returns the rotation (quaternion) of this Node in local space. */\n  getRotation() {\n    return this.get('rotation');\n  }\n  /** Returns the scale of this Node in local space. */\n  getScale() {\n    return this.get('scale');\n  }\n  /** Sets the translation (position) of this Node in local space. */\n  setTranslation(translation) {\n    return this.set('translation', translation);\n  }\n  /** Sets the rotation (quaternion) of this Node in local space. */\n  setRotation(rotation) {\n    return this.set('rotation', rotation);\n  }\n  /** Sets the scale of this Node in local space. */\n  setScale(scale) {\n    return this.set('scale', scale);\n  }\n  /** Returns the local matrix of this Node. */\n  getMatrix() {\n    return MathUtils.compose(this.get('translation'), this.get('rotation'), this.get('scale'), []);\n  }\n  /** Sets the local matrix of this Node. Matrix will be decomposed to TRS properties. */\n  setMatrix(matrix) {\n    const translation = this.get('translation').slice();\n    const rotation = this.get('rotation').slice();\n    const scale = this.get('scale').slice();\n    MathUtils.decompose(matrix, translation, rotation, scale);\n    return this.set('translation', translation).set('rotation', rotation).set('scale', scale);\n  }\n  /**********************************************************************************************\n   * World transform.\n   */\n  /** Returns the translation (position) of this Node in world space. */\n  getWorldTranslation() {\n    const t = [0, 0, 0];\n    MathUtils.decompose(this.getWorldMatrix(), t, [0, 0, 0, 1], [1, 1, 1]);\n    return t;\n  }\n  /** Returns the rotation (quaternion) of this Node in world space. */\n  getWorldRotation() {\n    const r = [0, 0, 0, 1];\n    MathUtils.decompose(this.getWorldMatrix(), [0, 0, 0], r, [1, 1, 1]);\n    return r;\n  }\n  /** Returns the scale of this Node in world space. */\n  getWorldScale() {\n    const s = [1, 1, 1];\n    MathUtils.decompose(this.getWorldMatrix(), [0, 0, 0], [0, 0, 0, 1], s);\n    return s;\n  }\n  /** Returns the world matrix of this Node. */\n  getWorldMatrix() {\n    // Build ancestor chain.\n    const ancestors = [];\n    for (let node = this; node != null; node = node.getParentNode()) {\n      ancestors.push(node);\n    }\n    // Compute world matrix.\n    let ancestor;\n    const worldMatrix = ancestors.pop().getMatrix();\n    while (ancestor = ancestors.pop()) {\n      multiply(worldMatrix, worldMatrix, ancestor.getMatrix());\n    }\n    return worldMatrix;\n  }\n  /**********************************************************************************************\n   * Scene hierarchy.\n   */\n  /**\n   * Adds the given Node as a child of this Node.\n   *\n   * Requirements:\n   *\n   * 1. Nodes MAY be root children of multiple {@link Scene Scenes}\n   * 2. Nodes MUST NOT be children of >1 Node\n   * 3. Nodes MUST NOT be children of both Nodes and {@link Scene Scenes}\n   *\n   * The `addChild` method enforces these restrictions automatically, and will\n   * remove the new child from previous parents where needed. This behavior\n   * may change in future major releases of the library.\n   */\n  addChild(child) {\n    // Remove existing parents.\n    const parentNode = child.getParentNode();\n    if (parentNode) parentNode.removeChild(child);\n    for (const parent of child.listParents()) {\n      if (parent.propertyType === PropertyType.SCENE) {\n        parent.removeChild(child);\n      }\n    }\n    return this.addRef('children', child);\n  }\n  /** Removes a Node from this Node's child Node list. */\n  removeChild(child) {\n    return this.removeRef('children', child);\n  }\n  /** Lists all child Nodes of this Node. */\n  listChildren() {\n    return this.listRefs('children');\n  }\n  /**\n   * Returns the Node's unique parent Node within the scene graph. If the\n   * Node has no parents, or is a direct child of the {@link Scene}\n   * (\"root node\"), this method returns null.\n   *\n   * Unrelated to {@link Property.listParents}, which lists all resource\n   * references from properties of any type ({@link Skin}, {@link Root}, ...).\n   */\n  getParentNode() {\n    for (const parent of this.listParents()) {\n      if (parent.propertyType === PropertyType.NODE) {\n        return parent;\n      }\n    }\n    return null;\n  }\n  /**********************************************************************************************\n   * Attachments.\n   */\n  /** Returns the {@link Mesh}, if any, instantiated at this Node. */\n  getMesh() {\n    return this.getRef('mesh');\n  }\n  /**\n   * Sets a {@link Mesh} to be instantiated at this Node. A single mesh may be instantiated by\n   * multiple Nodes; reuse of this sort is strongly encouraged.\n   */\n  setMesh(mesh) {\n    return this.setRef('mesh', mesh);\n  }\n  /** Returns the {@link Camera}, if any, instantiated at this Node. */\n  getCamera() {\n    return this.getRef('camera');\n  }\n  /** Sets a {@link Camera} to be instantiated at this Node. */\n  setCamera(camera) {\n    return this.setRef('camera', camera);\n  }\n  /** Returns the {@link Skin}, if any, instantiated at this Node. */\n  getSkin() {\n    return this.getRef('skin');\n  }\n  /** Sets a {@link Skin} to be instantiated at this Node. */\n  setSkin(skin) {\n    return this.setRef('skin', skin);\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} for the mesh instance at this Node.\n   * Most engines only support 4-8 active morph targets at a time.\n   */\n  getWeights() {\n    return this.get('weights');\n  }\n  /**\n   * Initial weights of each {@link PrimitiveTarget} for the mesh instance at this Node.\n   * Most engines only support 4-8 active morph targets at a time.\n   */\n  setWeights(weights) {\n    return this.set('weights', weights);\n  }\n  /**********************************************************************************************\n   * Helpers.\n   */\n  /** Visits this {@link Node} and its descendants, top-down. */\n  traverse(fn) {\n    fn(this);\n    for (const child of this.listChildren()) child.traverse(fn);\n    return this;\n  }\n}\n\n/**\n * *Primitives are individual GPU draw calls comprising a {@link Mesh}.*\n *\n * Meshes typically have only a single Primitive, although various cases may require more. Each\n * primitive may be assigned vertex attributes, morph target attributes, and a material. Any of\n * these properties should be reused among multiple primitives where feasible.\n *\n * Primitives cannot be moved independently of other primitives within the same mesh, except\n * through the use of morph targets and skinning. If independent movement or other runtime\n * behavior is necessary (like raycasting or collisions) prefer to assign each primitive to a\n * different mesh. The number of GPU draw calls is typically not affected by grouping or\n * ungrouping primitives to a mesh.\n *\n * Each primitive may optionally be deformed by one or more morph targets, stored in a\n * {@link PrimitiveTarget}.\n *\n * Usage:\n *\n * ```ts\n * const primitive = doc.createPrimitive()\n * \t.setAttribute('POSITION', positionAccessor)\n * \t.setAttribute('TEXCOORD_0', uvAccessor)\n * \t.setMaterial(material);\n * mesh.addPrimitive(primitive);\n * node.setMesh(mesh);\n * ```\n *\n * References:\n * - [glTF  Geometry](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#geometry)\n *\n * @category Properties\n */\nclass Primitive extends ExtensibleProperty {\n  /**********************************************************************************************\n   * Instance.\n   */\n  init() {\n    this.propertyType = PropertyType.PRIMITIVE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      mode: Primitive.Mode.TRIANGLES,\n      material: null,\n      indices: null,\n      attributes: new RefMap(),\n      targets: new RefSet()\n    });\n  }\n  /**********************************************************************************************\n   * Primitive data.\n   */\n  /** Returns an {@link Accessor} with indices of vertices to be drawn. */\n  getIndices() {\n    return this.getRef('indices');\n  }\n  /**\n   * Sets an {@link Accessor} with indices of vertices to be drawn. In `TRIANGLES` draw mode,\n   * each set of three indices define a triangle. The front face has a counter-clockwise (CCW)\n   * winding order.\n   */\n  setIndices(indices) {\n    return this.setRef('indices', indices, {\n      usage: BufferViewUsage$1.ELEMENT_ARRAY_BUFFER\n    });\n  }\n  /** Returns a vertex attribute as an {@link Accessor}. */\n  getAttribute(semantic) {\n    return this.getRefMap('attributes', semantic);\n  }\n  /**\n   * Sets a vertex attribute to an {@link Accessor}. All attributes must have the same vertex\n   * count.\n   */\n  setAttribute(semantic, accessor) {\n    return this.setRefMap('attributes', semantic, accessor, {\n      usage: BufferViewUsage$1.ARRAY_BUFFER\n    });\n  }\n  /**\n   * Lists all vertex attribute {@link Accessor}s associated with the primitive, excluding any\n   * attributes used for morph targets. For example, `[positionAccessor, normalAccessor,\n   * uvAccessor]`. Order will be consistent with the order returned by {@link .listSemantics}().\n   */\n  listAttributes() {\n    return this.listRefMapValues('attributes');\n  }\n  /**\n   * Lists all vertex attribute semantics associated with the primitive, excluding any semantics\n   * used for morph targets. For example, `['POSITION', 'NORMAL', 'TEXCOORD_0']`. Order will be\n   * consistent with the order returned by {@link .listAttributes}().\n   */\n  listSemantics() {\n    return this.listRefMapKeys('attributes');\n  }\n  /** Returns the material used to render the primitive. */\n  getMaterial() {\n    return this.getRef('material');\n  }\n  /** Sets the material used to render the primitive. */\n  setMaterial(material) {\n    return this.setRef('material', material);\n  }\n  /**********************************************************************************************\n   * Mode.\n   */\n  /**\n   * Returns the GPU draw mode (`TRIANGLES`, `LINES`, `POINTS`...) as a WebGL enum value.\n   *\n   * Reference:\n   * - [glTF  `primitive.mode`](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#primitivemode)\n   */\n  getMode() {\n    return this.get('mode');\n  }\n  /**\n   * Sets the GPU draw mode (`TRIANGLES`, `LINES`, `POINTS`...) as a WebGL enum value.\n   *\n   * Reference:\n   * - [glTF  `primitive.mode`](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#primitivemode)\n   */\n  setMode(mode) {\n    return this.set('mode', mode);\n  }\n  /**********************************************************************************************\n   * Morph targets.\n   */\n  /** Lists all morph targets associated with the primitive. */\n  listTargets() {\n    return this.listRefs('targets');\n  }\n  /**\n   * Adds a morph target to the primitive. All primitives in the same mesh must have the same\n   * number of targets.\n   */\n  addTarget(target) {\n    return this.addRef('targets', target);\n  }\n  /**\n   * Removes a morph target from the primitive. All primitives in the same mesh must have the same\n   * number of targets.\n   */\n  removeTarget(target) {\n    return this.removeRef('targets', target);\n  }\n}\n/**********************************************************************************************\n * Constants.\n */\n/** Type of primitives to render. All valid values correspond to WebGL enums. */\nPrimitive.Mode = {\n  /** Draw single points. */\n  POINTS: 0,\n  /** Draw lines. Each vertex connects to the one after it. */\n  LINES: 1,\n  /**\n   * Draw lines. Each set of two vertices is treated as a separate line segment.\n   * @deprecated See {@link https://github.com/KhronosGroup/glTF/issues/1883 KhronosGroup/glTF#1883}.\n   */\n  LINE_LOOP: 2,\n  /** Draw a connected group of line segments from the first vertex to the last,  */\n  LINE_STRIP: 3,\n  /** Draw triangles. Each set of three vertices creates a separate triangle. */\n  TRIANGLES: 4,\n  /** Draw a connected strip of triangles. */\n  TRIANGLE_STRIP: 5,\n  /**\n   * Draw a connected group of triangles. Each vertex connects to the previous and the first\n   * vertex in the fan.\n   * @deprecated See {@link https://github.com/KhronosGroup/glTF/issues/1883 KhronosGroup/glTF#1883}.\n   */\n  TRIANGLE_FAN: 6\n};\n\n/**\n * *Morph target or shape key used to deform one {@link Primitive} in a {@link Mesh}.*\n *\n * A PrimitiveTarget contains a `POSITION` attribute (and optionally `NORMAL` and `TANGENT`) that\n * can additively deform the base attributes on a {@link Mesh} {@link Primitive}. Vertex values\n * of `0, 0, 0` in the target will have no effect, whereas a value of `0, 1, 0` would offset that\n * vertex in the base geometry by y+=1. Morph targets can be fully or partially applied: their\n * default state is controlled by {@link Mesh.getWeights}, which can also be overridden for a\n * particular instantiation of a {@link Mesh}, using {@link Node.getWeights}.\n *\n * Reference:\n * - [glTF  Morph Targets](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#morph-targets)\n *\n * @category Properties\n */\nclass PrimitiveTarget extends Property {\n  init() {\n    this.propertyType = PropertyType.PRIMITIVE_TARGET;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      attributes: new RefMap()\n    });\n  }\n  /** Returns a morph target vertex attribute as an {@link Accessor}. */\n  getAttribute(semantic) {\n    return this.getRefMap('attributes', semantic);\n  }\n  /**\n   * Sets a morph target vertex attribute to an {@link Accessor}.\n   */\n  setAttribute(semantic, accessor) {\n    return this.setRefMap('attributes', semantic, accessor, {\n      usage: BufferViewUsage$1.ARRAY_BUFFER\n    });\n  }\n  /**\n   * Lists all morph target vertex attribute {@link Accessor}s associated. Order will be\n   * consistent with the order returned by {@link .listSemantics}().\n   */\n  listAttributes() {\n    return this.listRefMapValues('attributes');\n  }\n  /**\n   * Lists all morph target vertex attribute semantics associated. Order will be\n   * consistent with the order returned by {@link .listAttributes}().\n   */\n  listSemantics() {\n    return this.listRefMapKeys('attributes');\n  }\n}\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\n/**\n * *Scenes represent a set of visual objects to render.*\n *\n * Typically a glTF file contains only a single Scene, although more are allowed and useful in some\n * cases. No particular meaning is associated with additional Scenes, except as defined by the\n * application. Scenes reference {@link Node}s, and a single Node cannot be a member of more than\n * one Scene.\n *\n * References:\n * - [glTF  Scenes](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#scenes)\n * - [glTF  Coordinate System and Units](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#coordinate-system-and-units)\n *\n * @category Properties\n */\nclass Scene extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.SCENE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      children: new RefSet()\n    });\n  }\n  copy(other, resolve = COPY_IDENTITY) {\n    // Scene cannot be copied, only cloned. Copying is shallow, but nodes cannot have more than\n    // one parent. Rather than leaving one of the two Scenes without children, throw an error here.\n    if (resolve === COPY_IDENTITY) throw new Error('Scene cannot be copied.');\n    return super.copy(other, resolve);\n  }\n  /**\n   * Adds a {@link Node} to the Scene.\n   *\n   * Requirements:\n   *\n   * 1. Nodes MAY be root children of multiple {@link Scene Scenes}\n   * 2. Nodes MUST NOT be children of >1 Node\n   * 3. Nodes MUST NOT be children of both Nodes and {@link Scene Scenes}\n   *\n   * The `addChild` method enforces these restrictions automatically, and will\n   * remove the new child from previous parents where needed. This behavior\n   * may change in future major releases of the library.\n   */\n  addChild(node) {\n    // Remove existing parent.\n    const parentNode = node.getParentNode();\n    if (parentNode) parentNode.removeChild(node);\n    return this.addRef('children', node);\n  }\n  /** Removes a {@link Node} from the Scene. */\n  removeChild(node) {\n    return this.removeRef('children', node);\n  }\n  /**\n   * Lists all direct child {@link Node Nodes} in the Scene. Indirect\n   * descendants (children of children) are not returned, but may be\n   * reached recursively or with {@link Scene.traverse} instead.\n   */\n  listChildren() {\n    return this.listRefs('children');\n  }\n  /** Visits each {@link Node} in the Scene, including descendants, top-down. */\n  traverse(fn) {\n    for (const node of this.listChildren()) node.traverse(fn);\n    return this;\n  }\n}\n\n/**\n * *Collection of {@link Node} joints and inverse bind matrices used with skinned {@link Mesh}\n * instances.*\n *\n * Reference\n * - [glTF  Skins](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#skins)\n *\n * @category Properties\n */\nclass Skin extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.SKIN;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      skeleton: null,\n      inverseBindMatrices: null,\n      joints: new RefSet()\n    });\n  }\n  /**\n   * {@link Node} used as a skeleton root. The node must be the closest common root of the joints\n   * hierarchy or a direct or indirect parent node of the closest common root.\n   */\n  getSkeleton() {\n    return this.getRef('skeleton');\n  }\n  /**\n   * {@link Node} used as a skeleton root. The node must be the closest common root of the joints\n   * hierarchy or a direct or indirect parent node of the closest common root.\n   */\n  setSkeleton(skeleton) {\n    return this.setRef('skeleton', skeleton);\n  }\n  /**\n   * {@link Accessor} containing the floating-point 4x4 inverse-bind matrices. The default is\n   * that each matrix is a 4x4 identity matrix, which implies that inverse-bind matrices were\n   * pre-applied.\n   */\n  getInverseBindMatrices() {\n    return this.getRef('inverseBindMatrices');\n  }\n  /**\n   * {@link Accessor} containing the floating-point 4x4 inverse-bind matrices. The default is\n   * that each matrix is a 4x4 identity matrix, which implies that inverse-bind matrices were\n   * pre-applied.\n   */\n  setInverseBindMatrices(inverseBindMatrices) {\n    return this.setRef('inverseBindMatrices', inverseBindMatrices, {\n      usage: BufferViewUsage$1.INVERSE_BIND_MATRICES\n    });\n  }\n  /** Adds a joint {@link Node} to this {@link Skin}. */\n  addJoint(joint) {\n    return this.addRef('joints', joint);\n  }\n  /** Removes a joint {@link Node} from this {@link Skin}. */\n  removeJoint(joint) {\n    return this.removeRef('joints', joint);\n  }\n  /** Lists joints ({@link Node}s used as joints or bones) in this {@link Skin}. */\n  listJoints() {\n    return this.listRefs('joints');\n  }\n}\n\n/**\n * *Texture, or images, referenced by {@link Material} properties.*\n *\n * Textures in glTF Transform are a combination of glTF's `texture` and `image` properties, and\n * should be unique within a document, such that no other texture contains the same\n * {@link Texture.getImage getImage()} data. Where duplicates may already exist, the `dedup({textures: true})`\n * transform can remove them. A {@link Document} with N texture properties will be exported to a\n * glTF file with N `image` properties, and the minimum number of `texture` properties necessary\n * for the materials that use it.\n *\n * For properties associated with a particular _use_ of a texture, see {@link TextureInfo}.\n *\n * Reference:\n * - [glTF  Textures](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#textures)\n * - [glTF  Images](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#images)\n *\n * @category Properties\n */\nclass Texture extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.TEXTURE;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      image: null,\n      mimeType: '',\n      uri: ''\n    });\n  }\n  /**********************************************************************************************\n   * MIME type / format.\n   */\n  /** Returns the MIME type for this texture ('image/jpeg' or 'image/png'). */\n  getMimeType() {\n    return this.get('mimeType') || ImageUtils.extensionToMimeType(FileUtils.extension(this.get('uri')));\n  }\n  /**\n   * Sets the MIME type for this texture ('image/jpeg' or 'image/png'). If the texture does not\n   * have a URI, a MIME type is required for correct export.\n   */\n  setMimeType(mimeType) {\n    return this.set('mimeType', mimeType);\n  }\n  /**********************************************************************************************\n   * URI / filename.\n   */\n  /** Returns the URI (e.g. 'path/to/file.png') for this texture. */\n  getURI() {\n    return this.get('uri');\n  }\n  /**\n   * Sets the URI (e.g. 'path/to/file.png') for this texture. If the texture does not have a MIME\n   * type, a URI is required for correct export.\n   */\n  setURI(uri) {\n    this.set('uri', uri);\n    const mimeType = ImageUtils.extensionToMimeType(FileUtils.extension(uri));\n    if (mimeType) this.set('mimeType', mimeType);\n    return this;\n  }\n  /**********************************************************************************************\n   * Image data.\n   */\n  /** Returns the raw image data for this texture. */\n  getImage() {\n    return this.get('image');\n  }\n  /** Sets the raw image data for this texture. */\n  setImage(image) {\n    return this.set('image', BufferUtils.assertView(image));\n  }\n  /** Returns the size, in pixels, of this texture. */\n  getSize() {\n    const image = this.get('image');\n    if (!image) return null;\n    return ImageUtils.getSize(image, this.getMimeType());\n  }\n}\n\n/**\n * *Root property of a glTF asset.*\n *\n * Any properties to be exported with a particular asset must be referenced (directly or\n * indirectly) by the root. Metadata about the asset's license, generator, and glTF specification\n * version are stored in the asset, accessible with {@link Root.getAsset}.\n *\n * Properties are added to the root with factory methods on its {@link Document}, and removed by\n * calling {@link Property.dispose}() on the resource. Any properties that have been created but\n * not disposed will be included when calling the various `root.list*()` methods.\n *\n * A document's root cannot be removed, and no other root may be created. Unlike other\n * {@link Property} types, the `.dispose()`, `.detach()` methods have no useful function on a\n * Root property.\n *\n * Usage:\n *\n * ```ts\n * const root = document.getRoot();\n * const scene = document.createScene('myScene');\n * const node = document.createNode('myNode');\n * scene.addChild(node);\n *\n * console.log(root.listScenes()); //  [scene x 1]\n * ```\n *\n * Reference: [glTF  Concepts](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#concepts)\n *\n * @category Properties\n */\nclass Root extends ExtensibleProperty {\n  init() {\n    this.propertyType = PropertyType.ROOT;\n  }\n  getDefaults() {\n    return Object.assign(super.getDefaults(), {\n      asset: {\n        generator: `glTF-Transform ${VERSION}`,\n        version: '2.0'\n      },\n      defaultScene: null,\n      accessors: new RefSet(),\n      animations: new RefSet(),\n      buffers: new RefSet(),\n      cameras: new RefSet(),\n      materials: new RefSet(),\n      meshes: new RefSet(),\n      nodes: new RefSet(),\n      scenes: new RefSet(),\n      skins: new RefSet(),\n      textures: new RefSet()\n    });\n  }\n  /** @internal */\n  constructor(graph) {\n    super(graph);\n    this._extensions = new Set();\n    graph.addEventListener('node:create', event => {\n      this._addChildOfRoot(event.target);\n    });\n  }\n  clone() {\n    throw new Error('Root cannot be cloned.');\n  }\n  copy(other, resolve = COPY_IDENTITY) {\n    // Root cannot be cloned in isolation: only with its Document. Extensions are managed by\n    // the Document during cloning. The Root, and only the Root, should keep existing\n    // references while copying to avoid overwriting during a merge.\n    if (resolve === COPY_IDENTITY) throw new Error('Root cannot be copied.');\n    // IMPORTANT: Root cannot call super.copy(), which removes existing references.\n    this.set('asset', _extends({}, other.get('asset')));\n    this.setName(other.getName());\n    this.setExtras(_extends({}, other.getExtras()));\n    this.setDefaultScene(other.getDefaultScene() ? resolve(other.getDefaultScene()) : null);\n    for (const extensionName of other.listRefMapKeys('extensions')) {\n      const otherExtension = other.getExtension(extensionName);\n      this.setExtension(extensionName, resolve(otherExtension));\n    }\n    return this;\n  }\n  _addChildOfRoot(child) {\n    if (child instanceof Scene) {\n      this.addRef('scenes', child);\n    } else if (child instanceof Node) {\n      this.addRef('nodes', child);\n    } else if (child instanceof Camera) {\n      this.addRef('cameras', child);\n    } else if (child instanceof Skin) {\n      this.addRef('skins', child);\n    } else if (child instanceof Mesh) {\n      this.addRef('meshes', child);\n    } else if (child instanceof Material) {\n      this.addRef('materials', child);\n    } else if (child instanceof Texture) {\n      this.addRef('textures', child);\n    } else if (child instanceof Animation) {\n      this.addRef('animations', child);\n    } else if (child instanceof Accessor) {\n      this.addRef('accessors', child);\n    } else if (child instanceof Buffer$1) {\n      this.addRef('buffers', child);\n    }\n    // No error for untracked property types.\n    return this;\n  }\n  /**\n   * Returns the `asset` object, which specifies the target glTF version of the asset. Additional\n   * metadata can be stored in optional properties such as `generator` or `copyright`.\n   *\n   * Reference: [glTF  Asset](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#asset)\n   */\n  getAsset() {\n    return this.get('asset');\n  }\n  /**********************************************************************************************\n   * Extensions.\n   */\n  /** Lists all {@link Extension Extensions} enabled for this root. */\n  listExtensionsUsed() {\n    return Array.from(this._extensions);\n  }\n  /** Lists all {@link Extension Extensions} enabled and required for this root. */\n  listExtensionsRequired() {\n    return this.listExtensionsUsed().filter(extension => extension.isRequired());\n  }\n  /** @internal */\n  _enableExtension(extension) {\n    this._extensions.add(extension);\n    return this;\n  }\n  /** @internal */\n  _disableExtension(extension) {\n    this._extensions.delete(extension);\n    return this;\n  }\n  /**********************************************************************************************\n   * Properties.\n   */\n  /** Lists all {@link Scene} properties associated with this root. */\n  listScenes() {\n    return this.listRefs('scenes');\n  }\n  /** Default {@link Scene} associated with this root. */\n  setDefaultScene(defaultScene) {\n    return this.setRef('defaultScene', defaultScene);\n  }\n  /** Default {@link Scene} associated with this root. */\n  getDefaultScene() {\n    return this.getRef('defaultScene');\n  }\n  /** Lists all {@link Node} properties associated with this root. */\n  listNodes() {\n    return this.listRefs('nodes');\n  }\n  /** Lists all {@link Camera} properties associated with this root. */\n  listCameras() {\n    return this.listRefs('cameras');\n  }\n  /** Lists all {@link Skin} properties associated with this root. */\n  listSkins() {\n    return this.listRefs('skins');\n  }\n  /** Lists all {@link Mesh} properties associated with this root. */\n  listMeshes() {\n    return this.listRefs('meshes');\n  }\n  /** Lists all {@link Material} properties associated with this root. */\n  listMaterials() {\n    return this.listRefs('materials');\n  }\n  /** Lists all {@link Texture} properties associated with this root. */\n  listTextures() {\n    return this.listRefs('textures');\n  }\n  /** Lists all {@link Animation} properties associated with this root. */\n  listAnimations() {\n    return this.listRefs('animations');\n  }\n  /** Lists all {@link Accessor} properties associated with this root. */\n  listAccessors() {\n    return this.listRefs('accessors');\n  }\n  /** Lists all {@link Buffer} properties associated with this root. */\n  listBuffers() {\n    return this.listRefs('buffers');\n  }\n}\n\n/**\n * *Wraps a glTF asset and its resources for easier modification.*\n *\n * Documents manage glTF assets and the relationships among dependencies. The document wrapper\n * allow tools to read and write changes without dealing with array indices or byte offsets, which\n * would otherwise require careful management over the course of a file modification. An internal\n * graph structure allows any property in the glTF file to maintain references to its dependencies,\n * and makes it easy to determine where a particular property dependency is being used. For\n * example, finding a list of materials that use a particular texture is as simple as calling\n * {@link Texture.listParents}().\n *\n * A new resource {@link Property} (e.g. a {@link Mesh} or {@link Material}) is created by calling\n * 'create' methods on the document. Resources are destroyed by calling {@link Property.dispose}().\n *\n * ```ts\n * import fs from 'fs/promises';\n * import { Document } from '@gltf-transform/core';\n * import { dedup } from '@gltf-transform/functions';\n *\n * const document = new Document();\n *\n * const texture1 = document.createTexture('myTexture')\n * \t.setImage(await fs.readFile('path/to/image.png'))\n * \t.setMimeType('image/png');\n * const texture2 = document.createTexture('myTexture2')\n * \t.setImage(await fs.readFile('path/to/image2.png'))\n * \t.setMimeType('image/png');\n *\n * // Document containing duplicate copies of the same texture.\n * document.getRoot().listTextures(); //  [texture x 2]\n *\n * await document.transform(\n * \tdedup({textures: true}),\n * \t// ...\n * );\n *\n * // Document with duplicate textures removed.\n * document.getRoot().listTextures(); //  [texture x 1]\n * ```\n *\n * Reference:\n * - [glTF  Basics](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#gltf-basics)\n * - [glTF  Concepts](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#concepts)\n *\n * @category Documents\n */\nclass Document {\n  /**\n   * Returns the Document associated with a given Graph, if any.\n   * @hidden\n   * @experimental\n   */\n  static fromGraph(graph) {\n    return Document._GRAPH_DOCUMENTS.get(graph) || null;\n  }\n  /** Creates a new Document, representing an empty glTF asset. */\n  constructor() {\n    this._graph = new Graph();\n    this._root = new Root(this._graph);\n    this._logger = Logger.DEFAULT_INSTANCE;\n    Document._GRAPH_DOCUMENTS.set(this._graph, this);\n  }\n  /** Returns the glTF {@link Root} property. */\n  getRoot() {\n    return this._root;\n  }\n  /**\n   * Returns the {@link Graph} representing connectivity of resources within this document.\n   * @hidden\n   */\n  getGraph() {\n    return this._graph;\n  }\n  /** Returns the {@link Logger} instance used for any operations performed on this document. */\n  getLogger() {\n    return this._logger;\n  }\n  /**\n   * Overrides the {@link Logger} instance used for any operations performed on this document.\n   *\n   * Usage:\n   *\n   * ```ts\n   * doc\n   * \t.setLogger(new Logger(Logger.Verbosity.SILENT))\n   * \t.transform(dedup(), weld());\n   * ```\n   */\n  setLogger(logger) {\n    this._logger = logger;\n    return this;\n  }\n  /**\n   * Clones this Document, copying all resources within it.\n   * @deprecated Use 'cloneDocument(document)' from '@gltf-transform/functions'.\n   * @hidden\n   * @internal\n   */\n  clone() {\n    throw new Error(`Use 'cloneDocument(source)' from '@gltf-transform/functions'.`);\n  }\n  /**\n   * Merges the content of another Document into this one, without affecting the original.\n   * @deprecated Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.\n   * @hidden\n   * @internal\n   */\n  merge(_other) {\n    throw new Error(`Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.`);\n  }\n  /**\n   * Applies a series of modifications to this document. Each transformation is asynchronous,\n   * takes the {@link Document} as input, and returns nothing. Transforms are applied in the\n   * order given, which may affect the final result.\n   *\n   * Usage:\n   *\n   * ```ts\n   * await doc.transform(\n   * \tdedup(),\n   * \tprune()\n   * );\n   * ```\n   *\n   * @param transforms List of synchronous transformation functions to apply.\n   */\n  async transform(...transforms) {\n    const stack = transforms.map(fn => fn.name);\n    for (const transform of transforms) {\n      await transform(this, {\n        stack\n      });\n    }\n    return this;\n  }\n  /**********************************************************************************************\n   * Extension factory method.\n   */\n  /**\n   * Creates a new {@link Extension}, for the extension type of the given constructor. If the\n   * extension is already enabled for this Document, the previous Extension reference is reused.\n   */\n  createExtension(ctor) {\n    const extensionName = ctor.EXTENSION_NAME;\n    const prevExtension = this.getRoot().listExtensionsUsed().find(ext => ext.extensionName === extensionName);\n    return prevExtension || new ctor(this);\n  }\n  /**********************************************************************************************\n   * Property factory methods.\n   */\n  /** Creates a new {@link Scene} attached to this document's {@link Root}. */\n  createScene(name = '') {\n    return new Scene(this._graph, name);\n  }\n  /** Creates a new {@link Node} attached to this document's {@link Root}. */\n  createNode(name = '') {\n    return new Node(this._graph, name);\n  }\n  /** Creates a new {@link Camera} attached to this document's {@link Root}. */\n  createCamera(name = '') {\n    return new Camera(this._graph, name);\n  }\n  /** Creates a new {@link Skin} attached to this document's {@link Root}. */\n  createSkin(name = '') {\n    return new Skin(this._graph, name);\n  }\n  /** Creates a new {@link Mesh} attached to this document's {@link Root}. */\n  createMesh(name = '') {\n    return new Mesh(this._graph, name);\n  }\n  /**\n   * Creates a new {@link Primitive}. Primitives must be attached to a {@link Mesh}\n   * for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createPrimitive() {\n    return new Primitive(this._graph);\n  }\n  /**\n   * Creates a new {@link PrimitiveTarget}, or morph target. Targets must be attached to a\n   * {@link Primitive} for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createPrimitiveTarget(name = '') {\n    return new PrimitiveTarget(this._graph, name);\n  }\n  /** Creates a new {@link Material} attached to this document's {@link Root}. */\n  createMaterial(name = '') {\n    return new Material(this._graph, name);\n  }\n  /** Creates a new {@link Texture} attached to this document's {@link Root}. */\n  createTexture(name = '') {\n    return new Texture(this._graph, name);\n  }\n  /** Creates a new {@link Animation} attached to this document's {@link Root}. */\n  createAnimation(name = '') {\n    return new Animation(this._graph, name);\n  }\n  /**\n   * Creates a new {@link AnimationChannel}. Channels must be attached to an {@link Animation}\n   * for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createAnimationChannel(name = '') {\n    return new AnimationChannel(this._graph, name);\n  }\n  /**\n   * Creates a new {@link AnimationSampler}. Samplers must be attached to an {@link Animation}\n   * for use and export; they are not otherwise associated with a {@link Root}.\n   */\n  createAnimationSampler(name = '') {\n    return new AnimationSampler(this._graph, name);\n  }\n  /** Creates a new {@link Accessor} attached to this document's {@link Root}. */\n  createAccessor(name = '', buffer = null) {\n    if (!buffer) {\n      buffer = this.getRoot().listBuffers()[0];\n    }\n    return new Accessor(this._graph, name).setBuffer(buffer);\n  }\n  /** Creates a new {@link Buffer} attached to this document's {@link Root}. */\n  createBuffer(name = '') {\n    return new Buffer$1(this._graph, name);\n  }\n}\n/**\n * Enables lookup of a Document from its Graph. For internal use, only.\n * @internal\n * @experimental\n */\nDocument._GRAPH_DOCUMENTS = new WeakMap();\n\n/**\n * *Base class for all Extensions.*\n *\n * Extensions enhance a glTF {@link Document} with additional features and schema, beyond the core\n * glTF specification. Common extensions may be imported from the `@gltf-transform/extensions`\n * package, or custom extensions may be created by extending this base class.\n *\n * An extension is added to a Document by calling {@link Document.createExtension} with the\n * extension constructor. The extension object may then be used to construct\n * {@link ExtensionProperty} instances, which are attached to properties throughout the Document\n * as prescribed by the extension itself.\n *\n * For more information on available extensions and their usage, see [Extensions](/extensions).\n *\n * Reference:\n * - [glTF  Extensions](https://github.com/KhronosGroup/gltf/blob/main/specification/2.0/README.md#specifying-extensions)\n * - [glTF Extension Registry](https://github.com/KhronosGroup/gltf/blob/main/extensions)\n *\n * @category Extensions\n */\nclass Extension {\n  /** @hidden */\n  constructor(document) {\n    /** Official name of the extension. */\n    this.extensionName = '';\n    /**\n     * Before reading, extension should be called for these {@link Property} types. *Most\n     * extensions don't need to implement this.*\n     * @hidden\n     */\n    this.prereadTypes = [];\n    /**\n     * Before writing, extension should be called for these {@link Property} types. *Most\n     * extensions don't need to implement this.*\n     * @hidden\n     */\n    this.prewriteTypes = [];\n    /** @hidden Dependency IDs needed to read this extension, to be installed before I/O. */\n    this.readDependencies = [];\n    /** @hidden Dependency IDs needed to write this extension, to be installed before I/O. */\n    this.writeDependencies = [];\n    /** @hidden */\n    this.document = void 0;\n    /** @hidden */\n    this.required = false;\n    /** @hidden */\n    this.properties = new Set();\n    /** @hidden */\n    this._listener = void 0;\n    this.document = document;\n    document.getRoot()._enableExtension(this);\n    this._listener = _event => {\n      const event = _event;\n      const target = event.target;\n      if (target instanceof ExtensionProperty && target.extensionName === this.extensionName) {\n        if (event.type === 'node:create') this._addExtensionProperty(target);\n        if (event.type === 'node:dispose') this._removeExtensionProperty(target);\n      }\n    };\n    const graph = document.getGraph();\n    graph.addEventListener('node:create', this._listener);\n    graph.addEventListener('node:dispose', this._listener);\n  }\n  /** Disables and removes the extension from the Document. */\n  dispose() {\n    this.document.getRoot()._disableExtension(this);\n    const graph = this.document.getGraph();\n    graph.removeEventListener('node:create', this._listener);\n    graph.removeEventListener('node:dispose', this._listener);\n    for (const property of this.properties) {\n      property.dispose();\n    }\n  }\n  /** @hidden Performs first-time setup for the extension. Must be idempotent. */\n  static register() {}\n  /**\n   * Indicates to the client whether it is OK to load the asset when this extension is not\n   * recognized. Optional extensions are generally preferred, if there is not a good reason\n   * to require a client to completely fail when an extension isn't known.\n   */\n  isRequired() {\n    return this.required;\n  }\n  /**\n   * Indicates to the client whether it is OK to load the asset when this extension is not\n   * recognized. Optional extensions are generally preferred, if there is not a good reason\n   * to require a client to completely fail when an extension isn't known.\n   */\n  setRequired(required) {\n    this.required = required;\n    return this;\n  }\n  /**\n   * Lists all {@link ExtensionProperty} instances associated with, or created by, this\n   * extension. Includes only instances that are attached to the Document's graph; detached\n   * instances will be excluded.\n   */\n  listProperties() {\n    return Array.from(this.properties);\n  }\n  /**********************************************************************************************\n   * ExtensionProperty management.\n   */\n  /** @internal */\n  _addExtensionProperty(property) {\n    this.properties.add(property);\n    return this;\n  }\n  /** @internal */\n  _removeExtensionProperty(property) {\n    this.properties.delete(property);\n    return this;\n  }\n  /**********************************************************************************************\n   * I/O implementation.\n   */\n  /** @hidden Installs dependencies required by the extension. */\n  install(_key, _dependency) {\n    return this;\n  }\n  /**\n   * Used by the {@link PlatformIO} utilities when reading a glTF asset. This method may\n   * optionally be implemented by an extension, and should then support any property type\n   * declared by the Extension's {@link Extension.prereadTypes} list. The Extension will\n   * be given a ReaderContext instance, and is expected to update either the context or its\n   * {@link JSONDocument} with resources known to the Extension. *Most extensions don't need to\n   * implement this.*\n   * @hidden\n   */\n  preread(_readerContext, _propertyType) {\n    return this;\n  }\n  /**\n   * Used by the {@link PlatformIO} utilities when writing a glTF asset. This method may\n   * optionally be implemented by an extension, and should then support any property type\n   * declared by the Extension's {@link Extension.prewriteTypes} list. The Extension will\n   * be given a WriterContext instance, and is expected to update either the context or its\n   * {@link JSONDocument} with resources known to the Extension. *Most extensions don't need to\n   * implement this.*\n   * @hidden\n   */\n  prewrite(_writerContext, _propertyType) {\n    return this;\n  }\n}\n/** Official name of the extension. */\nExtension.EXTENSION_NAME = void 0;\n\n/**\n * Model class providing glTF Transform objects representing each definition in the glTF file, used\n * by a {@link GLTFReader} and its {@link Extension} implementations. Indices of all properties will be\n * consistent with the glTF file.\n *\n * @hidden\n */\nclass ReaderContext {\n  constructor(jsonDoc) {\n    this.jsonDoc = void 0;\n    this.buffers = [];\n    this.bufferViews = [];\n    this.bufferViewBuffers = [];\n    this.accessors = [];\n    this.textures = [];\n    this.textureInfos = new Map();\n    this.materials = [];\n    this.meshes = [];\n    this.cameras = [];\n    this.nodes = [];\n    this.skins = [];\n    this.animations = [];\n    this.scenes = [];\n    this.jsonDoc = jsonDoc;\n  }\n  setTextureInfo(textureInfo, textureInfoDef) {\n    this.textureInfos.set(textureInfo, textureInfoDef);\n    if (textureInfoDef.texCoord !== undefined) {\n      textureInfo.setTexCoord(textureInfoDef.texCoord);\n    }\n    if (textureInfoDef.extras !== undefined) {\n      textureInfo.setExtras(textureInfoDef.extras);\n    }\n    const textureDef = this.jsonDoc.json.textures[textureInfoDef.index];\n    if (textureDef.sampler === undefined) return;\n    const samplerDef = this.jsonDoc.json.samplers[textureDef.sampler];\n    if (samplerDef.magFilter !== undefined) {\n      textureInfo.setMagFilter(samplerDef.magFilter);\n    }\n    if (samplerDef.minFilter !== undefined) {\n      textureInfo.setMinFilter(samplerDef.minFilter);\n    }\n    if (samplerDef.wrapS !== undefined) {\n      textureInfo.setWrapS(samplerDef.wrapS);\n    }\n    if (samplerDef.wrapT !== undefined) {\n      textureInfo.setWrapT(samplerDef.wrapT);\n    }\n  }\n}\n\nconst DEFAULT_OPTIONS = {\n  logger: Logger.DEFAULT_INSTANCE,\n  extensions: [],\n  dependencies: {}\n};\nconst SUPPORTED_PREREAD_TYPES = new Set([PropertyType.BUFFER, PropertyType.TEXTURE, PropertyType.MATERIAL, PropertyType.MESH, PropertyType.PRIMITIVE, PropertyType.NODE, PropertyType.SCENE]);\n/** @internal */\nclass GLTFReader {\n  static read(jsonDoc, _options = DEFAULT_OPTIONS) {\n    const options = _extends({}, DEFAULT_OPTIONS, _options);\n    const {\n      json\n    } = jsonDoc;\n    const document = new Document().setLogger(options.logger);\n    this.validate(jsonDoc, options);\n    /* Reader context. */\n    const context = new ReaderContext(jsonDoc);\n    /** Asset. */\n    const assetDef = json.asset;\n    const asset = document.getRoot().getAsset();\n    if (assetDef.copyright) asset.copyright = assetDef.copyright;\n    if (assetDef.extras) asset.extras = assetDef.extras;\n    if (json.extras !== undefined) {\n      document.getRoot().setExtras(_extends({}, json.extras));\n    }\n    /** Extensions (1/2). */\n    const extensionsUsed = json.extensionsUsed || [];\n    const extensionsRequired = json.extensionsRequired || [];\n    options.extensions.sort((a, b) => a.EXTENSION_NAME > b.EXTENSION_NAME ? 1 : -1);\n    for (const Extension of options.extensions) {\n      if (extensionsUsed.includes(Extension.EXTENSION_NAME)) {\n        // Create extension.\n        const extension = document.createExtension(Extension).setRequired(extensionsRequired.includes(Extension.EXTENSION_NAME));\n        // Warn on unsupported preread hooks.\n        const unsupportedHooks = extension.prereadTypes.filter(type => !SUPPORTED_PREREAD_TYPES.has(type));\n        if (unsupportedHooks.length) {\n          options.logger.warn(`Preread hooks for some types (${unsupportedHooks.join()}), requested by extension ` + `${extension.extensionName}, are unsupported. Please file an issue or a PR.`);\n        }\n        // Install dependencies.\n        for (const key of extension.readDependencies) {\n          extension.install(key, options.dependencies[key]);\n        }\n      }\n    }\n    /** Buffers. */\n    const bufferDefs = json.buffers || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.BUFFER)).forEach(extension => extension.preread(context, PropertyType.BUFFER));\n    context.buffers = bufferDefs.map(bufferDef => {\n      const buffer = document.createBuffer(bufferDef.name);\n      if (bufferDef.extras) buffer.setExtras(bufferDef.extras);\n      if (bufferDef.uri && bufferDef.uri.indexOf('__') !== 0) {\n        buffer.setURI(bufferDef.uri);\n      }\n      return buffer;\n    });\n    /** Buffer views. */\n    const bufferViewDefs = json.bufferViews || [];\n    context.bufferViewBuffers = bufferViewDefs.map((bufferViewDef, index) => {\n      if (!context.bufferViews[index]) {\n        const bufferDef = jsonDoc.json.buffers[bufferViewDef.buffer];\n        const resource = bufferDef.uri ? jsonDoc.resources[bufferDef.uri] : jsonDoc.resources[GLB_BUFFER];\n        const byteOffset = bufferViewDef.byteOffset || 0;\n        context.bufferViews[index] = BufferUtils.toView(resource, byteOffset, bufferViewDef.byteLength);\n      }\n      return context.buffers[bufferViewDef.buffer];\n    });\n    /** Accessors. */\n    // Accessor .count and .componentType properties are inferred dynamically.\n    const accessorDefs = json.accessors || [];\n    context.accessors = accessorDefs.map(accessorDef => {\n      const buffer = context.bufferViewBuffers[accessorDef.bufferView];\n      const accessor = document.createAccessor(accessorDef.name, buffer).setType(accessorDef.type);\n      if (accessorDef.extras) accessor.setExtras(accessorDef.extras);\n      if (accessorDef.normalized !== undefined) {\n        accessor.setNormalized(accessorDef.normalized);\n      }\n      // Sparse accessors, KHR_draco_mesh_compression, and EXT_meshopt_compression.\n      if (accessorDef.bufferView === undefined) return accessor;\n      // NOTICE: We mark sparse accessors at the end of the I/O reading process. Consider an\n      // accessor to be 'sparse' if it (A) includes sparse value overrides, or (B) does not\n      // define .bufferView _and_ no extension provides that data.\n      accessor.setArray(getAccessorArray(accessorDef, context));\n      return accessor;\n    });\n    /** Textures. */\n    // glTF Transform's \"Texture\" properties correspond 1:1 with glTF \"Image\" properties, and\n    // with image files. The glTF file may contain more one texture per image, where images\n    // are reused with different sampler properties.\n    const imageDefs = json.images || [];\n    const textureDefs = json.textures || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.TEXTURE)).forEach(extension => extension.preread(context, PropertyType.TEXTURE));\n    context.textures = imageDefs.map(imageDef => {\n      const texture = document.createTexture(imageDef.name);\n      // glTF Image corresponds 1:1 with glTF Transform Texture. See `writer.ts`.\n      if (imageDef.extras) texture.setExtras(imageDef.extras);\n      if (imageDef.bufferView !== undefined) {\n        const bufferViewDef = json.bufferViews[imageDef.bufferView];\n        const bufferDef = jsonDoc.json.buffers[bufferViewDef.buffer];\n        const bufferData = bufferDef.uri ? jsonDoc.resources[bufferDef.uri] : jsonDoc.resources[GLB_BUFFER];\n        const byteOffset = bufferViewDef.byteOffset || 0;\n        const byteLength = bufferViewDef.byteLength;\n        const imageData = bufferData.slice(byteOffset, byteOffset + byteLength);\n        texture.setImage(imageData);\n      } else if (imageDef.uri !== undefined) {\n        texture.setImage(jsonDoc.resources[imageDef.uri]);\n        if (imageDef.uri.indexOf('__') !== 0) {\n          texture.setURI(imageDef.uri);\n        }\n      }\n      if (imageDef.mimeType !== undefined) {\n        texture.setMimeType(imageDef.mimeType);\n      } else if (imageDef.uri) {\n        const extension = FileUtils.extension(imageDef.uri);\n        texture.setMimeType(ImageUtils.extensionToMimeType(extension));\n      }\n      return texture;\n    });\n    /** Materials. */\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.MATERIAL)).forEach(extension => extension.preread(context, PropertyType.MATERIAL));\n    const materialDefs = json.materials || [];\n    context.materials = materialDefs.map(materialDef => {\n      const material = document.createMaterial(materialDef.name);\n      if (materialDef.extras) material.setExtras(materialDef.extras);\n      // Program state & blending.\n      if (materialDef.alphaMode !== undefined) {\n        material.setAlphaMode(materialDef.alphaMode);\n      }\n      if (materialDef.alphaCutoff !== undefined) {\n        material.setAlphaCutoff(materialDef.alphaCutoff);\n      }\n      if (materialDef.doubleSided !== undefined) {\n        material.setDoubleSided(materialDef.doubleSided);\n      }\n      // Factors.\n      const pbrDef = materialDef.pbrMetallicRoughness || {};\n      if (pbrDef.baseColorFactor !== undefined) {\n        material.setBaseColorFactor(pbrDef.baseColorFactor);\n      }\n      if (materialDef.emissiveFactor !== undefined) {\n        material.setEmissiveFactor(materialDef.emissiveFactor);\n      }\n      if (pbrDef.metallicFactor !== undefined) {\n        material.setMetallicFactor(pbrDef.metallicFactor);\n      }\n      if (pbrDef.roughnessFactor !== undefined) {\n        material.setRoughnessFactor(pbrDef.roughnessFactor);\n      }\n      // Textures.\n      if (pbrDef.baseColorTexture !== undefined) {\n        const textureInfoDef = pbrDef.baseColorTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setBaseColorTexture(texture);\n        context.setTextureInfo(material.getBaseColorTextureInfo(), textureInfoDef);\n      }\n      if (materialDef.emissiveTexture !== undefined) {\n        const textureInfoDef = materialDef.emissiveTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setEmissiveTexture(texture);\n        context.setTextureInfo(material.getEmissiveTextureInfo(), textureInfoDef);\n      }\n      if (materialDef.normalTexture !== undefined) {\n        const textureInfoDef = materialDef.normalTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setNormalTexture(texture);\n        context.setTextureInfo(material.getNormalTextureInfo(), textureInfoDef);\n        if (materialDef.normalTexture.scale !== undefined) {\n          material.setNormalScale(materialDef.normalTexture.scale);\n        }\n      }\n      if (materialDef.occlusionTexture !== undefined) {\n        const textureInfoDef = materialDef.occlusionTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setOcclusionTexture(texture);\n        context.setTextureInfo(material.getOcclusionTextureInfo(), textureInfoDef);\n        if (materialDef.occlusionTexture.strength !== undefined) {\n          material.setOcclusionStrength(materialDef.occlusionTexture.strength);\n        }\n      }\n      if (pbrDef.metallicRoughnessTexture !== undefined) {\n        const textureInfoDef = pbrDef.metallicRoughnessTexture;\n        const texture = context.textures[textureDefs[textureInfoDef.index].source];\n        material.setMetallicRoughnessTexture(texture);\n        context.setTextureInfo(material.getMetallicRoughnessTextureInfo(), textureInfoDef);\n      }\n      return material;\n    });\n    /** Meshes. */\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.MESH)).forEach(extension => extension.preread(context, PropertyType.MESH));\n    const meshDefs = json.meshes || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.PRIMITIVE)).forEach(extension => extension.preread(context, PropertyType.PRIMITIVE));\n    context.meshes = meshDefs.map(meshDef => {\n      const mesh = document.createMesh(meshDef.name);\n      if (meshDef.extras) mesh.setExtras(meshDef.extras);\n      if (meshDef.weights !== undefined) {\n        mesh.setWeights(meshDef.weights);\n      }\n      const primitiveDefs = meshDef.primitives || [];\n      primitiveDefs.forEach(primitiveDef => {\n        const primitive = document.createPrimitive();\n        if (primitiveDef.extras) primitive.setExtras(primitiveDef.extras);\n        if (primitiveDef.material !== undefined) {\n          primitive.setMaterial(context.materials[primitiveDef.material]);\n        }\n        if (primitiveDef.mode !== undefined) {\n          primitive.setMode(primitiveDef.mode);\n        }\n        for (const [semantic, index] of Object.entries(primitiveDef.attributes || {})) {\n          primitive.setAttribute(semantic, context.accessors[index]);\n        }\n        if (primitiveDef.indices !== undefined) {\n          primitive.setIndices(context.accessors[primitiveDef.indices]);\n        }\n        const targetNames = meshDef.extras && meshDef.extras.targetNames || [];\n        const targetDefs = primitiveDef.targets || [];\n        targetDefs.forEach((targetDef, targetIndex) => {\n          const targetName = targetNames[targetIndex] || targetIndex.toString();\n          const target = document.createPrimitiveTarget(targetName);\n          for (const [semantic, accessorIndex] of Object.entries(targetDef)) {\n            target.setAttribute(semantic, context.accessors[accessorIndex]);\n          }\n          primitive.addTarget(target);\n        });\n        mesh.addPrimitive(primitive);\n      });\n      return mesh;\n    });\n    /** Cameras. */\n    const cameraDefs = json.cameras || [];\n    context.cameras = cameraDefs.map(cameraDef => {\n      const camera = document.createCamera(cameraDef.name).setType(cameraDef.type);\n      if (cameraDef.extras) camera.setExtras(cameraDef.extras);\n      if (cameraDef.type === Camera.Type.PERSPECTIVE) {\n        const perspectiveDef = cameraDef.perspective;\n        camera.setYFov(perspectiveDef.yfov);\n        camera.setZNear(perspectiveDef.znear);\n        if (perspectiveDef.zfar !== undefined) {\n          camera.setZFar(perspectiveDef.zfar);\n        }\n        if (perspectiveDef.aspectRatio !== undefined) {\n          camera.setAspectRatio(perspectiveDef.aspectRatio);\n        }\n      } else {\n        const orthoDef = cameraDef.orthographic;\n        camera.setZNear(orthoDef.znear).setZFar(orthoDef.zfar).setXMag(orthoDef.xmag).setYMag(orthoDef.ymag);\n      }\n      return camera;\n    });\n    /** Nodes. */\n    const nodeDefs = json.nodes || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.NODE)).forEach(extension => extension.preread(context, PropertyType.NODE));\n    context.nodes = nodeDefs.map(nodeDef => {\n      const node = document.createNode(nodeDef.name);\n      if (nodeDef.extras) node.setExtras(nodeDef.extras);\n      if (nodeDef.translation !== undefined) {\n        node.setTranslation(nodeDef.translation);\n      }\n      if (nodeDef.rotation !== undefined) {\n        node.setRotation(nodeDef.rotation);\n      }\n      if (nodeDef.scale !== undefined) {\n        node.setScale(nodeDef.scale);\n      }\n      if (nodeDef.matrix !== undefined) {\n        const translation = [0, 0, 0];\n        const rotation = [0, 0, 0, 1];\n        const scale = [1, 1, 1];\n        MathUtils.decompose(nodeDef.matrix, translation, rotation, scale);\n        node.setTranslation(translation);\n        node.setRotation(rotation);\n        node.setScale(scale);\n      }\n      if (nodeDef.weights !== undefined) {\n        node.setWeights(nodeDef.weights);\n      }\n      // Attachments (mesh, camera, skin) defined later in reading process.\n      return node;\n    });\n    /** Skins. */\n    const skinDefs = json.skins || [];\n    context.skins = skinDefs.map(skinDef => {\n      const skin = document.createSkin(skinDef.name);\n      if (skinDef.extras) skin.setExtras(skinDef.extras);\n      if (skinDef.inverseBindMatrices !== undefined) {\n        skin.setInverseBindMatrices(context.accessors[skinDef.inverseBindMatrices]);\n      }\n      if (skinDef.skeleton !== undefined) {\n        skin.setSkeleton(context.nodes[skinDef.skeleton]);\n      }\n      for (const nodeIndex of skinDef.joints) {\n        skin.addJoint(context.nodes[nodeIndex]);\n      }\n      return skin;\n    });\n    /** Node attachments. */\n    nodeDefs.map((nodeDef, nodeIndex) => {\n      const node = context.nodes[nodeIndex];\n      const children = nodeDef.children || [];\n      children.forEach(childIndex => node.addChild(context.nodes[childIndex]));\n      if (nodeDef.mesh !== undefined) node.setMesh(context.meshes[nodeDef.mesh]);\n      if (nodeDef.camera !== undefined) node.setCamera(context.cameras[nodeDef.camera]);\n      if (nodeDef.skin !== undefined) node.setSkin(context.skins[nodeDef.skin]);\n    });\n    /** Animations. */\n    const animationDefs = json.animations || [];\n    context.animations = animationDefs.map(animationDef => {\n      const animation = document.createAnimation(animationDef.name);\n      if (animationDef.extras) animation.setExtras(animationDef.extras);\n      const samplerDefs = animationDef.samplers || [];\n      const samplers = samplerDefs.map(samplerDef => {\n        const sampler = document.createAnimationSampler().setInput(context.accessors[samplerDef.input]).setOutput(context.accessors[samplerDef.output]).setInterpolation(samplerDef.interpolation || AnimationSampler.Interpolation.LINEAR);\n        if (samplerDef.extras) sampler.setExtras(samplerDef.extras);\n        animation.addSampler(sampler);\n        return sampler;\n      });\n      const channels = animationDef.channels || [];\n      channels.forEach(channelDef => {\n        const channel = document.createAnimationChannel().setSampler(samplers[channelDef.sampler]).setTargetPath(channelDef.target.path);\n        if (channelDef.target.node !== undefined) channel.setTargetNode(context.nodes[channelDef.target.node]);\n        if (channelDef.extras) channel.setExtras(channelDef.extras);\n        animation.addChannel(channel);\n      });\n      return animation;\n    });\n    /** Scenes. */\n    const sceneDefs = json.scenes || [];\n    document.getRoot().listExtensionsUsed().filter(extension => extension.prereadTypes.includes(PropertyType.SCENE)).forEach(extension => extension.preread(context, PropertyType.SCENE));\n    context.scenes = sceneDefs.map(sceneDef => {\n      const scene = document.createScene(sceneDef.name);\n      if (sceneDef.extras) scene.setExtras(sceneDef.extras);\n      const children = sceneDef.nodes || [];\n      children.map(nodeIndex => context.nodes[nodeIndex]).forEach(node => scene.addChild(node));\n      return scene;\n    });\n    if (json.scene !== undefined) {\n      document.getRoot().setDefaultScene(context.scenes[json.scene]);\n    }\n    /** Extensions (2/2). */\n    document.getRoot().listExtensionsUsed().forEach(extension => extension.read(context));\n    /** Post-processing. */\n    // Consider an accessor to be 'sparse' if it (A) includes sparse value overrides,\n    // or (B) does not define .bufferView _and_ no extension provides that data. Case\n    // (B) represents a zero-filled accessor.\n    accessorDefs.forEach((accessorDef, index) => {\n      const accessor = context.accessors[index];\n      const hasSparseValues = !!accessorDef.sparse;\n      const isZeroFilled = !accessorDef.bufferView && !accessor.getArray();\n      if (hasSparseValues || isZeroFilled) {\n        accessor.setSparse(true).setArray(getSparseArray(accessorDef, context));\n      }\n    });\n    return document;\n  }\n  static validate(jsonDoc, options) {\n    const json = jsonDoc.json;\n    if (json.asset.version !== '2.0') {\n      throw new Error(`Unsupported glTF version, \"${json.asset.version}\".`);\n    }\n    if (json.extensionsRequired) {\n      for (const extensionName of json.extensionsRequired) {\n        if (!options.extensions.find(extension => extension.EXTENSION_NAME === extensionName)) {\n          throw new Error(`Missing required extension, \"${extensionName}\".`);\n        }\n      }\n    }\n    if (json.extensionsUsed) {\n      for (const extensionName of json.extensionsUsed) {\n        if (!options.extensions.find(extension => extension.EXTENSION_NAME === extensionName)) {\n          options.logger.warn(`Missing optional extension, \"${extensionName}\".`);\n        }\n      }\n    }\n  }\n}\n/**\n * Returns the contents of an interleaved accessor, as a typed array.\n * @internal\n */\nfunction getInterleavedArray(accessorDef, context) {\n  const jsonDoc = context.jsonDoc;\n  const bufferView = context.bufferViews[accessorDef.bufferView];\n  const bufferViewDef = jsonDoc.json.bufferViews[accessorDef.bufferView];\n  const TypedArray = ComponentTypeToTypedArray[accessorDef.componentType];\n  const elementSize = Accessor.getElementSize(accessorDef.type);\n  const componentSize = TypedArray.BYTES_PER_ELEMENT;\n  const accessorByteOffset = accessorDef.byteOffset || 0;\n  const array = new TypedArray(accessorDef.count * elementSize);\n  const view = new DataView(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength);\n  const byteStride = bufferViewDef.byteStride;\n  for (let i = 0; i < accessorDef.count; i++) {\n    for (let j = 0; j < elementSize; j++) {\n      const byteOffset = accessorByteOffset + i * byteStride + j * componentSize;\n      let value;\n      switch (accessorDef.componentType) {\n        case Accessor.ComponentType.FLOAT:\n          value = view.getFloat32(byteOffset, true);\n          break;\n        case Accessor.ComponentType.UNSIGNED_INT:\n          value = view.getUint32(byteOffset, true);\n          break;\n        case Accessor.ComponentType.UNSIGNED_SHORT:\n          value = view.getUint16(byteOffset, true);\n          break;\n        case Accessor.ComponentType.UNSIGNED_BYTE:\n          value = view.getUint8(byteOffset);\n          break;\n        case Accessor.ComponentType.SHORT:\n          value = view.getInt16(byteOffset, true);\n          break;\n        case Accessor.ComponentType.BYTE:\n          value = view.getInt8(byteOffset);\n          break;\n        default:\n          throw new Error(`Unexpected componentType \"${accessorDef.componentType}\".`);\n      }\n      array[i * elementSize + j] = value;\n    }\n  }\n  return array;\n}\n/**\n * Returns the contents of an accessor, as a typed array.\n * @internal\n */\nfunction getAccessorArray(accessorDef, context) {\n  const jsonDoc = context.jsonDoc;\n  const bufferView = context.bufferViews[accessorDef.bufferView];\n  const bufferViewDef = jsonDoc.json.bufferViews[accessorDef.bufferView];\n  const TypedArray = ComponentTypeToTypedArray[accessorDef.componentType];\n  const elementSize = Accessor.getElementSize(accessorDef.type);\n  const componentSize = TypedArray.BYTES_PER_ELEMENT;\n  const elementStride = elementSize * componentSize;\n  // Interleaved buffer view.\n  if (bufferViewDef.byteStride !== undefined && bufferViewDef.byteStride !== elementStride) {\n    return getInterleavedArray(accessorDef, context);\n  }\n  const byteOffset = bufferView.byteOffset + (accessorDef.byteOffset || 0);\n  const byteLength = accessorDef.count * elementSize * componentSize;\n  // Might optimize this to avoid deep copy later, but it's useful for now and not a known\n  // bottleneck. See https://github.com/donmccurdy/glTF-Transform/issues/256.\n  return new TypedArray(bufferView.buffer.slice(byteOffset, byteOffset + byteLength));\n}\n/**\n * Returns the contents of a sparse accessor, as a typed array.\n * @internal\n */\nfunction getSparseArray(accessorDef, context) {\n  const TypedArray = ComponentTypeToTypedArray[accessorDef.componentType];\n  const elementSize = Accessor.getElementSize(accessorDef.type);\n  let array;\n  if (accessorDef.bufferView !== undefined) {\n    array = getAccessorArray(accessorDef, context);\n  } else {\n    array = new TypedArray(accessorDef.count * elementSize);\n  }\n  const sparseDef = accessorDef.sparse;\n  if (!sparseDef) return array; // Zero-filled accessor.\n  const count = sparseDef.count;\n  const indicesDef = _extends({}, accessorDef, sparseDef.indices, {\n    count,\n    type: 'SCALAR'\n  });\n  const valuesDef = _extends({}, accessorDef, sparseDef.values, {\n    count\n  });\n  const indices = getAccessorArray(indicesDef, context);\n  const values = getAccessorArray(valuesDef, context);\n  // Override indices given in the sparse data.\n  for (let i = 0; i < indicesDef.count; i++) {\n    for (let j = 0; j < elementSize; j++) {\n      array[indices[i] * elementSize + j] = values[i * elementSize + j];\n    }\n  }\n  return array;\n}\n\nvar BufferViewTarget;\n(function (BufferViewTarget) {\n  BufferViewTarget[BufferViewTarget[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\n  BufferViewTarget[BufferViewTarget[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\n})(BufferViewTarget || (BufferViewTarget = {}));\n/**\n * Model class providing writing state to a {@link GLTFWriter} and its {@link Extension}\n * implementations.\n *\n * @hidden\n */\nclass WriterContext {\n  constructor(_doc, jsonDoc, options) {\n    this._doc = void 0;\n    this.jsonDoc = void 0;\n    this.options = void 0;\n    this.accessorIndexMap = new Map();\n    this.animationIndexMap = new Map();\n    this.bufferIndexMap = new Map();\n    this.cameraIndexMap = new Map();\n    this.skinIndexMap = new Map();\n    this.materialIndexMap = new Map();\n    this.meshIndexMap = new Map();\n    this.nodeIndexMap = new Map();\n    this.imageIndexMap = new Map();\n    this.textureDefIndexMap = new Map();\n    // textureDef JSON -> index\n    this.textureInfoDefMap = new Map();\n    this.samplerDefIndexMap = new Map();\n    // samplerDef JSON -> index\n    this.sceneIndexMap = new Map();\n    this.imageBufferViews = [];\n    this.otherBufferViews = new Map();\n    this.otherBufferViewsIndexMap = new Map();\n    this.extensionData = {};\n    this.bufferURIGenerator = void 0;\n    this.imageURIGenerator = void 0;\n    this.logger = void 0;\n    this._accessorUsageMap = new Map();\n    this.accessorUsageGroupedByParent = new Set(['ARRAY_BUFFER']);\n    this.accessorParents = new Map();\n    this._doc = _doc;\n    this.jsonDoc = jsonDoc;\n    this.options = options;\n    const root = _doc.getRoot();\n    const numBuffers = root.listBuffers().length;\n    const numImages = root.listTextures().length;\n    this.bufferURIGenerator = new UniqueURIGenerator(numBuffers > 1, () => options.basename || 'buffer');\n    this.imageURIGenerator = new UniqueURIGenerator(numImages > 1, texture => getSlot(_doc, texture) || options.basename || 'texture');\n    this.logger = _doc.getLogger();\n  }\n  /**\n   * Creates a TextureInfo definition, and any Texture or Sampler definitions it requires. If\n   * possible, Texture and Sampler definitions are shared.\n   */\n  createTextureInfoDef(texture, textureInfo) {\n    const samplerDef = {\n      magFilter: textureInfo.getMagFilter() || undefined,\n      minFilter: textureInfo.getMinFilter() || undefined,\n      wrapS: textureInfo.getWrapS(),\n      wrapT: textureInfo.getWrapT()\n    };\n    const samplerKey = JSON.stringify(samplerDef);\n    if (!this.samplerDefIndexMap.has(samplerKey)) {\n      this.samplerDefIndexMap.set(samplerKey, this.jsonDoc.json.samplers.length);\n      this.jsonDoc.json.samplers.push(samplerDef);\n    }\n    const textureDef = {\n      source: this.imageIndexMap.get(texture),\n      sampler: this.samplerDefIndexMap.get(samplerKey)\n    };\n    const textureKey = JSON.stringify(textureDef);\n    if (!this.textureDefIndexMap.has(textureKey)) {\n      this.textureDefIndexMap.set(textureKey, this.jsonDoc.json.textures.length);\n      this.jsonDoc.json.textures.push(textureDef);\n    }\n    const textureInfoDef = {\n      index: this.textureDefIndexMap.get(textureKey)\n    };\n    if (textureInfo.getTexCoord() !== 0) {\n      textureInfoDef.texCoord = textureInfo.getTexCoord();\n    }\n    if (Object.keys(textureInfo.getExtras()).length > 0) {\n      textureInfoDef.extras = textureInfo.getExtras();\n    }\n    this.textureInfoDefMap.set(textureInfo, textureInfoDef);\n    return textureInfoDef;\n  }\n  createPropertyDef(property) {\n    const def = {};\n    if (property.getName()) {\n      def.name = property.getName();\n    }\n    if (Object.keys(property.getExtras()).length > 0) {\n      def.extras = property.getExtras();\n    }\n    return def;\n  }\n  createAccessorDef(accessor) {\n    const accessorDef = this.createPropertyDef(accessor);\n    accessorDef.type = accessor.getType();\n    accessorDef.componentType = accessor.getComponentType();\n    accessorDef.count = accessor.getCount();\n    const needsBounds = this._doc.getGraph().listParentEdges(accessor).some(edge => edge.getName() === 'attributes' && edge.getAttributes().key === 'POSITION' || edge.getName() === 'input');\n    if (needsBounds) {\n      accessorDef.max = accessor.getMax([]).map(Math.fround);\n      accessorDef.min = accessor.getMin([]).map(Math.fround);\n    }\n    if (accessor.getNormalized()) {\n      accessorDef.normalized = accessor.getNormalized();\n    }\n    return accessorDef;\n  }\n  createImageData(imageDef, data, texture) {\n    if (this.options.format === Format.GLB) {\n      this.imageBufferViews.push(data);\n      imageDef.bufferView = this.jsonDoc.json.bufferViews.length;\n      this.jsonDoc.json.bufferViews.push({\n        buffer: 0,\n        byteOffset: -1,\n        // determined while iterating buffers, in Writer.ts.\n        byteLength: data.byteLength\n      });\n    } else {\n      const extension = ImageUtils.mimeTypeToExtension(texture.getMimeType());\n      imageDef.uri = this.imageURIGenerator.createURI(texture, extension);\n      this.assignResourceURI(imageDef.uri, data, false);\n    }\n  }\n  assignResourceURI(uri, data, throwOnConflict) {\n    const resources = this.jsonDoc.resources;\n    // https://github.com/KhronosGroup/glTF/issues/2446\n    if (!(uri in resources)) {\n      resources[uri] = data;\n      return;\n    }\n    if (data === resources[uri]) {\n      this.logger.warn(`Duplicate resource URI, \"${uri}\".`);\n      return;\n    }\n    const conflictMessage = `Resource URI \"${uri}\" already assigned to different data.`;\n    if (!throwOnConflict) {\n      this.logger.warn(conflictMessage);\n      return;\n    }\n    throw new Error(conflictMessage);\n  }\n  /**\n   * Returns implicit usage type of the given accessor, related to grouping accessors into\n   * buffer views. Usage is a superset of buffer view target, including ARRAY_BUFFER and\n   * ELEMENT_ARRAY_BUFFER, but also usages that do not match GPU buffer view targets such as\n   * IBMs. Additional usages are defined by extensions, like `EXT_mesh_gpu_instancing`.\n   */\n  getAccessorUsage(accessor) {\n    const cachedUsage = this._accessorUsageMap.get(accessor);\n    if (cachedUsage) return cachedUsage;\n    if (accessor.getSparse()) return BufferViewUsage$1.SPARSE;\n    for (const edge of this._doc.getGraph().listParentEdges(accessor)) {\n      const {\n        usage\n      } = edge.getAttributes();\n      if (usage) return usage;\n      if (edge.getParent().propertyType !== PropertyType.ROOT) {\n        this.logger.warn(`Missing attribute \".usage\" on edge, \"${edge.getName()}\".`);\n      }\n    }\n    // Group accessors with no specified usage into a miscellaneous buffer view.\n    return BufferViewUsage$1.OTHER;\n  }\n  /**\n   * Sets usage for the given accessor. Some accessor types must be grouped into\n   * buffer views with like accessors. This includes the specified buffer view \"targets\", but\n   * also implicit usage like IBMs or instanced mesh attributes. If unspecified, an accessor\n   * will be grouped with other accessors of unspecified usage.\n   */\n  addAccessorToUsageGroup(accessor, usage) {\n    const prevUsage = this._accessorUsageMap.get(accessor);\n    if (prevUsage && prevUsage !== usage) {\n      throw new Error(`Accessor with usage \"${prevUsage}\" cannot be reused as \"${usage}\".`);\n    }\n    this._accessorUsageMap.set(accessor, usage);\n    return this;\n  }\n}\n/** Explicit buffer view targets defined by glTF specification. */\nWriterContext.BufferViewTarget = BufferViewTarget;\n/**\n * Implicit buffer view usage, not required by glTF specification, but nonetheless useful for\n * proper grouping of accessors into buffer views. Additional usages are defined by extensions,\n * like `EXT_mesh_gpu_instancing`.\n */\nWriterContext.BufferViewUsage = BufferViewUsage$1;\n/** Maps usage type to buffer view target. Usages not mapped have undefined targets. */\nWriterContext.USAGE_TO_TARGET = {\n  [BufferViewUsage$1.ARRAY_BUFFER]: BufferViewTarget.ARRAY_BUFFER,\n  [BufferViewUsage$1.ELEMENT_ARRAY_BUFFER]: BufferViewTarget.ELEMENT_ARRAY_BUFFER\n};\nclass UniqueURIGenerator {\n  constructor(multiple, basename) {\n    this.multiple = void 0;\n    this.basename = void 0;\n    this.counter = {};\n    this.multiple = multiple;\n    this.basename = basename;\n  }\n  createURI(object, extension) {\n    if (object.getURI()) {\n      return object.getURI();\n    } else if (!this.multiple) {\n      return `${this.basename(object)}.${extension}`;\n    } else {\n      const basename = this.basename(object);\n      this.counter[basename] = this.counter[basename] || 1;\n      return `${basename}_${this.counter[basename]++}.${extension}`;\n    }\n  }\n}\n/** Returns the first slot (by name) to which the texture is assigned. */\nfunction getSlot(document, texture) {\n  const edge = document.getGraph().listParentEdges(texture).find(edge => edge.getParent() !== document.getRoot());\n  return edge ? edge.getName().replace(/texture$/i, '') : '';\n}\n\nconst {\n  BufferViewUsage\n} = WriterContext;\nconst {\n  UNSIGNED_INT,\n  UNSIGNED_SHORT,\n  UNSIGNED_BYTE\n} = Accessor.ComponentType;\nconst SUPPORTED_PREWRITE_TYPES = new Set([PropertyType.ACCESSOR, PropertyType.BUFFER, PropertyType.MATERIAL, PropertyType.MESH]);\n/**\n * @internal\n * @hidden\n */\nclass GLTFWriter {\n  static write(doc, options) {\n    const graph = doc.getGraph();\n    const root = doc.getRoot();\n    const json = {\n      asset: _extends({\n        generator: `glTF-Transform ${VERSION}`\n      }, root.getAsset()),\n      extras: _extends({}, root.getExtras())\n    };\n    const jsonDoc = {\n      json,\n      resources: {}\n    };\n    const context = new WriterContext(doc, jsonDoc, options);\n    const logger = options.logger || Logger.DEFAULT_INSTANCE;\n    /* Extensions (1/2). */\n    // Extensions present on the Document are not written unless they are also registered with\n    // the I/O class. This ensures that setup in `extension.register()` is completed, and\n    // allows a Document to be written with specific extensions disabled.\n    const extensionsRegistered = new Set(options.extensions.map(ext => ext.EXTENSION_NAME));\n    const extensionsUsed = doc.getRoot().listExtensionsUsed().filter(ext => extensionsRegistered.has(ext.extensionName)).sort((a, b) => a.extensionName > b.extensionName ? 1 : -1);\n    const extensionsRequired = doc.getRoot().listExtensionsRequired().filter(ext => extensionsRegistered.has(ext.extensionName)).sort((a, b) => a.extensionName > b.extensionName ? 1 : -1);\n    if (extensionsUsed.length < doc.getRoot().listExtensionsUsed().length) {\n      logger.warn('Some extensions were not registered for I/O, and will not be written.');\n    }\n    for (const extension of extensionsUsed) {\n      // Warn on unsupported prewrite hooks.\n      const unsupportedHooks = extension.prewriteTypes.filter(type => !SUPPORTED_PREWRITE_TYPES.has(type));\n      if (unsupportedHooks.length) {\n        logger.warn(`Prewrite hooks for some types (${unsupportedHooks.join()}), requested by extension ` + `${extension.extensionName}, are unsupported. Please file an issue or a PR.`);\n      }\n      // Install dependencies.\n      for (const key of extension.writeDependencies) {\n        extension.install(key, options.dependencies[key]);\n      }\n    }\n    /**\n     * Pack a group of accessors into a sequential buffer view. Appends accessor and buffer view\n     * definitions to the root JSON lists.\n     *\n     * @param accessors Accessors to be included.\n     * @param bufferIndex Buffer to write to.\n     * @param bufferByteOffset Current offset into the buffer, accounting for other buffer views.\n     * @param bufferViewTarget (Optional) target use of the buffer view.\n     */\n    function concatAccessors(accessors, bufferIndex, bufferByteOffset, bufferViewTarget) {\n      const buffers = [];\n      let byteLength = 0;\n      // Create accessor definitions, determining size of final buffer view.\n      for (const accessor of accessors) {\n        const accessorDef = context.createAccessorDef(accessor);\n        accessorDef.bufferView = json.bufferViews.length;\n        const accessorArray = accessor.getArray();\n        const data = BufferUtils.pad(BufferUtils.toView(accessorArray));\n        accessorDef.byteOffset = byteLength;\n        byteLength += data.byteLength;\n        buffers.push(data);\n        context.accessorIndexMap.set(accessor, json.accessors.length);\n        json.accessors.push(accessorDef);\n      }\n      // Create buffer view definition.\n      const bufferViewData = BufferUtils.concat(buffers);\n      const bufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset,\n        byteLength: bufferViewData.byteLength\n      };\n      if (bufferViewTarget) bufferViewDef.target = bufferViewTarget;\n      json.bufferViews.push(bufferViewDef);\n      return {\n        buffers,\n        byteLength\n      };\n    }\n    /**\n     * Pack a group of accessors into an interleaved buffer view. Appends accessor and buffer\n     * view definitions to the root JSON lists. Buffer view target is implicitly attribute data.\n     *\n     * References:\n     * - [Apple  Best Practices for Working with Vertex Data](https://developer.apple.com/library/archive/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)\n     * - [Khronos  Vertex Specification Best Practices](https://www.khronos.org/opengl/wiki/Vertex_Specification_Best_Practices)\n     *\n     * @param accessors Accessors to be included.\n     * @param bufferIndex Buffer to write to.\n     * @param bufferByteOffset Offset into the buffer, accounting for other buffer views.\n     */\n    function interleaveAccessors(accessors, bufferIndex, bufferByteOffset) {\n      const vertexCount = accessors[0].getCount();\n      let byteStride = 0;\n      // Create accessor definitions, determining size and stride of final buffer view.\n      for (const accessor of accessors) {\n        const accessorDef = context.createAccessorDef(accessor);\n        accessorDef.bufferView = json.bufferViews.length;\n        accessorDef.byteOffset = byteStride;\n        const elementSize = accessor.getElementSize();\n        const componentSize = accessor.getComponentSize();\n        byteStride += BufferUtils.padNumber(elementSize * componentSize);\n        context.accessorIndexMap.set(accessor, json.accessors.length);\n        json.accessors.push(accessorDef);\n      }\n      // Allocate interleaved buffer view.\n      const byteLength = vertexCount * byteStride;\n      const buffer = new ArrayBuffer(byteLength);\n      const view = new DataView(buffer);\n      // Write interleaved accessor data to the buffer view.\n      for (let i = 0; i < vertexCount; i++) {\n        let vertexByteOffset = 0;\n        for (const accessor of accessors) {\n          const elementSize = accessor.getElementSize();\n          const componentSize = accessor.getComponentSize();\n          const componentType = accessor.getComponentType();\n          const array = accessor.getArray();\n          for (let j = 0; j < elementSize; j++) {\n            const viewByteOffset = i * byteStride + vertexByteOffset + j * componentSize;\n            const value = array[i * elementSize + j];\n            switch (componentType) {\n              case Accessor.ComponentType.FLOAT:\n                view.setFloat32(viewByteOffset, value, true);\n                break;\n              case Accessor.ComponentType.BYTE:\n                view.setInt8(viewByteOffset, value);\n                break;\n              case Accessor.ComponentType.SHORT:\n                view.setInt16(viewByteOffset, value, true);\n                break;\n              case Accessor.ComponentType.UNSIGNED_BYTE:\n                view.setUint8(viewByteOffset, value);\n                break;\n              case Accessor.ComponentType.UNSIGNED_SHORT:\n                view.setUint16(viewByteOffset, value, true);\n                break;\n              case Accessor.ComponentType.UNSIGNED_INT:\n                view.setUint32(viewByteOffset, value, true);\n                break;\n              default:\n                throw new Error('Unexpected component type: ' + componentType);\n            }\n          }\n          vertexByteOffset += BufferUtils.padNumber(elementSize * componentSize);\n        }\n      }\n      // Create buffer view definition.\n      const bufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset,\n        byteLength: byteLength,\n        byteStride: byteStride,\n        target: WriterContext.BufferViewTarget.ARRAY_BUFFER\n      };\n      json.bufferViews.push(bufferViewDef);\n      return {\n        byteLength,\n        buffers: [new Uint8Array(buffer)]\n      };\n    }\n    /**\n     * Pack a group of sparse accessors. Appends accessor and buffer view\n     * definitions to the root JSON lists.\n     *\n     * @param accessors Accessors to be included.\n     * @param bufferIndex Buffer to write to.\n     * @param bufferByteOffset Current offset into the buffer, accounting for other buffer views.\n     */\n    function concatSparseAccessors(accessors, bufferIndex, bufferByteOffset) {\n      const buffers = [];\n      let byteLength = 0;\n      const sparseData = new Map();\n      let maxIndex = -Infinity;\n      let needSparseWarning = false;\n      // (1) Write accessor definitions, gathering indices and values.\n      for (const accessor of accessors) {\n        const accessorDef = context.createAccessorDef(accessor);\n        json.accessors.push(accessorDef);\n        context.accessorIndexMap.set(accessor, json.accessors.length - 1);\n        const indices = [];\n        const values = [];\n        const el = [];\n        const base = new Array(accessor.getElementSize()).fill(0);\n        for (let i = 0, il = accessor.getCount(); i < il; i++) {\n          accessor.getElement(i, el);\n          if (MathUtils.eq(el, base, 0)) continue;\n          maxIndex = Math.max(i, maxIndex);\n          indices.push(i);\n          for (let j = 0; j < el.length; j++) values.push(el[j]);\n        }\n        const count = indices.length;\n        const data = {\n          accessorDef,\n          count\n        };\n        sparseData.set(accessor, data);\n        if (count === 0) continue;\n        if (count > accessor.getCount() / 2) {\n          needSparseWarning = true;\n        }\n        const ValueArray = ComponentTypeToTypedArray[accessor.getComponentType()];\n        data.indices = indices;\n        data.values = new ValueArray(values);\n      }\n      // (2) Early exit if all sparse accessors are just zero-filled arrays.\n      if (!Number.isFinite(maxIndex)) {\n        return {\n          buffers,\n          byteLength\n        };\n      }\n      if (needSparseWarning) {\n        logger.warn(`Some sparse accessors have >50% non-zero elements, which may increase file size.`);\n      }\n      // (3) Write index buffer view.\n      const IndexArray = maxIndex < 255 ? Uint8Array : maxIndex < 65535 ? Uint16Array : Uint32Array;\n      const IndexComponentType = maxIndex < 255 ? UNSIGNED_BYTE : maxIndex < 65535 ? UNSIGNED_SHORT : UNSIGNED_INT;\n      const indicesBufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset + byteLength,\n        byteLength: 0\n      };\n      for (const accessor of accessors) {\n        const data = sparseData.get(accessor);\n        if (data.count === 0) continue;\n        data.indicesByteOffset = indicesBufferViewDef.byteLength;\n        const buffer = BufferUtils.pad(BufferUtils.toView(new IndexArray(data.indices)));\n        buffers.push(buffer);\n        byteLength += buffer.byteLength;\n        indicesBufferViewDef.byteLength += buffer.byteLength;\n      }\n      json.bufferViews.push(indicesBufferViewDef);\n      const indicesBufferViewIndex = json.bufferViews.length - 1;\n      // (4) Write value buffer view.\n      const valuesBufferViewDef = {\n        buffer: bufferIndex,\n        byteOffset: bufferByteOffset + byteLength,\n        byteLength: 0\n      };\n      for (const accessor of accessors) {\n        const data = sparseData.get(accessor);\n        if (data.count === 0) continue;\n        data.valuesByteOffset = valuesBufferViewDef.byteLength;\n        const buffer = BufferUtils.pad(BufferUtils.toView(data.values));\n        buffers.push(buffer);\n        byteLength += buffer.byteLength;\n        valuesBufferViewDef.byteLength += buffer.byteLength;\n      }\n      json.bufferViews.push(valuesBufferViewDef);\n      const valuesBufferViewIndex = json.bufferViews.length - 1;\n      // (5) Write accessor sparse entries.\n      for (const accessor of accessors) {\n        const data = sparseData.get(accessor);\n        if (data.count === 0) continue;\n        data.accessorDef.sparse = {\n          count: data.count,\n          indices: {\n            bufferView: indicesBufferViewIndex,\n            byteOffset: data.indicesByteOffset,\n            componentType: IndexComponentType\n          },\n          values: {\n            bufferView: valuesBufferViewIndex,\n            byteOffset: data.valuesByteOffset\n          }\n        };\n      }\n      return {\n        buffers,\n        byteLength\n      };\n    }\n    json.accessors = [];\n    json.bufferViews = [];\n    /* Textures. */\n    // glTF Transform's \"Texture\" properties correspond 1:1 with glTF \"Image\" properties, and\n    // with image files. The glTF file may contain more one texture per image, where images\n    // are reused with different sampler properties.\n    json.samplers = [];\n    json.textures = [];\n    json.images = root.listTextures().map((texture, textureIndex) => {\n      const imageDef = context.createPropertyDef(texture);\n      if (texture.getMimeType()) {\n        imageDef.mimeType = texture.getMimeType();\n      }\n      const image = texture.getImage();\n      if (image) {\n        context.createImageData(imageDef, image, texture);\n      }\n      context.imageIndexMap.set(texture, textureIndex);\n      return imageDef;\n    });\n    /* Accessors. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.ACCESSOR)).forEach(extension => extension.prewrite(context, PropertyType.ACCESSOR));\n    root.listAccessors().forEach(accessor => {\n      // Attributes are grouped and interleaved in one buffer view per mesh primitive.\n      // Indices for all primitives are grouped into a single buffer view. IBMs are grouped\n      // into a single buffer view. Other usage (if specified by extensions) also goes into\n      // a dedicated buffer view. Everything else goes into a miscellaneous buffer view.\n      // Certain accessor usage should group data into buffer views by the accessor parent.\n      // The `accessorParents` map uses the first parent of each accessor for this purpose.\n      const groupByParent = context.accessorUsageGroupedByParent;\n      const accessorParents = context.accessorParents;\n      // Skip if already written by an extension.\n      if (context.accessorIndexMap.has(accessor)) return;\n      // Assign usage for core accessor usage types (explicit targets and implicit usage).\n      const usage = context.getAccessorUsage(accessor);\n      context.addAccessorToUsageGroup(accessor, usage);\n      // For accessor usage that requires grouping by parent (vertex and instance\n      // attributes) organize buffer views accordingly.\n      if (groupByParent.has(usage)) {\n        const parent = graph.listParents(accessor).find(parent => parent.propertyType !== PropertyType.ROOT);\n        accessorParents.set(accessor, parent);\n      }\n    });\n    /* Buffers, buffer views. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.BUFFER)).forEach(extension => extension.prewrite(context, PropertyType.BUFFER));\n    const needsBuffer = root.listAccessors().length > 0 || context.otherBufferViews.size > 0 || root.listTextures().length > 0 && options.format === Format.GLB;\n    if (needsBuffer && root.listBuffers().length === 0) {\n      throw new Error('Buffer required for Document resources, but none was found.');\n    }\n    json.buffers = [];\n    root.listBuffers().forEach((buffer, index) => {\n      const bufferDef = context.createPropertyDef(buffer);\n      const groupByParent = context.accessorUsageGroupedByParent;\n      const accessors = buffer.listParents().filter(property => property instanceof Accessor);\n      const uniqueParents = new Set(accessors.map(accessor => context.accessorParents.get(accessor)));\n      const parentToIndex = new Map(Array.from(uniqueParents).map((parent, index) => [parent, index]));\n      const accessorGroups = {};\n      for (const accessor of accessors) {\n        var _key;\n        // Skip if already written by an extension.\n        if (context.accessorIndexMap.has(accessor)) continue;\n        const usage = context.getAccessorUsage(accessor);\n        let key = usage;\n        if (groupByParent.has(usage)) {\n          const parent = context.accessorParents.get(accessor);\n          key += `:${parentToIndex.get(parent)}`;\n        }\n        accessorGroups[_key = key] || (accessorGroups[_key] = {\n          usage,\n          accessors: []\n        });\n        accessorGroups[key].accessors.push(accessor);\n      }\n      // Write accessor groups to buffer views.\n      const buffers = [];\n      const bufferIndex = json.buffers.length;\n      let bufferByteLength = 0;\n      for (const {\n        usage,\n        accessors: groupAccessors\n      } of Object.values(accessorGroups)) {\n        if (usage === BufferViewUsage.ARRAY_BUFFER && options.vertexLayout === VertexLayout.INTERLEAVED) {\n          // (1) Interleaved vertex attributes.\n          const result = interleaveAccessors(groupAccessors, bufferIndex, bufferByteLength);\n          bufferByteLength += result.byteLength;\n          for (const _buffer of result.buffers) {\n            buffers.push(_buffer);\n          }\n        } else if (usage === BufferViewUsage.ARRAY_BUFFER) {\n          // (2) Non-interleaved vertex attributes.\n          for (const accessor of groupAccessors) {\n            // We 'interleave' a single accessor because the method pads to\n            // 4-byte boundaries, which concatAccessors() does not.\n            const result = interleaveAccessors([accessor], bufferIndex, bufferByteLength);\n            bufferByteLength += result.byteLength;\n            for (const _buffer2 of result.buffers) {\n              buffers.push(_buffer2);\n            }\n          }\n        } else if (usage === BufferViewUsage.SPARSE) {\n          // (3) Sparse accessors.\n          const result = concatSparseAccessors(groupAccessors, bufferIndex, bufferByteLength);\n          bufferByteLength += result.byteLength;\n          for (const _buffer3 of result.buffers) {\n            buffers.push(_buffer3);\n          }\n        } else if (usage === BufferViewUsage.ELEMENT_ARRAY_BUFFER) {\n          // (4) Indices.\n          const target = WriterContext.BufferViewTarget.ELEMENT_ARRAY_BUFFER;\n          const result = concatAccessors(groupAccessors, bufferIndex, bufferByteLength, target);\n          bufferByteLength += result.byteLength;\n          for (const _buffer4 of result.buffers) {\n            buffers.push(_buffer4);\n          }\n        } else {\n          // (5) Other.\n          const result = concatAccessors(groupAccessors, bufferIndex, bufferByteLength);\n          bufferByteLength += result.byteLength;\n          for (const _buffer5 of result.buffers) {\n            buffers.push(_buffer5);\n          }\n        }\n      }\n      // We only support embedded images in GLB, where the embedded buffer must be the first.\n      // Additional buffers are currently left empty (see EXT_meshopt_compression fallback).\n      if (context.imageBufferViews.length && index === 0) {\n        for (let i = 0; i < context.imageBufferViews.length; i++) {\n          json.bufferViews[json.images[i].bufferView].byteOffset = bufferByteLength;\n          bufferByteLength += context.imageBufferViews[i].byteLength;\n          buffers.push(context.imageBufferViews[i]);\n          if (bufferByteLength % 8) {\n            // See: https://github.com/KhronosGroup/glTF/issues/1935\n            const imagePadding = 8 - bufferByteLength % 8;\n            bufferByteLength += imagePadding;\n            buffers.push(new Uint8Array(imagePadding));\n          }\n        }\n      }\n      if (context.otherBufferViews.has(buffer)) {\n        for (const data of context.otherBufferViews.get(buffer)) {\n          json.bufferViews.push({\n            buffer: bufferIndex,\n            byteOffset: bufferByteLength,\n            byteLength: data.byteLength\n          });\n          context.otherBufferViewsIndexMap.set(data, json.bufferViews.length - 1);\n          bufferByteLength += data.byteLength;\n          buffers.push(data);\n        }\n      }\n      if (bufferByteLength) {\n        // Assign buffer URI.\n        let uri;\n        if (options.format === Format.GLB) {\n          uri = GLB_BUFFER;\n        } else {\n          uri = context.bufferURIGenerator.createURI(buffer, 'bin');\n          bufferDef.uri = uri;\n        }\n        // Write buffer views to buffer.\n        bufferDef.byteLength = bufferByteLength;\n        context.assignResourceURI(uri, BufferUtils.concat(buffers), true);\n      }\n      json.buffers.push(bufferDef);\n      context.bufferIndexMap.set(buffer, index);\n    });\n    if (root.listAccessors().find(a => !a.getBuffer())) {\n      logger.warn('Skipped writing one or more Accessors: no Buffer assigned.');\n    }\n    /* Materials. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.MATERIAL)).forEach(extension => extension.prewrite(context, PropertyType.MATERIAL));\n    json.materials = root.listMaterials().map((material, index) => {\n      const materialDef = context.createPropertyDef(material);\n      // Program state & blending.\n      if (material.getAlphaMode() !== Material.AlphaMode.OPAQUE) {\n        materialDef.alphaMode = material.getAlphaMode();\n      }\n      if (material.getAlphaMode() === Material.AlphaMode.MASK) {\n        materialDef.alphaCutoff = material.getAlphaCutoff();\n      }\n      if (material.getDoubleSided()) materialDef.doubleSided = true;\n      // Factors.\n      materialDef.pbrMetallicRoughness = {};\n      if (!MathUtils.eq(material.getBaseColorFactor(), [1, 1, 1, 1])) {\n        materialDef.pbrMetallicRoughness.baseColorFactor = material.getBaseColorFactor();\n      }\n      if (!MathUtils.eq(material.getEmissiveFactor(), [0, 0, 0])) {\n        materialDef.emissiveFactor = material.getEmissiveFactor();\n      }\n      if (material.getRoughnessFactor() !== 1) {\n        materialDef.pbrMetallicRoughness.roughnessFactor = material.getRoughnessFactor();\n      }\n      if (material.getMetallicFactor() !== 1) {\n        materialDef.pbrMetallicRoughness.metallicFactor = material.getMetallicFactor();\n      }\n      // Textures.\n      if (material.getBaseColorTexture()) {\n        const texture = material.getBaseColorTexture();\n        const textureInfo = material.getBaseColorTextureInfo();\n        materialDef.pbrMetallicRoughness.baseColorTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      if (material.getEmissiveTexture()) {\n        const texture = material.getEmissiveTexture();\n        const textureInfo = material.getEmissiveTextureInfo();\n        materialDef.emissiveTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      if (material.getNormalTexture()) {\n        const texture = material.getNormalTexture();\n        const textureInfo = material.getNormalTextureInfo();\n        const textureInfoDef = context.createTextureInfoDef(texture, textureInfo);\n        if (material.getNormalScale() !== 1) {\n          textureInfoDef.scale = material.getNormalScale();\n        }\n        materialDef.normalTexture = textureInfoDef;\n      }\n      if (material.getOcclusionTexture()) {\n        const texture = material.getOcclusionTexture();\n        const textureInfo = material.getOcclusionTextureInfo();\n        const textureInfoDef = context.createTextureInfoDef(texture, textureInfo);\n        if (material.getOcclusionStrength() !== 1) {\n          textureInfoDef.strength = material.getOcclusionStrength();\n        }\n        materialDef.occlusionTexture = textureInfoDef;\n      }\n      if (material.getMetallicRoughnessTexture()) {\n        const texture = material.getMetallicRoughnessTexture();\n        const textureInfo = material.getMetallicRoughnessTextureInfo();\n        materialDef.pbrMetallicRoughness.metallicRoughnessTexture = context.createTextureInfoDef(texture, textureInfo);\n      }\n      context.materialIndexMap.set(material, index);\n      return materialDef;\n    });\n    /* Meshes. */\n    extensionsUsed.filter(extension => extension.prewriteTypes.includes(PropertyType.MESH)).forEach(extension => extension.prewrite(context, PropertyType.MESH));\n    json.meshes = root.listMeshes().map((mesh, index) => {\n      const meshDef = context.createPropertyDef(mesh);\n      let targetNames = null;\n      meshDef.primitives = mesh.listPrimitives().map(primitive => {\n        const primitiveDef = {\n          attributes: {}\n        };\n        primitiveDef.mode = primitive.getMode();\n        const material = primitive.getMaterial();\n        if (material) {\n          primitiveDef.material = context.materialIndexMap.get(material);\n        }\n        if (Object.keys(primitive.getExtras()).length) {\n          primitiveDef.extras = primitive.getExtras();\n        }\n        const indices = primitive.getIndices();\n        if (indices) {\n          primitiveDef.indices = context.accessorIndexMap.get(indices);\n        }\n        for (const semantic of primitive.listSemantics()) {\n          primitiveDef.attributes[semantic] = context.accessorIndexMap.get(primitive.getAttribute(semantic));\n        }\n        for (const target of primitive.listTargets()) {\n          const targetDef = {};\n          for (const semantic of target.listSemantics()) {\n            targetDef[semantic] = context.accessorIndexMap.get(target.getAttribute(semantic));\n          }\n          primitiveDef.targets = primitiveDef.targets || [];\n          primitiveDef.targets.push(targetDef);\n        }\n        if (primitive.listTargets().length && !targetNames) {\n          targetNames = primitive.listTargets().map(target => target.getName());\n        }\n        return primitiveDef;\n      });\n      if (mesh.getWeights().length) {\n        meshDef.weights = mesh.getWeights();\n      }\n      if (targetNames) {\n        meshDef.extras = meshDef.extras || {};\n        meshDef.extras['targetNames'] = targetNames;\n      }\n      context.meshIndexMap.set(mesh, index);\n      return meshDef;\n    });\n    /** Cameras. */\n    json.cameras = root.listCameras().map((camera, index) => {\n      const cameraDef = context.createPropertyDef(camera);\n      cameraDef.type = camera.getType();\n      if (cameraDef.type === Camera.Type.PERSPECTIVE) {\n        cameraDef.perspective = {\n          znear: camera.getZNear(),\n          zfar: camera.getZFar(),\n          yfov: camera.getYFov()\n        };\n        const aspectRatio = camera.getAspectRatio();\n        if (aspectRatio !== null) {\n          cameraDef.perspective.aspectRatio = aspectRatio;\n        }\n      } else {\n        cameraDef.orthographic = {\n          znear: camera.getZNear(),\n          zfar: camera.getZFar(),\n          xmag: camera.getXMag(),\n          ymag: camera.getYMag()\n        };\n      }\n      context.cameraIndexMap.set(camera, index);\n      return cameraDef;\n    });\n    /* Nodes. */\n    json.nodes = root.listNodes().map((node, index) => {\n      const nodeDef = context.createPropertyDef(node);\n      if (!MathUtils.eq(node.getTranslation(), [0, 0, 0])) {\n        nodeDef.translation = node.getTranslation();\n      }\n      if (!MathUtils.eq(node.getRotation(), [0, 0, 0, 1])) {\n        nodeDef.rotation = node.getRotation();\n      }\n      if (!MathUtils.eq(node.getScale(), [1, 1, 1])) {\n        nodeDef.scale = node.getScale();\n      }\n      if (node.getWeights().length) {\n        nodeDef.weights = node.getWeights();\n      }\n      // Attachments (mesh, camera, skin) defined later in writing process.\n      context.nodeIndexMap.set(node, index);\n      return nodeDef;\n    });\n    /** Skins. */\n    json.skins = root.listSkins().map((skin, index) => {\n      const skinDef = context.createPropertyDef(skin);\n      const inverseBindMatrices = skin.getInverseBindMatrices();\n      if (inverseBindMatrices) {\n        skinDef.inverseBindMatrices = context.accessorIndexMap.get(inverseBindMatrices);\n      }\n      const skeleton = skin.getSkeleton();\n      if (skeleton) {\n        skinDef.skeleton = context.nodeIndexMap.get(skeleton);\n      }\n      skinDef.joints = skin.listJoints().map(joint => context.nodeIndexMap.get(joint));\n      context.skinIndexMap.set(skin, index);\n      return skinDef;\n    });\n    /** Node attachments. */\n    root.listNodes().forEach((node, index) => {\n      const nodeDef = json.nodes[index];\n      const mesh = node.getMesh();\n      if (mesh) {\n        nodeDef.mesh = context.meshIndexMap.get(mesh);\n      }\n      const camera = node.getCamera();\n      if (camera) {\n        nodeDef.camera = context.cameraIndexMap.get(camera);\n      }\n      const skin = node.getSkin();\n      if (skin) {\n        nodeDef.skin = context.skinIndexMap.get(skin);\n      }\n      if (node.listChildren().length > 0) {\n        nodeDef.children = node.listChildren().map(node => context.nodeIndexMap.get(node));\n      }\n    });\n    /** Animations. */\n    json.animations = root.listAnimations().map((animation, index) => {\n      const animationDef = context.createPropertyDef(animation);\n      const samplerIndexMap = new Map();\n      animationDef.samplers = animation.listSamplers().map((sampler, samplerIndex) => {\n        const samplerDef = context.createPropertyDef(sampler);\n        samplerDef.input = context.accessorIndexMap.get(sampler.getInput());\n        samplerDef.output = context.accessorIndexMap.get(sampler.getOutput());\n        samplerDef.interpolation = sampler.getInterpolation();\n        samplerIndexMap.set(sampler, samplerIndex);\n        return samplerDef;\n      });\n      animationDef.channels = animation.listChannels().map(channel => {\n        const channelDef = context.createPropertyDef(channel);\n        channelDef.sampler = samplerIndexMap.get(channel.getSampler());\n        channelDef.target = {\n          node: context.nodeIndexMap.get(channel.getTargetNode()),\n          path: channel.getTargetPath()\n        };\n        return channelDef;\n      });\n      context.animationIndexMap.set(animation, index);\n      return animationDef;\n    });\n    /* Scenes. */\n    json.scenes = root.listScenes().map((scene, index) => {\n      const sceneDef = context.createPropertyDef(scene);\n      sceneDef.nodes = scene.listChildren().map(node => context.nodeIndexMap.get(node));\n      context.sceneIndexMap.set(scene, index);\n      return sceneDef;\n    });\n    const defaultScene = root.getDefaultScene();\n    if (defaultScene) {\n      json.scene = root.listScenes().indexOf(defaultScene);\n    }\n    /* Extensions (2/2). */\n    json.extensionsUsed = extensionsUsed.map(ext => ext.extensionName);\n    json.extensionsRequired = extensionsRequired.map(ext => ext.extensionName);\n    extensionsUsed.forEach(extension => extension.write(context));\n    //\n    clean(json);\n    return jsonDoc;\n  }\n}\n/**\n * Removes empty and null values from an object.\n * @param object\n * @internal\n */\nfunction clean(object) {\n  const unused = [];\n  for (const key in object) {\n    const value = object[key];\n    if (Array.isArray(value) && value.length === 0) {\n      unused.push(key);\n    } else if (value === null || value === '') {\n      unused.push(key);\n    } else if (value && typeof value === 'object' && Object.keys(value).length === 0) {\n      unused.push(key);\n    }\n  }\n  for (const key of unused) {\n    delete object[key];\n  }\n}\n\nvar ChunkType;\n(function (ChunkType) {\n  ChunkType[ChunkType[\"JSON\"] = 1313821514] = \"JSON\";\n  ChunkType[ChunkType[\"BIN\"] = 5130562] = \"BIN\";\n})(ChunkType || (ChunkType = {}));\n/**\n * *Abstract I/O service.*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * For platform-specific implementations, see {@link NodeIO}, {@link WebIO}, and {@link DenoIO}.\n *\n * @category I/O\n */\nclass PlatformIO {\n  constructor() {\n    this._logger = Logger.DEFAULT_INSTANCE;\n    this._extensions = new Set();\n    this._dependencies = {};\n    this._vertexLayout = VertexLayout.INTERLEAVED;\n    /** @hidden */\n    this.lastReadBytes = 0;\n    /** @hidden */\n    this.lastWriteBytes = 0;\n  }\n  /** Sets the {@link Logger} used by this I/O instance. Defaults to Logger.DEFAULT_INSTANCE. */\n  setLogger(logger) {\n    this._logger = logger;\n    return this;\n  }\n  /** Registers extensions, enabling I/O class to read and write glTF assets requiring them. */\n  registerExtensions(extensions) {\n    for (const extension of extensions) {\n      this._extensions.add(extension);\n      extension.register();\n    }\n    return this;\n  }\n  /** Registers dependencies used (e.g. by extensions) in the I/O process. */\n  registerDependencies(dependencies) {\n    Object.assign(this._dependencies, dependencies);\n    return this;\n  }\n  /**\n   * Sets the vertex layout method used by this I/O instance. Defaults to\n   * VertexLayout.INTERLEAVED.\n   */\n  setVertexLayout(layout) {\n    this._vertexLayout = layout;\n    return this;\n  }\n  /**********************************************************************************************\n   * Public Read API.\n   */\n  /** Reads a {@link Document} from the given URI. */\n  async read(uri) {\n    return await this.readJSON(await this.readAsJSON(uri));\n  }\n  /** Loads a URI and returns a {@link JSONDocument} struct, without parsing. */\n  async readAsJSON(uri) {\n    const view = await this.readURI(uri, 'view');\n    this.lastReadBytes = view.byteLength;\n    const jsonDoc = isGLB(view) ? this._binaryToJSON(view) : {\n      json: JSON.parse(BufferUtils.decodeText(view)),\n      resources: {}\n    };\n    // Read external resources first, before Data URIs are replaced.\n    await this._readResourcesExternal(jsonDoc, this.dirname(uri));\n    this._readResourcesInternal(jsonDoc);\n    return jsonDoc;\n  }\n  /** Converts glTF-formatted JSON and a resource map to a {@link Document}. */\n  async readJSON(jsonDoc) {\n    jsonDoc = this._copyJSON(jsonDoc);\n    this._readResourcesInternal(jsonDoc);\n    return GLTFReader.read(jsonDoc, {\n      extensions: Array.from(this._extensions),\n      dependencies: this._dependencies,\n      logger: this._logger\n    });\n  }\n  /** Converts a GLB-formatted Uint8Array to a {@link JSONDocument}. */\n  async binaryToJSON(glb) {\n    const jsonDoc = this._binaryToJSON(BufferUtils.assertView(glb));\n    this._readResourcesInternal(jsonDoc);\n    const json = jsonDoc.json;\n    // Check for external references, which can't be resolved by this method.\n    if (json.buffers && json.buffers.some(bufferDef => isExternalBuffer(jsonDoc, bufferDef))) {\n      throw new Error('Cannot resolve external buffers with binaryToJSON().');\n    } else if (json.images && json.images.some(imageDef => isExternalImage(jsonDoc, imageDef))) {\n      throw new Error('Cannot resolve external images with binaryToJSON().');\n    }\n    return jsonDoc;\n  }\n  /** Converts a GLB-formatted Uint8Array to a {@link Document}. */\n  async readBinary(glb) {\n    return this.readJSON(await this.binaryToJSON(BufferUtils.assertView(glb)));\n  }\n  /**********************************************************************************************\n   * Public Write API.\n   */\n  /** Converts a {@link Document} to glTF-formatted JSON and a resource map. */\n  async writeJSON(doc, _options = {}) {\n    if (_options.format === Format.GLB && doc.getRoot().listBuffers().length > 1) {\n      throw new Error('GLB must have 01 buffers.');\n    }\n    return GLTFWriter.write(doc, {\n      format: _options.format || Format.GLTF,\n      basename: _options.basename || '',\n      logger: this._logger,\n      vertexLayout: this._vertexLayout,\n      dependencies: _extends({}, this._dependencies),\n      extensions: Array.from(this._extensions)\n    });\n  }\n  /** Converts a {@link Document} to a GLB-formatted Uint8Array. */\n  async writeBinary(doc) {\n    const {\n      json,\n      resources\n    } = await this.writeJSON(doc, {\n      format: Format.GLB\n    });\n    const header = new Uint32Array([0x46546c67, 2, 12]);\n    const jsonText = JSON.stringify(json);\n    const jsonChunkData = BufferUtils.pad(BufferUtils.encodeText(jsonText), 0x20);\n    const jsonChunkHeader = BufferUtils.toView(new Uint32Array([jsonChunkData.byteLength, 0x4e4f534a]));\n    const jsonChunk = BufferUtils.concat([jsonChunkHeader, jsonChunkData]);\n    header[header.length - 1] += jsonChunk.byteLength;\n    const binBuffer = Object.values(resources)[0];\n    if (!binBuffer || !binBuffer.byteLength) {\n      return BufferUtils.concat([BufferUtils.toView(header), jsonChunk]);\n    }\n    const binChunkData = BufferUtils.pad(binBuffer, 0x00);\n    const binChunkHeader = BufferUtils.toView(new Uint32Array([binChunkData.byteLength, 0x004e4942]));\n    const binChunk = BufferUtils.concat([binChunkHeader, binChunkData]);\n    header[header.length - 1] += binChunk.byteLength;\n    return BufferUtils.concat([BufferUtils.toView(header), jsonChunk, binChunk]);\n  }\n  /**********************************************************************************************\n   * Internal.\n   */\n  async _readResourcesExternal(jsonDoc, base) {\n    var _this = this;\n    const images = jsonDoc.json.images || [];\n    const buffers = jsonDoc.json.buffers || [];\n    const pendingResources = [...images, ...buffers].map(async function (resource) {\n      const uri = resource.uri;\n      if (!uri || uri.match(/data:/)) return Promise.resolve();\n      jsonDoc.resources[uri] = await _this.readURI(_this.resolve(base, uri), 'view');\n      _this.lastReadBytes += jsonDoc.resources[uri].byteLength;\n    });\n    await Promise.all(pendingResources);\n  }\n  _readResourcesInternal(jsonDoc) {\n    // NOTICE: This method may be called more than once during the loading\n    // process (e.g. WebIO.read) and should handle that safely.\n    function resolveResource(resource) {\n      if (!resource.uri) return;\n      if (resource.uri in jsonDoc.resources) {\n        BufferUtils.assertView(jsonDoc.resources[resource.uri]);\n        return;\n      }\n      if (resource.uri.match(/data:/)) {\n        // Rewrite Data URIs to something short and unique.\n        const resourceUUID = `__${uuid()}.${FileUtils.extension(resource.uri)}`;\n        jsonDoc.resources[resourceUUID] = BufferUtils.createBufferFromDataURI(resource.uri);\n        resource.uri = resourceUUID;\n      }\n    }\n    // Unpack images.\n    const images = jsonDoc.json.images || [];\n    images.forEach(image => {\n      if (image.bufferView === undefined && image.uri === undefined) {\n        throw new Error('Missing resource URI or buffer view.');\n      }\n      resolveResource(image);\n    });\n    // Unpack buffers.\n    const buffers = jsonDoc.json.buffers || [];\n    buffers.forEach(resolveResource);\n  }\n  /**\n   * Creates a shallow copy of glTF-formatted {@link JSONDocument}.\n   *\n   * Images, Buffers, and Resources objects are deep copies so that PlatformIO can safely\n   * modify them during the parsing process. Other properties are shallow copies, and buffers\n   * are passed by reference.\n   */\n  _copyJSON(jsonDoc) {\n    const {\n      images,\n      buffers\n    } = jsonDoc.json;\n    jsonDoc = {\n      json: _extends({}, jsonDoc.json),\n      resources: _extends({}, jsonDoc.resources)\n    };\n    if (images) {\n      jsonDoc.json.images = images.map(image => _extends({}, image));\n    }\n    if (buffers) {\n      jsonDoc.json.buffers = buffers.map(buffer => _extends({}, buffer));\n    }\n    return jsonDoc;\n  }\n  /** Internal version of binaryToJSON; does not warn about external resources. */\n  _binaryToJSON(glb) {\n    // Decode and verify GLB header.\n    if (!isGLB(glb)) {\n      throw new Error('Invalid glTF 2.0 binary.');\n    }\n    // Decode JSON chunk.\n    const jsonChunkHeader = new Uint32Array(glb.buffer, glb.byteOffset + 12, 2);\n    if (jsonChunkHeader[1] !== ChunkType.JSON) {\n      throw new Error('Missing required GLB JSON chunk.');\n    }\n    const jsonByteOffset = 20;\n    const jsonByteLength = jsonChunkHeader[0];\n    const jsonText = BufferUtils.decodeText(BufferUtils.toView(glb, jsonByteOffset, jsonByteLength));\n    const json = JSON.parse(jsonText);\n    // Decode BIN chunk.\n    const binByteOffset = jsonByteOffset + jsonByteLength;\n    if (glb.byteLength <= binByteOffset) {\n      return {\n        json,\n        resources: {}\n      };\n    }\n    const binChunkHeader = new Uint32Array(glb.buffer, glb.byteOffset + binByteOffset, 2);\n    if (binChunkHeader[1] !== ChunkType.BIN) {\n      // Allow GLB files without BIN chunk, but with unknown chunk\n      // Spec: https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#chunks-overview\n      return {\n        json,\n        resources: {}\n      };\n    }\n    const binByteLength = binChunkHeader[0];\n    const binBuffer = BufferUtils.toView(glb, binByteOffset + 8, binByteLength);\n    return {\n      json,\n      resources: {\n        [GLB_BUFFER]: binBuffer\n      }\n    };\n  }\n}\nfunction isExternalBuffer(jsonDocument, bufferDef) {\n  return bufferDef.uri !== undefined && !(bufferDef.uri in jsonDocument.resources);\n}\nfunction isExternalImage(jsonDocument, imageDef) {\n  return imageDef.uri !== undefined && !(imageDef.uri in jsonDocument.resources) && imageDef.bufferView === undefined;\n}\nfunction isGLB(view) {\n  if (view.byteLength < 3 * Uint32Array.BYTES_PER_ELEMENT) return false;\n  const header = new Uint32Array(view.buffer, view.byteOffset, 3);\n  return header[0] === 0x46546c67 && header[1] === 2;\n}\n\n/**\n * *I/O service for [Deno](https://deno.land/).*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * _*NOTICE:* Support for the Deno environment is currently experimental. See\n * [glTF-Transform#457](https://github.com/donmccurdy/glTF-Transform/issues/457)._\n *\n * Usage:\n *\n * ```typescript\n * import { DenoIO } from 'https://esm.sh/@gltf-transform/core';\n * import * as path from 'https://deno.land/std/path/mod.ts';\n *\n * const io = new DenoIO(path);\n *\n * // Read.\n * let document;\n * document = io.read('model.glb');  //  Document\n * document = io.readBinary(glb);    // Uint8Array  Document\n *\n * // Write.\n * const glb = io.writeBinary(document);  // Document  Uint8Array\n * ```\n *\n * @category I/O\n */\nclass DenoIO extends PlatformIO {\n  constructor(path) {\n    super();\n    this._path = void 0;\n    this._path = path;\n  }\n  async readURI(uri, type) {\n    switch (type) {\n      case 'view':\n        return Deno.readFile(uri);\n      case 'text':\n        return Deno.readTextFile(uri);\n    }\n  }\n  resolve(base, path) {\n    // https://github.com/KhronosGroup/glTF/issues/1449\n    // https://stackoverflow.com/a/27278490/1314762\n    return this._path.resolve(base, decodeURIComponent(path));\n  }\n  dirname(uri) {\n    return this._path.dirname(uri);\n  }\n}\n\n/**\n * *I/O service for Node.js.*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * Usage:\n *\n * ```typescript\n * import { NodeIO } from '@gltf-transform/core';\n *\n * const io = new NodeIO();\n *\n * // Read.\n * let document;\n * document = await io.read('model.glb'); //  Document\n * document = await io.readBinary(glb);   // Uint8Array  Document\n *\n * // Write.\n * await io.write('model.glb', document);      //  void\n * const glb = await io.writeBinary(document); // Document  Uint8Array\n * ```\n *\n * By default, NodeIO can only read/write paths on disk. To enable network requests, provide a Fetch\n * API implementation (global [`fetch()`](https://nodejs.org/api/globals.html#fetch) is stable in\n * Node.js v21+, or [`node-fetch`](https://www.npmjs.com/package/node-fetch) may be installed) and enable\n * {@link NodeIO.setAllowNetwork setAllowNetwork}. Network requests may optionally be configured with\n * [RequestInit](https://developer.mozilla.org/en-US/docs/Web/API/fetch#parameters) parameters.\n *\n * ```typescript\n * const io = new NodeIO(fetch, {headers: {...}}).setAllowNetwork(true);\n *\n * const document = await io.read('https://example.com/path/to/model.glb');\n * ```\n *\n * @category I/O\n */\nclass NodeIO extends PlatformIO {\n  /**\n   * Constructs a new NodeIO service. Instances are reusable. By default, only NodeIO can only\n   * read/write paths on disk. To enable HTTP requests, provide a Fetch API implementation and\n   * enable {@link NodeIO.setAllowNetwork setAllowNetwork}.\n   *\n   * @param fetch Implementation of Fetch API.\n   * @param fetchConfig Configuration object for Fetch API.\n   */\n  constructor(_fetch = null, _fetchConfig = HTTPUtils.DEFAULT_INIT) {\n    super();\n    this._fetch = void 0;\n    this._fetchConfig = void 0;\n    this._init = void 0;\n    this._fetchEnabled = false;\n    this._fetch = _fetch;\n    this._fetchConfig = _fetchConfig;\n    this._init = this.init();\n  }\n  async init() {\n    if (this._init) return this._init;\n    return Promise.all([import('fs'), import('path')]).then(([fs, path]) => {\n      this._fs = fs.promises;\n      this._path = path;\n    });\n  }\n  setAllowNetwork(allow) {\n    if (allow && !this._fetch) {\n      throw new Error('NodeIO requires a Fetch API implementation for HTTP requests.');\n    }\n    this._fetchEnabled = allow;\n    return this;\n  }\n  async readURI(uri, type) {\n    await this.init();\n    if (HTTPUtils.isAbsoluteURL(uri)) {\n      if (!this._fetchEnabled || !this._fetch) {\n        throw new Error('Network request blocked. Allow HTTP requests explicitly, if needed.');\n      }\n      const response = await this._fetch(uri, this._fetchConfig);\n      switch (type) {\n        case 'view':\n          return new Uint8Array(await response.arrayBuffer());\n        case 'text':\n          return response.text();\n      }\n    } else {\n      switch (type) {\n        case 'view':\n          return this._fs.readFile(uri);\n        case 'text':\n          return this._fs.readFile(uri, 'utf8');\n      }\n    }\n  }\n  resolve(base, path) {\n    if (HTTPUtils.isAbsoluteURL(base) || HTTPUtils.isAbsoluteURL(path)) {\n      return HTTPUtils.resolve(base, path);\n    }\n    // https://github.com/KhronosGroup/glTF/issues/1449\n    // https://stackoverflow.com/a/27278490/1314762\n    return this._path.resolve(base, decodeURIComponent(path));\n  }\n  dirname(uri) {\n    if (HTTPUtils.isAbsoluteURL(uri)) {\n      return HTTPUtils.dirname(uri);\n    }\n    return this._path.dirname(uri);\n  }\n  /**********************************************************************************************\n   * Public.\n   */\n  /** Writes a {@link Document} instance to a local path. */\n  async write(uri, doc) {\n    await this.init();\n    const isGLB = !!uri.match(/\\.glb$/);\n    await (isGLB ? this._writeGLB(uri, doc) : this._writeGLTF(uri, doc));\n  }\n  /**********************************************************************************************\n   * Private.\n   */\n  /** @internal */\n  async _writeGLTF(uri, doc) {\n    var _this = this;\n    this.lastWriteBytes = 0;\n    const {\n      json,\n      resources\n    } = await this.writeJSON(doc, {\n      format: Format.GLTF,\n      basename: FileUtils.basename(uri)\n    });\n    const {\n      _fs: fs,\n      _path: path\n    } = this;\n    const dir = path.dirname(uri);\n    // write json\n    const jsonContent = JSON.stringify(json, null, 2);\n    await fs.writeFile(uri, jsonContent);\n    this.lastWriteBytes += jsonContent.length;\n    // write resources\n    for (const batch of listBatches(Object.keys(resources), 10)) {\n      await Promise.all(batch.map(async function (resourceURI) {\n        if (HTTPUtils.isAbsoluteURL(resourceURI)) {\n          if (HTTPUtils.extension(resourceURI) === 'bin') {\n            throw new Error(`Cannot write buffer to path \"${resourceURI}\".`);\n          }\n          return;\n        }\n        const resourcePath = path.join(dir, decodeURIComponent(resourceURI));\n        await fs.mkdir(path.dirname(resourcePath), {\n          recursive: true\n        });\n        await fs.writeFile(resourcePath, resources[resourceURI]);\n        _this.lastWriteBytes += resources[resourceURI].byteLength;\n      }));\n    }\n  }\n  /** @internal */\n  async _writeGLB(uri, doc) {\n    const buffer = await this.writeBinary(doc);\n    await this._fs.writeFile(uri, buffer);\n    this.lastWriteBytes = buffer.byteLength;\n  }\n}\n/** Divides a flat input array into batches of size `batchSize`. */\nfunction listBatches(array, batchSize) {\n  const batches = [];\n  for (let i = 0, il = array.length; i < il; i += batchSize) {\n    const batch = [];\n    for (let j = 0; j < batchSize && i + j < il; j++) {\n      batch.push(array[i + j]);\n    }\n    batches.push(batch);\n  }\n  return batches;\n}\n\n/**\n * *I/O service for Web.*\n *\n * The most common use of the I/O service is to read/write a {@link Document} with a given path.\n * Methods are also available for converting in-memory representations of raw glTF files, both\n * binary (*Uint8Array*) and JSON ({@link JSONDocument}).\n *\n * Usage:\n *\n * ```typescript\n * import { WebIO } from '@gltf-transform/core';\n *\n * const io = new WebIO({credentials: 'include'});\n *\n * // Read.\n * let document;\n * document = await io.read('model.glb');  //  Document\n * document = await io.readBinary(glb);    // Uint8Array  Document\n *\n * // Write.\n * const glb = await io.writeBinary(document); // Document  Uint8Array\n * ```\n *\n * @category I/O\n */\nclass WebIO extends PlatformIO {\n  /**\n   * Constructs a new WebIO service. Instances are reusable.\n   * @param fetchConfig Configuration object for Fetch API.\n   */\n  constructor(fetchConfig = HTTPUtils.DEFAULT_INIT) {\n    super();\n    this._fetchConfig = void 0;\n    this._fetchConfig = fetchConfig;\n  }\n  async readURI(uri, type) {\n    const response = await fetch(uri, this._fetchConfig);\n    switch (type) {\n      case 'view':\n        return new Uint8Array(await response.arrayBuffer());\n      case 'text':\n        return response.text();\n    }\n  }\n  resolve(base, path) {\n    return HTTPUtils.resolve(base, path);\n  }\n  dirname(uri) {\n    return HTTPUtils.dirname(uri);\n  }\n}\n\nexport { Accessor, Animation, AnimationChannel, AnimationSampler, Buffer$1 as Buffer, BufferUtils, COPY_IDENTITY, Camera, ColorUtils, ComponentTypeToTypedArray, DenoIO, Document, ExtensibleProperty, Extension, ExtensionProperty, FileUtils, Format, GLB_BUFFER, HTTPUtils, ImageUtils, Logger, Material, MathUtils, Mesh, Node, NodeIO, PlatformIO, Primitive, PrimitiveTarget, Property, PropertyType, ReaderContext, Root, Scene, Skin, Texture, TextureChannel, TextureInfo, VERSION, Verbosity, VertexLayout, WebIO, WriterContext, getBounds, uuid };\n//# sourceMappingURL=index.modern.js.map\n","export type Vertex = {\n  x: number;\n  y: number;\n  z: number;\n};\n\nexport type Color = [number, number, number, number];\n\nexport type Face = {\n  vertices: [number, number, number];\n  colorIndex: number;\n};\n\nexport type IndexedPolyhedron = {\n  vertices: Vertex[];\n  faces: Face[];\n  colors: Color[];\n};\n\n// export const DEFAULT_FACE_COLOR: Color = [0xf9 / 255, 0xd7 / 255, 0x2c / 255, 1];\nexport const DEFAULT_FACE_COLOR: Color = [79 / 255, 209 / 255, 197 / 255, 1]; // Teal (#4FD1C5)\n\n/**\n * Converts a hex color string (e.g. \"#4FD1C5\" or \"4FD1C5\") to a Color tuple ([r, g, b, a]).\n * Alpha defaults to 1 if not specified.\n * Accepts 3, 4, 6, or 8 digit hex (with or without #).\n */\nexport function colorFromHex(hex: string, alpha: number = 1): Color {\n  let hexStr = hex.replace(/^#/, '');\n  if (hexStr.length === 3) {\n    hexStr = hexStr\n      .split('')\n      .map((x) => x + x)\n      .join('');\n  } else if (hexStr.length === 4) {\n    hexStr = hexStr\n      .split('')\n      .map((x) => x + x)\n      .join('');\n  }\n  let r = 0,\n    g = 0,\n    b = 0,\n    a = alpha;\n  if (hexStr.length === 6) {\n    r = parseInt(hexStr.slice(0, 2), 16) / 255;\n    g = parseInt(hexStr.slice(2, 4), 16) / 255;\n    b = parseInt(hexStr.slice(4, 6), 16) / 255;\n  } else if (hexStr.length === 8) {\n    r = parseInt(hexStr.slice(0, 2), 16) / 255;\n    g = parseInt(hexStr.slice(2, 4), 16) / 255;\n    b = parseInt(hexStr.slice(4, 6), 16) / 255;\n    a = parseInt(hexStr.slice(6, 8), 16) / 255;\n  } else {\n    throw new Error('Invalid hex color format');\n  }\n  return [r, g, b, a];\n}\n","import { Accessor, Document, NodeIO, Primitive } from '@gltf-transform/core';\nimport { Color, colorFromHex, type Face, type IndexedPolyhedron } from './common';\n\ntype Geom = {\n  positions: Float32Array;\n  indices: Uint32Array;\n  colors?: Float32Array;\n};\n\nfunction createPrimitive(\n  doc: Document,\n  baseColorFactor: Color,\n  { positions, indices, colors }: Geom,\n): Primitive {\n  const prim = doc\n    .createPrimitive()\n    .setMode(Primitive.Mode.TRIANGLES)\n    .setMaterial(\n      doc\n        .createMaterial()\n        .setDoubleSided(true)\n        .setAlphaMode(baseColorFactor[3] < 1 ? 'BLEND' : 'OPAQUE')\n        .setMetallicFactor(0.0)\n        .setRoughnessFactor(0.8)\n        .setBaseColorFactor(baseColorFactor),\n    )\n    .setAttribute('POSITION', doc.createAccessor().setType(Accessor.Type.VEC3).setArray(positions))\n    .setIndices(doc.createAccessor().setType(Accessor.Type.SCALAR).setArray(indices));\n  if (colors) {\n    prim.setAttribute('COLOR_0', doc.createAccessor().setType(Accessor.Type.VEC3).setArray(colors));\n  }\n  return prim;\n}\n\nfunction getGeom(data: IndexedPolyhedron): Geom {\n  const positions = new Float32Array(data.vertices.length * 3);\n  const indices = new Uint32Array(data.faces.length * 3);\n\n  const addedVertices = new Map<number, number>();\n  let verticesAdded = 0;\n  const addVertex = (i: number) => {\n    let index = addedVertices.get(i);\n    if (index === undefined) {\n      const offset = verticesAdded * 3;\n      const vertex = data.vertices[i];\n      positions[offset] = vertex.x;\n      positions[offset + 1] = vertex.y;\n      positions[offset + 2] = vertex.z;\n      index = verticesAdded++;\n      addedVertices.set(i, index);\n    }\n    return index;\n  };\n\n  data.faces.forEach((face, i) => {\n    const { vertices } = face;\n    if (vertices.length < 3) throw new Error('Face must have at least 3 vertices');\n\n    const offset = i * 3;\n    indices[offset] = addVertex(vertices[0]);\n    indices[offset + 1] = addVertex(vertices[1]);\n    indices[offset + 2] = addVertex(vertices[2]);\n  });\n  return {\n    positions: positions.slice(0, verticesAdded * 3),\n    indices,\n  };\n}\n\nexport async function exportGlb(\n  data: IndexedPolyhedron,\n  isLightMode: boolean = false,\n): Promise<Blob> {\n  // Replace specific colors with nicer ones\n  const oldColors = [\n    [0.615686274509804, 0.796078431372549, 0.3176470588235294, 1],\n    [0.9764705882352941, 0.8431372549019608, 0.17254901960784313, 1],\n  ];\n  const newColors: Color[] =\n    isLightMode ?\n      [\n        colorFromHex('#322'), // Cuts\n        colorFromHex('#222'), // Outside\n      ]\n    : [\n        colorFromHex('#efdfdf'), // Cuts\n        colorFromHex('#fff'), // Outside\n      ];\n  const replacedColors = data.colors.map((c) => {\n    for (let i = 0; i < oldColors.length; ++i) {\n      if (\n        c.length === 4\n        && Math.abs(c[0] - oldColors[i][0]) < 1e-6\n        && Math.abs(c[1] - oldColors[i][1]) < 1e-6\n        && Math.abs(c[2] - oldColors[i][2]) < 1e-6\n        && Math.abs(c[3] - oldColors[i][3]) < 1e-6\n      ) {\n        return newColors[i];\n      }\n    }\n    return c;\n  });\n\n  const doc = new Document();\n  // const lightExt = doc.createExtension(KHRLightsPunctual);\n  doc.createBuffer();\n\n  const scene = doc.createScene();\n  // .addChild(doc.createNode()\n  //     .setExtension('KHR_lights_punctual', lightExt\n  //         .createLight()\n  //         .setType(Light.Type.DIRECTIONAL)\n  //         .setIntensity(1.0)\n  //         .setColor([1.0, 1.0, 1.0]))\n  //     .setRotation([-0.3250576, -0.3250576, 0, 0.8880739]))\n  // .addChild(doc.createNode()\n  //     .setExtension('KHR_lights_punctual', lightExt\n  //         .createLight()\n  //         .setType(Light.Type.DIRECTIONAL)\n  //         .setIntensity(1.0)\n  //         .setColor([1.0, 1.0, 1.0]))\n  //     .setRotation([0.6279631, 0.6279631, 0, 0.4597009]));\n\n  const mesh = doc.createMesh();\n\n  const facesByColor = new Map<number, Face[]>();\n  data.faces.forEach((face) => {\n    let faces = facesByColor.get(face.colorIndex);\n    if (!faces) facesByColor.set(face.colorIndex, (faces = []));\n    faces.push(face);\n  });\n  for (const [colorIndex, faces] of facesByColor.entries()) {\n    const color = replacedColors[colorIndex];\n    mesh.addPrimitive(\n      createPrimitive(\n        doc,\n        color,\n        getGeom({ vertices: data.vertices, faces, colors: replacedColors }),\n      ),\n    );\n  }\n  scene.addChild(doc.createNode().setMesh(mesh));\n\n  const glb = await new NodeIO()\n    // .registerExtensions([KHRLightsPunctual])\n    .writeBinary(doc);\n  // @ts-expect-error Blob constructor expects a BufferSource, but NodeIO returns Uint8Array which is compatible\n  return new Blob([glb], { type: 'model/gltf-binary' });\n}\n","// Portions of this file are Copyright 2021 Google LLC, and licensed under GPL2+. See COPYING.\n\nexport default `\n/* [Meta] */\ntitle = \"OpenSCAD Demo\";\nshow_text = true;\ndebug = true;\n\n/* [Plate Settings] */\n// Plate size (mm)\nplate_size = 40;          // [20:1:80]\n// Plate thickness\nthickness  = 6;           // [2:0.5:20]\n// Corner rounding\nfillet     = 3;           // [0:0.5:10]\n\n/* [Holes] */\n// Number of holes\nhole_count   = 6;         // [0:1:12]\n// Hole diameter\nhole_d       = 4;         // [2:0.5:10]\n// Hole pattern\nhole_pattern = \"circle\";  // [\"circle\", \"grid\"]\n\n/* [Quality] */\n$fs = $preview ? 1   : 0.2;\n$fa = $preview ? 15  : 5;\n\n\n/* ---------- Helpers ---------- */\n\nmodule label(txt) {\n    if (show_text)\n        color(\"pink\")\n            translate([0, -plate_size/2 - 8, thickness])\n                linear_extrude(1)\n                    text(txt, size=6, halign=\"center\");\n}\n\n\n/* ---------- Geometry ---------- */\n\nmodule holes_2d() {\n    if (hole_pattern == \"circle\")\n        for (i = [0 : hole_count - 1])\n            rotate(360 / hole_count * i)\n                translate([plate_size / 3, 0])\n                    circle(d = hole_d);\n    else\n        for (x = [-1, 0, 1], y = [-1, 0, 1])\n            translate([x * plate_size / 4, y * plate_size / 4])\n                circle(d = hole_d);\n}\n\nmodule plate_2d() {\n    difference() {\n        offset(r = fillet)\n            square(plate_size - 2 * fillet, center = true);\n        holes_2d();\n    }\n}\n\n\n/* ---------- Output ---------- */\n\ncolor(\"steelblue\")\ndifference() {\n    linear_extrude(thickness)\n        plate_2d();\n\n    // Debug cutaway\n    if (debug)\n        translate([0, 0, thickness/2])\n            cube([plate_size, plate_size/2, thickness+1], center=true);\n}\n\nlabel(title);\n\n`;\n","import { Color, DEFAULT_FACE_COLOR, Face, IndexedPolyhedron, Vertex } from './common';\n\nexport function parseOff(content: string): IndexedPolyhedron {\n  const lines = content\n    .split('\\n')\n    .map((line) => line.trim())\n    .filter((line) => line.length > 0 && !line.startsWith('#'));\n\n  if (lines.length === 0) throw new Error('Empty OFF file');\n\n  let counts: string;\n  let currentLine = 0;\n  if (lines[0].match(/^OFF(\\s|$)/)) {\n    counts = lines[0].substring(3).trim();\n    currentLine = 1;\n  } else if (lines[currentLine] === 'OFF' && lines.length > 1) {\n    counts = lines[1];\n    currentLine = 2;\n  } else {\n    throw new Error('Invalid OFF file: missing OFF header');\n  }\n\n  const [numVertices, numFaces] = counts.split(/\\s+/).map(Number);\n  if (isNaN(numVertices) || isNaN(numFaces))\n    throw new Error('Invalid OFF file: invalid vertex or face counts');\n\n  if (currentLine + numVertices + numFaces > lines.length)\n    throw new Error('Invalid OFF file: not enough lines');\n\n  const vertices: Vertex[] = [];\n  for (let i = 0; i < numVertices; i++) {\n    const parts = lines[currentLine + i].split(/\\s+/).map(Number);\n    if (parts.length < 3 || parts.some(isNaN))\n      throw new Error(`Invalid OFF file: invalid vertex at line ${currentLine + i + 1}`);\n    vertices.push({ x: parts[0], y: parts[1], z: parts[2] });\n  }\n  currentLine += numVertices;\n\n  const colors: Color[] = [];\n  const colorMap = new Map<string, number>();\n\n  const faces: Face[] = [];\n  for (let i = 0; i < numFaces; i++) {\n    const parts = lines[currentLine + i].split(/\\s+/).map(Number);\n    const numVerts = parts[0];\n    const vertices = parts.slice(1, numVerts + 1);\n    const color =\n      parts.length >= numVerts + 4 ?\n        (parts.slice(numVerts + 1, numVerts + 5).map((c) => c / 255) as [\n          number,\n          number,\n          number,\n          number,\n        ])\n      : DEFAULT_FACE_COLOR;\n    if (vertices.length < 3)\n      throw new Error(\n        `Invalid OFF file: face at line ${currentLine + i + 1} must have at least 3 vertices`,\n      );\n\n    const colorKey = color ? color.join(',') : '';\n    let colorIndex = colorMap.get(colorKey);\n    if (colorIndex == null) {\n      colorIndex = colors.length;\n      const [r, g, b, a] = color;\n      colors.push([r, g, b, a ?? 1]);\n      colorMap.set(colorKey, colorIndex);\n    }\n\n    if (vertices.length == 3) {\n      faces.push({\n        vertices: vertices as [number, number, number],\n        colorIndex,\n      });\n    } else {\n      // Triangulate the face\n      for (let j = 1; j < vertices.length - 1; j++) {\n        faces.push({\n          vertices: [vertices[0], vertices[j], vertices[j + 1]],\n          colorIndex,\n        });\n      }\n    }\n  }\n\n  return { vertices, faces, colors };\n}\n","import { type IndexedPolyhedron } from './common';\n\nfunction calculateNormal(\n  v1: { x: number; y: number; z: number },\n  v2: { x: number; y: number; z: number },\n  v3: { x: number; y: number; z: number },\n) {\n  const ux = v2.x - v1.x;\n  const uy = v2.y - v1.y;\n  const uz = v2.z - v1.z;\n  const vx = v3.x - v1.x;\n  const vy = v3.y - v1.y;\n  const vz = v3.z - v1.z;\n  return {\n    x: uy * vz - uz * vy,\n    y: uz * vx - ux * vz,\n    z: ux * vy - uy * vx,\n  };\n}\n\nexport async function exportStl(data: IndexedPolyhedron): Promise<Blob> {\n  let stl = 'solid polyhedron\\n';\n  for (const face of data.faces) {\n    const [i1, i2, i3] = face.vertices;\n    const v1 = data.vertices[i1];\n    const v2 = data.vertices[i2];\n    const v3 = data.vertices[i3];\n    const n = calculateNormal(v1, v2, v3);\n    stl += `  facet normal ${n.x} ${n.y} ${n.z}\\n`;\n    stl += '    outer loop\\n';\n    stl += `      vertex ${v1.x} ${v1.y} ${v1.z}\\n`;\n    stl += `      vertex ${v2.x} ${v2.y} ${v2.z}\\n`;\n    stl += `      vertex ${v3.x} ${v3.y} ${v3.z}\\n`;\n    stl += '    endloop\\n';\n    stl += '  endfacet\\n';\n  }\n  stl += 'endsolid polyhedron\\n';\n  return new Blob([stl], { type: 'model/stl' });\n}\n","import {\n  checkSyntax,\n  OpenSCADRenderArgs,\n  ParameterSet,\n  render as runOpenSCADRender,\n} from '../services/openscad-wasm-runner/actions.ts';\nimport { EditModel, SupabaseService, ViewModelDetails } from '../services/SupabaseService.ts';\nimport { createEditorZenFS, readFileSafe, writeFileSafe } from '../services/fs/filesystem.ts';\nimport { formatDate, getHashQueryParam, hashSha1, sanitizeAndLinkify } from '../utils.ts';\nimport ModelViewer, { ModelViewerHandle } from '../components/ModelViewer.tsx';\nimport { CenteredSpinner } from '../components/CenteredSpinner.tsx';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport CustomizerPanel from '../components/CustomizerPanel.tsx';\nimport { CommentsPanel } from '../components/CommentsPanel.tsx';\nimport ZenMonacoPrime from '../components/ZenMonacoPrime.tsx';\nimport { useUserContext } from '../state/UseUserContext.tsx';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { ModelStats } from '../components/ModelStats.tsx';\nimport { exportGlb } from '../services/io/export_glb.ts';\nimport { InputTextarea } from 'primereact/inputtextarea';\nimport defaultScad from '../components/default-scad.ts';\nimport { parseOff } from '../services/io/import_off.ts';\nimport { exportStl } from '../services/io/export_stl';\nimport { ModelCard } from '../components/ModelCard';\nimport { InputText } from 'primereact/inputtext';\nimport styles from './EditorPage.module.css';\nimport { Menubar } from 'primereact/menubar';\nimport { useParams } from 'react-router-dom';\nimport type * as monaco from 'monaco-editor';\nimport { Dialog } from 'primereact/dialog';\nimport { Button } from 'primereact/button';\nimport { Toast } from 'primereact/toast';\nimport { Panel } from 'primereact/panel';\nimport { fs } from '@zenfs/core';\nimport { useUserPreferences } from '../state/UseUserPreferences.tsx';\nimport { useDebounceFn } from '../react-utils.ts';\n\ntype EditorPageProps = {\n  viewModelId?: string;\n};\n\nexport default function EditorPage({ viewModelId }: EditorPageProps) {\n  const { modelId } = useParams();\n  if (modelId) viewModelId = modelId;\n  const [userPrefs, setUserPrefs] = useUserPreferences();\n  const { user } = useUserContext();\n  const isReadonly = getHashQueryParam('readonly') !== null;\n  const [viewModel, setViewModel] = useState<ViewModelDetails | undefined>(undefined);\n  const [editModel, setEditModel] = useState<EditModel | undefined>(undefined);\n  const currentModelId = viewModelId ?? 'new';\n\n  // State for runningTaskName pipeline\n  const [glbFileUrl, setGlbFileUrl] = useState<string | undefined>(undefined);\n  const [offFileUrl, setOffFileUrl] = useState<string | undefined>(undefined);\n  const [stlFileUrl, setStlFileUrl] = useState<string | undefined>(undefined);\n  const [runningTaskName, setRunningTaskName] = useState<string | undefined>(undefined);\n  const [error, setError] = useState<string | undefined>(undefined);\n  const [logs, setLogs] = useState<string | undefined>(undefined);\n  const [largePreview, setLargePreview] = useState<boolean>(false);\n  const [isLightMode, setIsLightMode] = useState<boolean>(false);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [outdated, setIsOutdated] = useState<boolean>(false);\n\n  const [parameterSet, setParameterSet] = useState<ParameterSet | undefined>(undefined);\n  const [markers, setMarkers] = useState<monaco.editor.IMarkerData[] | undefined>(undefined);\n  const [parameterValues, setParameterValues] = useState<{ [key: string]: any }>({});\n\n  const [publishDialogVisible, setPublishDialogVisible] = useState(false);\n  const [publishPreviewDataUrl, setPublishPreviewDataUrl] = useState<string | null>(null);\n\n  const [activeTabIndex, setActiveTabIndex] = useState(viewModelId !== undefined ? 0 : 1);\n\n  const toastRef = useRef<Toast>(null);\n  const viewerRef = useRef<ModelViewerHandle>(null);\n  const hasInitialized = useRef(false);\n  const [editorReloadKey, setEditorReloadKey] = useState(0);\n\n  const getIndexScadFilePath = useCallback(() => {\n    return `/src/${currentModelId}/index.scad`;\n  }, [currentModelId]);\n\n  const initFiles = useCallback(\n    async (viewModelInner?: ViewModelDetails) => {\n      // need to have this viewModelInner as the outside viewModel can be stale\n      try {\n        const indexScadFilePath = getIndexScadFilePath();\n        if (currentModelId == 'new') {\n          writeFileSafe(indexScadFilePath, defaultScad, false);\n        } else if (!fs.existsSync(indexScadFilePath) && viewModelInner !== undefined) {\n          writeFileSafe(indexScadFilePath, viewModelInner.source_code, true);\n        } else if (viewModelInner !== undefined) {\n          const localFileContent = readFileSafe(indexScadFilePath);\n          const localHash = await hashSha1(localFileContent);\n          if (localHash != viewModelInner.source_code_hash) {\n            setIsOutdated(true);\n          }\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    [currentModelId, getIndexScadFilePath],\n  );\n\n  const customizer = useCallback(async () => {\n    setRunningTaskName('Checking Syntax...');\n    try {\n      const filePath = getIndexScadFilePath();\n      const content = readFileSafe(filePath);\n      const sources = [{ path: filePath, content }];\n      const result = await checkSyntax({\n        activePath: filePath,\n        sources,\n      })({ now: true });\n\n      if (result.parameterSet) {\n        setParameterSet(result.parameterSet);\n      }\n      if (result.markers) {\n        setMarkers(result.markers);\n      }\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setRunningTaskName(undefined);\n    }\n  }, []);\n\n  // Main render pipeline\n  const renderCreator = (isPreview: boolean) => {\n    return async () => {\n      setRunningTaskName(isPreview ? 'Previewing...' : 'Rendering...');\n      setError(undefined);\n      setLogs(undefined);\n      try {\n        const filePath = getIndexScadFilePath();\n        let content = readFileSafe(filePath);\n        const sources = [{ path: filePath, content }];\n        const renderArgs: OpenSCADRenderArgs = {\n          scadPath: filePath,\n          sources,\n          vars: parameterValues,\n          isPreview: isPreview,\n          mountArchives: true,\n          renderFormat: 'off',\n          streamsCallback: (ps) => {\n            if ('stderr' in ps) setLogs((l) => (l ? l + '\\n' : '') + ps.stderr);\n            if ('stdout' in ps) setLogs((l) => (l ? l + '\\n' : '') + ps.stdout);\n          },\n        };\n        const result = await runOpenSCADRender(renderArgs)({ now: true });\n        if (offFileUrl) URL.revokeObjectURL(offFileUrl);\n        setOffFileUrl(URL.createObjectURL(result.outFile));\n\n        let glbFile: File;\n        try {\n          const offData = parseOff(await result.outFile.text());\n          glbFile = new File(\n            [await exportGlb(offData)],\n            result.outFile.name.replace('.off', '.glb'),\n          );\n        } catch (e) {\n          setError('Failed to convert OFF to GLB: ' + e);\n          setRunningTaskName(undefined);\n          return;\n        }\n        if (glbFileUrl) URL.revokeObjectURL(glbFileUrl);\n        setGlbFileUrl(URL.createObjectURL(glbFile));\n      } catch (e: any) {\n        setError(e?.message || String(e));\n      } finally {\n        setRunningTaskName(undefined);\n      }\n    };\n  };\n  const preview = useCallback(renderCreator(true), [parameterValues]);\n  const render = useCallback(renderCreator(false), [parameterValues]);\n  const debouncedPreview = useDebounceFn(preview, 1000);\n\n  // Handler for publish action\n  const handlePublish = async () => {\n    if (!viewerRef.current) return;\n    const screenshot = await viewerRef.current.getWebpScreenshot();\n    if (!screenshot) {\n      setError('Failed to capture screenshot for publish.');\n      return;\n    }\n    setPublishPreviewDataUrl(screenshot);\n    setPublishDialogVisible(true);\n  };\n\n  const handleConfirmPublish = async () => {\n    if (!user || !publishPreviewDataUrl || !editModel) return;\n    setPublishDialogVisible(false);\n    toastRef.current?.show({ severity: 'info', summary: 'Uploading...', life: 5000 });\n    try {\n      // Convert data URL to File\n      const res = await fetch(publishPreviewDataUrl);\n      const blob = await res.blob();\n      const file = new File([blob], `${Date.now()}.webp`, { type: 'image/webp' });\n      const editorContent: string = readFileSafe(getIndexScadFilePath());\n      await SupabaseService.uploadModel(file, editorContent, editModel);\n      toastRef.current?.clear();\n      toastRef.current?.show({\n        severity: 'success',\n        summary: 'Published',\n        detail: 'Model published successfully!',\n        life: 3000,\n      });\n    } catch (err: any) {\n      toastRef.current?.clear();\n      toastRef.current?.show({\n        severity: 'error',\n        summary: 'Publish Failed',\n        detail: err.message || String(err),\n        life: 4000,\n      });\n    } finally {\n      setPublishDialogVisible(false);\n      setPublishPreviewDataUrl(null);\n    }\n  };\n\n  const handleCancelPublish = () => {\n    setPublishDialogVisible(false);\n    setPublishPreviewDataUrl(null);\n  };\n\n  const handleFetchRemoteFile = async () => {\n    let modelSource: string | undefined = defaultScad;\n    const indexScadFilePath = getIndexScadFilePath();\n    if (currentModelId !== 'new') {\n      modelSource = await SupabaseService.fetchModelSource(currentModelId);\n      if (modelSource === undefined) throw new Error('Failed to fetch model source');\n    }\n    writeFileSafe(indexScadFilePath, modelSource, true);\n    setEditorReloadKey((k) => k + 1);\n  };\n\n  const fetchModelDetails = useCallback(async () => {\n    console.debug('Fetching model details...', viewModelId);\n    if (viewModelId) {\n      const model = await SupabaseService.fetchModelById(viewModelId);\n      setViewModel(model);\n      setEditModel({\n        id: model?.id,\n        title: model?.title ?? 'Untitled Model',\n        description: model?.description ?? '',\n      });\n      return model;\n    } else {\n      setEditModel({\n        id: undefined,\n        title: 'Untitled Model',\n        description: '',\n      });\n      return undefined;\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!hasInitialized.current) {\n      hasInitialized.current = true;\n      (async () => {\n        const viewModel = await fetchModelDetails();\n        await createEditorZenFS(true);\n        await initFiles(viewModel);\n        await Promise.all([customizer(), preview()]);\n        setIsLoading(false);\n      })();\n    }\n    return () => {\n      if (glbFileUrl) URL.revokeObjectURL(glbFileUrl);\n      if (offFileUrl) URL.revokeObjectURL(offFileUrl);\n      if (stlFileUrl) URL.revokeObjectURL(stlFileUrl);\n    };\n  }, [customizer, fetchModelDetails, initFiles, preview]);\n\n  function downloadUrl(url: string, filename: string) {\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  }\n\n  const downloadStl = useCallback(async () => {\n    try {\n      if (stlFileUrl) URL.revokeObjectURL(stlFileUrl);\n      if (!offFileUrl) throw new Error('No OFF file to convert');\n      const offText = await (await fetch(offFileUrl)).text();\n      const offData = parseOff(offText);\n      const stlBlob = await exportStl(offData);\n      const filename = getTitle() + '.stl';\n      const url = URL.createObjectURL(stlBlob);\n      downloadUrl(url, filename);\n      setTimeout(() => URL.revokeObjectURL(url), 1000);\n      setStlFileUrl(undefined); // No longer needed\n    } catch (e) {\n      console.error(e);\n    }\n  }, [offFileUrl]);\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'F4') {\n        event.preventDefault();\n        customizer();\n      } else if (event.key === 'F5') {\n        event.preventDefault();\n        preview();\n      } else if (event.key === 'F6') {\n        event.preventDefault();\n        render();\n      } else if (event.key === 'F7') {\n        event.preventDefault();\n        downloadStl();\n      } else if (event.key === 'F8') {\n        event.preventDefault();\n        handlePublish();\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [offFileUrl]);\n\n  function getTitle() {\n    return viewModel?.title ?? editModel?.title ?? 'Untitled Model';\n  }\n\n  async function handleOnSave() {\n    setIsOutdated(true);\n    await Promise.all([customizer(), userPrefs.autoPreview ? preview() : Promise.resolve()]);\n  }\n\n  const showEditModelDetails =\n    !isReadonly\n    && (viewModel === undefined || viewModel?.owner_id === user?.id)\n    && editModel !== undefined;\n\n  return (\n    <>\n      <div\n        className={styles.editorPageContainer}\n        style={{ flexDirection: largePreview ? 'column' : undefined }}\n      >\n        <div className={styles.sidebar}>\n          <div className={styles.modelViewerContainer}>\n            <div className={styles.modelViewer}>\n              {glbFileUrl ?\n                <ModelViewer\n                  ref={viewerRef}\n                  lightMode={isLightMode}\n                  style={{ width: '100%', height: '100%' }}\n                  modelUri={glbFileUrl}\n                />\n              : <CenteredSpinner text=\"Waiting for model to render\" />}\n            </div>\n            <Menubar\n              model={[\n                largePreview ?\n                  {\n                    label: 'Smaller Preview',\n                    className: 'editor-page-hide-on-small',\n                    icon: 'pi pi-window-minimize',\n                    command: () => setLargePreview(false),\n                  }\n                : {\n                    label: 'Larger Preview',\n                    className: 'editor-page-hide-on-small',\n                    icon: 'pi pi-window-maximize',\n                    command: () => setLargePreview(true),\n                  },\n                isLightMode ?\n                  { label: 'Dark Mode', icon: 'pi pi-moon', command: () => setIsLightMode(false) }\n                : { label: 'Light Mode', icon: 'pi pi-sun', command: () => setIsLightMode(true) },\n                {\n                  label: 'Download',\n                  icon: 'pi pi-download',\n                  items: [\n                    {\n                      label: 'GLB',\n                      icon: 'pi pi-download',\n                      disabled: !glbFileUrl,\n                      command: () => {\n                        if (glbFileUrl) downloadUrl(glbFileUrl, getTitle() + '.glb');\n                      },\n                    },\n                    {\n                      label: 'OFF',\n                      icon: 'pi pi-download',\n                      disabled: !offFileUrl,\n                      command: () => {\n                        if (offFileUrl) downloadUrl(offFileUrl, getTitle() + '.off');\n                      },\n                    },\n                    {\n                      label: 'STL (F7)',\n                      icon: 'pi pi-download',\n                      disabled: !offFileUrl,\n                      command: downloadStl,\n                    },\n                  ],\n                },\n              ]}\n            />\n          </div>\n\n          {showEditModelDetails ?\n            <Panel>\n              <div\n                style={{\n                  display: 'grid',\n                  gridTemplateColumns: 'max-content 1fr',\n                  gap: 12,\n                  alignItems: 'center',\n                  marginBottom: 8,\n                }}\n              >\n                <label htmlFor=\"edit-title\" style={{ whiteSpace: 'nowrap' }}>\n                  <b>Title</b>\n                </label>\n                <InputText\n                  id=\"edit-title\"\n                  maxLength={100}\n                  value={editModel.title}\n                  onChange={(e) =>\n                    setEditModel((m) => ({ ...m, title: e.target.value }) as EditModel)\n                  }\n                  placeholder=\"Enter model title\"\n                />\n                <label htmlFor=\"edit-description\" style={{ whiteSpace: 'nowrap' }}>\n                  <b>Description</b>\n                </label>\n                <InputTextarea\n                  id=\"edit-description\"\n                  maxLength={2000}\n                  value={editModel.description}\n                  onChange={(e) =>\n                    setEditModel((m) => ({ ...m, description: e.target.value }) as EditModel)\n                  }\n                  placeholder=\"Enter model description\"\n                  style={{ resize: 'vertical' }}\n                />\n              </div>\n            </Panel>\n          : viewModel !== undefined ?\n            <Panel toggleable header={viewModel.title}>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: sanitizeAndLinkify(viewModel.description) }}\n                ></div>\n                <span>\n                  by <a href={'#/user/' + viewModel.username}>{viewModel.username}</a> on{' '}\n                  {viewModel.created_at}\n                </span>\n                <span>\n                  <ModelStats model={viewModel} />\n                </span>\n              </div>\n            </Panel>\n          : <></>}\n\n          {viewModel ?\n            <CommentsPanel\n              modelId={viewModel?.id}\n              collapsed={!userPrefs.commentsPanelExpanded}\n              onToggle={(e) => setUserPrefs({ commentsPanelExpanded: !e.value })}\n            />\n          : ''}\n        </div>\n        <div className={styles.main}>\n          <div className={styles.mainSub}>\n            <Panel toggleable header=\"Customizer\">\n              <CustomizerPanel\n                parameterSet={parameterSet}\n                parameterValues={parameterValues}\n                onChange={(name, value) => {\n                  setParameterValues((prev) => ({ ...prev, [name]: value }));\n                  if (userPrefs.autoPreview) debouncedPreview();\n                }}\n              />\n            </Panel>\n            <Panel\n              className={styles.panelLogs}\n              toggleable\n              header=\"Logs & Errors\"\n              collapsed={!userPrefs.logsPanelExpanded}\n              onToggle={(e) => setUserPrefs({ logsPanelExpanded: !e.value })}\n            >\n              {error && (\n                <pre\n                  style={{\n                    color: 'var(--color-danger)',\n                  }}\n                >\n                  {error}\n                </pre>\n              )}\n              {logs && <pre>{logs}</pre>}\n              {!error && !logs && <pre>No logs or errors yet.</pre>}\n            </Panel>\n          </div>\n          <Panel className={styles.panelEditor}>\n            <Menubar\n              style={{ width: '100%' }}\n              model={[\n                {\n                  label: 'Preview (F5)',\n                  icon: 'pi pi-play',\n                  command: preview,\n                  disabled: runningTaskName !== undefined,\n                },\n                {\n                  label: 'Render (F6)',\n                  icon: 'pi pi-play',\n                  command: render,\n                  disabled: runningTaskName !== undefined,\n                },\n                {\n                  label: 'Publish (F8)',\n                  icon: 'pi pi-upload',\n                  command: handlePublish,\n                  disabled: runningTaskName !== undefined || user?.id === undefined,\n                  visible: viewModel === undefined || viewModel?.owner_id === user?.id,\n                },\n                {\n                  label: 'Overwrite with remote source',\n                  icon: 'pi pi-download color-danger',\n                  command: handleFetchRemoteFile,\n                  disabled: runningTaskName !== undefined,\n                  visible: outdated,\n                },\n                {\n                  icon: userPrefs.autoPreview ? 'pi pi-check-square' : 'pi pi-stop',\n                  label: 'Auto-Preview',\n                  disabled: false,\n                  command: () => {\n                    setUserPrefs({ autoPreview: !userPrefs.autoPreview });\n                  },\n                },\n              ]}\n              end={\n                <div style={{ display: 'flex', gap: 8 }}>\n                  {runningTaskName !== undefined && (\n                    <>\n                      <div style={{ flex: 1, alignContent: 'center' }}>{runningTaskName}</div>\n                      <ProgressSpinner style={{ width: 40, height: 40 }} strokeWidth=\"8\" />\n                    </>\n                  )}\n                </div>\n              }\n            />\n            <ZenMonacoPrime\n              isInitializing={isLoading}\n              path={getIndexScadFilePath()}\n              homeFileProp={getIndexScadFilePath()}\n              hideTopBar={true}\n              markers={markers}\n              onSave={(s) => handleOnSave()}\n              reloadKey={editorReloadKey}\n            />\n          </Panel>\n        </div>\n      </div>\n      <Dialog\n        header=\"Publish Model\"\n        visible={publishDialogVisible}\n        onHide={handleCancelPublish}\n        footer={\n          <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 8 }}>\n            <Button\n              label=\"Cancel\"\n              icon=\"pi pi-times\"\n              onClick={handleCancelPublish}\n              className=\"p-button-text\"\n            />\n            <Button label=\"Publish\" icon=\"pi pi-upload\" onClick={handleConfirmPublish} autoFocus />\n          </div>\n        }\n        closable={false}\n        modal\n      >\n        {editModel !== undefined && (\n          <ModelCard\n            model={{\n              id: '',\n              title: editModel.title,\n              preview_url: publishPreviewDataUrl ?? '',\n              owner_id: user?.id || '',\n              username:\n                user?.user_metadata?.user_name\n                || user?.user_metadata?.name\n                || user?.email\n                || 'Unknown User',\n              description: editModel.description,\n              created_at: formatDate(new Date()),\n              updated_at: formatDate(new Date()),\n              likes: 0,\n              comments: 0,\n            }}\n          />\n        )}\n      </Dialog>\n      <Toast ref={toastRef} position=\"top-right\" />\n    </>\n  );\n}\n"],"file":"EditorPage-DhE0Qajb.js"}